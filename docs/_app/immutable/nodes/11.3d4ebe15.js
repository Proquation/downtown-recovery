import{S as Wl,i as Xl,s as Kl,k as b,q as D,a as A,l as y,m,r as O,h as _,c as G,n as i,b as W,C as s,K as _l,L as Yt,D as pl,M as ge,E as Ke,o as Ql,u as Q,y as _t,N as me,e as ye,z as pt,O as be,P as Yl,A as vt,Q as Jl,g as dt,d as gt,B as mt,p as bt,R as Zl}from"../chunks/index.a4677e45.js";import{H as $l}from"../chunks/global.956237c1.js";import{S as xl,a as ea}from"../chunks/SelectRegions.37fbf11a.js";import{s as Jt,c as yt,a as ta,b as la,r as aa}from"../chunks/csv.a309fd1d.js";const ra=!0,Ea=Object.freeze(Object.defineProperty({__proto__:null,prerender:ra},Symbol.toStringTag,{value:"Module"}));function vl(e,t,l){const a=e.slice();return a[13]=t[l],a}function dl(e,t,l){const a=e.slice();return a[13]=t[l],a}function gl(e,t,l){const a=e.slice();return a[13]=t[l],a}function ml(e,t,l){const a=e.slice();return a[13]=t[l],a}function bl(e,t,l){const a=e.slice();return a[13]=t[l],a}function yl(e,t,l){const a=e.slice();return a[13]=t[l],a}function wl(e,t,l){const a=e.slice();return a[13]=t[l],a}function El(e,t,l){const a=e.slice();return a[13]=t[l],a}function kl(e){let t,l=e[13].text+"",a,r;return{c(){t=b("option"),a=D(l),this.h()},l(n){t=y(n,"OPTION",{class:!0});var h=m(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(n,h){W(n,t,h),s(t,a)},p(n,h){h&8&&l!==(l=n[13].text+"")&&Q(a,l),h&8&&r!==(r=n[13].value)&&(t.__value=r,t.value=t.__value)},d(n){n&&_(t)}}}function Dl(e){let t,l=e[13].text+"",a,r;return{c(){t=b("option"),a=D(l),this.h()},l(n){t=y(n,"OPTION",{class:!0});var h=m(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(n,h){W(n,t,h),s(t,a)},p(n,h){h&16&&l!==(l=n[13].text+"")&&Q(a,l),h&16&&r!==(r=n[13].value)&&(t.__value=r,t.value=t.__value)},d(n){n&&_(t)}}}function Ol(e){let t,l=e[13].text+"",a,r;return{c(){t=b("option"),a=D(l),this.h()},l(n){t=y(n,"OPTION",{class:!0});var h=m(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(n,h){W(n,t,h),s(t,a)},p(n,h){h&64&&l!==(l=n[13].text+"")&&Q(a,l),h&64&&r!==(r=n[13].value)&&(t.__value=r,t.value=t.__value)},d(n){n&&_(t)}}}function Pl(e){let t,l=e[13].text+"",a,r;return{c(){t=b("option"),a=D(l),this.h()},l(n){t=y(n,"OPTION",{class:!0});var h=m(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(n,h){W(n,t,h),s(t,a)},p(n,h){h&32&&l!==(l=n[13].text+"")&&Q(a,l),h&32&&r!==(r=n[13].value)&&(t.__value=r,t.value=t.__value)},d(n){n&&_(t)}}}function ql(e){let t,l=e[13].text+"",a,r;return{c(){t=b("option"),a=D(l),this.h()},l(n){t=y(n,"OPTION",{class:!0});var h=m(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(n,h){W(n,t,h),s(t,a)},p(n,h){h&2&&l!==(l=n[13].text+"")&&Q(a,l),h&2&&r!==(r=n[13].value)&&(t.__value=r,t.value=t.__value)},d(n){n&&_(t)}}}function Vl(e){let t,l=e[13].text+"",a,r;return{c(){t=b("option"),a=D(l),this.h()},l(n){t=y(n,"OPTION",{class:!0});var h=m(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(n,h){W(n,t,h),s(t,a)},p(n,h){h&256&&l!==(l=n[13].text+"")&&Q(a,l),h&256&&r!==(r=n[13].value)&&(t.__value=r,t.value=t.__value)},d(n){n&&_(t)}}}function Cl(e){let t,l=e[13].text+"",a,r;return{c(){t=b("option"),a=D(l),this.h()},l(n){t=y(n,"OPTION",{class:!0});var h=m(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(n,h){W(n,t,h),s(t,a)},p(n,h){h&4&&l!==(l=n[13].text+"")&&Q(a,l),h&4&&r!==(r=n[13].value)&&(t.__value=r,t.value=t.__value)},d(n){n&&_(t)}}}function Fl(e){let t,l=e[13].text+"",a,r;return{c(){t=b("option"),a=D(l),this.h()},l(n){t=y(n,"OPTION",{class:!0});var h=m(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(n,h){W(n,t,h),s(t,a)},p(n,h){h&128&&l!==(l=n[13].text+"")&&Q(a,l),h&128&&r!==(r=n[13].value)&&(t.__value=r,t.value=t.__value)},d(n){n&&_(t)}}}function oa(e){let t,l,a,r,n,h,P,w,g,k,d,p,V,Z,N=e[3],E=[];for(let u=0;u<N.length;u+=1)E[u]=kl(El(e,N,u));let U=e[4],j=[];for(let u=0;u<U.length;u+=1)j[u]=Dl(wl(e,U,u));let q=e[6],C=[];for(let u=0;u<q.length;u+=1)C[u]=Ol(yl(e,q,u));let le=e[5],S=[];for(let u=0;u<le.length;u+=1)S[u]=Pl(bl(e,le,u));let K=e[1],X=[];for(let u=0;u<K.length;u+=1)X[u]=ql(ml(e,K,u));let ie=e[8],L=[];for(let u=0;u<ie.length;u+=1)L[u]=Vl(gl(e,ie,u));let ue=e[2],M=[];for(let u=0;u<ue.length;u+=1)M[u]=Cl(dl(e,ue,u));let Y=e[7],z=[];for(let u=0;u<Y.length;u+=1)z[u]=Fl(vl(e,Y,u));return{c(){t=b("p"),l=D("Select Variable:"),a=A(),r=b("select"),n=b("optgroup");for(let u=0;u<E.length;u+=1)E[u].c();h=b("optgroup");for(let u=0;u<j.length;u+=1)j[u].c();P=b("optgroup");for(let u=0;u<C.length;u+=1)C[u].c();w=b("optgroup");for(let u=0;u<S.length;u+=1)S[u].c();g=b("optgroup");for(let u=0;u<X.length;u+=1)X[u].c();k=b("optgroup");for(let u=0;u<L.length;u+=1)L[u].c();d=b("optgroup");for(let u=0;u<M.length;u+=1)M[u].c();p=b("optgroup");for(let u=0;u<z.length;u+=1)z[u].c();this.h()},l(u){t=y(u,"P",{});var T=m(t);l=O(T,"Select Variable:"),T.forEach(_),a=G(u),r=y(u,"SELECT",{class:!0});var o=m(r);n=y(o,"OPTGROUP",{label:!0});var I=m(n);for(let F=0;F<E.length;F+=1)E[F].l(I);I.forEach(_),h=y(o,"OPTGROUP",{label:!0});var ke=m(h);for(let F=0;F<j.length;F+=1)j[F].l(ke);ke.forEach(_),P=y(o,"OPTGROUP",{label:!0});var fe=m(P);for(let F=0;F<C.length;F+=1)C[F].l(fe);fe.forEach(_),w=y(o,"OPTGROUP",{label:!0});var De=m(w);for(let F=0;F<S.length;F+=1)S[F].l(De);De.forEach(_),g=y(o,"OPTGROUP",{label:!0});var B=m(g);for(let F=0;F<X.length;F+=1)X[F].l(B);B.forEach(_),k=y(o,"OPTGROUP",{label:!0});var ae=m(k);for(let F=0;F<L.length;F+=1)L[F].l(ae);ae.forEach(_),d=y(o,"OPTGROUP",{label:!0});var _e=m(d);for(let F=0;F<M.length;F+=1)M[F].l(_e);_e.forEach(_),p=y(o,"OPTGROUP",{label:!0});var pe=m(p);for(let F=0;F<z.length;F+=1)z[F].l(pe);pe.forEach(_),o.forEach(_),this.h()},h(){i(n,"label","Demographics"),i(h,"label","Employment"),i(P,"label","Income"),i(w,"label","Housing"),i(g,"label","Commuting"),i(k,"label","Weather"),i(d,"label","COVID-19 Closures"),i(p,"label","Political Leaning"),i(r,"class","svelte-19nzrqx")},m(u,T){W(u,t,T),s(t,l),W(u,a,T),W(u,r,T),s(r,n);for(let o=0;o<E.length;o+=1)E[o]&&E[o].m(n,null);s(r,h);for(let o=0;o<j.length;o+=1)j[o]&&j[o].m(h,null);s(r,P);for(let o=0;o<C.length;o+=1)C[o]&&C[o].m(P,null);s(r,w);for(let o=0;o<S.length;o+=1)S[o]&&S[o].m(w,null);s(r,g);for(let o=0;o<X.length;o+=1)X[o]&&X[o].m(g,null);s(r,k);for(let o=0;o<L.length;o+=1)L[o]&&L[o].m(k,null);s(r,d);for(let o=0;o<M.length;o+=1)M[o]&&M[o].m(d,null);s(r,p);for(let o=0;o<z.length;o+=1)z[o]&&z[o].m(p,null);_l(r,e[0]),V||(Z=Yt(r,"change",e[9]),V=!0)},p(u,[T]){if(T&8){N=u[3];let o;for(o=0;o<N.length;o+=1){const I=El(u,N,o);E[o]?E[o].p(I,T):(E[o]=kl(I),E[o].c(),E[o].m(n,null))}for(;o<E.length;o+=1)E[o].d(1);E.length=N.length}if(T&16){U=u[4];let o;for(o=0;o<U.length;o+=1){const I=wl(u,U,o);j[o]?j[o].p(I,T):(j[o]=Dl(I),j[o].c(),j[o].m(h,null))}for(;o<j.length;o+=1)j[o].d(1);j.length=U.length}if(T&64){q=u[6];let o;for(o=0;o<q.length;o+=1){const I=yl(u,q,o);C[o]?C[o].p(I,T):(C[o]=Ol(I),C[o].c(),C[o].m(P,null))}for(;o<C.length;o+=1)C[o].d(1);C.length=q.length}if(T&32){le=u[5];let o;for(o=0;o<le.length;o+=1){const I=bl(u,le,o);S[o]?S[o].p(I,T):(S[o]=Pl(I),S[o].c(),S[o].m(w,null))}for(;o<S.length;o+=1)S[o].d(1);S.length=le.length}if(T&2){K=u[1];let o;for(o=0;o<K.length;o+=1){const I=ml(u,K,o);X[o]?X[o].p(I,T):(X[o]=ql(I),X[o].c(),X[o].m(g,null))}for(;o<X.length;o+=1)X[o].d(1);X.length=K.length}if(T&256){ie=u[8];let o;for(o=0;o<ie.length;o+=1){const I=gl(u,ie,o);L[o]?L[o].p(I,T):(L[o]=Vl(I),L[o].c(),L[o].m(k,null))}for(;o<L.length;o+=1)L[o].d(1);L.length=ie.length}if(T&4){ue=u[2];let o;for(o=0;o<ue.length;o+=1){const I=dl(u,ue,o);M[o]?M[o].p(I,T):(M[o]=Cl(I),M[o].c(),M[o].m(d,null))}for(;o<M.length;o+=1)M[o].d(1);M.length=ue.length}if(T&128){Y=u[7];let o;for(o=0;o<Y.length;o+=1){const I=vl(u,Y,o);z[o]?z[o].p(I,T):(z[o]=Fl(I),z[o].c(),z[o].m(p,null))}for(;o<z.length;o+=1)z[o].d(1);z.length=Y.length}T&511&&_l(r,u[0])},i:pl,o:pl,d(u){u&&_(t),u&&_(a),u&&_(r),ge(E,u),ge(j,u),ge(C,u),ge(S,u),ge(X,u),ge(L,u),ge(M,u),ge(z,u),V=!1,Z()}}}function na(e,t,l){let a;Ke(e,Jt,E=>l(11,a=E));let r,n=[],h=[],P=[],w=[],g=[],k=[],d=[],p=[],V=[];async function Z(){try{const U=await(await fetch("../variables_data_dictionary.csv")).text();l(10,n=yt(U))}catch(E){console.error("Error loading CSV data:",E)}}Ql(()=>{Z(),l(0,r=a)});function N(E){const U=E.target.value;Jt.set(U)}return e.$$.update=()=>{e.$$.dirty&1024&&l(1,h=n.filter(E=>E.group==="Commuting")),e.$$.dirty&1024&&l(2,P=n.filter(E=>E.group==="COVID-19 Closures")),e.$$.dirty&1024&&l(3,w=n.filter(E=>E.group==="Demographics")),e.$$.dirty&1024&&l(4,g=n.filter(E=>E.group==="Employment")),e.$$.dirty&1024&&l(5,k=n.filter(E=>E.group==="Housing")),e.$$.dirty&1024&&l(6,d=n.filter(E=>E.group==="Income")),e.$$.dirty&1024&&l(7,p=n.filter(E=>E.group==="Political Leaning")),e.$$.dirty&1024&&l(8,V=n.filter(E=>E.group==="Weather"))},[r,h,P,w,g,k,d,p,V,N,n]}class ia extends Wl{constructor(t){super(),Xl(this,t,na,oa,Kl,{})}}function sa(e){var t,l,a=e.length;if(a===1)t=0,l=e[0][1];else{for(var r=0,n=0,h=0,P=0,w,g,k,d=0;d<a;d++)w=e[d],g=w[0],k=w[1],r+=g,n+=k,h+=g*g,P+=g*k;t=(a*P-r*n)/(a*h-r*r),l=n/a-t*r/a}return{m:t,b:l}}function ua(e){if(e.length===0)return 0;var t=e[0],l=0,a;if(typeof t!="number")return NaN;for(var r=1;r<e.length;r++){if(typeof e[r]!="number")return NaN;a=t+e[r],Math.abs(t)>=Math.abs(e[r])?l+=t-a+e[r]:l+=e[r]-a+t,t=a}return t+l}function Zt(e){if(e.length===0)throw new Error("mean requires at least one data point");return ua(e)/e.length}function ha(e,t){var l=Zt(e),a=0,r,n;if(t===2)for(n=0;n<e.length;n++)r=e[n]-l,a+=r*r;else for(n=0;n<e.length;n++)a+=Math.pow(e[n]-l,t);return a}function ca(e,t){if(e.length!==t.length)throw new Error("sampleCovariance requires samples with equal lengths");if(e.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var l=Zt(e),a=Zt(t),r=0,n=0;n<e.length;n++)r+=(e[n]-l)*(t[n]-a);var h=e.length-1;return r/h}function fa(e){if(e.length<2)throw new Error("sampleVariance requires at least two data points");var t=ha(e,2),l=e.length-1;return t/l}function Tl(e){var t=fa(e);return Math.sqrt(t)}function _a(e,t){var l=ca(e,t),a=Tl(e),r=Tl(t);return l/a/r}function Il(e,t,l){const a=e.slice();return a[43]=t[l],a[45]=l,a}function Sl(e,t,l){const a=e.slice();return a[43]=t[l],a[45]=l,a}function Ml(e,t,l){const a=e.slice();return a[45]=t[l],a}function Rl(e,t,l){const a=e.slice();return a[49]=t[l],a[45]=l,a}function jl(e){let t,l,a,r,n=(100*e[49]).toFixed(0)+"",h,P,w,g,k,d;return{c(){t=me("line"),r=me("text"),h=D(n),P=D("%"),g=me("line"),this.h()},l(p){t=be(p,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),m(t).forEach(_),r=be(p,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var V=m(r);h=O(V,n),P=O(V,"%"),V.forEach(_),g=be(p,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),m(g).forEach(_),this.h()},h(){i(t,"class","grid svelte-h15qja"),i(t,"x1","40"),i(t,"y1",l=30+e[45]*e[18]),i(t,"x2",e[1]),i(t,"y2",a=30+e[45]*e[18]),i(r,"class","axis-label svelte-h15qja"),i(r,"x","35"),i(r,"y",w=35+e[45]*e[18]),i(r,"text-anchor","end"),i(g,"class","grid-white svelte-h15qja"),i(g,"x1","37"),i(g,"y1",k=30+e[45]*e[18]),i(g,"x2","45"),i(g,"y2",d=30+e[45]*e[18])},m(p,V){W(p,t,V),W(p,r,V),s(r,h),s(r,P),W(p,g,V)},p(p,V){V[0]&262144&&l!==(l=30+p[45]*p[18])&&i(t,"y1",l),V[0]&2&&i(t,"x2",p[1]),V[0]&262144&&a!==(a=30+p[45]*p[18])&&i(t,"y2",a),V[0]&8&&n!==(n=(100*p[49]).toFixed(0)+"")&&Q(h,n),V[0]&262144&&w!==(w=35+p[45]*p[18])&&i(r,"y",w),V[0]&262144&&k!==(k=30+p[45]*p[18])&&i(g,"y1",k),V[0]&262144&&d!==(d=30+p[45]*p[18])&&i(g,"y2",d)},d(p){p&&_(t),p&&_(r),p&&_(g)}}}function Nl(e){let t,l,a,r,n=(e[45]*e[15]).toLocaleString()+"",h,P,w,g,k;return{c(){t=me("line"),r=me("text"),h=D(n),w=me("line"),this.h()},l(d){t=be(d,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),m(t).forEach(_),r=be(d,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var p=m(r);h=O(p,n),p.forEach(_),w=be(d,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),m(w).forEach(_),this.h()},h(){i(t,"class","grid svelte-h15qja"),i(t,"x1",l=45+e[45]*e[14]),i(t,"y1","22"),i(t,"x2",a=45+e[45]*e[14]),i(t,"y2",e[2]),i(r,"class","axis-label svelte-h15qja"),i(r,"x",P=47+e[45]*e[14]),i(r,"y","17"),i(r,"text-anchor","end"),i(w,"class","grid-white svelte-h15qja"),i(w,"x1",g=45+e[45]*e[14]),i(w,"y1","22"),i(w,"x2",k=45+e[45]*e[14]),i(w,"y2","31")},m(d,p){W(d,t,p),W(d,r,p),s(r,h),W(d,w,p)},p(d,p){p[0]&16384&&l!==(l=45+d[45]*d[14])&&i(t,"x1",l),p[0]&16384&&a!==(a=45+d[45]*d[14])&&i(t,"x2",a),p[0]&4&&i(t,"y2",d[2]),p[0]&32768&&n!==(n=(d[45]*d[15]).toLocaleString()+"")&&Q(h,n),p[0]&16384&&P!==(P=47+d[45]*d[14])&&i(r,"x",P),p[0]&16384&&g!==(g=45+d[45]*d[14])&&i(w,"x1",g),p[0]&16384&&k!==(k=45+d[45]*d[14])&&i(w,"x2",k)},d(d){d&&_(t),d&&_(r),d&&_(w)}}}function Ll(e){let t,l,a;return{c(){t=me("circle"),this.h()},l(r){t=be(r,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),m(t).forEach(_),this.h()},h(){i(t,"class","point-white svelte-h15qja"),i(t,"cx",l=45+Ee([0,e[5]],e[4],parseFloat(e[43][e[6]]))),i(t,"cy",a=30+we(e[17],e[2]-40,e[43].seasonal_average)),i(t,"r","6"),i(t,"fill","black"),i(t,"stroke","white"),i(t,"stroke-width","3")},m(r,n){W(r,t,n)},p(r,n){n[0]&113&&l!==(l=45+Ee([0,r[5]],r[4],parseFloat(r[43][r[6]])))&&i(t,"cx",l),n[0]&131077&&a!==(a=30+we(r[17],r[2]-40,r[43].seasonal_average))&&i(t,"cy",a)},d(r){r&&_(t)}}}function zl(e){let t,l=e[43][e[6]]>=0&&Ll(e);return{c(){l&&l.c(),t=ye()},l(a){l&&l.l(a),t=ye()},m(a,r){l&&l.m(a,r),W(a,t,r)},p(a,r){a[43][a[6]]>=0?l?l.p(a,r):(l=Ll(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(a){l&&l.d(a),a&&_(t)}}}function Al(e){let t,l,a,r,n,h;function P(...g){return e[31](e[43],...g)}function w(...g){return e[32](e[43],...g)}return{c(){t=me("circle"),this.h()},l(g){t=be(g,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),m(t).forEach(_),this.h()},h(){i(t,"class","point svelte-h15qja"),i(t,"cx",l=45+Ee([0,e[5]],e[4],parseFloat(e[43][e[6]]))),i(t,"cy",a=30+we(e[17],e[2]-40,e[43].seasonal_average)),i(t,"r","6"),i(t,"fill",r=e[19].find(P).colour),i(t,"stroke","white"),i(t,"stroke-width","0")},m(g,k){W(g,t,k),n||(h=[Yt(t,"mouseover",w),Yt(t,"mouseout",e[33])],n=!0)},p(g,k){e=g,k[0]&113&&l!==(l=45+Ee([0,e[5]],e[4],parseFloat(e[43][e[6]])))&&i(t,"cx",l),k[0]&131077&&a!==(a=30+we(e[17],e[2]-40,e[43].seasonal_average))&&i(t,"cy",a),k[0]&1&&r!==(r=e[19].find(P).colour)&&i(t,"fill",r)},d(g){g&&_(t),n=!1,Zl(h)}}}function Gl(e){let t,l=e[43][e[6]]>=0&&Al(e);return{c(){l&&l.c(),t=ye()},l(a){l&&l.l(a),t=ye()},m(a,r){l&&l.m(a,r),W(a,t,r)},p(a,r){a[43][a[6]]>=0?l?l.p(a,r):(l=Al(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(a){l&&l.d(a),a&&_(t)}}}function Ul(e){let t,l,a,r,n=e[16].city+"",h,P,w,g,k=Math.round(100*e[16].seasonal_average)+"",d,p,V,Z,N=e[16][e[6]].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"",E,U,j;return{c(){t=me("foreignObject"),l=b("div"),a=b("p"),r=b("u"),h=D(n),P=A(),w=b("br"),g=D(` 
                        Recovery Rate: `),d=D(k),p=D(`%
                        `),V=b("br"),Z=D(`
                        X-Value: `),E=D(N),this.h()},l(q){t=be(q,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var C=m(t);l=y(C,"DIV",{id:!0,style:!0,class:!0});var le=m(l);a=y(le,"P",{id:!0,style:!0,class:!0});var S=m(a);r=y(S,"U",{});var K=m(r);h=O(K,n),K.forEach(_),P=G(S),w=y(S,"BR",{}),g=O(S,` 
                        Recovery Rate: `),d=O(S,k),p=O(S,`%
                        `),V=y(S,"BR",{}),Z=O(S,`
                        X-Value: `),E=O(S,N),S.forEach(_),le.forEach(_),C.forEach(_),this.h()},h(){i(a,"id","tooltip-p"),bt(a,"color",e[19].find(e[34]).text),i(a,"class","svelte-h15qja"),i(l,"id","tooltip"),bt(l,"background-color",e[19].find(e[35]).colour),i(l,"class","svelte-h15qja"),i(t,"x",U=(parseFloat(e[16][e[6]])<e[5]/2?0:-145)+55+Ee([0,e[5]],e[4],parseFloat(e[16][e[6]]))),i(t,"y",j=22+we(e[17],e[2]-40,e[16].seasonal_average)),i(t,"width","125"),i(t,"height","50")},m(q,C){W(q,t,C),s(t,l),s(l,a),s(a,r),s(r,h),s(a,P),s(a,w),s(a,g),s(a,d),s(a,p),s(a,V),s(a,Z),s(a,E)},p(q,C){C[0]&65536&&n!==(n=q[16].city+"")&&Q(h,n),C[0]&65536&&k!==(k=Math.round(100*q[16].seasonal_average)+"")&&Q(d,k),C[0]&65600&&N!==(N=q[16][q[6]].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"")&&Q(E,N),C[0]&65536&&bt(a,"color",q[19].find(q[34]).text),C[0]&65536&&bt(l,"background-color",q[19].find(q[35]).colour),C[0]&65648&&U!==(U=(parseFloat(q[16][q[6]])<q[5]/2?0:-145)+55+Ee([0,q[5]],q[4],parseFloat(q[16][q[6]])))&&i(t,"x",U),C[0]&196612&&j!==(j=22+we(q[17],q[2]-40,q[16].seasonal_average))&&i(t,"y",j)},d(q){q&&_(t)}}}function pa(e){let t,l,a,r,n,h,P,w,g,k,d,p,V,Z,N,E,U,j,q,C,le,S,K,X,ie,L,ue,M,Y,z,u,T,o,I,ke,fe,De,B,ae,_e,pe,F,Oe,v,$,Pe,wt,H,Qe,re,Ye,Je,Ze,$e,xe,et,Et,J,Ve,Se,kt,Dt,tt,Ot,Ce,Me,Pt,qt,lt,Vt,Fe,Re,Ct,Ft,He=e[7].toFixed(3)+"",at,Tt,qe,je,It,St,We=Hl(e[8])+"",rt,Mt,Xe=e[9].toFixed(2)+"",ot,Rt,Te,Ne,jt,Nt,nt,Lt,zt,At,Gt,Ut,Bt,Ht,Wt,Xt,Kt,$t,oe;t=new $l({}),pe=new xl({}),v=new ea({props:{europe:"no"}}),Pe=new ia({});let Le=e[3].reverse(),x=[];for(let c=0;c<Le.length;c+=1)x[c]=jl(Rl(e,Le,c));let Qt=[0,1,2,3,4],ve=[];for(let c=0;c<5;c+=1)ve[c]=Nl(Ml(e,Qt,c));let ze=e[0],ee=[];for(let c=0;c<ze.length;c+=1)ee[c]=zl(Sl(e,ze,c));let Ae=e[0],te=[];for(let c=0;c<Ae.length;c+=1)te[c]=Gl(Il(e,Ae,c));let ne=e[16]!=null&&Ul(e);return{c(){_t(t.$$.fragment),l=A(),a=b("main"),r=b("div"),n=b("h1"),h=D("Downtown Recovery Correlations"),P=A(),w=b("p"),g=D("The following charts show the relationships and correlations between downtown recovery rates (y-axis) and a number of potential explanatory variables (x-axis)."),k=A(),d=b("p"),p=D("The recovery metrics (y-axis) on these charts are based on a sample of mobile phone data."),V=A(),Z=b("p"),N=D("They are computed by counting the number of unique mobile phones in a city's downtown area in the specified time period, and then dividing it by the number of unique visitors during the equivalent time period in 2019. For example, the March 2023 - May 2023 time period is compared to the March 2019 - May 2019 time period."),E=A(),U=b("p"),j=D("A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels. Click "),q=b("a"),C=D("here"),le=D(" to download the y-axis data shown on this chart."),S=A(),K=b("p"),X=D("The data on the x-axis comes from a variety of sources. The full dataset including all variables in the drop-down can be downloaded "),ie=b("a"),L=D("here"),ue=D(". You may also wish to download a "),M=b("a"),Y=D("data dictionary"),z=D(", which includes the names of data sources for each variable."),u=A(),T=b("p"),o=D("For more information, read our "),I=b("a"),ke=D("Methodology"),fe=D(" page."),De=A(),B=b("div"),ae=b("div"),_e=b("div"),_t(pe.$$.fragment),F=A(),Oe=b("div"),_t(v.$$.fragment),$=A(),_t(Pe.$$.fragment),wt=A(),H=me("svg");for(let c=0;c<x.length;c+=1)x[c].c();Qe=ye();for(let c=0;c<5;c+=1)ve[c].c();re=me("line");for(let c=0;c<ee.length;c+=1)ee[c].c();xe=ye();for(let c=0;c<te.length;c+=1)te[c].c();et=ye(),ne&&ne.c(),Et=A(),J=b("div"),Ve=b("p"),Se=b("i"),kt=D("X-Variable Name:"),Dt=A(),tt=D(e[11]),Ot=A(),Ce=b("p"),Me=b("i"),Pt=D("Group:"),qt=A(),lt=D(e[13]),Vt=A(),Fe=b("p"),Re=b("i"),Ct=D("Correlation Coefficient:"),Ft=A(),at=D(He),Tt=A(),qe=b("p"),je=b("i"),It=D("Trend Line Formula"),St=D(": Recovery Rate (%) = "),rt=D(We),Mt=D(" X + "),ot=D(Xe),Rt=A(),Te=b("p"),Ne=b("i"),jt=D("Data Source:"),Nt=A(),nt=D(e[12]),Lt=A(),zt=b("br"),At=A(),Gt=b("br"),Ut=A(),Bt=b("br"),Ht=A(),Wt=b("br"),Xt=A(),Kt=b("br"),this.h()},l(c){pt(t.$$.fragment,c),l=G(c),a=y(c,"MAIN",{class:!0});var R=m(a);r=y(R,"DIV",{class:!0});var f=m(r);n=y(f,"H1",{});var he=m(n);h=O(he,"Downtown Recovery Correlations"),he.forEach(_),P=G(f),w=y(f,"P",{});var xt=m(w);g=O(xt,"The following charts show the relationships and correlations between downtown recovery rates (y-axis) and a number of potential explanatory variables (x-axis)."),xt.forEach(_),k=G(f),d=y(f,"P",{});var el=m(d);p=O(el,"The recovery metrics (y-axis) on these charts are based on a sample of mobile phone data."),el.forEach(_),V=G(f),Z=y(f,"P",{});var tl=m(Z);N=O(tl,"They are computed by counting the number of unique mobile phones in a city's downtown area in the specified time period, and then dividing it by the number of unique visitors during the equivalent time period in 2019. For example, the March 2023 - May 2023 time period is compared to the March 2019 - May 2019 time period."),tl.forEach(_),E=G(f),U=y(f,"P",{});var it=m(U);j=O(it,"A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels. Click "),q=y(it,"A",{href:!0});var ll=m(q);C=O(ll,"here"),ll.forEach(_),le=O(it," to download the y-axis data shown on this chart."),it.forEach(_),S=G(f),K=y(f,"P",{});var Ge=m(K);X=O(Ge,"The data on the x-axis comes from a variety of sources. The full dataset including all variables in the drop-down can be downloaded "),ie=y(Ge,"A",{href:!0});var al=m(ie);L=O(al,"here"),al.forEach(_),ue=O(Ge,". You may also wish to download a "),M=y(Ge,"A",{href:!0});var rl=m(M);Y=O(rl,"data dictionary"),rl.forEach(_),z=O(Ge,", which includes the names of data sources for each variable."),Ge.forEach(_),u=G(f),T=y(f,"P",{});var st=m(T);o=O(st,"For more information, read our "),I=y(st,"A",{href:!0});var ol=m(I);ke=O(ol,"Methodology"),ol.forEach(_),fe=O(st," page."),st.forEach(_),f.forEach(_),De=G(R),B=y(R,"DIV",{id:!0,class:!0});var de=m(B);ae=y(de,"DIV",{id:!0,class:!0});var Ue=m(ae);_e=y(Ue,"DIV",{id:!0,class:!0});var nl=m(_e);pt(pe.$$.fragment,nl),nl.forEach(_),F=G(Ue),Oe=y(Ue,"DIV",{id:!0,class:!0});var il=m(Oe);pt(v.$$.fragment,il),il.forEach(_),$=G(Ue),pt(Pe.$$.fragment,Ue),Ue.forEach(_),wt=G(de),H=be(de,"svg",{height:!0,width:!0,id:!0,class:!0});var Ie=m(H);for(let se=0;se<x.length;se+=1)x[se].l(Ie);Qe=ye();for(let se=0;se<5;se+=1)ve[se].l(Ie);re=be(Ie,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),m(re).forEach(_);for(let se=0;se<ee.length;se+=1)ee[se].l(Ie);xe=ye();for(let se=0;se<te.length;se+=1)te[se].l(Ie);et=ye(),ne&&ne.l(Ie),Ie.forEach(_),Et=G(de),J=y(de,"DIV",{class:!0});var ce=m(J);Ve=y(ce,"P",{});var ut=m(Ve);Se=y(ut,"I",{class:!0});var sl=m(Se);kt=O(sl,"X-Variable Name:"),sl.forEach(_),Dt=G(ut),tt=O(ut,e[11]),ut.forEach(_),Ot=G(ce),Ce=y(ce,"P",{});var ht=m(Ce);Me=y(ht,"I",{class:!0});var ul=m(Me);Pt=O(ul,"Group:"),ul.forEach(_),qt=G(ht),lt=O(ht,e[13]),ht.forEach(_),Vt=G(ce),Fe=y(ce,"P",{});var ct=m(Fe);Re=y(ct,"I",{class:!0});var hl=m(Re);Ct=O(hl,"Correlation Coefficient:"),hl.forEach(_),Ft=G(ct),at=O(ct,He),ct.forEach(_),Tt=G(ce),qe=y(ce,"P",{});var Be=m(qe);je=y(Be,"I",{class:!0});var cl=m(je);It=O(cl,"Trend Line Formula"),cl.forEach(_),St=O(Be,": Recovery Rate (%) = "),rt=O(Be,We),Mt=O(Be," X + "),ot=O(Be,Xe),Be.forEach(_),Rt=G(ce),Te=y(ce,"P",{});var ft=m(Te);Ne=y(ft,"I",{class:!0});var fl=m(Ne);jt=O(fl,"Data Source:"),fl.forEach(_),Nt=G(ft),nt=O(ft,e[12]),ft.forEach(_),Lt=G(ce),zt=y(ce,"BR",{}),At=G(ce),Gt=y(ce,"BR",{}),ce.forEach(_),Ut=G(de),Bt=y(de,"BR",{}),Ht=G(de),Wt=y(de,"BR",{}),Xt=G(de),Kt=y(de,"BR",{}),de.forEach(_),R.forEach(_),this.h()},h(){i(q,"href","/ranking_data.csv"),i(ie,"href","/variables_data.csv"),i(M,"href","/variables_data_dictionary.csv"),i(I,"href","/methodology"),i(r,"class","text"),i(_e,"id","options-season"),i(_e,"class","svelte-h15qja"),i(Oe,"id","options-region"),i(Oe,"class","svelte-h15qja"),i(ae,"id","options"),i(ae,"class","svelte-h15qja"),i(re,"x1",Ye=45+Ee([0,e[5]],e[4],parseFloat(e[10][0][0]))),i(re,"y1",Je=30+we(e[17],e[2]-40,parseFloat(e[10][0][1]))),i(re,"x2",Ze=45+Ee([0,e[5]],e[4],parseFloat(e[10][1][0]))),i(re,"y2",$e=30+we(e[17],e[2]-40,parseFloat(e[10][1][1]))),i(re,"stroke","#D0D1C9"),i(re,"stroke-width","1.5"),i(re,"stroke-dasharray","4 2"),i(H,"height",e[2]),i(H,"width",e[1]),i(H,"id","chart"),i(H,"class","svelte-h15qja"),i(Se,"class","italic"),i(Me,"class","italic"),i(Re,"class","italic"),i(je,"class","italic"),i(Ne,"class","italic"),i(J,"class","text"),i(B,"id","chart-wrapper"),i(B,"class","svelte-h15qja"),Yl(()=>e[36].call(B)),i(a,"class","svelte-h15qja")},m(c,R){vt(t,c,R),W(c,l,R),W(c,a,R),s(a,r),s(r,n),s(n,h),s(r,P),s(r,w),s(w,g),s(r,k),s(r,d),s(d,p),s(r,V),s(r,Z),s(Z,N),s(r,E),s(r,U),s(U,j),s(U,q),s(q,C),s(U,le),s(r,S),s(r,K),s(K,X),s(K,ie),s(ie,L),s(K,ue),s(K,M),s(M,Y),s(K,z),s(r,u),s(r,T),s(T,o),s(T,I),s(I,ke),s(T,fe),s(a,De),s(a,B),s(B,ae),s(ae,_e),vt(pe,_e,null),s(ae,F),s(ae,Oe),vt(v,Oe,null),s(ae,$),vt(Pe,ae,null),s(B,wt),s(B,H);for(let f=0;f<x.length;f+=1)x[f]&&x[f].m(H,null);s(H,Qe);for(let f=0;f<5;f+=1)ve[f]&&ve[f].m(H,null);s(H,re);for(let f=0;f<ee.length;f+=1)ee[f]&&ee[f].m(H,null);s(H,xe);for(let f=0;f<te.length;f+=1)te[f]&&te[f].m(H,null);s(H,et),ne&&ne.m(H,null),s(B,Et),s(B,J),s(J,Ve),s(Ve,Se),s(Se,kt),s(Ve,Dt),s(Ve,tt),s(J,Ot),s(J,Ce),s(Ce,Me),s(Me,Pt),s(Ce,qt),s(Ce,lt),s(J,Vt),s(J,Fe),s(Fe,Re),s(Re,Ct),s(Fe,Ft),s(Fe,at),s(J,Tt),s(J,qe),s(qe,je),s(je,It),s(qe,St),s(qe,rt),s(qe,Mt),s(qe,ot),s(J,Rt),s(J,Te),s(Te,Ne),s(Ne,jt),s(Te,Nt),s(Te,nt),s(J,Lt),s(J,zt),s(J,At),s(J,Gt),s(B,Ut),s(B,Bt),s(B,Ht),s(B,Wt),s(B,Xt),s(B,Kt),$t=Jl(B,e[36].bind(B)),oe=!0},p(c,R){if(R[0]&262154){Le=c[3].reverse();let f;for(f=0;f<Le.length;f+=1){const he=Rl(c,Le,f);x[f]?x[f].p(he,R):(x[f]=jl(he),x[f].c(),x[f].m(H,Qe))}for(;f<x.length;f+=1)x[f].d(1);x.length=Le.length}if(R[0]&49156){Qt=[0,1,2,3,4];let f;for(f=0;f<5;f+=1){const he=Ml(c,Qt,f);ve[f]?ve[f].p(he,R):(ve[f]=Nl(he),ve[f].c(),ve[f].m(H,re))}for(;f<5;f+=1)ve[f].d(1)}if((!oe||R[0]&1072&&Ye!==(Ye=45+Ee([0,c[5]],c[4],parseFloat(c[10][0][0]))))&&i(re,"x1",Ye),(!oe||R[0]&132100&&Je!==(Je=30+we(c[17],c[2]-40,parseFloat(c[10][0][1]))))&&i(re,"y1",Je),(!oe||R[0]&1072&&Ze!==(Ze=45+Ee([0,c[5]],c[4],parseFloat(c[10][1][0]))))&&i(re,"x2",Ze),(!oe||R[0]&132100&&$e!==($e=30+we(c[17],c[2]-40,parseFloat(c[10][1][1]))))&&i(re,"y2",$e),R[0]&131189){ze=c[0];let f;for(f=0;f<ze.length;f+=1){const he=Sl(c,ze,f);ee[f]?ee[f].p(he,R):(ee[f]=zl(he),ee[f].c(),ee[f].m(H,xe))}for(;f<ee.length;f+=1)ee[f].d(1);ee.length=ze.length}if(R[0]&1769589){Ae=c[0];let f;for(f=0;f<Ae.length;f+=1){const he=Il(c,Ae,f);te[f]?te[f].p(he,R):(te[f]=Gl(he),te[f].c(),te[f].m(H,et))}for(;f<te.length;f+=1)te[f].d(1);te.length=Ae.length}c[16]!=null?ne?ne.p(c,R):(ne=Ul(c),ne.c(),ne.m(H,null)):ne&&(ne.d(1),ne=null),(!oe||R[0]&4)&&i(H,"height",c[2]),(!oe||R[0]&2)&&i(H,"width",c[1]),(!oe||R[0]&2048)&&Q(tt,c[11]),(!oe||R[0]&8192)&&Q(lt,c[13]),(!oe||R[0]&128)&&He!==(He=c[7].toFixed(3)+"")&&Q(at,He),(!oe||R[0]&256)&&We!==(We=Hl(c[8])+"")&&Q(rt,We),(!oe||R[0]&512)&&Xe!==(Xe=c[9].toFixed(2)+"")&&Q(ot,Xe),(!oe||R[0]&4096)&&Q(nt,c[12])},i(c){oe||(dt(t.$$.fragment,c),dt(pe.$$.fragment,c),dt(v.$$.fragment,c),dt(Pe.$$.fragment,c),oe=!0)},o(c){gt(t.$$.fragment,c),gt(pe.$$.fragment,c),gt(v.$$.fragment,c),gt(Pe.$$.fragment,c),oe=!1},d(c){mt(t,c),c&&_(l),c&&_(a),mt(pe),mt(v),mt(Pe),ge(x,c),ge(ve,c),ge(ee,c),ge(te,c),ne&&ne.d(),$t()}}}function Bl(e,t){let l=[];for(let a=0;a<=Math.ceil(e/t);a++)l.push(a*t);return l}function va(e){const t=Math.pow(10,Math.floor(Math.log10(e)));return Math.ceil(e/t)*t}function we(e,t,l){return t-t*l/(e[1]-e[0])}function Ee(e,t,l){return t*l/(e[1]-e[0])}function da(e,t,l,a,r,n){let h,P,w,g,k=e*l+t;k>=a&&k<=n?(h=l,P=k):e>0?(h=(a-t)/e,P=a):(h=(n-t)/e,P=n);let d=e*r+t;return d>=a&&d<=n?(w=r,g=d):e>0?(w=(n-t)/e,g=n):(w=(a-t)/e,g=a),[[h,P],[w,g]]}function Hl(e){return Math.abs(e)<.001?e.toExponential(2):Math.abs(e)>=1e3?e.toLocaleString(void 0,{maximumFractionDigits:0}):e.toFixed(2)}function ga(e,t,l){let a,r,n,h,P,w;Ke(e,Jt,v=>l(6,n=v)),Ke(e,ta,v=>l(29,h=v)),Ke(e,la,v=>l(30,P=v)),Ke(e,aa,v=>l(39,w=v));let g=[],k=[],d=[],p=[],V=[],Z=0,N,E=0,U=0,j=[[0,0],[1,1]],q="",C="",le="";const S=w;async function K(){try{const $=await(await fetch("../ranking_data.csv")).text();l(21,g=yt($))}catch(v){console.error("Error loading CSV data:",v)}}async function X(){try{const $=await(await fetch("../variables_data.csv")).text();l(22,k=yt($))}catch(v){console.error("Error loading CSV data:",v)}}async function ie(){try{const $=await(await fetch("../variables_data_dictionary.csv")).text();l(24,V=yt($))}catch(v){console.error("Error loading CSV data:",v)}}Ql(()=>{K(),X(),ie()});let L,ue=420,M=1,Y=[0,1],z,u=100,T=1,o=1,I=.1,ke=1,fe;const De=function(v){v.clientX,v.clientY},B=(v,$)=>$.name===v.region,ae=(v,$)=>{l(16,fe=v),De($)},_e=()=>{l(16,fe=void 0)},pe=v=>v.name===fe.region,F=v=>v.name===fe.region;function Oe(){L=this.offsetWidth,l(1,L)}return e.$$.update=()=>{e.$$.dirty[0]&1612709888&&l(23,d=g.filter(v=>v.metric==="downtown").filter(v=>v.region!=="Europe").filter(v=>v.Season===`Season_${P}`).filter(v=>h.includes(v.region)).sort((v,$)=>$.seasonal_average-v.seasonal_average)),e.$$.dirty[0]&12582912&&l(0,p=d.map(function(v){var $=k.find(function(Pe){return Pe.city===v.city});return Object.assign({},v,$)})),e.$$.dirty[0]&16777280&&l(12,C=V.length>0?V.filter(v=>v.value===n)[0].source:null),e.$$.dirty[0]&16777280&&l(11,q=V.length>0?V.filter(v=>v.value===n)[0].text:null),e.$$.dirty[0]&16777280&&l(13,le=V.length>0?V.filter(v=>v.value===n)[0].group:null),e.$$.dirty[0]&2&&l(2,ue=L*.666),e.$$.dirty[0]&1&&l(26,M=p.length!==0?p[0].seasonal_average:1),e.$$.dirty[0]&67108864&&l(26,M=M<1?1:M),e.$$.dirty[0]&67108864&&(M<2?l(3,Y=Bl(M,.2)):l(3,Y=Bl(M,.5))),e.$$.dirty[0]&12&&l(18,a=(ue-40)/(Y.length-1)),e.$$.dirty[0]&8&&l(17,r=[Math.min(...Y),Math.max(...Y)]),e.$$.dirty[0]&64&&l(27,z=n),e.$$.dirty[0]&2&&l(4,u=L-45-10),e.$$.dirty[0]&134217729&&l(28,T=Math.max(...p.map(v=>parseFloat(v[z])).filter(v=>!isNaN(v)))),e.$$.dirty[0]&268435456&&l(5,o=va(T)),e.$$.dirty[0]&16&&l(14,I=u/4),e.$$.dirty[0]&32&&l(15,ke=o/4),e.$$.dirty[0]&134217729&&l(7,Z=p.length>0?_a(p.map(v=>parseFloat(v[z])),p.map(v=>parseFloat(v.seasonal_average))):0),e.$$.dirty[0]&134217729&&l(25,N=p.length>0?sa(p.map(v=>[parseFloat(v[z]),parseFloat(v.seasonal_average)])):null),e.$$.dirty[0]&33554472&&l(10,j=N!==null?da(N.m,N.b,0,0,o,Math.max(...Y)):[[0,0],[1,1]]),e.$$.dirty[0]&33554432&&l(8,E=N!==null?100*N.m:0),e.$$.dirty[0]&33554432&&N!==null&&l(9,U=100*N.b)},[p,L,ue,Y,u,o,n,Z,E,U,j,q,C,le,I,ke,fe,r,a,S,De,g,k,d,V,N,M,z,T,h,P,B,ae,_e,pe,F,Oe]}class ka extends Wl{constructor(t){super(),Xl(this,t,ga,pa,Kl,{},null,[-1,-1])}}export{ka as component,Ea as universal};
