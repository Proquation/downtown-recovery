import{S as ga,i as _a,s as ya,y as Zr,a as M,k as p,q as l,L as F,z as Xr,c as T,l as g,m as d,r as i,h as c,M as R,n as t,p as gr,A as ea,b as xe,C as e,g as ta,d as ra,B as aa,Q as _r,E as na,o as wa,K as ba,O as ka,u as sa,D as ot,J as pa}from"../chunks/index.d6d9c1d5.js";import{H as xa}from"../chunks/global.ee1c9fac.js";import{S as Ea}from"../chunks/SelectRegions.3e12cb88.js";import"../chunks/transform.4d2927c0.js";import{c as pr,s as Da,r as Ca}from"../chunks/stores.64de824d.js";import{a as Na,t as Aa,l as Ma}from"../chunks/line.f1bfd7f4.js";import{l as Ta}from"../chunks/linear.6154f0ba.js";import{c as Ia}from"../chunks/csv.3ac754ad.js";function Pa(a,r){let o;if(r===void 0)for(const n of a)n!=null&&(o<n||o===void 0&&n>=n)&&(o=n);else{let n=-1;for(let s of a)(s=r(s,++n,a))!=null&&(o<s||o===void 0&&s>=s)&&(o=s)}return o}function Sa(a,r){let o;if(r===void 0)for(const n of a)n!=null&&(o>n||o===void 0&&n>=n)&&(o=n);else{let n=-1;for(let s of a)(s=r(s,++n,a))!=null&&(o>s||o===void 0&&s>=s)&&(o=s)}return o}function oa(a,r){let o=0,n=0;if(r===void 0)for(let s of a)s!=null&&(s=+s)>=s&&(++o,n+=s);else{let s=-1;for(let u of a)(u=r(u,++s,a))!=null&&(u=+u)>=u&&(++o,n+=u)}if(o)return n/o}const Fa=!0,un=Object.freeze(Object.defineProperty({__proto__:null,prerender:Fa},Symbol.toStringTag,{value:"Module"}));function la(a,r){return Ra(a)||Va(a,r)||za()}function Ra(a){if(Array.isArray(a))return a}function Va(a,r){var o=[],n=!0,s=!1,u=void 0;try{for(var v=a[Symbol.iterator](),y;!(n=(y=v.next()).done)&&(o.push(y.value),!(r&&o.length===r));n=!0);}catch(w){s=!0,u=w}finally{try{!n&&v.return!=null&&v.return()}finally{if(s)throw u}}return o}function za(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Ba(a,r,o,n){a=a.filter(function(W,j){var B=r(W,j),f=o(W,j);return B!=null&&isFinite(B)&&f!=null&&isFinite(f)}),n&&a.sort(function(W,j){return r(W)-r(j)});for(var s=a.length,u=new Float64Array(s),v=new Float64Array(s),y=0,w=0,V,q,G,z=0;z<s;)G=a[z],u[z]=V=+r(G,z,a),v[z]=q=+o(G,z,a),++z,y+=(V-y)/z,w+=(q-w)/z;for(var N=0;N<s;++N)u[N]-=y,v[N]-=w;return[u,v,y,w]}function Ja(a,r,o,n){var s=n-a*a,u=Math.abs(s)<1e-24?0:(o-a*r)/s,v=r-u*a;return[v,u]}function La(a){a.sort(function(o,n){return o-n});var r=a.length/2;return r%1===0?(a[r-1]+a[r])/2:a[Math.floor(r)]}var ia=2,ca=1e-12;function Ha(){var a=function(u){return u[0]},r=function(u){return u[1]},o=.3;function n(s){for(var u=Ba(s,a,r,!0),v=la(u,4),y=v[0],w=v[1],V=v[2],q=v[3],G=y.length,z=Math.max(2,~~(o*G)),N=new Float64Array(G),W=new Float64Array(G),j=new Float64Array(G).fill(1),B=-1;++B<=ia;){for(var f=[0,z-1],b=0;b<G;++b){for(var E=y[b],K=f[0],J=f[1],I=E-y[K]>y[J]-E?K:J,D=0,O=0,ie=0,U=0,te=0,L=1/Math.abs(y[I]-E||1),re=K;re<=J;++re){var ae=y[re],C=w[re],ne=qa(Math.abs(E-ae)*L)*j[re],se=ae*ne;D+=ne,O+=se,ie+=C*ne,U+=C*se,te+=ae*se}var pe=Ja(O/D,ie/D,U/D,te/D),ce=la(pe,2),le=ce[0],P=ce[1];N[b]=le+P*E,W[b]=Math.abs(w[b]-N[b]),Ga(y,b+1,f)}if(B===ia)break;var k=La(W);if(Math.abs(k)<ca)break;for(var A=0,m,x;A<G;++A)m=W[A]/(6*k),j[A]=m>=1?ca:(x=1-m*m)*x}return ja(y,N,V,q)}return n.bandwidth=function(s){return arguments.length?(o=s,n):o},n.x=function(s){return arguments.length?(a=s,n):a},n.y=function(s){return arguments.length?(r=s,n):r},n}function qa(a){return(a=1-a*a*a)*a*a}function Ga(a,r,o){var n=a[r],s=o[0],u=o[1]+1;if(!(u>=a.length))for(;r>s&&a[u]-n<=n-a[s];)o[0]=++s,o[1]=u,++u}function ja(a,r,o,n){for(var s=a.length,u=[],v=0,y=0,w=[],V;v<s;++v)V=a[v]+o,w[0]===V?w[1]+=(r[v]-w[1])/++y:(y=0,w[1]+=n,w=[V,r[v]],u.push(w));return w[1]+=n,u}const Wa=""+new URL("../assets/green-arrow.0afd51fe.svg",import.meta.url).href,Ka=""+new URL("../assets/red-arrow.ede1cb71.svg",import.meta.url).href;function ha(a,r,o){const n=a.slice();return n[14]=r[o].city,n[15]=r[o].regressionLine,n[16]=r[o].startCircle,n[17]=r[o].endCircle,n[18]=r[o].meanLine,n[19]=r[o].perChangeDisplay,n[20]=r[o].percentageChange,n[22]=o,n}function ua(a,r,o){const n=a.slice();return n[23]=r[o],n[22]=o,n}function da(a,r,o){const n=a.slice();return n[23]=r[o],n[22]=o,n}function Ua(a){let r;return{c(){r=F("line"),this.h()},l(o){r=R(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),d(r).forEach(c),this.h()},h(){t(r,"x1",260+a[22]*Y/13),t(r,"y1",5),t(r,"x2",260+a[22]*Y/13),t(r,"y2",40),t(r,"stroke","white"),t(r,"stroke-width","1")},m(o,n){xe(o,r,n)},p:ot,d(o){o&&c(r)}}}function fa(a){let r,o,n,s=a[23]===1&&Ua(a);return{c(){r=F("line"),s&&s.c(),o=F("text"),n=l(a[23]),this.h()},l(u){r=R(u,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),d(r).forEach(c),s&&s.l(u),o=R(u,"text",{x:!0,y:!0,class:!0});var v=d(o);n=i(v,a[23]),v.forEach(c),this.h()},h(){t(r,"x1",260+a[22]*Y/13),t(r,"y1",45),t(r,"x2",260+a[22]*Y/13),t(r,"y2",40),t(r,"stroke","white"),t(r,"stroke-width","1"),t(o,"x",260+a[22]*Y/13+.5*Y/13),t(o,"y","40"),t(o,"class","textMonth svelte-1crkxs9")},m(u,v){xe(u,r,v),s&&s.m(u,v),xe(u,o,v),e(o,n)},p(u,v){u[23]===1&&s.p(u,v)},d(u){u&&c(r),s&&s.d(u),u&&c(o)}}}function Oa(a){let r,o;return{c(){r=p("img"),this.h()},l(n){r=g(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){pa(r.src,o=Ka)||t(r,"src",o),t(r,"alt","Down arrow"),t(r,"class","arrow-icon svelte-1crkxs9")},m(n,s){xe(n,r,s)},p:ot,d(n){n&&c(r)}}}function Ya(a){let r,o;return{c(){r=p("img"),this.h()},l(n){r=g(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){pa(r.src,o=Wa)||t(r,"src",o),t(r,"alt","Up arrow"),t(r,"class","arrow-icon svelte-1crkxs9")},m(n,s){xe(n,r,s)},p:ot,d(n){n&&c(r)}}}function va(a){let r;return{c(){r=F("line"),this.h()},l(o){r=R(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),d(r).forEach(c),this.h()},h(){t(r,"x1",a[23]*Y/13),t(r,"y1",5),t(r,"x2",a[23]*Y/13),t(r,"y2",45),t(r,"stroke","#333333"),t(r,"stroke-width","1")},m(o,n){xe(o,r,n)},p:ot,d(o){o&&c(r)}}}function ma(a){let r,o,n,s,u,v,y=a[22]+1+"",w,V,q=a[14]+"",G,z,N,W,j,B,f,b=a[19]+"",E,K,J,I,D,O,ie,U,te,L,re,ae,C,ne,se,pe;function ce(m,x){if(m[20]>0)return Ya;if(m[20]<0)return Oa}let le=ce(a),P=le&&le(a),k=[1,2,3,4,5,6,7,8,9,10,11,12],A=[];for(let m=0;m<12;m+=1)A[m]=va(ua(a,k,m));return{c(){r=p("div"),o=p("div"),n=F("svg"),s=F("line"),v=F("text"),w=l(y),V=l(". "),G=l(q),z=M(),N=p("div"),P&&P.c(),W=M(),j=p("div"),B=F("svg"),f=F("text"),E=l(b),K=M(),J=p("div"),I=F("svg");for(let m=0;m<12;m+=1)A[m].c();D=F("line"),U=F("path"),L=F("circle"),C=F("circle"),this.h()},l(m){r=g(m,"DIV",{class:!0});var x=d(r);o=g(x,"DIV",{class:!0});var S=d(o);n=R(S,"svg",{width:!0,height:!0,class:!0});var he=d(n);s=R(he,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),d(s).forEach(c),v=R(he,"text",{x:!0,y:!0,class:!0});var Ee=d(v);w=i(Ee,y),V=i(Ee,". "),G=i(Ee,q),Ee.forEach(c),he.forEach(c),S.forEach(c),z=T(x),N=g(x,"DIV",{class:!0});var Be=d(N);P&&P.l(Be),Be.forEach(c),W=T(x),j=g(x,"DIV",{class:!0});var H=d(j);B=R(H,"svg",{width:!0,height:!0,class:!0});var Je=d(B);f=R(Je,"text",{x:!0,y:!0,class:!0});var Xe=d(f);E=i(Xe,b),Xe.forEach(c),Je.forEach(c),H.forEach(c),K=T(x),J=g(x,"DIV",{class:!0,style:!0});var Le=d(J);I=R(Le,"svg",{height:!0,width:!0,class:!0});var ge=d(I);for(let He=0;He<12;He+=1)A[He].l(ge);D=R(ge,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),d(D).forEach(c),U=R(ge,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),d(U).forEach(c),L=R(ge,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),d(L).forEach(c),C=R(ge,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0}),d(C).forEach(c),ge.forEach(c),Le.forEach(c),x.forEach(c),this.h()},h(){t(s,"x1","5"),t(s,"y1","15"),t(s,"x2","5"),t(s,"y2",Ze-15),t(s,"stroke",u=a[3](a[14])),t(s,"stroke-width","5"),t(v,"x","12"),t(v,"y","31"),t(v,"class","textCity svelte-1crkxs9"),t(n,"width","150"),t(n,"height",Ze),t(n,"class","region-bar"),t(o,"class","left svelte-1crkxs9"),t(N,"class","arrow svelte-1crkxs9"),t(f,"x","50"),t(f,"y","45"),t(f,"class","textPercent svelte-1crkxs9"),t(B,"width","50"),t(B,"height",Ze),t(B,"class","region-bar"),t(j,"class","number svelte-1crkxs9"),t(D,"x1","0"),t(D,"y1",O=a[18]),t(D,"x2",Y),t(D,"y2",ie=a[18]),t(D,"stroke","#D0D1C9"),t(D,"stroke-width","1"),t(D,"stroke-dasharray","4"),t(U,"d",te=a[15]),t(U,"stroke","white"),t(U,"stroke-width","2"),t(U,"fill","none"),t(L,"cx",re=a[16].cx),t(L,"cy",ae=a[16].cy),t(L,"r","2"),t(L,"fill","white"),t(C,"cx",ne=a[17].cx),t(C,"cy",se=a[17].cy),t(C,"r","2"),t(C,"fill","white"),t(C,"stroke","white"),t(I,"height",Ze),t(I,"width",Y),t(I,"class","chart svelte-1crkxs9"),t(J,"class","chart-container svelte-1crkxs9"),gr(J,"width",Y),t(r,"class","chart-wrapper svelte-1crkxs9"),ba(()=>a[9].call(r))},m(m,x){xe(m,r,x),e(r,o),e(o,n),e(n,s),e(n,v),e(v,w),e(v,V),e(v,G),e(r,z),e(r,N),P&&P.m(N,null),e(r,W),e(r,j),e(j,B),e(B,f),e(f,E),e(r,K),e(r,J),e(J,I);for(let S=0;S<12;S+=1)A[S]&&A[S].m(I,null);e(I,D),e(I,U),e(I,L),e(I,C),pe=ka(r,a[9].bind(r))},p(m,x){if(x&2&&u!==(u=m[3](m[14]))&&t(s,"stroke",u),x&2&&q!==(q=m[14]+"")&&sa(G,q),le===(le=ce(m))&&P?P.p(m,x):(P&&P.d(1),P=le&&le(m),P&&(P.c(),P.m(N,null))),x&2&&b!==(b=m[19]+"")&&sa(E,b),x&0){k=[1,2,3,4,5,6,7,8,9,10,11,12];let S;for(S=0;S<12;S+=1){const he=ua(m,k,S);A[S]?A[S].p(he,x):(A[S]=va(he),A[S].c(),A[S].m(I,D))}for(;S<12;S+=1)A[S].d(1)}x&2&&O!==(O=m[18])&&t(D,"y1",O),x&2&&ie!==(ie=m[18])&&t(D,"y2",ie),x&2&&te!==(te=m[15])&&t(U,"d",te),x&2&&re!==(re=m[16].cx)&&t(L,"cx",re),x&2&&ae!==(ae=m[16].cy)&&t(L,"cy",ae),x&2&&ne!==(ne=m[17].cx)&&t(C,"cx",ne),x&2&&se!==(se=m[17].cy)&&t(C,"cy",se)},d(m){m&&c(r),P&&P.d(),_r(A,m),pe()}}}function Qa(a){let r,o,n,s,u,v,y,w,V,q,G,z,N,W,j,B,f,b,E,K,J,I,D,O,ie=a[2].day2+"",U,te,L,re,ae,C,ne,se=a[2].monthName+"",pe,ce,le=a[2].monthName+"",P,k,A=a[2].monthName+"",m,x,S,he,Ee,Be,H,Je,Xe=a[2].monthName+"",Le,ge,He=a[2].monthName+"",lt,it,ct,ht,qe,ut,dt,Ge,ft,vt,mt,pt,je,gt,_t,yt,Pe,wt,We,bt,kt,xt,et,Et,Dt,ye,Ct,yr=a[2].monthName+"",Nt,At,wr=a[2].monthName+"",Mt,Tt,It,tt,Pt,St,Se,Ft,ue,Fe,ve,Rt,br=a[2].monthName+"",Vt,zt,kr=a[2].year1+"",Bt,Jt,Lt,Ke,Ue,Z,De,Ht,Ce,qt,oe,xr=a[2].monthNumber+"",Gt,jt,Er=a[2].year2+"",Wt,Kt,Dr=a[2].monthNumber+"",Ut,Ot,Cr=a[2].year1+"",Yt,Ne,Nr=a[2].year1+"",Qt,Ae,Ar=a[2].year2+"",$t,_e,me,Zt,at,X,Xt,er,tr,rr,rt,ar,nr,we,sr,Oe,or,lr,Re,ir,cr,hr,ur,dr,fr,nt;r=new xa({}),Se=new Ea({props:{europe:"no",canada:"yes"}});let vr=[5,6,7,8,9,10,11,12,1,2,3,4,5],de=[];for(let _=0;_<13;_+=1)de[_]=fa(da(a,vr,_));let Ye=a[1],Q=[];for(let _=0;_<Ye.length;_+=1)Q[_]=ma(ha(a,Ye,_));return{c(){Zr(r.$$.fragment),o=M(),n=p("main"),s=p("div"),u=p("h1"),v=l("Recovery Trends"),y=M(),w=p("p"),V=l("By "),q=p("a"),G=l("Karen Chapple"),z=l(", "),N=p("a"),W=l("Julia Greenberg"),j=l(", "),B=p("a"),f=l("Jeff Allen"),b=l(", "),E=p("a"),K=l("Irene Chang"),J=M(),I=p("p"),D=p("i"),O=l("Updated "),U=l(ie),te=M(),L=p("p"),re=l("Data on cell phone activity (a.k.a. footfall) trends for the last year provide a picture of how downtowns are faring since our last rankings update in the summer of 2023. We look here at year-over-year (2024 vs. 2023) trends, updated monthly."),ae=M(),C=p("p"),ne=l("The dotted line provides a baseline of the average level of activity in "),pe=l(se),ce=l(" 2023, allowing for comparison to subsequent months. The solid line represents the average level of activity by week. When the solid line extends above the dotted baseline, downtown activity is greater compared to in "),P=l(le),k=l(" 2023. When it dips below the dotted line, activity is on a downswing. For most cities, there is an increase in month 6 or 7; this is expected since these are the summer months of June and July. The fall months see decreasing activity on average, with almost all downtowns losing activity by November. However, some cities stay above the "),m=l(A),x=l(" baseline, suggesting gradual recovery, while others dip well below it, i.e., stagnating recovery."),S=M(),he=p("h5"),Ee=l("Key Findings"),Be=M(),H=p("p"),Je=l("Comparing "),Le=l(Xe),ge=l(" 2023 to "),lt=l(He),it=l(` 2024:
			`),ct=p("br"),ht=l(`
	
			‣ `),qe=p("span"),ut=l("27"),dt=l(" downtowns are in an upward trajectory, while "),Ge=p("span"),ft=l("37"),vt=l(` are trending downwards. 
			`),mt=p("br"),pt=l(`
			‣ The median rate of change is `),je=p("span"),gt=l("-3.1%"),_t=l("."),yt=M(),Pe=p("p"),wt=l("In general, the downtowns that are seeing the highest rates of activity increase are the downtowns where recovery was lagging in our "),We=p("a"),bt=l("2023 rankings"),kt=l("."),xt=M(),et=p("p"),Et=l("Note: Trends are based on data from Spectus, but use different cell phone data providers from our rankings analysis. The trendlines measure the average level of activity over the course of the year, while the ranking metric shows the percent difference in the average number of stops in 2024 versus the same month in 2023."),Dt=M(),ye=p("h4"),Ct=l("Visits to Downtown ("),Nt=l(yr),At=l(" 1, 2023 to "),Mt=l(wr),Tt=l(" 28, 2024)"),It=M(),tt=p("p"),Pt=l("Select Regions:"),St=M(),Zr(Se.$$.fragment),Ft=M(),ue=p("p"),Fe=F("svg"),ve=F("line"),Rt=M(),Vt=l(br),zt=M(),Bt=l(kr),Jt=l(" average"),Lt=M(),Ke=p("div"),Ue=p("div"),Z=F("svg"),De=F("text"),Ht=l("City"),Ce=F("text"),qt=l("Percent Change in Visits"),oe=F("text"),Gt=l(xr),jt=l("/"),Wt=l(Er),Kt=l(" vs. "),Ut=l(Dr),Ot=l("/"),Yt=l(Cr),Ne=F("text"),Qt=l(Nr),Ae=F("text"),$t=l(Ar),_e=F("line");for(let _=0;_<13;_+=1)de[_].c();me=F("line"),Zt=M();for(let _=0;_<Q.length;_+=1)Q[_].c();at=M(),X=p("div"),Xt=p("br"),er=M(),tr=p("br"),rr=M(),rt=p("h4"),ar=l("More Information"),nr=M(),we=p("p"),sr=l("You can download the data shown on the chart "),Oe=p("a"),or=l("here"),lr=l(". The data on the charts are based on the `normalized_distinct_clean` column, which pertains to the number of unique daily visitors normalized by the total number in the metro area. The trend-line and summary statistics shown are calculated in JavaScript (code is "),Re=p("a"),ir=l("here"),cr=l(")"),hr=M(),ur=p("br"),dr=M(),fr=p("br"),this.h()},l(_){Xr(r.$$.fragment,_),o=T(_),n=g(_,"MAIN",{});var $=d(n);s=g($,"DIV",{class:!0});var h=d(s);u=g(h,"H1",{});var Me=d(u);v=i(Me,"Recovery Trends"),Me.forEach(c),y=T(h),w=g(h,"P",{});var be=d(w);V=i(be,"By "),q=g(be,"A",{href:!0});var Mr=d(q);G=i(Mr,"Karen Chapple"),Mr.forEach(c),z=i(be,", "),N=g(be,"A",{href:!0});var Tr=d(N);W=i(Tr,"Julia Greenberg"),Tr.forEach(c),j=i(be,", "),B=g(be,"A",{href:!0});var Ir=d(B);f=i(Ir,"Jeff Allen"),Ir.forEach(c),b=i(be,", "),E=g(be,"A",{href:!0});var Pr=d(E);K=i(Pr,"Irene Chang"),Pr.forEach(c),be.forEach(c),J=T(h),I=g(h,"P",{});var Sr=d(I);D=g(Sr,"I",{});var mr=d(D);O=i(mr,"Updated "),U=i(mr,ie),mr.forEach(c),Sr.forEach(c),te=T(h),L=g(h,"P",{});var Fr=d(L);re=i(Fr,"Data on cell phone activity (a.k.a. footfall) trends for the last year provide a picture of how downtowns are faring since our last rankings update in the summer of 2023. We look here at year-over-year (2024 vs. 2023) trends, updated monthly."),Fr.forEach(c),ae=T(h),C=g(h,"P",{});var Te=d(C);ne=i(Te,"The dotted line provides a baseline of the average level of activity in "),pe=i(Te,se),ce=i(Te," 2023, allowing for comparison to subsequent months. The solid line represents the average level of activity by week. When the solid line extends above the dotted baseline, downtown activity is greater compared to in "),P=i(Te,le),k=i(Te," 2023. When it dips below the dotted line, activity is on a downswing. For most cities, there is an increase in month 6 or 7; this is expected since these are the summer months of June and July. The fall months see decreasing activity on average, with almost all downtowns losing activity by November. However, some cities stay above the "),m=i(Te,A),x=i(Te," baseline, suggesting gradual recovery, while others dip well below it, i.e., stagnating recovery."),Te.forEach(c),S=T(h),he=g(h,"H5",{});var Rr=d(he);Ee=i(Rr,"Key Findings"),Rr.forEach(c),Be=T(h),H=g(h,"P",{});var ee=d(H);Je=i(ee,"Comparing "),Le=i(ee,Xe),ge=i(ee," 2023 to "),lt=i(ee,He),it=i(ee,` 2024:
			`),ct=g(ee,"BR",{}),ht=i(ee,`
	
			‣ `),qe=g(ee,"SPAN",{class:!0});var Vr=d(qe);ut=i(Vr,"27"),Vr.forEach(c),dt=i(ee," downtowns are in an upward trajectory, while "),Ge=g(ee,"SPAN",{class:!0});var zr=d(Ge);ft=i(zr,"37"),zr.forEach(c),vt=i(ee,` are trending downwards. 
			`),mt=g(ee,"BR",{}),pt=i(ee,`
			‣ The median rate of change is `),je=g(ee,"SPAN",{class:!0});var Br=d(je);gt=i(Br,"-3.1%"),Br.forEach(c),_t=i(ee,"."),ee.forEach(c),yt=T(h),Pe=g(h,"P",{});var st=d(Pe);wt=i(st,"In general, the downtowns that are seeing the highest rates of activity increase are the downtowns where recovery was lagging in our "),We=g(st,"A",{href:!0});var Jr=d(We);bt=i(Jr,"2023 rankings"),Jr.forEach(c),kt=i(st,"."),st.forEach(c),xt=T(h),et=g(h,"P",{});var Lr=d(et);Et=i(Lr,"Note: Trends are based on data from Spectus, but use different cell phone data providers from our rankings analysis. The trendlines measure the average level of activity over the course of the year, while the ranking metric shows the percent difference in the average number of stops in 2024 versus the same month in 2023."),Lr.forEach(c),Dt=T(h),ye=g(h,"H4",{});var Qe=d(ye);Ct=i(Qe,"Visits to Downtown ("),Nt=i(Qe,yr),At=i(Qe," 1, 2023 to "),Mt=i(Qe,wr),Tt=i(Qe," 28, 2024)"),Qe.forEach(c),It=T(h),tt=g(h,"P",{});var Hr=d(tt);Pt=i(Hr,"Select Regions:"),Hr.forEach(c),St=T(h),Xr(Se.$$.fragment,h),Ft=T(h),ue=g(h,"P",{style:!0});var Ve=d(ue);Fe=R(Ve,"svg",{height:!0,width:!0});var qr=d(Fe);ve=R(qr,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),d(ve).forEach(c),qr.forEach(c),Rt=T(Ve),Vt=i(Ve,br),zt=T(Ve),Bt=i(Ve,kr),Jt=i(Ve," average"),Ve.forEach(c),h.forEach(c),Lt=T($),Ke=g($,"DIV",{class:!0});var Gr=d(Ke);Ue=g(Gr,"DIV",{class:!0});var jr=d(Ue);Z=R(jr,"svg",{width:!0,height:!0,class:!0});var ke=d(Z);De=R(ke,"text",{x:!0,y:!0,class:!0});var Wr=d(De);Ht=i(Wr,"City"),Wr.forEach(c),Ce=R(ke,"text",{x:!0,y:!0,class:!0});var Kr=d(Ce);qt=i(Kr,"Percent Change in Visits"),Kr.forEach(c),oe=R(ke,"text",{x:!0,y:!0,class:!0});var Ie=d(oe);Gt=i(Ie,xr),jt=i(Ie,"/"),Wt=i(Ie,Er),Kt=i(Ie," vs. "),Ut=i(Ie,Dr),Ot=i(Ie,"/"),Yt=i(Ie,Cr),Ie.forEach(c),Ne=R(ke,"text",{x:!0,y:!0,class:!0});var Ur=d(Ne);Qt=i(Ur,Nr),Ur.forEach(c),Ae=R(ke,"text",{x:!0,y:!0,class:!0});var Or=d(Ae);$t=i(Or,Ar),Or.forEach(c),_e=R(ke,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),d(_e).forEach(c);for(let ze=0;ze<13;ze+=1)de[ze].l(ke);me=R(ke,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),d(me).forEach(c),ke.forEach(c),jr.forEach(c),Gr.forEach(c),Zt=T($);for(let ze=0;ze<Q.length;ze+=1)Q[ze].l($);at=T($),X=g($,"DIV",{class:!0});var fe=d(X);Xt=g(fe,"BR",{}),er=T(fe),tr=g(fe,"BR",{}),rr=T(fe),rt=g(fe,"H4",{});var Yr=d(rt);ar=i(Yr,"More Information"),Yr.forEach(c),nr=T(fe),we=g(fe,"P",{});var $e=d(we);sr=i($e,"You can download the data shown on the chart "),Oe=g($e,"A",{href:!0});var Qr=d(Oe);or=i(Qr,"here"),Qr.forEach(c),lr=i($e,". The data on the charts are based on the `normalized_distinct_clean` column, which pertains to the number of unique daily visitors normalized by the total number in the metro area. The trend-line and summary statistics shown are calculated in JavaScript (code is "),Re=g($e,"A",{href:!0,target:!0});var $r=d(Re);ir=i($r,"here"),$r.forEach(c),cr=i($e,")"),$e.forEach(c),hr=T(fe),ur=g(fe,"BR",{}),dr=T(fe),fr=g(fe,"BR",{}),fe.forEach(c),$.forEach(c),this.h()},h(){t(q,"href","https://schoolofcities.utoronto.ca/people/karen-chapple/"),t(N,"href","https://www.urbandisplacement.org/team/julia-greenberg/"),t(B,"href","https://schoolofcities.utoronto.ca/people/jeff-allen/"),t(E,"href","https://www.linkedin.com/in/irene-kcc/"),t(qe,"class","bold"),t(Ge,"class","bold"),t(je,"class","bold"),t(We,"href","/charts/rankings"),t(ve,"x1","0"),t(ve,"y1","5"),t(ve,"x2","50"),t(ve,"y2","5"),t(ve,"stroke","white"),t(ve,"stroke-width","1"),t(ve,"stroke-dasharray","4"),t(Fe,"height","10"),t(Fe,"width","50"),gr(ue,"padding-top","10px"),gr(ue,"padding-bottom","10px"),t(s,"class","text svelte-1crkxs9"),t(De,"x","12"),t(De,"y","35"),t(De,"class","textCity svelte-1crkxs9"),t(Ce,"x","235"),t(Ce,"y","15"),t(Ce,"class","textLabel svelte-1crkxs9"),t(oe,"x","235"),t(oe,"y","35"),t(oe,"class","textLabel svelte-1crkxs9"),t(Ne,"x",260+(13-a[2].monthNumber)/2*Y/13),t(Ne,"y","15"),t(Ne,"class","textMonth svelte-1crkxs9"),t(Ae,"x",260+(13-a[2].monthNumber)*Y/13+a[2].monthNumber/2*Y/13),t(Ae,"y","15"),t(Ae,"class","textMonth svelte-1crkxs9"),t(_e,"x1","260"),t(_e,"y1",45),t(_e,"x2",260+Y),t(_e,"y2",45),t(_e,"stroke","white"),t(_e,"stroke-width","1"),t(me,"x1",259+Y),t(me,"y1",45),t(me,"x2",259+Y),t(me,"y2",40),t(me,"stroke","white"),t(me,"stroke-width","1"),t(Z,"width","760"),t(Z,"height",Ze),t(Z,"class","region-bar"),t(Ue,"class","left svelte-1crkxs9"),t(Ke,"class","chart-wrapper svelte-1crkxs9"),t(Oe,"href","/trends.csv"),t(Re,"href","https://github.com/schoolofcities/downtown-recovery/blob/main/src/routes/charts/trends/%2Bpage.svelte"),t(Re,"target","_blank"),t(X,"class","text svelte-1crkxs9")},m(_,$){ea(r,_,$),xe(_,o,$),xe(_,n,$),e(n,s),e(s,u),e(u,v),e(s,y),e(s,w),e(w,V),e(w,q),e(q,G),e(w,z),e(w,N),e(N,W),e(w,j),e(w,B),e(B,f),e(w,b),e(w,E),e(E,K),e(s,J),e(s,I),e(I,D),e(D,O),e(D,U),e(s,te),e(s,L),e(L,re),e(s,ae),e(s,C),e(C,ne),e(C,pe),e(C,ce),e(C,P),e(C,k),e(C,m),e(C,x),e(s,S),e(s,he),e(he,Ee),e(s,Be),e(s,H),e(H,Je),e(H,Le),e(H,ge),e(H,lt),e(H,it),e(H,ct),e(H,ht),e(H,qe),e(qe,ut),e(H,dt),e(H,Ge),e(Ge,ft),e(H,vt),e(H,mt),e(H,pt),e(H,je),e(je,gt),e(H,_t),e(s,yt),e(s,Pe),e(Pe,wt),e(Pe,We),e(We,bt),e(Pe,kt),e(s,xt),e(s,et),e(et,Et),e(s,Dt),e(s,ye),e(ye,Ct),e(ye,Nt),e(ye,At),e(ye,Mt),e(ye,Tt),e(s,It),e(s,tt),e(tt,Pt),e(s,St),ea(Se,s,null),e(s,Ft),e(s,ue),e(ue,Fe),e(Fe,ve),e(ue,Rt),e(ue,Vt),e(ue,zt),e(ue,Bt),e(ue,Jt),e(n,Lt),e(n,Ke),e(Ke,Ue),e(Ue,Z),e(Z,De),e(De,Ht),e(Z,Ce),e(Ce,qt),e(Z,oe),e(oe,Gt),e(oe,jt),e(oe,Wt),e(oe,Kt),e(oe,Ut),e(oe,Ot),e(oe,Yt),e(Z,Ne),e(Ne,Qt),e(Z,Ae),e(Ae,$t),e(Z,_e);for(let h=0;h<13;h+=1)de[h]&&de[h].m(Z,null);e(Z,me),e(n,Zt);for(let h=0;h<Q.length;h+=1)Q[h]&&Q[h].m(n,null);e(n,at),e(n,X),e(X,Xt),e(X,er),e(X,tr),e(X,rr),e(X,rt),e(rt,ar),e(X,nr),e(X,we),e(we,sr),e(we,Oe),e(Oe,or),e(we,lr),e(we,Re),e(Re,ir),e(we,cr),e(X,hr),e(X,ur),e(X,dr),e(X,fr),nt=!0},p(_,[$]){if($&0){vr=[5,6,7,8,9,10,11,12,1,2,3,4,5];let h;for(h=0;h<13;h+=1){const Me=da(_,vr,h);de[h]?de[h].p(Me,$):(de[h]=fa(Me),de[h].c(),de[h].m(Z,me))}for(;h<13;h+=1)de[h].d(1)}if($&11){Ye=_[1];let h;for(h=0;h<Ye.length;h+=1){const Me=ha(_,Ye,h);Q[h]?Q[h].p(Me,$):(Q[h]=ma(Me),Q[h].c(),Q[h].m(n,at))}for(;h<Q.length;h+=1)Q[h].d(1);Q.length=Ye.length}},i(_){nt||(ta(r.$$.fragment,_),ta(Se.$$.fragment,_),nt=!0)},o(_){ra(r.$$.fragment,_),ra(Se.$$.fragment,_),nt=!1},d(_){aa(r,_),_&&c(o),_&&c(n),aa(Se),_r(de,_),_r(Q,_)}}}let Y=500;const Ze=50,$a=0,Za=5,Xa=0,en=5;function tn(a,r,o){let n,s,u;na(a,Da,f=>o(8,s=f)),na(a,Ca,f=>o(10,u=f));const v=u;let y={monthName:"May",monthNumber:5,year1:2023,year2:2024,day1:"2023-05-01",day2:"2024-05-28"};async function w(){try{const b=await(await fetch("/trends.csv")).text();o(4,V=Ia(b)),o(5,z=[...new Set(V.map(E=>E.city))])}catch(f){console.error("Error loading CSV data:",f)}}let V=[];wa(()=>{w(),o(7,n=pr.filter(f=>s.includes(f.region)).map(f=>f.city))});let q;const G=Na("%Y-%m-%d");let z=[],N=[],W=[];function j(f){const b=pr.filter(E=>E.city===f);if(b){const E=b[0].region,K=v.find(J=>J.name===E);if(K)return K.colour}else return"white"}function B(){q=this.clientWidth,o(0,q)}return a.$$.update=()=>{a.$$.dirty&256&&o(7,n=pr.filter(f=>s.includes(f.region)).map(f=>f.city)),a.$$.dirty&176&&o(6,N=z.map(f=>{if(n.includes(f)){const b=V.filter(E=>{const K=new Date(E.date),J=new Date(y.day1),I=new Date(y.day2);return E.city===f&&K>=J&&K<=I});if(b.length>0){console.log("cityData");const E=b.map(k=>parseFloat(k.normalized_distinct_clean)),K=V.filter(k=>{const A=new Date(k.date);return A.getFullYear()===y.year1&&A.getMonth()===y.monthNumber-1&&k.city===f}),J=oa(K,k=>parseFloat(k.normalized_distinct_clean)),I=V.filter(k=>{const A=new Date(k.date);return A.getFullYear()===y.year2&&A.getMonth()===y.monthNumber-1&&k.city===f}),D=oa(I,k=>parseFloat(k.normalized_distinct_clean)),O=Ha().x(k=>G(k.date)).y(k=>parseFloat(k.normalized_distinct_clean)).bandwidth(.028),ie=Math.min(...O(b).map(k=>k[1]),Sa(E)),U=Math.max(...O(b).map(k=>k[1]),Pa(E)),te=Aa().domain([new Date(y.day1),new Date(y.day2)]).range([en,Y-Za]),L=Ta().domain([ie,U]).range([Ze-Xa,$a]),ae=Ma().x(k=>te(k[0])).y(k=>L(k[1]))(O(b));f==="Quebec"&&(console.log(b),console.log(O(b)),console.log(U));const C=(D-J)/J*100,ne=C.toFixed(1)+"%",se=O(b)[0],pe={cx:te(se[0]),cy:L(se[1]),radius:6,fill:"red",stroke:"red","stroke-width":2},ce=O(b)[393],le={cx:te(ce[0]),cy:L(ce[1]),radius:6,fill:"red",stroke:"#6aa687","stroke-width":2},P=L(J);return{city:f,regressionLine:ae,meanLine:P,startCircle:pe,endCircle:le,perChangeDisplay:ne,percentageChange:C}}}}).filter(f=>f!==void 0)),a.$$.dirty&64&&o(1,W=N.slice().sort((f,b)=>b.percentageChange-f.percentageChange))},[q,W,y,j,V,z,N,n,s,B]}class dn extends ga{constructor(r){super(),_a(this,r,tn,Qa,ya,{})}}export{dn as component,un as universal};
