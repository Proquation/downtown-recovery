import{S as et,i as tt,s as at,k as S,q as E,a as H,l as D,m as b,r as w,h as d,c as W,n as l,b as V,C as c,K as lt,L as rt,D as Pe,M as pe,E as de,y as Se,N as J,e as ie,z as De,O as j,P as nt,A as Ae,Q as st,g as xe,d as Fe,B as Ie,o as ot,u as he,p as C}from"../chunks/index.a4677e45.js";import{H as it}from"../chunks/global.2cdf0447.js";import{e as $e,c as ht,a as ut,r as ft}from"../chunks/csv.276db12e.js";/* empty css                                                           */import{S as ct}from"../chunks/SelectRegions.2cdd4716.js";function je(e,t,r){const s=e.slice();return s[4]=t[r],s}function Le(e){let t,r=e[4].name+"",s;return{c(){t=S("option"),s=E(r),this.h()},l(a){t=D(a,"OPTION",{class:!0});var i=b(t);s=w(i,r),i.forEach(d),this.h()},h(){t.__value=e[4].number,t.value=t.__value,l(t,"class","svelte-17uihdx")},m(a,i){V(a,t,i),c(t,s)},p:Pe,d(a){a&&d(t)}}}function _t(e){let t,r,s,a,i,f,_=e[0],p=[];for(let o=0;o<_.length;o+=1)p[o]=Le(je(e,_,o));return{c(){t=S("p"),r=E("Select Season:"),s=H(),a=S("select");for(let o=0;o<p.length;o+=1)p[o].c();this.h()},l(o){t=D(o,"P",{});var k=b(t);r=w(k,"Select Season:"),k.forEach(d),s=W(o),a=D(o,"SELECT",{class:!0});var v=b(a);for(let m=0;m<p.length;m+=1)p[m].l(v);v.forEach(d),this.h()},h(){l(a,"class","svelte-17uihdx")},m(o,k){V(o,t,k),c(t,r),V(o,s,k),V(o,a,k);for(let v=0;v<p.length;v+=1)p[v]&&p[v].m(a,null);lt(a,e[1]),i||(f=rt(a,"change",e[2]),i=!0)},p(o,[k]){if(k&1){_=o[0];let v;for(v=0;v<_.length;v+=1){const m=je(o,_,v);p[v]?p[v].p(m,k):(p[v]=Le(m),p[v].c(),p[v].m(a,null))}for(;v<p.length;v+=1)p[v].d(1);p.length=_.length}},i:Pe,o:Pe,d(o){o&&d(t),o&&d(s),o&&d(a),pe(p,o),i=!1,f()}}}function pt(e,t,r){let s;de(e,$e,_=>r(3,s=_));const a=[{name:"Spring: Mar 2020 - May 2020",number:1},{name:"Summer: June 2020 - Aug 2020",number:2},{name:"Fall: Sept 2020 - Nov 2020",number:3},{name:"Winter: Dec 2020 - Feb 2021",number:4},{name:"Spring: Mar 2021 - May 2021",number:5},{name:"Summer: June 2021 - Aug 2021",number:6},{name:"Fall: Sept 2021 - Nov 2021",number:7},{name:"Winter: Dec 2021 - Feb 2022",number:8},{name:"Spring: Mar 2022 - May 2022",number:9},{name:"Summer: June 2022 - Aug 2022",number:10},{name:"Fall: Sept 2022 - Nov 2022",number:11},{name:"Winter: Dec 2022 - Feb 2023",number:12}];let i=s;function f(_){const p=_.target.value;$e.set(p)}return[a,i,f]}class dt extends et{constructor(t){super(),tt(this,t,pt,_t,at,{})}}const mt=!0,Mt=Object.freeze(Object.defineProperty({__proto__:null,prerender:mt},Symbol.toStringTag,{value:"Module"}));function Be(e,t,r){const s=e.slice();return s[17]=t[r],s[19]=r,s}function Ke(e,t,r){const s=e.slice();return s[20]=t[r],s[19]=r,s}function Qe(e,t,r){const s=e.slice();return s[17]=t[r],s[19]=r,s}function Xe(e){let t,r,s,a,i,f,_,p=(100*e[17]).toFixed(0)+"",o,k,v;return{c(){t=J("line"),a=J("line"),_=J("text"),o=E(p),k=E("%"),this.h()},l(m){t=j(m,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),b(t).forEach(d),a=j(m,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),b(a).forEach(d),_=j(m,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var g=b(_);o=w(g,p),k=w(g,"%"),g.forEach(d),this.h()},h(){l(t,"class","grid svelte-ac7ppe"),l(t,"x1",r=29+e[19]*e[4]),l(t,"y1","34"),l(t,"x2",s=29+e[19]*e[4]),l(t,"y2",e[3]),l(a,"class","grid-white svelte-ac7ppe"),l(a,"x1",i=29+e[19]*e[4]),l(a,"y1","34"),l(a,"x2",f=29+e[19]*e[4]),l(a,"y2","38"),l(_,"class","axis-label svelte-ac7ppe"),l(_,"x",v=35+e[19]*e[4]),l(_,"y","30"),l(_,"text-anchor","end")},m(m,g){V(m,t,g),V(m,a,g),V(m,_,g),c(_,o),c(_,k)},p(m,g){g&16&&r!==(r=29+m[19]*m[4])&&l(t,"x1",r),g&16&&s!==(s=29+m[19]*m[4])&&l(t,"x2",s),g&8&&l(t,"y2",m[3]),g&16&&i!==(i=29+m[19]*m[4])&&l(a,"x1",i),g&16&&f!==(f=29+m[19]*m[4])&&l(a,"x2",f),g&4&&p!==(p=(100*m[17]).toFixed(0)+"")&&he(o,p),g&16&&v!==(v=35+m[19]*m[4])&&l(_,"x",v)},d(m){m&&d(t),m&&d(a),m&&d(_)}}}function Ge(e){let t,r=e[20].display_title+"",s,a,i=Math.round(100*e[20].seasonal_average)+"",f,_;return{c(){t=J("text"),s=E(r),a=E(" - "),f=E(i),_=E("%"),this.h()},l(p){t=j(p,"text",{class:!0,x:!0,y:!0,style:!0});var o=b(t);s=w(o,r),a=w(o," - "),f=w(o,i),_=w(o,"%"),o.forEach(d),this.h()},h(){l(t,"class","bar-label svelte-ac7ppe"),l(t,"x","32"),l(t,"y",56+e[19]*24),C(t,"fill","#000"),C(t,"fill-opacity","0"),C(t,"stroke","white"),C(t,"stroke-width","3px"),C(t,"stroke-opacity","0.62")},m(p,o){V(p,t,o),c(t,s),c(t,a),c(t,f),c(t,_)},p(p,o){o&1&&r!==(r=p[20].display_title+"")&&he(s,r),o&1&&i!==(i=Math.round(100*p[20].seasonal_average)+"")&&he(f,i)},d(p){p&&d(t)}}}function Ue(e){let t=e[5].find(L).text==="#000",r,s,a,i,f,_=e[19]+1+"",p,o,k=e[20].display_title+"",v,m,g=Math.round(100*e[20].seasonal_average)+"",N,O;function L(...u){return e[10](e[20],...u)}let M=t&&Ge(e);function K(...u){return e[11](e[20],...u)}function B(...u){return e[12](e[20],...u)}return{c(){M&&M.c(),r=J("line"),a=J("line"),f=J("text"),p=E(_),o=J("text"),v=E(k),m=E(" - "),N=E(g),O=E("%"),this.h()},l(u){M&&M.l(u),r=j(u,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0,style:!0}),b(r).forEach(d),a=j(u,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0,style:!0}),b(a).forEach(d),f=j(u,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var y=b(f);p=w(y,_),y.forEach(d),o=j(u,"text",{class:!0,x:!0,y:!0,style:!0});var A=b(o);v=w(A,k),m=w(A," - "),N=w(A,g),O=w(A,"%"),A.forEach(d),this.h()},h(){l(r,"class","bar"),l(r,"x1",29),l(r,"y1",52+e[19]*24),l(r,"x2",s=29+(e[1]-50)*e[20].seasonal_average/Math.max(...e[2])),l(r,"y2",52+e[19]*24),C(r,"stroke","white"),C(r,"stroke-width","20 "),l(a,"class","bar"),l(a,"x1",30),l(a,"y1",52+e[19]*24),l(a,"x2",i=29+(e[1]-50)*e[20].seasonal_average/Math.max(...e[2])-1),l(a,"y2",52+e[19]*24),C(a,"stroke",e[5].find(K).colour),C(a,"stroke-width","18"),l(f,"class","axis-label svelte-ac7ppe"),l(f,"x","25"),l(f,"y",57+e[19]*24),l(f,"text-anchor","end"),l(o,"class","bar-label svelte-ac7ppe"),l(o,"x","32"),l(o,"y",56+e[19]*24),C(o,"fill",e[5].find(B).text)},m(u,y){M&&M.m(u,y),V(u,r,y),V(u,a,y),V(u,f,y),c(f,p),V(u,o,y),c(o,v),c(o,m),c(o,N),c(o,O)},p(u,y){e=u,y&1&&(t=e[5].find(L).text==="#000"),t?M?M.p(e,y):(M=Ge(e),M.c(),M.m(r.parentNode,r)):M&&(M.d(1),M=null),y&7&&s!==(s=29+(e[1]-50)*e[20].seasonal_average/Math.max(...e[2]))&&l(r,"x2",s),y&7&&i!==(i=29+(e[1]-50)*e[20].seasonal_average/Math.max(...e[2])-1)&&l(a,"x2",i),y&1&&C(a,"stroke",e[5].find(K).colour),y&1&&k!==(k=e[20].display_title+"")&&he(v,k),y&1&&g!==(g=Math.round(100*e[20].seasonal_average)+"")&&he(N,g),y&1&&C(o,"fill",e[5].find(B).text)},d(u){M&&M.d(u),u&&d(r),u&&d(a),u&&d(f),u&&d(o)}}}function Ye(e){let t,r,s;return{c(){t=J("line"),this.h()},l(a){t=j(a,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0,"stroke-opacity":!0,"stroke-dasharray":!0}),b(t).forEach(d),this.h()},h(){l(t,"class","grid-white svelte-ac7ppe"),l(t,"x1",r=29+e[19]*e[4]),l(t,"y1","34"),l(t,"x2",s=29+e[19]*e[4]),l(t,"y2",e[3]),l(t,"stroke-opacity","0.75"),l(t,"stroke-dasharray","2 2")},m(a,i){V(a,t,i)},p(a,i){i&16&&r!==(r=29+a[19]*a[4])&&l(t,"x1",r),i&16&&s!==(s=29+a[19]*a[4])&&l(t,"x2",s),i&8&&l(t,"y2",a[3])},d(a){a&&d(t)}}}function Ze(e){let t,r,s,a,i=e[17]===1&&Ye(e);return{c(){t=J("line"),i&&i.c(),a=ie(),this.h()},l(f){t=j(f,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0,"stroke-opacity":!0}),b(t).forEach(d),i&&i.l(f),a=ie(),this.h()},h(){l(t,"class","grid svelte-ac7ppe"),l(t,"x1",r=29+e[19]*e[4]),l(t,"y1","34"),l(t,"x2",s=29+e[19]*e[4]),l(t,"y2",e[3]),l(t,"stroke-opacity","0.21")},m(f,_){V(f,t,_),i&&i.m(f,_),V(f,a,_)},p(f,_){_&16&&r!==(r=29+f[19]*f[4])&&l(t,"x1",r),_&16&&s!==(s=29+f[19]*f[4])&&l(t,"x2",s),_&8&&l(t,"y2",f[3]),f[17]===1?i?i.p(f,_):(i=Ye(f),i.c(),i.m(a.parentNode,a)):i&&(i.d(1),i=null)},d(f){f&&d(t),i&&i.d(f),f&&d(a)}}}function vt(e){let t,r,s,a,i,f,_,p,o,k,v,m,g,N,O,L,M,K,B,u,y,A,Q,ee,me,ve,te,ge,ye,be,T,R,X,G,ke,U,Y,Ee,Z,we,Me,x,ue,fe,Ve,ae;t=new it({}),G=new dt({}),Y=new ct({props:{europe:"yes"}});let le=e[2],F=[];for(let h=0;h<le.length;h+=1)F[h]=Xe(Qe(e,le,h));let re=e[0],I=[];for(let h=0;h<re.length;h+=1)I[h]=Ue(Ke(e,re,h));let ne=e[2],P=[];for(let h=0;h<ne.length;h+=1)P[h]=Ze(Be(e,ne,h));return{c(){Se(t.$$.fragment),r=H(),s=S("main"),a=S("div"),i=S("h3"),f=E("This is an archived version of our rankings data, for our most recent rankings, using updated data sources and methodology, click "),_=S("a"),p=E("here"),o=H(),k=S("h1"),v=E("Downtown Recovery Rankings"),m=H(),g=S("p"),N=E("The recovery metrics on these charts are based on a sample of mobile phone data."),O=H(),L=S("p"),M=E("They are computed by counting the number of unique mobile phones in a city's downtown area in the specified time period, and then dividing it by the number of unique visitors during the equivalent time period in 2019. For example, the March 2023 - May 2023 time period is compared to the March 2019 - May 2019 time period."),K=H(),B=S("p"),u=E("A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels."),y=H(),A=S("p"),Q=E("For more information, read our "),ee=S("a"),me=E("Methodology"),ve=E(" page. Or click "),te=S("a"),ge=E("here"),ye=E(" to download the data shown on this chart."),be=H(),T=S("div"),R=S("div"),X=S("div"),Se(G.$$.fragment),ke=H(),U=S("div"),Se(Y.$$.fragment),Ee=H(),Z=S("p"),we=E("*Data for Europe is only available from 12/2021 to 02/2023"),Me=H(),x=J("svg");for(let h=0;h<F.length;h+=1)F[h].c();ue=ie();for(let h=0;h<I.length;h+=1)I[h].c();fe=ie();for(let h=0;h<P.length;h+=1)P[h].c();this.h()},l(h){De(t.$$.fragment,h),r=W(h),s=D(h,"MAIN",{class:!0});var $=b(s);a=D($,"DIV",{class:!0});var n=b(a);i=D(n,"H3",{});var q=b(i);f=w(q,"This is an archived version of our rankings data, for our most recent rankings, using updated data sources and methodology, click "),_=D(q,"A",{href:!0});var Oe=b(_);p=w(Oe,"here"),Oe.forEach(d),q.forEach(d),o=W(n),k=D(n,"H1",{});var Te=b(k);v=w(Te,"Downtown Recovery Rankings"),Te.forEach(d),m=W(n),g=D(n,"P",{});var qe=b(g);N=w(qe,"The recovery metrics on these charts are based on a sample of mobile phone data."),qe.forEach(d),O=W(n),L=D(n,"P",{});var Ce=b(L);M=w(Ce,"They are computed by counting the number of unique mobile phones in a city's downtown area in the specified time period, and then dividing it by the number of unique visitors during the equivalent time period in 2019. For example, the March 2023 - May 2023 time period is compared to the March 2019 - May 2019 time period."),Ce.forEach(d),K=W(n),B=D(n,"P",{});var Ne=b(B);u=w(Ne,"A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels."),Ne.forEach(d),y=W(n),A=D(n,"P",{});var se=b(A);Q=w(se,"For more information, read our "),ee=D(se,"A",{href:!0});var Re=b(ee);me=w(Re,"Methodology"),Re.forEach(d),ve=w(se," page. Or click "),te=D(se,"A",{href:!0});var ze=b(te);ge=w(ze,"here"),ze.forEach(d),ye=w(se," to download the data shown on this chart."),se.forEach(d),n.forEach(d),be=W($),T=D($,"DIV",{id:!0,class:!0});var ce=b(T);R=D(ce,"DIV",{id:!0,class:!0});var oe=b(R);X=D(oe,"DIV",{id:!0,class:!0});var He=b(X);De(G.$$.fragment,He),He.forEach(d),ke=W(oe),U=D(oe,"DIV",{id:!0,class:!0});var We=b(U);De(Y.$$.fragment,We),We.forEach(d),Ee=W(oe),Z=D(oe,"P",{id:!0,class:!0});var Je=b(Z);we=w(Je,"*Data for Europe is only available from 12/2021 to 02/2023"),Je.forEach(d),oe.forEach(d),Me=W(ce),x=j(ce,"svg",{height:!0,width:!0,id:!0,class:!0});var _e=b(x);for(let z=0;z<F.length;z+=1)F[z].l(_e);ue=ie();for(let z=0;z<I.length;z+=1)I[z].l(_e);fe=ie();for(let z=0;z<P.length;z+=1)P[z].l(_e);_e.forEach(d),ce.forEach(d),$.forEach(d),this.h()},h(){l(_,"href","/charts/rankings"),l(ee,"href","/methodology"),l(te,"href","/ranking_data_archived.csv"),l(a,"class","text"),l(X,"id","options-season"),l(X,"class","svelte-ac7ppe"),l(U,"id","options-region"),l(U,"class","svelte-ac7ppe"),l(Z,"id","note"),l(Z,"class","svelte-ac7ppe"),l(R,"id","options"),l(R,"class","svelte-ac7ppe"),l(x,"height",e[3]),l(x,"width",e[1]),l(x,"id","chart"),l(x,"class","svelte-ac7ppe"),l(T,"id","chart-wrapper"),l(T,"class","svelte-ac7ppe"),nt(()=>e[13].call(T)),l(s,"class","svelte-ac7ppe")},m(h,$){Ae(t,h,$),V(h,r,$),V(h,s,$),c(s,a),c(a,i),c(i,f),c(i,_),c(_,p),c(a,o),c(a,k),c(k,v),c(a,m),c(a,g),c(g,N),c(a,O),c(a,L),c(L,M),c(a,K),c(a,B),c(B,u),c(a,y),c(a,A),c(A,Q),c(A,ee),c(ee,me),c(A,ve),c(A,te),c(te,ge),c(A,ye),c(s,be),c(s,T),c(T,R),c(R,X),Ae(G,X,null),c(R,ke),c(R,U),Ae(Y,U,null),c(R,Ee),c(R,Z),c(Z,we),c(T,Me),c(T,x);for(let n=0;n<F.length;n+=1)F[n]&&F[n].m(x,null);c(x,ue);for(let n=0;n<I.length;n+=1)I[n]&&I[n].m(x,null);c(x,fe);for(let n=0;n<P.length;n+=1)P[n]&&P[n].m(x,null);Ve=st(T,e[13].bind(T)),ae=!0},p(h,[$]){if($&28){le=h[2];let n;for(n=0;n<le.length;n+=1){const q=Qe(h,le,n);F[n]?F[n].p(q,$):(F[n]=Xe(q),F[n].c(),F[n].m(x,ue))}for(;n<F.length;n+=1)F[n].d(1);F.length=le.length}if($&39){re=h[0];let n;for(n=0;n<re.length;n+=1){const q=Ke(h,re,n);I[n]?I[n].p(q,$):(I[n]=Ue(q),I[n].c(),I[n].m(x,fe))}for(;n<I.length;n+=1)I[n].d(1);I.length=re.length}if($&28){ne=h[2];let n;for(n=0;n<ne.length;n+=1){const q=Be(h,ne,n);P[n]?P[n].p(q,$):(P[n]=Ze(q),P[n].c(),P[n].m(x,null))}for(;n<P.length;n+=1)P[n].d(1);P.length=ne.length}(!ae||$&8)&&l(x,"height",h[3]),(!ae||$&2)&&l(x,"width",h[1])},i(h){ae||(xe(t.$$.fragment,h),xe(G.$$.fragment,h),xe(Y.$$.fragment,h),ae=!0)},o(h){Fe(t.$$.fragment,h),Fe(G.$$.fragment,h),Fe(Y.$$.fragment,h),ae=!1},d(h){Ie(t,h),h&&d(r),h&&d(s),Ie(G),Ie(Y),pe(F,h),pe(I,h),pe(P,h),Ve()}}}function gt(e,t,r){let s,a,i,f;de(e,ut,u=>r(8,a=u)),de(e,$e,u=>r(9,i=u)),de(e,ft,u=>r(14,f=u));let _=[],p=[];const o=f;async function k(){try{const y=await(await fetch("../ranking_data_archived.csv")).text();r(6,_=ht(y))}catch(u){console.error("Error loading CSV data:",u)}}ot(()=>{k()});let v,m=100,g=1;function N(u,y){let A=[];for(let Q=0;Q<=Math.ceil(u/y);Q++)A.push(Q*y);return A}let O=[];const L=(u,y)=>y.name===u.region,M=(u,y)=>y.name===u.region,K=(u,y)=>y.name===u.region;function B(){v=this.offsetWidth,r(1,v)}return e.$$.update=()=>{e.$$.dirty&832&&r(0,p=_.filter(u=>u.metric==="downtown").filter(u=>u.Season===`Season_${i}`).filter(u=>a.includes(u.region)).sort((u,y)=>y.seasonal_average-u.seasonal_average)),e.$$.dirty&1&&r(3,m=24*p.length+50),e.$$.dirty&1&&r(7,g=p.length!==0?p[0].seasonal_average:1),e.$$.dirty&128&&r(7,g=g<1?1:g),e.$$.dirty&128&&(g<2?r(2,O=N(g,.2)):r(2,O=N(g,.5))),e.$$.dirty&6&&r(4,s=(v-50)/(O.length-1))},[p,v,O,m,s,o,_,g,a,i,L,M,K,B]}class St extends et{constructor(t){super(),tt(this,t,gt,vt,at,{})}}export{St as component,Mt as universal};
