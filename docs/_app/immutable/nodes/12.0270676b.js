import{S as jl,i as Wl,s as Hl,k as b,q as O,a as U,l as y,m as g,r as D,h as _,c as G,n as i,b as W,C as s,K as cl,L as Jt,D as fl,M as ge,E as ft,o as Xl,u as Y,y as Gt,N as me,e as ye,z as Bt,O as be,P as Jl,A as jt,Q as Kl,g as Wt,d as Ht,B as Xt,p as ct,R as Ql}from"../chunks/index.a4677e45.js";import{H as Yl}from"../chunks/global.2cdf0447.js";import{s as Kt,c as _t,a as Zl,r as $l}from"../chunks/csv.276db12e.js";/* empty css                                                           */import{S as xl}from"../chunks/SelectRegions.2cdd4716.js";const ea=!0,ba=Object.freeze(Object.defineProperty({__proto__:null,prerender:ea},Symbol.toStringTag,{value:"Module"}));function _l(e,t,a){const l=e.slice();return l[13]=t[a],l}function pl(e,t,a){const l=e.slice();return l[13]=t[a],l}function vl(e,t,a){const l=e.slice();return l[13]=t[a],l}function dl(e,t,a){const l=e.slice();return l[13]=t[a],l}function gl(e,t,a){const l=e.slice();return l[13]=t[a],l}function ml(e,t,a){const l=e.slice();return l[13]=t[a],l}function bl(e,t,a){const l=e.slice();return l[13]=t[a],l}function yl(e,t,a){const l=e.slice();return l[13]=t[a],l}function wl(e){let t,a=e[13].text+"",l,r;return{c(){t=b("option"),l=O(a),this.h()},l(o){t=y(o,"OPTION",{class:!0});var h=g(t);l=D(h,a),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(o,h){W(o,t,h),s(t,l)},p(o,h){h&8&&a!==(a=o[13].text+"")&&Y(l,a),h&8&&r!==(r=o[13].value)&&(t.__value=r,t.value=t.__value)},d(o){o&&_(t)}}}function El(e){let t,a=e[13].text+"",l,r;return{c(){t=b("option"),l=O(a),this.h()},l(o){t=y(o,"OPTION",{class:!0});var h=g(t);l=D(h,a),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(o,h){W(o,t,h),s(t,l)},p(o,h){h&16&&a!==(a=o[13].text+"")&&Y(l,a),h&16&&r!==(r=o[13].value)&&(t.__value=r,t.value=t.__value)},d(o){o&&_(t)}}}function kl(e){let t,a=e[13].text+"",l,r;return{c(){t=b("option"),l=O(a),this.h()},l(o){t=y(o,"OPTION",{class:!0});var h=g(t);l=D(h,a),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(o,h){W(o,t,h),s(t,l)},p(o,h){h&64&&a!==(a=o[13].text+"")&&Y(l,a),h&64&&r!==(r=o[13].value)&&(t.__value=r,t.value=t.__value)},d(o){o&&_(t)}}}function Ol(e){let t,a=e[13].text+"",l,r;return{c(){t=b("option"),l=O(a),this.h()},l(o){t=y(o,"OPTION",{class:!0});var h=g(t);l=D(h,a),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(o,h){W(o,t,h),s(t,l)},p(o,h){h&32&&a!==(a=o[13].text+"")&&Y(l,a),h&32&&r!==(r=o[13].value)&&(t.__value=r,t.value=t.__value)},d(o){o&&_(t)}}}function Dl(e){let t,a=e[13].text+"",l,r;return{c(){t=b("option"),l=O(a),this.h()},l(o){t=y(o,"OPTION",{class:!0});var h=g(t);l=D(h,a),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(o,h){W(o,t,h),s(t,l)},p(o,h){h&2&&a!==(a=o[13].text+"")&&Y(l,a),h&2&&r!==(r=o[13].value)&&(t.__value=r,t.value=t.__value)},d(o){o&&_(t)}}}function Pl(e){let t,a=e[13].text+"",l,r;return{c(){t=b("option"),l=O(a),this.h()},l(o){t=y(o,"OPTION",{class:!0});var h=g(t);l=D(h,a),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(o,h){W(o,t,h),s(t,l)},p(o,h){h&256&&a!==(a=o[13].text+"")&&Y(l,a),h&256&&r!==(r=o[13].value)&&(t.__value=r,t.value=t.__value)},d(o){o&&_(t)}}}function Fl(e){let t,a=e[13].text+"",l,r;return{c(){t=b("option"),l=O(a),this.h()},l(o){t=y(o,"OPTION",{class:!0});var h=g(t);l=D(h,a),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(o,h){W(o,t,h),s(t,l)},p(o,h){h&4&&a!==(a=o[13].text+"")&&Y(l,a),h&4&&r!==(r=o[13].value)&&(t.__value=r,t.value=t.__value)},d(o){o&&_(t)}}}function Vl(e){let t,a=e[13].text+"",l,r;return{c(){t=b("option"),l=O(a),this.h()},l(o){t=y(o,"OPTION",{class:!0});var h=g(t);l=D(h,a),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(o,h){W(o,t,h),s(t,l)},p(o,h){h&128&&a!==(a=o[13].text+"")&&Y(l,a),h&128&&r!==(r=o[13].value)&&(t.__value=r,t.value=t.__value)},d(o){o&&_(t)}}}function ta(e){let t,a,l,r,o,h,P,w,v,k,d,p,I,X,H=e[3],E=[];for(let u=0;u<H.length;u+=1)E[u]=wl(yl(e,H,u));let J=e[4],S=[];for(let u=0;u<J.length;u+=1)S[u]=El(bl(e,J,u));let C=e[6],V=[];for(let u=0;u<C.length;u+=1)V[u]=kl(ml(e,C,u));let ne=e[5],T=[];for(let u=0;u<ne.length;u+=1)T[u]=Ol(gl(e,ne,u));let ie=e[1],q=[];for(let u=0;u<ie.length;u+=1)q[u]=Dl(dl(e,ie,u));let le=e[8],L=[];for(let u=0;u<le.length;u+=1)L[u]=Pl(vl(e,le,u));let Q=e[2],z=[];for(let u=0;u<Q.length;u+=1)z[u]=Fl(pl(e,Q,u));let K=e[7],B=[];for(let u=0;u<K.length;u+=1)B[u]=Vl(_l(e,K,u));return{c(){t=b("p"),a=O("Select Variable:"),l=U(),r=b("select"),o=b("optgroup");for(let u=0;u<E.length;u+=1)E[u].c();h=b("optgroup");for(let u=0;u<S.length;u+=1)S[u].c();P=b("optgroup");for(let u=0;u<V.length;u+=1)V[u].c();w=b("optgroup");for(let u=0;u<T.length;u+=1)T[u].c();v=b("optgroup");for(let u=0;u<q.length;u+=1)q[u].c();k=b("optgroup");for(let u=0;u<L.length;u+=1)L[u].c();d=b("optgroup");for(let u=0;u<z.length;u+=1)z[u].c();p=b("optgroup");for(let u=0;u<B.length;u+=1)B[u].c();this.h()},l(u){t=y(u,"P",{});var N=g(t);a=D(N,"Select Variable:"),N.forEach(_),l=G(u),r=y(u,"SELECT",{class:!0});var n=g(r);o=y(n,"OPTGROUP",{label:!0});var R=g(o);for(let F=0;F<E.length;F+=1)E[F].l(R);R.forEach(_),h=y(n,"OPTGROUP",{label:!0});var se=g(h);for(let F=0;F<S.length;F+=1)S[F].l(se);se.forEach(_),P=y(n,"OPTGROUP",{label:!0});var ke=g(P);for(let F=0;F<V.length;F+=1)V[F].l(ke);ke.forEach(_),w=y(n,"OPTGROUP",{label:!0});var ue=g(w);for(let F=0;F<T.length;F+=1)T[F].l(ue);ue.forEach(_),v=y(n,"OPTGROUP",{label:!0});var De=g(v);for(let F=0;F<q.length;F+=1)q[F].l(De);De.forEach(_),k=y(n,"OPTGROUP",{label:!0});var j=g(k);for(let F=0;F<L.length;F+=1)L[F].l(j);j.forEach(_),d=y(n,"OPTGROUP",{label:!0});var ce=g(d);for(let F=0;F<z.length;F+=1)z[F].l(ce);ce.forEach(_),p=y(n,"OPTGROUP",{label:!0});var pe=g(p);for(let F=0;F<B.length;F+=1)B[F].l(pe);pe.forEach(_),n.forEach(_),this.h()},h(){i(o,"label","Demographics"),i(h,"label","Employment"),i(P,"label","Income"),i(w,"label","Housing"),i(v,"label","Commuting"),i(k,"label","Weather"),i(d,"label","COVID-19 Closures"),i(p,"label","Political Leaning"),i(r,"class","svelte-19nzrqx")},m(u,N){W(u,t,N),s(t,a),W(u,l,N),W(u,r,N),s(r,o);for(let n=0;n<E.length;n+=1)E[n]&&E[n].m(o,null);s(r,h);for(let n=0;n<S.length;n+=1)S[n]&&S[n].m(h,null);s(r,P);for(let n=0;n<V.length;n+=1)V[n]&&V[n].m(P,null);s(r,w);for(let n=0;n<T.length;n+=1)T[n]&&T[n].m(w,null);s(r,v);for(let n=0;n<q.length;n+=1)q[n]&&q[n].m(v,null);s(r,k);for(let n=0;n<L.length;n+=1)L[n]&&L[n].m(k,null);s(r,d);for(let n=0;n<z.length;n+=1)z[n]&&z[n].m(d,null);s(r,p);for(let n=0;n<B.length;n+=1)B[n]&&B[n].m(p,null);cl(r,e[0]),I||(X=Jt(r,"change",e[9]),I=!0)},p(u,[N]){if(N&8){H=u[3];let n;for(n=0;n<H.length;n+=1){const R=yl(u,H,n);E[n]?E[n].p(R,N):(E[n]=wl(R),E[n].c(),E[n].m(o,null))}for(;n<E.length;n+=1)E[n].d(1);E.length=H.length}if(N&16){J=u[4];let n;for(n=0;n<J.length;n+=1){const R=bl(u,J,n);S[n]?S[n].p(R,N):(S[n]=El(R),S[n].c(),S[n].m(h,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=J.length}if(N&64){C=u[6];let n;for(n=0;n<C.length;n+=1){const R=ml(u,C,n);V[n]?V[n].p(R,N):(V[n]=kl(R),V[n].c(),V[n].m(P,null))}for(;n<V.length;n+=1)V[n].d(1);V.length=C.length}if(N&32){ne=u[5];let n;for(n=0;n<ne.length;n+=1){const R=gl(u,ne,n);T[n]?T[n].p(R,N):(T[n]=Ol(R),T[n].c(),T[n].m(w,null))}for(;n<T.length;n+=1)T[n].d(1);T.length=ne.length}if(N&2){ie=u[1];let n;for(n=0;n<ie.length;n+=1){const R=dl(u,ie,n);q[n]?q[n].p(R,N):(q[n]=Dl(R),q[n].c(),q[n].m(v,null))}for(;n<q.length;n+=1)q[n].d(1);q.length=ie.length}if(N&256){le=u[8];let n;for(n=0;n<le.length;n+=1){const R=vl(u,le,n);L[n]?L[n].p(R,N):(L[n]=Pl(R),L[n].c(),L[n].m(k,null))}for(;n<L.length;n+=1)L[n].d(1);L.length=le.length}if(N&4){Q=u[2];let n;for(n=0;n<Q.length;n+=1){const R=pl(u,Q,n);z[n]?z[n].p(R,N):(z[n]=Fl(R),z[n].c(),z[n].m(d,null))}for(;n<z.length;n+=1)z[n].d(1);z.length=Q.length}if(N&128){K=u[7];let n;for(n=0;n<K.length;n+=1){const R=_l(u,K,n);B[n]?B[n].p(R,N):(B[n]=Vl(R),B[n].c(),B[n].m(p,null))}for(;n<B.length;n+=1)B[n].d(1);B.length=K.length}N&511&&cl(r,u[0])},i:fl,o:fl,d(u){u&&_(t),u&&_(l),u&&_(r),ge(E,u),ge(S,u),ge(V,u),ge(T,u),ge(q,u),ge(L,u),ge(z,u),ge(B,u),I=!1,X()}}}function la(e,t,a){let l;ft(e,Kt,E=>a(11,l=E));let r,o=[],h=[],P=[],w=[],v=[],k=[],d=[],p=[],I=[];async function X(){try{const J=await(await fetch("../variables_data_dictionary.csv")).text();a(10,o=_t(J))}catch(E){console.error("Error loading CSV data:",E)}}Xl(()=>{X(),a(0,r=l)});function H(E){const J=E.target.value;Kt.set(J)}return e.$$.update=()=>{e.$$.dirty&1024&&a(1,h=o.filter(E=>E.group==="Commuting")),e.$$.dirty&1024&&a(2,P=o.filter(E=>E.group==="COVID-19 Closures")),e.$$.dirty&1024&&a(3,w=o.filter(E=>E.group==="Demographics")),e.$$.dirty&1024&&a(4,v=o.filter(E=>E.group==="Employment")),e.$$.dirty&1024&&a(5,k=o.filter(E=>E.group==="Housing")),e.$$.dirty&1024&&a(6,d=o.filter(E=>E.group==="Income")),e.$$.dirty&1024&&a(7,p=o.filter(E=>E.group==="Political Leaning")),e.$$.dirty&1024&&a(8,I=o.filter(E=>E.group==="Weather"))},[r,h,P,w,v,k,d,p,I,H,o]}class aa extends jl{constructor(t){super(),Wl(this,t,la,ta,Hl,{})}}function ra(e){var t,a,l=e.length;if(l===1)t=0,a=e[0][1];else{for(var r=0,o=0,h=0,P=0,w,v,k,d=0;d<l;d++)w=e[d],v=w[0],k=w[1],r+=v,o+=k,h+=v*v,P+=v*k;t=(l*P-r*o)/(l*h-r*r),a=o/l-t*r/l}return{m:t,b:a}}function oa(e){if(e.length===0)return 0;var t=e[0],a=0,l;if(typeof t!="number")return NaN;for(var r=1;r<e.length;r++){if(typeof e[r]!="number")return NaN;l=t+e[r],Math.abs(t)>=Math.abs(e[r])?a+=t-l+e[r]:a+=e[r]-l+t,t=l}return t+a}function Qt(e){if(e.length===0)throw new Error("mean requires at least one data point");return oa(e)/e.length}function na(e,t){var a=Qt(e),l=0,r,o;if(t===2)for(o=0;o<e.length;o++)r=e[o]-a,l+=r*r;else for(o=0;o<e.length;o++)l+=Math.pow(e[o]-a,t);return l}function ia(e,t){if(e.length!==t.length)throw new Error("sampleCovariance requires samples with equal lengths");if(e.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var a=Qt(e),l=Qt(t),r=0,o=0;o<e.length;o++)r+=(e[o]-a)*(t[o]-l);var h=e.length-1;return r/h}function sa(e){if(e.length<2)throw new Error("sampleVariance requires at least two data points");var t=na(e,2),a=e.length-1;return t/a}function Cl(e){var t=sa(e);return Math.sqrt(t)}function ua(e,t){var a=ia(e,t),l=Cl(e),r=Cl(t);return a/l/r}function Tl(e,t,a){const l=e.slice();return l[43]=t[a],l[45]=a,l}function Il(e,t,a){const l=e.slice();return l[43]=t[a],l[45]=a,l}function Sl(e,t,a){const l=e.slice();return l[45]=t[a],l}function Nl(e,t,a){const l=e.slice();return l[49]=t[a],l[45]=a,l}function Rl(e){let t,a,l,r,o=(100*e[49]).toFixed(0)+"",h,P,w,v,k,d;return{c(){t=me("line"),r=me("text"),h=O(o),P=O("%"),v=me("line"),this.h()},l(p){t=be(p,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),g(t).forEach(_),r=be(p,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var I=g(r);h=D(I,o),P=D(I,"%"),I.forEach(_),v=be(p,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),g(v).forEach(_),this.h()},h(){i(t,"class","grid svelte-1b8om2r"),i(t,"x1","40"),i(t,"y1",a=30+e[45]*e[19]),i(t,"x2",e[1]),i(t,"y2",l=30+e[45]*e[19]),i(r,"class","axis-label svelte-1b8om2r"),i(r,"x","35"),i(r,"y",w=35+e[45]*e[19]),i(r,"text-anchor","end"),i(v,"class","grid-white svelte-1b8om2r"),i(v,"x1","37"),i(v,"y1",k=30+e[45]*e[19]),i(v,"x2","45"),i(v,"y2",d=30+e[45]*e[19])},m(p,I){W(p,t,I),W(p,r,I),s(r,h),s(r,P),W(p,v,I)},p(p,I){I[0]&524288&&a!==(a=30+p[45]*p[19])&&i(t,"y1",a),I[0]&2&&i(t,"x2",p[1]),I[0]&524288&&l!==(l=30+p[45]*p[19])&&i(t,"y2",l),I[0]&8&&o!==(o=(100*p[49]).toFixed(0)+"")&&Y(h,o),I[0]&524288&&w!==(w=35+p[45]*p[19])&&i(r,"y",w),I[0]&524288&&k!==(k=30+p[45]*p[19])&&i(v,"y1",k),I[0]&524288&&d!==(d=30+p[45]*p[19])&&i(v,"y2",d)},d(p){p&&_(t),p&&_(r),p&&_(v)}}}function Ml(e){let t,a,l,r,o=(e[45]*e[16]).toLocaleString()+"",h,P,w,v,k;return{c(){t=me("line"),r=me("text"),h=O(o),w=me("line"),this.h()},l(d){t=be(d,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),g(t).forEach(_),r=be(d,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var p=g(r);h=D(p,o),p.forEach(_),w=be(d,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),g(w).forEach(_),this.h()},h(){i(t,"class","grid svelte-1b8om2r"),i(t,"x1",a=45+e[45]*e[15]),i(t,"y1","22"),i(t,"x2",l=45+e[45]*e[15]),i(t,"y2",e[2]),i(r,"class","axis-label svelte-1b8om2r"),i(r,"x",P=47+e[45]*e[15]),i(r,"y","17"),i(r,"text-anchor","end"),i(w,"class","grid-white svelte-1b8om2r"),i(w,"x1",v=45+e[45]*e[15]),i(w,"y1","22"),i(w,"x2",k=45+e[45]*e[15]),i(w,"y2","31")},m(d,p){W(d,t,p),W(d,r,p),s(r,h),W(d,w,p)},p(d,p){p[0]&32768&&a!==(a=45+d[45]*d[15])&&i(t,"x1",a),p[0]&32768&&l!==(l=45+d[45]*d[15])&&i(t,"x2",l),p[0]&4&&i(t,"y2",d[2]),p[0]&65536&&o!==(o=(d[45]*d[16]).toLocaleString()+"")&&Y(h,o),p[0]&32768&&P!==(P=47+d[45]*d[15])&&i(r,"x",P),p[0]&32768&&v!==(v=45+d[45]*d[15])&&i(w,"x1",v),p[0]&32768&&k!==(k=45+d[45]*d[15])&&i(w,"x2",k)},d(d){d&&_(t),d&&_(r),d&&_(w)}}}function ql(e){let t,a,l;return{c(){t=me("circle"),this.h()},l(r){t=be(r,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),g(t).forEach(_),this.h()},h(){i(t,"class","point-white svelte-1b8om2r"),i(t,"cx",a=45+Ee([0,e[6]],e[5],parseFloat(e[43][e[7]]))),i(t,"cy",l=30+we(e[18],e[2]-40,e[43].seasonal_average)),i(t,"r","6"),i(t,"fill","black"),i(t,"stroke","white"),i(t,"stroke-width","3")},m(r,o){W(r,t,o)},p(r,o){o[0]&225&&a!==(a=45+Ee([0,r[6]],r[5],parseFloat(r[43][r[7]])))&&i(t,"cx",a),o[0]&262149&&l!==(l=30+we(r[18],r[2]-40,r[43].seasonal_average))&&i(t,"cy",l)},d(r){r&&_(t)}}}function zl(e){let t=e[43][e[4]]>=0&&!isNaN(parseFloat(e[43][e[4]])),a,l=t&&ql(e);return{c(){l&&l.c(),a=ye()},l(r){l&&l.l(r),a=ye()},m(r,o){l&&l.m(r,o),W(r,a,o)},p(r,o){o[0]&17&&(t=r[43][r[4]]>=0&&!isNaN(parseFloat(r[43][r[4]]))),t?l?l.p(r,o):(l=ql(r),l.c(),l.m(a.parentNode,a)):l&&(l.d(1),l=null)},d(r){l&&l.d(r),r&&_(a)}}}function Ll(e){let t,a,l,r,o,h;function P(...v){return e[31](e[43],...v)}function w(...v){return e[32](e[43],...v)}return{c(){t=me("circle"),this.h()},l(v){t=be(v,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),g(t).forEach(_),this.h()},h(){i(t,"class","point svelte-1b8om2r"),i(t,"cx",a=45+Ee([0,e[6]],e[5],parseFloat(e[43][e[7]]))),i(t,"cy",l=30+we(e[18],e[2]-40,e[43].seasonal_average)),i(t,"r","6"),i(t,"fill",r=e[20].find(P).colour),i(t,"stroke","white"),i(t,"stroke-width","0")},m(v,k){W(v,t,k),o||(h=[Jt(t,"mouseover",w),Jt(t,"mouseout",e[33])],o=!0)},p(v,k){e=v,k[0]&225&&a!==(a=45+Ee([0,e[6]],e[5],parseFloat(e[43][e[7]])))&&i(t,"cx",a),k[0]&262149&&l!==(l=30+we(e[18],e[2]-40,e[43].seasonal_average))&&i(t,"cy",l),k[0]&1&&r!==(r=e[20].find(P).colour)&&i(t,"fill",r)},d(v){v&&_(t),o=!1,Ql(h)}}}function Al(e){let t=e[43][e[4]]>=0&&!isNaN(parseFloat(e[43][e[4]])),a,l=t&&Ll(e);return{c(){l&&l.c(),a=ye()},l(r){l&&l.l(r),a=ye()},m(r,o){l&&l.m(r,o),W(r,a,o)},p(r,o){o[0]&17&&(t=r[43][r[4]]>=0&&!isNaN(parseFloat(r[43][r[4]]))),t?l?l.p(r,o):(l=Ll(r),l.c(),l.m(a.parentNode,a)):l&&(l.d(1),l=null)},d(r){l&&l.d(r),r&&_(a)}}}function Ul(e){let t,a,l,r,o=e[17].city+"",h,P,w,v,k=Math.round(100*e[17].seasonal_average)+"",d,p,I,X,H=e[17][e[7]].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"",E,J,S;return{c(){t=me("foreignObject"),a=b("div"),l=b("p"),r=b("u"),h=O(o),P=U(),w=b("br"),v=O(` 
                        Recovery Rate: `),d=O(k),p=O(`%
                        `),I=b("br"),X=O(`
                        X-Value: `),E=O(H),this.h()},l(C){t=be(C,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var V=g(t);a=y(V,"DIV",{id:!0,style:!0,class:!0});var ne=g(a);l=y(ne,"P",{id:!0,style:!0,class:!0});var T=g(l);r=y(T,"U",{});var ie=g(r);h=D(ie,o),ie.forEach(_),P=G(T),w=y(T,"BR",{}),v=D(T,` 
                        Recovery Rate: `),d=D(T,k),p=D(T,`%
                        `),I=y(T,"BR",{}),X=D(T,`
                        X-Value: `),E=D(T,H),T.forEach(_),ne.forEach(_),V.forEach(_),this.h()},h(){i(l,"id","tooltip-p"),ct(l,"color",e[20].find(e[34]).text),i(l,"class","svelte-1b8om2r"),i(a,"id","tooltip"),ct(a,"background-color",e[20].find(e[35]).colour),i(a,"class","svelte-1b8om2r"),i(t,"x",J=(parseFloat(e[17][e[7]])<e[6]/2?0:-145)+55+Ee([0,e[6]],e[5],parseFloat(e[17][e[7]]))),i(t,"y",S=22+we(e[18],e[2]-40,e[17].seasonal_average)),i(t,"width","125"),i(t,"height","50")},m(C,V){W(C,t,V),s(t,a),s(a,l),s(l,r),s(r,h),s(l,P),s(l,w),s(l,v),s(l,d),s(l,p),s(l,I),s(l,X),s(l,E)},p(C,V){V[0]&131072&&o!==(o=C[17].city+"")&&Y(h,o),V[0]&131072&&k!==(k=Math.round(100*C[17].seasonal_average)+"")&&Y(d,k),V[0]&131200&&H!==(H=C[17][C[7]].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"")&&Y(E,H),V[0]&131072&&ct(l,"color",C[20].find(C[34]).text),V[0]&131072&&ct(a,"background-color",C[20].find(C[35]).colour),V[0]&131296&&J!==(J=(parseFloat(C[17][C[7]])<C[6]/2?0:-145)+55+Ee([0,C[6]],C[5],parseFloat(C[17][C[7]])))&&i(t,"x",J),V[0]&393220&&S!==(S=22+we(C[18],C[2]-40,C[17].seasonal_average))&&i(t,"y",S)},d(C){C&&_(t)}}}function ha(e){let t,a,l,r,o,h,P,w,v,k,d,p,I,X,H,E,J,S,C,V,ne,T,ie,q,le,L,Q,z,K,B,u,N,n,R,se,ke,ue,De,j,ce,pe,F,Ge,m,$,A,He,ae,Xe,Je,Ke,Qe,Ye,Ze,pt,Z,Pe,Ie,vt,dt,$e,gt,Fe,Se,mt,bt,xe,yt,Ve,Ne,wt,Et,Be=e[8].toFixed(3)+"",et,kt,Oe,Re,Ot,Dt,je=Bl(e[9])+"",tt,Pt,We=e[10].toFixed(2)+"",lt,Ft,Ce,Me,Vt,Ct,at,Tt,It,St,Nt,Rt,Mt,qt,zt,Lt,At,Yt,re;t=new Yl({}),F=new xl({props:{europe:"no"}}),m=new aa({});let qe=e[3].reverse(),x=[];for(let c=0;c<qe.length;c+=1)x[c]=Rl(Nl(e,qe,c));let Ut=[0,1,2,3,4],ve=[];for(let c=0;c<5;c+=1)ve[c]=Ml(Sl(e,Ut,c));let ze=e[0],ee=[];for(let c=0;c<ze.length;c+=1)ee[c]=zl(Il(e,ze,c));let Le=e[0],te=[];for(let c=0;c<Le.length;c+=1)te[c]=Al(Tl(e,Le,c));let oe=e[17]!=null&&Ul(e);return{c(){Gt(t.$$.fragment),a=U(),l=b("main"),r=b("div"),o=b("h1"),h=O("Downtown Recovery Correlations"),P=U(),w=b("p"),v=b("i"),k=O("Updated October 16, 2023"),d=U(),p=b("p"),I=O("This page plots downtown recovery rates (y-axis) relative to a number of other urban variables (x-axis). While these charts indicate bivariate relationships, and in some cases reveal potential correlations, they should be interpreted with caution as they do not imply direct causation."),X=U(),H=b("p"),E=O("The recovery metrics (y-axis) on these charts are based on a sample of mobile phone data. The recovery metrics on the charts and maps are computed by counting the number of unique visitors in a city's downtown area in the specified time period (standardized by region – see ‘Standardization’ section below), and then dividing it by the standardized number of unique visitors during the equivalent time period in 2019. Specifically, the rankings below compare the period from the beginning of March to mid-June in 2023 relative to the same period in 2019."),J=U(),S=b("p"),C=O("A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels. Click "),V=b("a"),ne=O("here"),T=O(" to download the y-axis data shown on this chart."),ie=U(),q=b("p"),le=O("The data on the x-axis comes from a variety of sources. The full dataset including all variables in the drop-down can be downloaded "),L=b("a"),Q=O("here"),z=O(". You may also wish to download a "),K=b("a"),B=O("data dictionary"),u=O(", which includes the names of data sources for each variable."),N=U(),n=b("p"),R=O("For more information, read our "),se=b("a"),ke=O("Methodology"),ue=O(" page."),De=U(),j=b("div"),ce=b("div"),pe=b("div"),Gt(F.$$.fragment),Ge=U(),Gt(m.$$.fragment),$=U(),A=me("svg");for(let c=0;c<x.length;c+=1)x[c].c();He=ye();for(let c=0;c<5;c+=1)ve[c].c();ae=me("line");for(let c=0;c<ee.length;c+=1)ee[c].c();Ye=ye();for(let c=0;c<te.length;c+=1)te[c].c();Ze=ye(),oe&&oe.c(),pt=U(),Z=b("div"),Pe=b("p"),Ie=b("i"),vt=O("X-Variable Name:"),dt=U(),$e=O(e[12]),gt=U(),Fe=b("p"),Se=b("i"),mt=O("Group:"),bt=U(),xe=O(e[14]),yt=U(),Ve=b("p"),Ne=b("i"),wt=O("Correlation Coefficient:"),Et=U(),et=O(Be),kt=U(),Oe=b("p"),Re=b("i"),Ot=O("Trend Line Formula"),Dt=O(": Recovery Rate (%) = "),tt=O(je),Pt=O(" X + "),lt=O(We),Ft=U(),Ce=b("p"),Me=b("i"),Vt=O("Data Source:"),Ct=U(),at=O(e[13]),Tt=U(),It=b("br"),St=U(),Nt=b("br"),Rt=U(),Mt=b("br"),qt=U(),zt=b("br"),Lt=U(),At=b("br"),this.h()},l(c){Bt(t.$$.fragment,c),a=G(c),l=y(c,"MAIN",{class:!0});var M=g(l);r=y(M,"DIV",{class:!0});var f=g(r);o=y(f,"H1",{});var fe=g(o);h=D(fe,"Downtown Recovery Correlations"),fe.forEach(_),P=G(f),w=y(f,"P",{});var Zt=g(w);v=y(Zt,"I",{});var $t=g(v);k=D($t,"Updated October 16, 2023"),$t.forEach(_),Zt.forEach(_),d=G(f),p=y(f,"P",{});var xt=g(p);I=D(xt,"This page plots downtown recovery rates (y-axis) relative to a number of other urban variables (x-axis). While these charts indicate bivariate relationships, and in some cases reveal potential correlations, they should be interpreted with caution as they do not imply direct causation."),xt.forEach(_),X=G(f),H=y(f,"P",{});var el=g(H);E=D(el,"The recovery metrics (y-axis) on these charts are based on a sample of mobile phone data. The recovery metrics on the charts and maps are computed by counting the number of unique visitors in a city's downtown area in the specified time period (standardized by region – see ‘Standardization’ section below), and then dividing it by the standardized number of unique visitors during the equivalent time period in 2019. Specifically, the rankings below compare the period from the beginning of March to mid-June in 2023 relative to the same period in 2019."),el.forEach(_),J=G(f),S=y(f,"P",{});var rt=g(S);C=D(rt,"A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels. Click "),V=y(rt,"A",{href:!0});var tl=g(V);ne=D(tl,"here"),tl.forEach(_),T=D(rt," to download the y-axis data shown on this chart."),rt.forEach(_),ie=G(f),q=y(f,"P",{});var Ae=g(q);le=D(Ae,"The data on the x-axis comes from a variety of sources. The full dataset including all variables in the drop-down can be downloaded "),L=y(Ae,"A",{href:!0});var ll=g(L);Q=D(ll,"here"),ll.forEach(_),z=D(Ae,". You may also wish to download a "),K=y(Ae,"A",{href:!0});var al=g(K);B=D(al,"data dictionary"),al.forEach(_),u=D(Ae,", which includes the names of data sources for each variable."),Ae.forEach(_),N=G(f),n=y(f,"P",{});var ot=g(n);R=D(ot,"For more information, read our "),se=y(ot,"A",{href:!0});var rl=g(se);ke=D(rl,"Methodology"),rl.forEach(_),ue=D(ot," page."),ot.forEach(_),f.forEach(_),De=G(M),j=y(M,"DIV",{id:!0,class:!0});var de=g(j);ce=y(de,"DIV",{id:!0,class:!0});var nt=g(ce);pe=y(nt,"DIV",{id:!0,class:!0});var ol=g(pe);Bt(F.$$.fragment,ol),ol.forEach(_),Ge=G(nt),Bt(m.$$.fragment,nt),nt.forEach(_),$=G(de),A=be(de,"svg",{height:!0,width:!0,id:!0,class:!0});var Te=g(A);for(let he=0;he<x.length;he+=1)x[he].l(Te);He=ye();for(let he=0;he<5;he+=1)ve[he].l(Te);ae=be(Te,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),g(ae).forEach(_);for(let he=0;he<ee.length;he+=1)ee[he].l(Te);Ye=ye();for(let he=0;he<te.length;he+=1)te[he].l(Te);Ze=ye(),oe&&oe.l(Te),Te.forEach(_),pt=G(de),Z=y(de,"DIV",{class:!0});var _e=g(Z);Pe=y(_e,"P",{});var it=g(Pe);Ie=y(it,"I",{class:!0});var nl=g(Ie);vt=D(nl,"X-Variable Name:"),nl.forEach(_),dt=G(it),$e=D(it,e[12]),it.forEach(_),gt=G(_e),Fe=y(_e,"P",{});var st=g(Fe);Se=y(st,"I",{class:!0});var il=g(Se);mt=D(il,"Group:"),il.forEach(_),bt=G(st),xe=D(st,e[14]),st.forEach(_),yt=G(_e),Ve=y(_e,"P",{});var ut=g(Ve);Ne=y(ut,"I",{class:!0});var sl=g(Ne);wt=D(sl,"Correlation Coefficient:"),sl.forEach(_),Et=G(ut),et=D(ut,Be),ut.forEach(_),kt=G(_e),Oe=y(_e,"P",{});var Ue=g(Oe);Re=y(Ue,"I",{class:!0});var ul=g(Re);Ot=D(ul,"Trend Line Formula"),ul.forEach(_),Dt=D(Ue,": Recovery Rate (%) = "),tt=D(Ue,je),Pt=D(Ue," X + "),lt=D(Ue,We),Ue.forEach(_),Ft=G(_e),Ce=y(_e,"P",{});var ht=g(Ce);Me=y(ht,"I",{class:!0});var hl=g(Me);Vt=D(hl,"Data Source:"),hl.forEach(_),Ct=G(ht),at=D(ht,e[13]),ht.forEach(_),Tt=G(_e),It=y(_e,"BR",{}),St=G(_e),Nt=y(_e,"BR",{}),_e.forEach(_),Rt=G(de),Mt=y(de,"BR",{}),qt=G(de),zt=y(de,"BR",{}),Lt=G(de),At=y(de,"BR",{}),de.forEach(_),M.forEach(_),this.h()},h(){i(V,"href","/recovery_rankings.csv"),i(L,"href","/variables_data.csv"),i(K,"href","/variables_data_dictionary.csv"),i(se,"href","/methodology"),i(r,"class","text"),i(pe,"id","options-region"),i(pe,"class","svelte-1b8om2r"),i(ce,"id","options"),i(ce,"class","svelte-1b8om2r"),i(ae,"x1",Xe=45+Ee([0,e[6]],e[5],parseFloat(e[11][0][0]))),i(ae,"y1",Je=30+we(e[18],e[2]-40,parseFloat(e[11][0][1]))),i(ae,"x2",Ke=45+Ee([0,e[6]],e[5],parseFloat(e[11][1][0]))),i(ae,"y2",Qe=30+we(e[18],e[2]-40,parseFloat(e[11][1][1]))),i(ae,"stroke","#D0D1C9"),i(ae,"stroke-width","1.5"),i(ae,"stroke-dasharray","4 2"),i(A,"height",e[2]),i(A,"width",e[1]),i(A,"id","chart"),i(A,"class","svelte-1b8om2r"),i(Ie,"class","italic"),i(Se,"class","italic"),i(Ne,"class","italic"),i(Re,"class","italic"),i(Me,"class","italic"),i(Z,"class","text"),i(j,"id","chart-wrapper"),i(j,"class","svelte-1b8om2r"),Jl(()=>e[36].call(j)),i(l,"class","svelte-1b8om2r")},m(c,M){jt(t,c,M),W(c,a,M),W(c,l,M),s(l,r),s(r,o),s(o,h),s(r,P),s(r,w),s(w,v),s(v,k),s(r,d),s(r,p),s(p,I),s(r,X),s(r,H),s(H,E),s(r,J),s(r,S),s(S,C),s(S,V),s(V,ne),s(S,T),s(r,ie),s(r,q),s(q,le),s(q,L),s(L,Q),s(q,z),s(q,K),s(K,B),s(q,u),s(r,N),s(r,n),s(n,R),s(n,se),s(se,ke),s(n,ue),s(l,De),s(l,j),s(j,ce),s(ce,pe),jt(F,pe,null),s(ce,Ge),jt(m,ce,null),s(j,$),s(j,A);for(let f=0;f<x.length;f+=1)x[f]&&x[f].m(A,null);s(A,He);for(let f=0;f<5;f+=1)ve[f]&&ve[f].m(A,null);s(A,ae);for(let f=0;f<ee.length;f+=1)ee[f]&&ee[f].m(A,null);s(A,Ye);for(let f=0;f<te.length;f+=1)te[f]&&te[f].m(A,null);s(A,Ze),oe&&oe.m(A,null),s(j,pt),s(j,Z),s(Z,Pe),s(Pe,Ie),s(Ie,vt),s(Pe,dt),s(Pe,$e),s(Z,gt),s(Z,Fe),s(Fe,Se),s(Se,mt),s(Fe,bt),s(Fe,xe),s(Z,yt),s(Z,Ve),s(Ve,Ne),s(Ne,wt),s(Ve,Et),s(Ve,et),s(Z,kt),s(Z,Oe),s(Oe,Re),s(Re,Ot),s(Oe,Dt),s(Oe,tt),s(Oe,Pt),s(Oe,lt),s(Z,Ft),s(Z,Ce),s(Ce,Me),s(Me,Vt),s(Ce,Ct),s(Ce,at),s(Z,Tt),s(Z,It),s(Z,St),s(Z,Nt),s(j,Rt),s(j,Mt),s(j,qt),s(j,zt),s(j,Lt),s(j,At),Yt=Kl(j,e[36].bind(j)),re=!0},p(c,M){if(M[0]&524298){qe=c[3].reverse();let f;for(f=0;f<qe.length;f+=1){const fe=Nl(c,qe,f);x[f]?x[f].p(fe,M):(x[f]=Rl(fe),x[f].c(),x[f].m(A,He))}for(;f<x.length;f+=1)x[f].d(1);x.length=qe.length}if(M[0]&98308){Ut=[0,1,2,3,4];let f;for(f=0;f<5;f+=1){const fe=Sl(c,Ut,f);ve[f]?ve[f].p(fe,M):(ve[f]=Ml(fe),ve[f].c(),ve[f].m(A,ae))}for(;f<5;f+=1)ve[f].d(1)}if((!re||M[0]&2144&&Xe!==(Xe=45+Ee([0,c[6]],c[5],parseFloat(c[11][0][0]))))&&i(ae,"x1",Xe),(!re||M[0]&264196&&Je!==(Je=30+we(c[18],c[2]-40,parseFloat(c[11][0][1]))))&&i(ae,"y1",Je),(!re||M[0]&2144&&Ke!==(Ke=45+Ee([0,c[6]],c[5],parseFloat(c[11][1][0]))))&&i(ae,"x2",Ke),(!re||M[0]&264196&&Qe!==(Qe=30+we(c[18],c[2]-40,parseFloat(c[11][1][1]))))&&i(ae,"y2",Qe),M[0]&262389){ze=c[0];let f;for(f=0;f<ze.length;f+=1){const fe=Il(c,ze,f);ee[f]?ee[f].p(fe,M):(ee[f]=zl(fe),ee[f].c(),ee[f].m(A,Ye))}for(;f<ee.length;f+=1)ee[f].d(1);ee.length=ze.length}if(M[0]&3539189){Le=c[0];let f;for(f=0;f<Le.length;f+=1){const fe=Tl(c,Le,f);te[f]?te[f].p(fe,M):(te[f]=Al(fe),te[f].c(),te[f].m(A,Ze))}for(;f<te.length;f+=1)te[f].d(1);te.length=Le.length}c[17]!=null?oe?oe.p(c,M):(oe=Ul(c),oe.c(),oe.m(A,null)):oe&&(oe.d(1),oe=null),(!re||M[0]&4)&&i(A,"height",c[2]),(!re||M[0]&2)&&i(A,"width",c[1]),(!re||M[0]&4096)&&Y($e,c[12]),(!re||M[0]&16384)&&Y(xe,c[14]),(!re||M[0]&256)&&Be!==(Be=c[8].toFixed(3)+"")&&Y(et,Be),(!re||M[0]&512)&&je!==(je=Bl(c[9])+"")&&Y(tt,je),(!re||M[0]&1024)&&We!==(We=c[10].toFixed(2)+"")&&Y(lt,We),(!re||M[0]&8192)&&Y(at,c[13])},i(c){re||(Wt(t.$$.fragment,c),Wt(F.$$.fragment,c),Wt(m.$$.fragment,c),re=!0)},o(c){Ht(t.$$.fragment,c),Ht(F.$$.fragment,c),Ht(m.$$.fragment,c),re=!1},d(c){Xt(t,c),c&&_(a),c&&_(l),Xt(F),Xt(m),ge(x,c),ge(ve,c),ge(ee,c),ge(te,c),oe&&oe.d(),Yt()}}}function Gl(e,t){let a=[];for(let l=0;l<=Math.ceil(e/t);l++)a.push(l*t);return a}function ca(e){const t=Math.pow(10,Math.floor(Math.log10(e)));return Math.ceil(e/t)*t}function we(e,t,a){return t-t*a/(e[1]-e[0])}function Ee(e,t,a){return t*a/(e[1]-e[0])}function fa(e,t,a,l,r,o){let h,P,w,v,k=e*a+t;k>=l&&k<=o?(h=a,P=k):e>0?(h=(l-t)/e,P=l):(h=(o-t)/e,P=o);let d=e*r+t;return d>=l&&d<=o?(w=r,v=d):e>0?(w=(o-t)/e,v=o):(w=(l-t)/e,v=l),[[h,P],[w,v]]}function Bl(e){return Math.abs(e)<.001?e.toExponential(2):Math.abs(e)>=1e3?e.toLocaleString(void 0,{maximumFractionDigits:0}):Math.abs(e)>=10?e.toFixed(2):e.toFixed(4)}function _a(e,t,a){let l,r,o,h,P;ft(e,Kt,m=>a(7,o=m)),ft(e,Zl,m=>a(30,h=m)),ft(e,$l,m=>a(39,P=m));let w=[],v=[],k=[],d=[],p=[],I=0,X,H=0,E=0,J=[[0,0],[1,1]],S="",C="",V="";const ne=P;async function T(){try{const $=await(await fetch("../recovery_rankings.csv")).text();a(22,w=_t($))}catch(m){console.error("Error loading CSV data:",m)}}async function ie(){try{const $=await(await fetch("../variables_data.csv")).text();a(23,v=_t($))}catch(m){console.error("Error loading CSV data:",m)}}async function q(){try{const $=await(await fetch("../variables_data_dictionary.csv")).text();a(25,p=_t($))}catch(m){console.error("Error loading CSV data:",m)}}Xl(()=>{T(),ie(),q()});let le,L=420,Q=1,z=[0,1],K,B=100,u=1,N=1,n=.1,R=1,se;const ke=function(m){m.clientX,m.clientY};let ue=[];const De=(m,$)=>$.name===m.region,j=(m,$)=>{a(17,se=m),ke($)},ce=()=>{a(17,se=void 0)},pe=m=>m.name===se.region,F=m=>m.name===se.region;function Ge(){le=this.offsetWidth,a(1,le)}return e.$$.update=()=>{e.$$.dirty[0]&1077936128&&a(24,k=w.filter(m=>h.includes(m.region)).sort((m,$)=>$.seasonal_average-m.seasonal_average)),e.$$.dirty[0]&25165824&&a(0,d=k.map(function(m){var $=v.find(function(A){return A.city===m.city});return Object.assign({},m,$)})),e.$$.dirty[0]&33554560&&a(13,C=p.length>0?p.filter(m=>m.value===o)[0].source:null),e.$$.dirty[0]&33554560&&a(12,S=p.length>0?p.filter(m=>m.value===o)[0].text:null),e.$$.dirty[0]&33554560&&a(14,V=p.length>0?p.filter(m=>m.value===o)[0].group:null),e.$$.dirty[0]&2&&a(2,L=le*.666),e.$$.dirty[0]&1&&a(27,Q=d.length!==0?d[0].seasonal_average:1),e.$$.dirty[0]&134217728&&a(27,Q=Q<1?1:Q),e.$$.dirty[0]&134217728&&(Q<2?a(3,z=Gl(Q,.2)):a(3,z=Gl(Q,.5))),e.$$.dirty[0]&12&&a(19,l=(L-40)/(z.length-1)),e.$$.dirty[0]&8&&a(18,r=[Math.min(...z),Math.max(...z)]),e.$$.dirty[0]&128&&a(4,K=o),e.$$.dirty[0]&2&&a(5,B=le-45-10),e.$$.dirty[0]&17&&a(28,u=Math.max(...d.map(m=>parseFloat(m[K])).filter(m=>!isNaN(m)))),e.$$.dirty[0]&268435456&&a(6,N=ca(u)),e.$$.dirty[0]&32&&a(15,n=B/4),e.$$.dirty[0]&64&&a(16,R=N/4),e.$$.dirty[0]&17&&a(29,ue=d.filter(m=>!isNaN(parseFloat(m[K])))),e.$$.dirty[0]&536870912&&console.log(ue),e.$$.dirty[0]&536870928&&a(8,I=ue.length>0?ua(ue.map(m=>parseFloat(m[K])),ue.map(m=>parseFloat(m.seasonal_average))):0),e.$$.dirty[0]&536870928&&a(26,X=ue.length>0?ra(ue.map(m=>[parseFloat(m[K]),parseFloat(m.seasonal_average)])):null),e.$$.dirty[0]&67108936&&a(11,J=X!==null?fa(X.m,X.b,0,0,N,Math.max(...z)):[[0,0],[1,1]]),e.$$.dirty[0]&67108864&&a(9,H=X!==null?100*X.m:0),e.$$.dirty[0]&67108864&&X!==null&&a(10,E=100*X.b)},[d,le,L,z,K,B,N,o,I,H,E,J,S,C,V,n,R,se,r,l,ne,ke,w,v,k,p,X,Q,u,ue,h,De,j,ce,pe,F,Ge]}class ya extends jl{constructor(t){super(),Wl(this,t,_a,ha,Hl,{},null,[-1,-1])}}export{ya as component,ba as universal};
