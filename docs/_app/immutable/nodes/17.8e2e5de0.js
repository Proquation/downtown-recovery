import{S as gt,i as yt,s as bt,y as St,a as l,k as s,q as a,z as _t,c as h,l as r,m as d,r as o,h as n,n as u,A as At,b as vt,C as e,D as Et,g as Ct,d as zt,B as Tt}from"../chunks/index.a4677e45.js";import{H as jt}from"../chunks/global.2cdf0447.js";const Dt=!0,Ut=Object.freeze(Object.defineProperty({__proto__:null,prerender:Dt},Symbol.toStringTag,{value:"Module"}));function It(wt){let w,L,m,t,U,R,X,q,Y,Z,H,ee,te,O,ae,oe,x,ie,ne,M,se,re,W,de,le,c,he,S,ce,pe,_,ue,fe,A,me,ve,E,we,ge,C,ye,be,Se,g,_e,z,Ae,Ee,T,Ce,ze,Te,B,je,De,$,Ie,ke,N,Pe,Ue,y,qe,j,He,Oe,xe,b,Me,D,We,Be,$e,G,Ne,Ge,I,Ve,k,Fe,Le,V,Je,F,J;return w=new jt({}),{c(){St(w.$$.fragment),L=l(),m=s("main"),t=s("div"),U=s("h1"),R=a("Methodology"),X=l(),q=s("p"),Y=a("The recovery metrics on this website are based on a sample of location-based mobility data derived from cell phones."),Z=l(),H=s("p"),ee=a("The recovery metrics on the charts and maps are computed by counting the number of unique visitors in a city's downtown area in the specified time period (standardized by region – see ‘Standardization’ section below), and then dividing it by the standardized number of unique visitors during the equivalent time period in 2019."),te=l(),O=s("p"),ae=a("A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels."),oe=l(),x=s("h2"),ie=a("Downtown Geography Selection"),ne=l(),M=s("p"),se=a('When we launched this project, the geography of what counts as "downtown" involved selecting zip codes (in the US) and Dissemination Areas (in Canada) with the highest job density.'),re=l(),W=s("p"),de=a("In our October 2023 update, we've improved these definitions to not rely as heavily on administrative or census boundaries, which often do not reflect the actual geographies of cities’ downtowns. To create these new definitions, we used jobs data to identify concentrations of jobs in individual city blocks and then drew a polygon around these clusters to represent downtown. (For more details, see below)."),le=l(),c=s("p"),he=a("Specifically, to create new geographic definitions of “downtown”, we used jobs data from 2019 ("),S=s("a"),ce=a("in the U.S."),pe=a(") and 2016 ("),_=s("a"),ue=a("in Canada"),fe=a("). We generated 1 randomly scattered point for every 100 jobs in each block (in the U.S.) or Dissemination Area (in Canada). We then applied the "),A=s("a"),me=a("HDBSCAN"),ve=a(" algorithm to each city individually to create clusters of points within the city, discarding the points designated as “noise” and tuning the parameters to select a cluster representing each city’s downtown. For this step, we validated these geographies using Google Maps, cities’ own definitions of their downtowns, our personal knowledge of certain cities, and Brookings’ 2023 "),E=s("a"),we=a("definitions of downtowns"),ge=a(" across the U.S. Next, we created a buffer around each point in the cluster and created a polygon from the spatial union of these buffers. Lastly, we formed a "),C=s("a"),ye=a("concave hull"),be=a(" around this polygon to create the final downtown area."),Se=l(),g=s("p"),_e=a("Click "),z=s("a"),Ae=a("here"),Ee=a(" to download a geojson file of the new downtown boundaries. Click "),T=s("a"),Ce=a("here"),ze=a(" to download a geojson file of our original zip-code defined downtowns."),Te=l(),B=s("h2"),je=a("Standardization"),De=l(),$=s("p"),Ie=a("Because fluctuations in unique device counts over time may reflect changes in sample sizes from data providers rather than actual changes in activity, we standardized the downtown counts using larger geographies. In our previous method, this was the state (in the U.S.) or province (in Canada). Our updated method instead standardizes the data using core based statistical areas (in the U.S.) and census metropolitan areas (in Canada). Standardization using these smaller areas results in more accurate recovery rates, since a city’s downtown is not affected by the activity patterns of other cities in the same state."),ke=l(),N=s("h2"),Pe=a("Data Providers & Imputation"),Ue=l(),y=s("p"),qe=a("Our mobile device data comes from "),j=s("a"),He=a("Spectus"),Oe=a(". They source data from multiple providers. One of these providers includes data for the entire study period; however, its sample size declines significantly during this period. A second provider has a significantly larger sample size, but does not include Canadian data before May 2021. We decided to use data from this second provider and impute pre-May 2021 data for Canada, relying on the assumption that differences between the two providers are similar in the US and in Canada."),xe=l(),b=s("p"),Me=a("The imputation model we employed is called Self-Attention-based Imputation for Time Series (SAITS). The "),D=s("a"),We=a("SAITS model"),Be=a(", which employs self-attention techniques, identifies relationships within time series data and imputes missing information based on observed trends. The model converts randomly selected observed values into missing values, predicts the missing values, and compares the predicted and original values to evaluate the accuracy of the model."),$e=l(),G=s("h2"),Ne=a("Website:"),Ge=l(),I=s("p"),Ve=a("This website was built using Svelte with a bit of D3 for the charts. Code is on "),k=s("a"),Fe=a("GitHub"),Le=l(),V=s("div"),Je=l(),F=s("div"),this.h()},l(p){_t(w.$$.fragment,p),L=h(p),m=r(p,"MAIN",{});var v=d(m);t=r(v,"DIV",{class:!0});var i=d(t);U=r(i,"H1",{});var Qe=d(U);R=o(Qe,"Methodology"),Qe.forEach(n),X=h(i),q=r(i,"P",{});var Re=d(q);Y=o(Re,"The recovery metrics on this website are based on a sample of location-based mobility data derived from cell phones."),Re.forEach(n),Z=h(i),H=r(i,"P",{});var Xe=d(H);ee=o(Xe,"The recovery metrics on the charts and maps are computed by counting the number of unique visitors in a city's downtown area in the specified time period (standardized by region – see ‘Standardization’ section below), and then dividing it by the standardized number of unique visitors during the equivalent time period in 2019."),Xe.forEach(n),te=h(i),O=r(i,"P",{});var Ye=d(O);ae=o(Ye,"A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels."),Ye.forEach(n),oe=h(i),x=r(i,"H2",{});var Ze=d(x);ie=o(Ze,"Downtown Geography Selection"),Ze.forEach(n),ne=h(i),M=r(i,"P",{});var et=d(M);se=o(et,'When we launched this project, the geography of what counts as "downtown" involved selecting zip codes (in the US) and Dissemination Areas (in Canada) with the highest job density.'),et.forEach(n),re=h(i),W=r(i,"P",{});var tt=d(W);de=o(tt,"In our October 2023 update, we've improved these definitions to not rely as heavily on administrative or census boundaries, which often do not reflect the actual geographies of cities’ downtowns. To create these new definitions, we used jobs data to identify concentrations of jobs in individual city blocks and then drew a polygon around these clusters to represent downtown. (For more details, see below)."),tt.forEach(n),le=h(i),c=r(i,"P",{});var f=d(c);he=o(f,"Specifically, to create new geographic definitions of “downtown”, we used jobs data from 2019 ("),S=r(f,"A",{href:!0});var at=d(S);ce=o(at,"in the U.S."),at.forEach(n),pe=o(f,") and 2016 ("),_=r(f,"A",{href:!0});var ot=d(_);ue=o(ot,"in Canada"),ot.forEach(n),fe=o(f,"). We generated 1 randomly scattered point for every 100 jobs in each block (in the U.S.) or Dissemination Area (in Canada). We then applied the "),A=r(f,"A",{href:!0});var it=d(A);me=o(it,"HDBSCAN"),it.forEach(n),ve=o(f," algorithm to each city individually to create clusters of points within the city, discarding the points designated as “noise” and tuning the parameters to select a cluster representing each city’s downtown. For this step, we validated these geographies using Google Maps, cities’ own definitions of their downtowns, our personal knowledge of certain cities, and Brookings’ 2023 "),E=r(f,"A",{href:!0});var nt=d(E);we=o(nt,"definitions of downtowns"),nt.forEach(n),ge=o(f," across the U.S. Next, we created a buffer around each point in the cluster and created a polygon from the spatial union of these buffers. Lastly, we formed a "),C=r(f,"A",{href:!0});var st=d(C);ye=o(st,"concave hull"),st.forEach(n),be=o(f," around this polygon to create the final downtown area."),f.forEach(n),Se=h(i),g=r(i,"P",{});var P=d(g);_e=o(P,"Click "),z=r(P,"A",{href:!0});var rt=d(z);Ae=o(rt,"here"),rt.forEach(n),Ee=o(P," to download a geojson file of the new downtown boundaries. Click "),T=r(P,"A",{href:!0});var dt=d(T);Ce=o(dt,"here"),dt.forEach(n),ze=o(P," to download a geojson file of our original zip-code defined downtowns."),P.forEach(n),Te=h(i),B=r(i,"H2",{});var lt=d(B);je=o(lt,"Standardization"),lt.forEach(n),De=h(i),$=r(i,"P",{});var ht=d($);Ie=o(ht,"Because fluctuations in unique device counts over time may reflect changes in sample sizes from data providers rather than actual changes in activity, we standardized the downtown counts using larger geographies. In our previous method, this was the state (in the U.S.) or province (in Canada). Our updated method instead standardizes the data using core based statistical areas (in the U.S.) and census metropolitan areas (in Canada). Standardization using these smaller areas results in more accurate recovery rates, since a city’s downtown is not affected by the activity patterns of other cities in the same state."),ht.forEach(n),ke=h(i),N=r(i,"H2",{});var ct=d(N);Pe=o(ct,"Data Providers & Imputation"),ct.forEach(n),Ue=h(i),y=r(i,"P",{});var K=d(y);qe=o(K,"Our mobile device data comes from "),j=r(K,"A",{href:!0});var pt=d(j);He=o(pt,"Spectus"),pt.forEach(n),Oe=o(K,". They source data from multiple providers. One of these providers includes data for the entire study period; however, its sample size declines significantly during this period. A second provider has a significantly larger sample size, but does not include Canadian data before May 2021. We decided to use data from this second provider and impute pre-May 2021 data for Canada, relying on the assumption that differences between the two providers are similar in the US and in Canada."),K.forEach(n),xe=h(i),b=r(i,"P",{});var Q=d(b);Me=o(Q,"The imputation model we employed is called Self-Attention-based Imputation for Time Series (SAITS). The "),D=r(Q,"A",{href:!0});var ut=d(D);We=o(ut,"SAITS model"),ut.forEach(n),Be=o(Q,", which employs self-attention techniques, identifies relationships within time series data and imputes missing information based on observed trends. The model converts randomly selected observed values into missing values, predicts the missing values, and compares the predicted and original values to evaluate the accuracy of the model."),Q.forEach(n),$e=h(i),G=r(i,"H2",{});var ft=d(G);Ne=o(ft,"Website:"),ft.forEach(n),Ge=h(i),I=r(i,"P",{});var Ke=d(I);Ve=o(Ke,"This website was built using Svelte with a bit of D3 for the charts. Code is on "),k=r(Ke,"A",{href:!0});var mt=d(k);Fe=o(mt,"GitHub"),mt.forEach(n),Ke.forEach(n),i.forEach(n),Le=h(v),V=r(v,"DIV",{class:!0}),d(V).forEach(n),Je=h(v),F=r(v,"DIV",{class:!0}),d(F).forEach(n),v.forEach(n),this.h()},h(){u(S,"href","https://lehd.ces.census.gov/data/"),u(_,"href","http://odesi2.scholarsportal.info/documentation/CENSUS/2016/cen16labour.html"),u(A,"href","https://scikit-learn.org/stable/modules/generated/sklearn.cluster.HDBSCAN.html"),u(E,"href","https://www.brookings.edu/articles/breaking-the-urban-doom-loop-the-future-of-downtowns-is-shared-prosperity/"),u(C,"href","https://shapely.readthedocs.io/en/stable/reference/shapely.concave_hull.html#shapely.concave_hull"),u(z,"href","/downtowns-hbscan.geojson"),u(T,"href","/downtowns-original.geojson"),u(j,"href","https://spectus.ai/"),u(D,"href","https://doi.org/10.1016/j.eswa.2023.119619"),u(k,"href","https://github.com/schoolofcities/downtown-recovery"),u(t,"class","text"),u(V,"class","text"),u(F,"class","text")},m(p,v){At(w,p,v),vt(p,L,v),vt(p,m,v),e(m,t),e(t,U),e(U,R),e(t,X),e(t,q),e(q,Y),e(t,Z),e(t,H),e(H,ee),e(t,te),e(t,O),e(O,ae),e(t,oe),e(t,x),e(x,ie),e(t,ne),e(t,M),e(M,se),e(t,re),e(t,W),e(W,de),e(t,le),e(t,c),e(c,he),e(c,S),e(S,ce),e(c,pe),e(c,_),e(_,ue),e(c,fe),e(c,A),e(A,me),e(c,ve),e(c,E),e(E,we),e(c,ge),e(c,C),e(C,ye),e(c,be),e(t,Se),e(t,g),e(g,_e),e(g,z),e(z,Ae),e(g,Ee),e(g,T),e(T,Ce),e(g,ze),e(t,Te),e(t,B),e(B,je),e(t,De),e(t,$),e($,Ie),e(t,ke),e(t,N),e(N,Pe),e(t,Ue),e(t,y),e(y,qe),e(y,j),e(j,He),e(y,Oe),e(t,xe),e(t,b),e(b,Me),e(b,D),e(D,We),e(b,Be),e(t,$e),e(t,G),e(G,Ne),e(t,Ge),e(t,I),e(I,Ve),e(I,k),e(k,Fe),e(m,Le),e(m,V),e(m,Je),e(m,F),J=!0},p:Et,i(p){J||(Ct(w.$$.fragment,p),J=!0)},o(p){zt(w.$$.fragment,p),J=!1},d(p){Tt(w,p),p&&n(L),p&&n(m)}}}class qt extends gt{constructor(w){super(),yt(this,w,null,It,bt,{})}}export{qt as component,Ut as universal};
