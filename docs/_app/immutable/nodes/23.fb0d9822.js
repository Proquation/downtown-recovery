import{S as Ft,i as Yt,s as Lt,F as lr,k as V,a as ue,l as R,m as Y,c as se,h as w,n as a,U as ke,b as B,C as M,P as qe,G as or,H as ir,I as ar,g as Ce,d as Fe,Q as Pe,E as bt,o as At,q as G,r as K,p as rt,u as Ve,L as Z,M as X,V as jt,R as In,W as ur,w as Jt,D as Ct,y as ut,e as De,z as st,K as sr,A as ft,O as fr,f as Nn,B as ct,v as Pn}from"../chunks/index.d6d9c1d5.js";import{H as cr}from"../chunks/global.80eaedab.js";import{r as qn,b as Vn,c as lt}from"../chunks/stores.4478413d.js";import"../chunks/transform.4d2927c0.js";import{i as Gt,g as Rn,h as hr,c as Kt,d as gr,f as _r,e as vt}from"../chunks/continuous.058ccb91.js";import{c as mr}from"../chunks/csv.3ac754ad.js";class kt extends Map{constructor(t,n=pr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,o]of t)this.set(r,o)}get(t){return super.get(xt(this,t))}has(t){return super.has(xt(this,t))}set(t,n){return super.set(dr(this,t),n)}delete(t){return super.delete(vr(this,t))}}function xt({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function dr({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function vr({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function pr(e){return e!==null&&typeof e=="object"?e.valueOf():e}function yr(e,...t){return wr(e,Gt,Gt,t)}function wr(e,t,n,r){return function o(l,i){if(i>=r.length)return n(l);const s=new kt,u=r[i++];let h=-1;for(const c of l){const g=u(c,++h,l),m=s.get(g);m?m.push(c):s.set(g,[c])}for(const[c,g]of s)s.set(c,o(g,i));return t(s)}(e,0)}const Dt=Math.PI,Ut=2*Dt,Ne=1e-6,Tr=Ut-Ne;function Bn(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Mr(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Bn;const n=10**t;return function(r){this._+=r[0];for(let o=1,l=r.length;o<l;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}class br{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Bn:Mr(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,o){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+o}`}bezierCurveTo(t,n,r,o,l,i){this._append`C${+t},${+n},${+r},${+o},${this._x1=+l},${this._y1=+i}`}arcTo(t,n,r,o,l){if(t=+t,n=+n,r=+r,o=+o,l=+l,l<0)throw new Error(`negative radius: ${l}`);let i=this._x1,s=this._y1,u=r-t,h=o-n,c=i-t,g=s-n,m=c*c+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(m>Ne)if(!(Math.abs(g*u-h*c)>Ne)||!l)this._append`L${this._x1=t},${this._y1=n}`;else{let f=r-i,v=o-s,_=u*u+h*h,y=f*f+v*v,C=Math.sqrt(_),U=Math.sqrt(m),S=l*Math.tan((Dt-Math.acos((_+m-y)/(2*C*U)))/2),W=S/U,x=S/C;Math.abs(W-1)>Ne&&this._append`L${t+W*c},${n+W*g}`,this._append`A${l},${l},0,0,${+(g*f>c*v)},${this._x1=t+x*u},${this._y1=n+x*h}`}}arc(t,n,r,o,l,i){if(t=+t,n=+n,r=+r,i=!!i,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(o),u=r*Math.sin(o),h=t+s,c=n+u,g=1^i,m=i?o-l:l-o;this._x1===null?this._append`M${h},${c}`:(Math.abs(this._x1-h)>Ne||Math.abs(this._y1-c)>Ne)&&this._append`L${h},${c}`,r&&(m<0&&(m=m%Ut+Ut),m>Tr?this._append`A${r},${r},0,1,${g},${t-s},${n-u}A${r},${r},0,1,${g},${this._x1=h},${this._y1=c}`:m>Ne&&this._append`A${r},${r},0,${+(m>=Dt)},${g},${this._x1=t+r*Math.cos(l)},${this._y1=n+r*Math.sin(l)}`)}rect(t,n,r,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+o}h${-r}Z`}toString(){return this._}}const $t=Symbol("implicit");function zn(){var e=new kt,t=[],n=[],r=$t;function o(l){let i=e.get(l);if(i===void 0){if(r!==$t)return r;e.set(l,i=t.push(l)-1)}return n[i%n.length]}return o.domain=function(l){if(!arguments.length)return t.slice();t=[],e=new kt;for(const i of l)e.has(i)||e.set(i,t.push(i)-1);return o},o.range=function(l){return arguments.length?(n=Array.from(l),o):n.slice()},o.unknown=function(l){return arguments.length?(r=l,o):r},o.copy=function(){return zn(t,n).unknown(r)},Rn.apply(o,arguments),o}function Cr(e,t){e=e.slice();var n=0,r=e.length-1,o=e[n],l=e[r],i;return l<o&&(i=n,n=r,r=i,i=o,o=l,l=i),e[n]=t.floor(o),e[r]=t.ceil(l),e}const pt=new Date,yt=new Date;function te(e,t,n,r){function o(l){return e(l=arguments.length===0?new Date:new Date(+l)),l}return o.floor=l=>(e(l=new Date(+l)),l),o.ceil=l=>(e(l=new Date(l-1)),t(l,1),e(l),l),o.round=l=>{const i=o(l),s=o.ceil(l);return l-i<s-l?i:s},o.offset=(l,i)=>(t(l=new Date(+l),i==null?1:Math.floor(i)),l),o.range=(l,i,s)=>{const u=[];if(l=o.ceil(l),s=s==null?1:Math.floor(s),!(l<i)||!(s>0))return u;let h;do u.push(h=new Date(+l)),t(l,s),e(l);while(h<l&&l<i);return u},o.filter=l=>te(i=>{if(i>=i)for(;e(i),!l(i);)i.setTime(i-1)},(i,s)=>{if(i>=i)if(s<0)for(;++s<=0;)for(;t(i,-1),!l(i););else for(;--s>=0;)for(;t(i,1),!l(i););}),n&&(o.count=(l,i)=>(pt.setTime(+l),yt.setTime(+i),e(pt),e(yt),Math.floor(n(pt,yt))),o.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?o.filter(r?i=>r(i)%l===0:i=>o.count(0,i)%l===0):o)),o}const ht=te(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ht.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?te(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ht);ht.range;const Ye=1e3,we=Ye*60,Le=we*60,Ae=Le*24,Ot=Ae*7,en=Ae*30,wt=Ae*365,Ge=te(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ye)},(e,t)=>(t-e)/Ye,e=>e.getUTCSeconds());Ge.range;const Wt=te(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ye)},(e,t)=>{e.setTime(+e+t*we)},(e,t)=>(t-e)/we,e=>e.getMinutes());Wt.range;const kr=te(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*we)},(e,t)=>(t-e)/we,e=>e.getUTCMinutes());kr.range;const Ht=te(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ye-e.getMinutes()*we)},(e,t)=>{e.setTime(+e+t*Le)},(e,t)=>(t-e)/Le,e=>e.getHours());Ht.range;const Dr=te(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Le)},(e,t)=>(t-e)/Le,e=>e.getUTCHours());Dr.range;const ot=te(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*we)/Ae,e=>e.getDate()-1);ot.range;const It=te(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ae,e=>e.getUTCDate()-1);It.range;const Ur=te(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ae,e=>Math.floor(e/Ae));Ur.range;function Be(e){return te(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*we)/Ot)}const dt=Be(0),gt=Be(1),Sr=Be(2),Er=Be(3),xe=Be(4),Fr=Be(5),Yr=Be(6);dt.range;gt.range;Sr.range;Er.range;xe.range;Fr.range;Yr.range;function ze(e){return te(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Ot)}const Zn=ze(0),_t=ze(1),Lr=ze(2),Ar=ze(3),$e=ze(4),Or=ze(5),Wr=ze(6);Zn.range;_t.range;Lr.range;Ar.range;$e.range;Or.range;Wr.range;const Nt=te(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Nt.range;const Hr=te(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Hr.range;const Oe=te(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Oe.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:te(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Oe.range;const Re=te(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Re.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:te(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Re.range;function Ir(e,t,n,r,o,l){const i=[[Ge,1,Ye],[Ge,5,5*Ye],[Ge,15,15*Ye],[Ge,30,30*Ye],[l,1,we],[l,5,5*we],[l,15,15*we],[l,30,30*we],[o,1,Le],[o,3,3*Le],[o,6,6*Le],[o,12,12*Le],[r,1,Ae],[r,2,2*Ae],[n,1,Ot],[t,1,en],[t,3,3*en],[e,1,wt]];function s(h,c,g){const m=c<h;m&&([h,c]=[c,h]);const f=g&&typeof g.range=="function"?g:u(h,c,g),v=f?f.range(h,+c+1):[];return m?v.reverse():v}function u(h,c,g){const m=Math.abs(c-h)/g,f=hr(([,,y])=>y).right(i,m);if(f===i.length)return e.every(Kt(h/wt,c/wt,g));if(f===0)return ht.every(Math.max(Kt(h,c,g),1));const[v,_]=i[m/i[f-1][2]<i[f][2]/m?f-1:f];return v.every(_)}return[s,u]}const[Nr,Pr]=Ir(Oe,Nt,dt,ot,Ht,Wt);function Tt(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Mt(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function et(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function qr(e){var t=e.dateTime,n=e.date,r=e.time,o=e.periods,l=e.days,i=e.shortDays,s=e.months,u=e.shortMonths,h=tt(o),c=nt(o),g=tt(l),m=nt(l),f=tt(i),v=nt(i),_=tt(s),y=nt(s),C=tt(u),U=nt(u),S={a:j,A:q,b:Te,B:k,c:null,d:an,e:an,f:sl,g:yl,G:Tl,H:il,I:al,j:ul,L:Xn,m:fl,M:cl,p:H,q:ee,Q:fn,s:cn,S:hl,u:gl,U:_l,V:ml,w:dl,W:vl,x:null,X:null,y:pl,Y:wl,Z:Ml,"%":sn},W={a:he,A:Me,b:We,B:P,c:null,d:un,e:un,f:Dl,g:Hl,G:Nl,H:bl,I:Cl,j:kl,L:jn,m:Ul,M:Sl,p:J,q:be,Q:fn,s:cn,S:El,u:Fl,U:Yl,V:Ll,w:Al,W:Ol,x:null,X:null,y:Wl,Y:Il,Z:Pl,"%":sn},x={a:_e,A:ve,b:Ue,B:pe,c:ye,d:ln,e:ln,f:nl,g:rn,G:nn,H:on,I:on,j:xr,L:tl,m:Kr,M:$r,p:ce,q:Gr,Q:ll,s:ol,S:el,u:Zr,U:Xr,V:Qr,w:zr,W:jr,x:Se,X:b,y:rn,Y:nn,Z:Jr,"%":rl};S.x=E(n,S),S.X=E(r,S),S.c=E(t,S),W.x=E(n,W),W.X=E(r,W),W.c=E(t,W);function E(T,F){return function(L){var d=[],re=-1,A=0,le=T.length,ae,me,$;for(L instanceof Date||(L=new Date(+L));++re<le;)T.charCodeAt(re)===37&&(d.push(T.slice(A,re)),(me=tn[ae=T.charAt(++re)])!=null?ae=T.charAt(++re):me=ae==="e"?" ":"0",($=F[ae])&&(ae=$(L,me)),d.push(ae),A=re+1);return d.push(T.slice(A,re)),d.join("")}}function Q(T,F){return function(L){var d=et(1900,void 0,1),re=fe(d,T,L+="",0),A,le;if(re!=L.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(d.s*1e3+("L"in d?d.L:0));if(F&&!("Z"in d)&&(d.Z=0),"p"in d&&(d.H=d.H%12+d.p*12),d.m===void 0&&(d.m="q"in d?d.q:0),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(A=Mt(et(d.y,0,1)),le=A.getUTCDay(),A=le>4||le===0?_t.ceil(A):_t(A),A=It.offset(A,(d.V-1)*7),d.y=A.getUTCFullYear(),d.m=A.getUTCMonth(),d.d=A.getUTCDate()+(d.w+6)%7):(A=Tt(et(d.y,0,1)),le=A.getDay(),A=le>4||le===0?gt.ceil(A):gt(A),A=ot.offset(A,(d.V-1)*7),d.y=A.getFullYear(),d.m=A.getMonth(),d.d=A.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),le="Z"in d?Mt(et(d.y,0,1)).getUTCDay():Tt(et(d.y,0,1)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+d.W*7-(le+5)%7:d.w+d.U*7-(le+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,Mt(d)):Tt(d)}}function fe(T,F,L,d){for(var re=0,A=F.length,le=L.length,ae,me;re<A;){if(d>=le)return-1;if(ae=F.charCodeAt(re++),ae===37){if(ae=F.charAt(re++),me=x[ae in tn?F.charAt(re++):ae],!me||(d=me(T,L,d))<0)return-1}else if(ae!=L.charCodeAt(d++))return-1}return d}function ce(T,F,L){var d=h.exec(F.slice(L));return d?(T.p=c.get(d[0].toLowerCase()),L+d[0].length):-1}function _e(T,F,L){var d=f.exec(F.slice(L));return d?(T.w=v.get(d[0].toLowerCase()),L+d[0].length):-1}function ve(T,F,L){var d=g.exec(F.slice(L));return d?(T.w=m.get(d[0].toLowerCase()),L+d[0].length):-1}function Ue(T,F,L){var d=C.exec(F.slice(L));return d?(T.m=U.get(d[0].toLowerCase()),L+d[0].length):-1}function pe(T,F,L){var d=_.exec(F.slice(L));return d?(T.m=y.get(d[0].toLowerCase()),L+d[0].length):-1}function ye(T,F,L){return fe(T,t,F,L)}function Se(T,F,L){return fe(T,n,F,L)}function b(T,F,L){return fe(T,r,F,L)}function j(T){return i[T.getDay()]}function q(T){return l[T.getDay()]}function Te(T){return u[T.getMonth()]}function k(T){return s[T.getMonth()]}function H(T){return o[+(T.getHours()>=12)]}function ee(T){return 1+~~(T.getMonth()/3)}function he(T){return i[T.getUTCDay()]}function Me(T){return l[T.getUTCDay()]}function We(T){return u[T.getUTCMonth()]}function P(T){return s[T.getUTCMonth()]}function J(T){return o[+(T.getUTCHours()>=12)]}function be(T){return 1+~~(T.getUTCMonth()/3)}return{format:function(T){var F=E(T+="",S);return F.toString=function(){return T},F},parse:function(T){var F=Q(T+="",!1);return F.toString=function(){return T},F},utcFormat:function(T){var F=E(T+="",W);return F.toString=function(){return T},F},utcParse:function(T){var F=Q(T+="",!0);return F.toString=function(){return T},F}}}var tn={"-":"",_:" ",0:"0"},ne=/^\s*\d+/,Vr=/^%/,Rr=/[\\^$*+?|[\]().{}]/g;function N(e,t,n){var r=e<0?"-":"",o=(r?-e:e)+"",l=o.length;return r+(l<n?new Array(n-l+1).join(t)+o:o)}function Br(e){return e.replace(Rr,"\\$&")}function tt(e){return new RegExp("^(?:"+e.map(Br).join("|")+")","i")}function nt(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function zr(e,t,n){var r=ne.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Zr(e,t,n){var r=ne.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Xr(e,t,n){var r=ne.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Qr(e,t,n){var r=ne.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function jr(e,t,n){var r=ne.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function nn(e,t,n){var r=ne.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function rn(e,t,n){var r=ne.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Jr(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Gr(e,t,n){var r=ne.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Kr(e,t,n){var r=ne.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function ln(e,t,n){var r=ne.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function xr(e,t,n){var r=ne.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function on(e,t,n){var r=ne.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function $r(e,t,n){var r=ne.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function el(e,t,n){var r=ne.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function tl(e,t,n){var r=ne.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function nl(e,t,n){var r=ne.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function rl(e,t,n){var r=Vr.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ll(e,t,n){var r=ne.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function ol(e,t,n){var r=ne.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function an(e,t){return N(e.getDate(),t,2)}function il(e,t){return N(e.getHours(),t,2)}function al(e,t){return N(e.getHours()%12||12,t,2)}function ul(e,t){return N(1+ot.count(Oe(e),e),t,3)}function Xn(e,t){return N(e.getMilliseconds(),t,3)}function sl(e,t){return Xn(e,t)+"000"}function fl(e,t){return N(e.getMonth()+1,t,2)}function cl(e,t){return N(e.getMinutes(),t,2)}function hl(e,t){return N(e.getSeconds(),t,2)}function gl(e){var t=e.getDay();return t===0?7:t}function _l(e,t){return N(dt.count(Oe(e)-1,e),t,2)}function Qn(e){var t=e.getDay();return t>=4||t===0?xe(e):xe.ceil(e)}function ml(e,t){return e=Qn(e),N(xe.count(Oe(e),e)+(Oe(e).getDay()===4),t,2)}function dl(e){return e.getDay()}function vl(e,t){return N(gt.count(Oe(e)-1,e),t,2)}function pl(e,t){return N(e.getFullYear()%100,t,2)}function yl(e,t){return e=Qn(e),N(e.getFullYear()%100,t,2)}function wl(e,t){return N(e.getFullYear()%1e4,t,4)}function Tl(e,t){var n=e.getDay();return e=n>=4||n===0?xe(e):xe.ceil(e),N(e.getFullYear()%1e4,t,4)}function Ml(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+N(t/60|0,"0",2)+N(t%60,"0",2)}function un(e,t){return N(e.getUTCDate(),t,2)}function bl(e,t){return N(e.getUTCHours(),t,2)}function Cl(e,t){return N(e.getUTCHours()%12||12,t,2)}function kl(e,t){return N(1+It.count(Re(e),e),t,3)}function jn(e,t){return N(e.getUTCMilliseconds(),t,3)}function Dl(e,t){return jn(e,t)+"000"}function Ul(e,t){return N(e.getUTCMonth()+1,t,2)}function Sl(e,t){return N(e.getUTCMinutes(),t,2)}function El(e,t){return N(e.getUTCSeconds(),t,2)}function Fl(e){var t=e.getUTCDay();return t===0?7:t}function Yl(e,t){return N(Zn.count(Re(e)-1,e),t,2)}function Jn(e){var t=e.getUTCDay();return t>=4||t===0?$e(e):$e.ceil(e)}function Ll(e,t){return e=Jn(e),N($e.count(Re(e),e)+(Re(e).getUTCDay()===4),t,2)}function Al(e){return e.getUTCDay()}function Ol(e,t){return N(_t.count(Re(e)-1,e),t,2)}function Wl(e,t){return N(e.getUTCFullYear()%100,t,2)}function Hl(e,t){return e=Jn(e),N(e.getUTCFullYear()%100,t,2)}function Il(e,t){return N(e.getUTCFullYear()%1e4,t,4)}function Nl(e,t){var n=e.getUTCDay();return e=n>=4||n===0?$e(e):$e.ceil(e),N(e.getUTCFullYear()%1e4,t,4)}function Pl(){return"+0000"}function sn(){return"%"}function fn(e){return+e}function cn(e){return Math.floor(+e/1e3)}var je,Gn,Kn;ql({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ql(e){return je=qr(e),Gn=je.format,Kn=je.parse,je.utcFormat,je.utcParse,je}function Vl(e){return new Date(e)}function Rl(e){return e instanceof Date?+e:+new Date(+e)}function xn(e,t,n,r,o,l,i,s,u,h){var c=gr(),g=c.invert,m=c.domain,f=h(".%L"),v=h(":%S"),_=h("%I:%M"),y=h("%I %p"),C=h("%a %d"),U=h("%b %d"),S=h("%B"),W=h("%Y");function x(E){return(u(E)<E?f:s(E)<E?v:i(E)<E?_:l(E)<E?y:r(E)<E?o(E)<E?C:U:n(E)<E?S:W)(E)}return c.invert=function(E){return new Date(g(E))},c.domain=function(E){return arguments.length?m(Array.from(E,Rl)):m().map(Vl)},c.ticks=function(E){var Q=m();return e(Q[0],Q[Q.length-1],E??10)},c.tickFormat=function(E,Q){return Q==null?x:h(Q)},c.nice=function(E){var Q=m();return(!E||typeof E.range!="function")&&(E=t(Q[0],Q[Q.length-1],E??10)),E?m(Cr(Q,E)):c},c.copy=function(){return _r(c,xn(e,t,n,r,o,l,i,s,u,h))},c}function Bl(){return Rn.apply(xn(Nr,Pr,Oe,Nt,dt,ot,Ht,Wt,Ge,Gn).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Je(e){return function(){return e}}function zl(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new br(t)}function Zl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $n(e){this._context=e}$n.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Xl(e){return new $n(e)}function Ql(e){return e[0]}function jl(e){return e[1]}function hn(e,t){var n=Je(!0),r=null,o=Xl,l=null,i=zl(s);e=typeof e=="function"?e:e===void 0?Ql:Je(e),t=typeof t=="function"?t:t===void 0?jl:Je(t);function s(u){var h,c=(u=Zl(u)).length,g,m=!1,f;for(r==null&&(l=o(f=i())),h=0;h<=c;++h)!(h<c&&n(g=u[h],h,u))===m&&((m=!m)?l.lineStart():l.lineEnd()),m&&l.point(+e(g,h,u),+t(g,h,u));if(f)return l=null,f+""||null}return s.x=function(u){return arguments.length?(e=typeof u=="function"?u:Je(+u),s):e},s.y=function(u){return arguments.length?(t=typeof u=="function"?u:Je(+u),s):t},s.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Je(!!u),s):n},s.curve=function(u){return arguments.length?(o=u,r!=null&&(l=o(r)),s):o},s.context=function(u){return arguments.length?(u==null?r=l=null:l=o(r=u),s):r},s}function er(e){this._context=e}er.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=gn(e),o=gn(t),l=0,i=1;i<n;++l,++i)this._context.bezierCurveTo(r[0][l],o[0][l],r[1][l],o[1][l],e[i],t[i]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function gn(e){var t,n=e.length-1,r,o=new Array(n),l=new Array(n),i=new Array(n);for(o[0]=0,l[0]=2,i[0]=e[0]+2*e[1],t=1;t<n-1;++t)o[t]=1,l[t]=4,i[t]=4*e[t]+2*e[t+1];for(o[n-1]=2,l[n-1]=7,i[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=o[t]/l[t-1],l[t]-=r,i[t]-=r*i[t-1];for(o[n-1]=i[n-1]/l[n-1],t=n-2;t>=0;--t)o[t]=(i[t]-o[t+1])/l[t];for(l[n-1]=(e[n]+o[n-1])/2,t=0;t<n-1;++t)l[t]=2*e[t+1]-o[t+1];return[o,l]}function _n(e){return new er(e)}const Jl=!0,co=Object.freeze(Object.defineProperty({__proto__:null,prerender:Jl},Symbol.toStringTag,{value:"Module"}));function mn(e,t,n){const r=e.slice();return r[29]=t[n],r}function dn(e,t,n){const r=e.slice();return r[32]=t[n],r}function vn(e){let t,n,r,o;return{c(){t=V("div"),n=Z("svg"),r=Z("path"),this.h()},l(l){t=R(l,"DIV",{class:!0,title:!0});var i=Y(t);n=X(i,"svg",{class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0});var s=Y(n);r=X(s,"path",{d:!0,class:!0}),Y(r).forEach(w),s.forEach(w),i.forEach(w),this.h()},h(){a(r,"d",tr),a(r,"class","svelte-smcvhs"),a(n,"class","icon-clear svelte-smcvhs"),a(n,"xmlns","http://www.w3.org/2000/svg"),a(n,"width","18"),a(n,"height","18"),a(n,"viewBox","0 0 24 24"),a(t,"class","token-remove svelte-smcvhs"),a(t,"title",o="Remove "+e[32].name)},m(l,i){B(l,t,i),M(t,n),M(n,r)},p(l,i){i[0]&32&&o!==(o="Remove "+l[32].name)&&a(t,"title",o)},d(l){l&&w(t)}}}function pn(e){let t,n,r=e[32].name+"",o,l,i,s=!e[1]&&vn(e);return{c(){t=V("div"),n=V("span"),o=G(r),l=ue(),s&&s.c(),this.h()},l(u){t=R(u,"DIV",{class:!0,"data-id":!0,style:!0});var h=Y(t);n=R(h,"SPAN",{});var c=Y(n);o=K(c,r),c.forEach(w),l=se(h),s&&s.l(h),h.forEach(w),this.h()},h(){a(t,"class","token svelte-smcvhs"),a(t,"data-id",i=e[32].value),rt(t,"background-color",e[11](e[32].value)),rt(t,"color",e[12](e[32].value))},m(u,h){B(u,t,h),M(t,n),M(n,o),M(t,l),s&&s.m(t,null)},p(u,h){h[0]&32&&r!==(r=u[32].name+"")&&Ve(o,r),u[1]?s&&(s.d(1),s=null):s?s.p(u,h):(s=vn(u),s.c(),s.m(t,null)),h[0]&32&&i!==(i=u[32].value)&&a(t,"data-id",i),h[0]&32&&rt(t,"background-color",u[11](u[32].value)),h[0]&32&&rt(t,"color",u[12](u[32].value))},d(u){u&&w(t),s&&s.d()}}}function yn(e){let t,n,r,o,l,i,s,u,h,c;return{c(){t=V("input"),n=ue(),r=V("div"),o=Z("svg"),l=Z("path"),i=ue(),s=Z("svg"),u=Z("path"),this.h()},l(g){t=R(g,"INPUT",{id:!0,autocomplete:!0,placeholder:!0,class:!0}),n=se(g),r=R(g,"DIV",{class:!0,title:!0});var m=Y(r);o=X(m,"svg",{class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0});var f=Y(o);l=X(f,"path",{d:!0,class:!0}),Y(l).forEach(w),f.forEach(w),m.forEach(w),i=se(g),s=X(g,"svg",{class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0});var v=Y(s);u=X(v,"path",{d:!0,class:!0}),Y(u).forEach(w),v.forEach(w),this.h()},h(){a(t,"id",e[0]),a(t,"autocomplete","off"),a(t,"placeholder",e[2]),a(t,"class","svelte-smcvhs"),a(l,"d",tr),a(l,"class","svelte-smcvhs"),a(o,"class","icon-clear svelte-smcvhs"),a(o,"xmlns","http://www.w3.org/2000/svg"),a(o,"width","18"),a(o,"height","18"),a(o,"viewBox","0 0 24 24"),a(r,"class","remove-all svelte-smcvhs"),a(r,"title","Remove All"),ke(r,"hidden",!Object.keys(e[5]).length),a(u,"d","M5 8l4 4 4-4z"),a(u,"class","svelte-smcvhs"),a(s,"class","dropdown-arrow svelte-smcvhs"),a(s,"xmlns","http://www.w3.org/2000/svg"),a(s,"width","18"),a(s,"height","18"),a(s,"viewBox","0 0 18 18")},m(g,m){B(g,t,m),jt(t,e[3]),e[22](t),B(g,n,m),B(g,r,m),M(r,o),M(o,l),B(g,i,m),B(g,s,m),M(s,u),h||(c=[qe(t,"input",e[21]),qe(t,"keyup",e[10]),qe(t,"blur",e[13])],h=!0)},p(g,m){m[0]&1&&a(t,"id",g[0]),m[0]&4&&a(t,"placeholder",g[2]),m[0]&8&&t.value!==g[3]&&jt(t,g[3]),m[0]&32&&ke(r,"hidden",!Object.keys(g[5]).length)},d(g){g&&w(t),e[22](null),g&&w(n),g&&w(r),g&&w(i),g&&w(s),h=!1,In(c)}}}function wn(e){let t,n,r,o=e[6],l=[];for(let i=0;i<o.length;i+=1)l[i]=Tn(mn(e,o,i));return{c(){t=V("ul");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){t=R(i,"UL",{class:!0});var s=Y(t);for(let u=0;u<l.length;u+=1)l[u].l(s);s.forEach(w),this.h()},h(){a(t,"class","options svelte-smcvhs")},m(i,s){B(i,t,s);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(t,null);n||(r=qe(t,"mousedown",ur(e[15])),n=!0)},p(i,s){if(s[0]&112){o=i[6];let u;for(u=0;u<o.length;u+=1){const h=mn(i,o,u);l[u]?l[u].p(h,s):(l[u]=Tn(h),l[u].c(),l[u].m(t,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=o.length}},d(i){i&&w(t),Pe(l,i),n=!1,r()}}}function Tn(e){let t,n=e[29].name+"",r,o;return{c(){t=V("li"),r=G(n),this.h()},l(l){t=R(l,"LI",{"data-value":!0,class:!0});var i=Y(t);r=K(i,n),i.forEach(w),this.h()},h(){a(t,"data-value",o=e[29].value),a(t,"class","svelte-smcvhs"),ke(t,"selected",e[5][e[29].value]),ke(t,"active",e[4]===e[29])},m(l,i){B(l,t,i),M(t,r)},p(l,i){i[0]&64&&n!==(n=l[29].name+"")&&Ve(r,n),i[0]&64&&o!==(o=l[29].value)&&a(t,"data-value",o),i[0]&96&&ke(t,"selected",l[5][l[29].value]),i[0]&80&&ke(t,"active",l[4]===l[29])},d(l){l&&w(t)}}}function Gl(e){let t,n,r,o,l,i,s,u,h,c,g=Object.values(e[5]),m=[];for(let C=0;C<g.length;C+=1)m[C]=pn(dn(e,g,C));let f=!e[1]&&yn(e);const v=e[20].default,_=lr(v,e,e[19],null);let y=e[8]&&wn(e);return{c(){t=V("div"),n=V("div");for(let C=0;C<m.length;C+=1)m[C].c();r=ue(),o=V("div"),f&&f.c(),l=ue(),i=V("select"),_&&_.c(),s=ue(),y&&y.c(),this.h()},l(C){t=R(C,"DIV",{class:!0});var U=Y(t);n=R(U,"DIV",{class:!0});var S=Y(n);for(let E=0;E<m.length;E+=1)m[E].l(S);r=se(S),o=R(S,"DIV",{class:!0});var W=Y(o);f&&f.l(W),W.forEach(w),S.forEach(w),l=se(U),i=R(U,"SELECT",{type:!0,class:!0});var x=Y(i);_&&_.l(x),x.forEach(w),s=se(U),y&&y.l(U),U.forEach(w),this.h()},h(){a(o,"class","actions svelte-smcvhs"),a(n,"class","tokens svelte-smcvhs"),ke(n,"showOptions",e[8]),a(i,"type","multiple"),a(i,"class","hidden svelte-smcvhs"),a(t,"class","multiselect svelte-smcvhs"),ke(t,"readonly",e[1])},m(C,U){B(C,t,U),M(t,n);for(let S=0;S<m.length;S+=1)m[S]&&m[S].m(n,null);M(n,r),M(n,o),f&&f.m(o,null),M(t,l),M(t,i),_&&_.m(i,null),e[23](i),M(t,s),y&&y.m(t,null),u=!0,h||(c=qe(n,"click",e[14]),h=!0)},p(C,U){if(U[0]&6178){g=Object.values(C[5]);let S;for(S=0;S<g.length;S+=1){const W=dn(C,g,S);m[S]?m[S].p(W,U):(m[S]=pn(W),m[S].c(),m[S].m(n,r))}for(;S<m.length;S+=1)m[S].d(1);m.length=g.length}C[1]?f&&(f.d(1),f=null):f?f.p(C,U):(f=yn(C),f.c(),f.m(o,null)),(!u||U[0]&256)&&ke(n,"showOptions",C[8]),_&&_.p&&(!u||U[0]&524288)&&or(_,v,C,C[19],u?ar(v,C[19],U,null):ir(C[19]),null),C[8]?y?y.p(C,U):(y=wn(C),y.c(),y.m(t,null)):y&&(y.d(1),y=null),(!u||U[0]&2)&&ke(t,"readonly",C[1])},i(C){u||(Ce(_,C),u=!0)},o(C){Fe(_,C),u=!1},d(C){C&&w(t),Pe(m,C),f&&f.d(),_&&_.d(C),e[23](null),y&&y.d(),h=!1,c()}}}const tr="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z";function Kl(e,t,n){let r,o;bt(e,qn,b=>n(24,o=b));let{$$slots:l={},$$scope:i}=t,{id:s=""}=t,{value:u=[]}=t,{readonly:h=!1}=t,{placeholder:c=" Select cities..."}=t,g,m,f=[],v,_=!1,y={},C=!0,U;const S=o;At(()=>{U.querySelectorAll("option").forEach(b=>{b.selected&&!u.includes(b.value)&&n(16,u=[...u,b.value]),n(17,f=[...f,{value:b.value,name:b.textContent}])}),u&&n(5,y=f.reduce((b,j)=>u.includes(j.value)?{...b,[j.value]:j}:b,{})),n(18,C=!1)});function W(b){h||n(5,y[b.value]=b,y)}function x(b){if(!h){const{[b]:j,...q}=y;n(5,y=q)}}function E(b){h||(typeof b=="boolean"?(n(8,_=b),b&&g.focus()):n(8,_=!_),_||n(4,v=void 0))}function Q(b){if(b.keyCode===13&&(Object.keys(y).includes(v.value)?x(v.value):W(v),n(3,m="")),[38,40].includes(b.keyCode)){const j=b.keyCode===38?-1:1,q=r.indexOf(v)+j;n(4,v=q<0?r[r.length-1]:q===r.length?r[0]:r[q])}}function fe(b){return S.find(j=>j.name===lt.filter(q=>q.display_title===b)[0].region).colour}function ce(b){return S.find(j=>j.name===lt.filter(q=>q.display_title===b)[0].region).text}function _e(b){E(!1)}function ve(b){b.target.closest(".token-remove")?(b.stopPropagation(),x(b.target.closest(".token").dataset.id)):b.target.closest(".remove-all")?(n(5,y=[]),n(3,m="")):E(!0)}function Ue(b){const j=b.target.dataset.value;y[j]?x(j):(W(f.filter(q=>q.value===j)[0]),g.focus())}function pe(){m=this.value,n(3,m)}function ye(b){Jt[b?"unshift":"push"](()=>{g=b,n(7,g)})}function Se(b){Jt[b?"unshift":"push"](()=>{U=b,n(9,U)})}return e.$$set=b=>{"id"in b&&n(0,s=b.id),"value"in b&&n(16,u=b.value),"readonly"in b&&n(1,h=b.readonly),"placeholder"in b&&n(2,c=b.placeholder),"$$scope"in b&&n(19,i=b.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&262176&&(C||n(16,u=Object.values(y).map(b=>b.value))),e.$$.dirty[0]&131080&&n(6,r=f.filter(b=>m?b.name.toLowerCase().includes(m.toLowerCase()):b)),e.$$.dirty[0]&88&&(v&&!r.includes(v)||!v&&m)&&n(4,v=r[0]),e.$$.dirty[0]&65536&&Vn.set(u)},[s,h,c,m,v,y,r,g,_,U,Q,fe,ce,_e,ve,Ue,u,f,C,i,l,pe,ye,Se]}class xl extends Ft{constructor(t){super(),Yt(this,t,Kl,Gl,Lt,{id:0,value:16,readonly:1,placeholder:2},null,[-1,-1])}}function Mn(e){let t,n;return{c(){t=Z("text"),n=G(e[7]),this.h()},l(r){t=X(r,"text",{x:!0,y:!0,"alignment-baseline":!0,"font-size":!0,fill:!0});var o=Y(t);n=K(o,e[7]),o.forEach(w),this.h()},h(){a(t,"x",Ke+3),a(t,"y",Ee),a(t,"alignment-baseline","middle"),a(t,"font-size","14"),a(t,"fill",e[5])},m(r,o){B(r,t,o),M(t,n)},p(r,o){o&128&&Ve(n,r[7]),o&32&&a(t,"fill",r[5])},d(r){r&&w(t)}}}function $l(e){let t,n,r,o,l,i,s,u,h,c=e[3]!==void 0?": "+e[3].toLocaleString():"",g,m,f,v=e[7]!==void 0&&Mn(e);return{c(){t=Z("svg"),n=Z("rect"),v&&v.c(),o=Z("g"),l=Z("line"),u=Z("text"),h=G(e[2]),g=G(c),this.h()},l(_){t=X(_,"svg",{x:!0,y:!0,width:!0,height:!0,id:!0});var y=Y(t);n=X(y,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),Y(n).forEach(w),v&&v.l(y),o=X(y,"g",{});var C=Y(o);l=X(C,"line",{x1:!0,x2:!0,y1:!0,y2:!0}),Y(l).forEach(w),u=X(C,"text",{x:!0,y:!0,"alignment-baseline":!0,"font-size":!0,fill:!0,class:!0});var U=Y(u);h=K(U,e[2]),g=K(U,c),U.forEach(w),C.forEach(w),y.forEach(w),this.h()},h(){a(n,"x","1"),a(n,"y","1"),a(n,"width",e[8]),a(n,"height",r=(e[2].length+1+(e[7]!==void 0?1:0))*Ee),a(n,"fill",e[4]),a(n,"opacity",e[6]),a(l,"x1",Ke),a(l,"x2",Ke+mt),a(l,"y1",i=(1+(e[7]!==void 0?1:0))*Ee-1),a(l,"y2",s=(1+(e[7]!==void 0?1:0))*Ee-1),a(u,"x",Ke+mt+St),a(u,"y",m=(1+(e[7]!==void 0?1:0))*Ee),a(u,"alignment-baseline","middle"),a(u,"font-size","14"),a(u,"fill",e[5]),a(u,"class","legend-labels"),a(t,"x",e[0]),a(t,"y",e[1]),a(t,"width",f=e[8]+2),a(t,"height","25"),a(t,"id",nr)},m(_,y){B(_,t,y),M(t,n),v&&v.m(t,null),M(t,o),M(o,l),M(o,u),M(u,h),M(u,g)},p(_,[y]){y&256&&a(n,"width",_[8]),y&132&&r!==(r=(_[2].length+1+(_[7]!==void 0?1:0))*Ee)&&a(n,"height",r),y&16&&a(n,"fill",_[4]),y&64&&a(n,"opacity",_[6]),_[7]!==void 0?v?v.p(_,y):(v=Mn(_),v.c(),v.m(t,o)):v&&(v.d(1),v=null),y&128&&i!==(i=(1+(_[7]!==void 0?1:0))*Ee-1)&&a(l,"y1",i),y&128&&s!==(s=(1+(_[7]!==void 0?1:0))*Ee-1)&&a(l,"y2",s),y&4&&Ve(h,_[2]),y&8&&c!==(c=_[3]!==void 0?": "+_[3].toLocaleString():"")&&Ve(g,c),y&128&&m!==(m=(1+(_[7]!==void 0?1:0))*Ee)&&a(u,"y",m),y&32&&a(u,"fill",_[5]),y&1&&a(t,"x",_[0]),y&2&&a(t,"y",_[1]),y&256&&f!==(f=_[8]+2)&&a(t,"width",f)},i:Ct,o:Ct,d(_){_&&w(t),v&&v.d()}}}const Ee=18,Ke=5,bn=5,mt=10,St=3,nr="svg-legend";function eo(e,t,n){let{x:r}=t,{y:o}=t,{labels:l}=t,{values:i}=t,{width:s=150}=t,{backgroundColor:u="white"}=t,{textColor:h="black"}=t,{opacity:c=.89}=t,{title:g}=t,{adaptTexts:m=!0}=t;const f=s-Ke-mt-St-bn;let v=s;return At(async()=>{const _=document.getElementById(nr).getElementsByClassName("legend-labels"),C=[...Array(_.length).keys()].map(U=>({id:U,width:_[U].getBoundingClientRect().width})).filter(U=>U.width>f);if(C.length!==0)if(m)C.map(U=>{const S=_[U.id].textContent,W=Math.floor(f*S.length/U.width)-3;_[U.id].textContent=S.slice(0,W).trim()+"..."});else{const U=Math.max(...C.map(S=>S.width));n(8,v=Ke+mt+St+U+bn)}}),e.$$set=_=>{"x"in _&&n(0,r=_.x),"y"in _&&n(1,o=_.y),"labels"in _&&n(2,l=_.labels),"values"in _&&n(3,i=_.values),"width"in _&&n(9,s=_.width),"backgroundColor"in _&&n(4,u=_.backgroundColor),"textColor"in _&&n(5,h=_.textColor),"opacity"in _&&n(6,c=_.opacity),"title"in _&&n(7,g=_.title),"adaptTexts"in _&&n(10,m=_.adaptTexts)},[r,o,l,i,u,h,c,g,v,s,m]}class Cn extends Ft{constructor(t){super(),Yt(this,t,eo,$l,Lt,{x:0,y:1,labels:2,values:3,width:9,backgroundColor:4,textColor:5,opacity:6,title:7,adaptTexts:10})}}function kn(e,t,n){const r=e.slice();return r[34]=t[n],r[36]=n,r}function Dn(e,t,n){const r=e.slice();return r[34]=t[n],r[36]=n,r}function Un(e,t,n){const r=e.slice();return r[38]=t[n],r[36]=n,r}function Sn(e,t,n){const r=e.slice();return r[40]=t[n],r[36]=n,r}function En(e,t,n){const r=e.slice();return r[42]=t[n],r}function Fn(e){let t,n=e[42].display_title+"",r;return{c(){t=V("option"),r=G(n),this.h()},l(o){t=R(o,"OPTION",{});var l=Y(t);r=K(l,n),l.forEach(w),this.h()},h(){t.__value=e[42].display_title,t.value=t.__value},m(o,l){B(o,t,l),M(t,r)},p:Ct,d(o){o&&w(t)}}}function to(e){let t,n=lt,r=[];for(let o=0;o<n.length;o+=1)r[o]=Fn(En(e,n,o));return{c(){for(let o=0;o<r.length;o+=1)r[o].c();t=De()},l(o){for(let l=0;l<r.length;l+=1)r[l].l(o);t=De()},m(o,l){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(o,l);B(o,t,l)},p(o,l){if(l&0){n=lt;let i;for(i=0;i<n.length;i+=1){const s=En(o,n,i);r[i]?r[i].p(s,l):(r[i]=Fn(s),r[i].c(),r[i].m(t.parentNode,t))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(o){Pe(r,o),o&&w(t)}}}function Yn(e){let t,n,r,o,l,i=(100*e[40]).toFixed(0)+"",s,u,h,c,g,m;return{c(){t=Z("line"),l=Z("text"),s=G(i),u=G("%"),c=Z("line"),this.h()},l(f){t=X(f,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),Y(t).forEach(w),l=X(f,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var v=Y(l);s=K(v,i),u=K(v,"%"),v.forEach(w),c=X(f,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),Y(c).forEach(w),this.h()},h(){a(t,"class","grid svelte-tqmeai"),a(t,"x1",40),a(t,"y1",n=e[13].bottom+e[36]*e[10]),a(t,"x2",r=e[2]-e[13].right),a(t,"y2",o=e[13].bottom+e[36]*e[10]),a(l,"class","axis-label svelte-tqmeai"),a(l,"x",e[13].left+25),a(l,"y",h=e[13].bottom+e[36]*e[10]),a(l,"text-anchor","end"),a(c,"class","grid-white svelte-tqmeai"),a(c,"x1","37"),a(c,"y1",g=e[13].bottom+e[36]*e[10]),a(c,"x2","45"),a(c,"y2",m=e[13].bottom+e[36]*e[10])},m(f,v){B(f,t,v),B(f,l,v),M(l,s),M(l,u),B(f,c,v)},p(f,v){v[0]&1024&&n!==(n=f[13].bottom+f[36]*f[10])&&a(t,"y1",n),v[0]&4&&r!==(r=f[2]-f[13].right)&&a(t,"x2",r),v[0]&1024&&o!==(o=f[13].bottom+f[36]*f[10])&&a(t,"y2",o),v[0]&16&&i!==(i=(100*f[40]).toFixed(0)+"")&&Ve(s,i),v[0]&1024&&h!==(h=f[13].bottom+f[36]*f[10])&&a(l,"y",h),v[0]&1024&&g!==(g=f[13].bottom+f[36]*f[10])&&a(c,"y1",g),v[0]&1024&&m!==(m=f[13].bottom+f[36]*f[10])&&a(c,"y2",m)},d(f){f&&w(t),f&&w(l),f&&w(c)}}}function Ln(e){let t,n=e[15](e[38])+"",r,o,l,i,s,u,h;return{c(){t=Z("text"),r=G(n),i=Z("line"),this.h()},l(c){t=X(c,"text",{style:!0,class:!0,x:!0,y:!0,"text-anchor":!0});var g=Y(t);r=K(g,n),g.forEach(w),i=X(c,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),Y(i).forEach(w),this.h()},h(){rt(t,"white-space","pre"),a(t,"class","axis-label svelte-tqmeai"),a(t,"x",o=e[5](e[38])),a(t,"y",l=e[3]+15),a(t,"text-anchor","end"),a(i,"class","grid-white svelte-tqmeai"),a(i,"x1",s=e[5](e[38])),a(i,"y1",e[3]),a(i,"x2",u=e[5](e[38])),a(i,"y2",h=e[3]-8)},m(c,g){B(c,t,g),M(t,r),B(c,i,g)},p(c,g){g[0]&128&&n!==(n=c[15](c[38])+"")&&Ve(r,n),g[0]&160&&o!==(o=c[5](c[38]))&&a(t,"x",o),g[0]&8&&l!==(l=c[3]+15)&&a(t,"y",l),g[0]&160&&s!==(s=c[5](c[38]))&&a(i,"x1",s),g[0]&8&&a(i,"y1",c[3]),g[0]&160&&u!==(u=c[5](c[38]))&&a(i,"x2",u),g[0]&8&&h!==(h=c[3]-8)&&a(i,"y2",h)},d(c){c&&w(t),c&&w(i)}}}function no(e){let t,n,r;return{c(){t=Z("path"),this.h()},l(o){t=X(o,"path",{d:!0,"stroke-width":!0,stroke:!0,fill:!0}),Y(t).forEach(w),this.h()},h(){a(t,"d",n=hn().x(e[22]).y(e[23]).curve(_n)(e[34].flat())),a(t,"stroke-width","2"),a(t,"stroke",r=e[6][e[34][0].display_title].colour),a(t,"fill","transparent")},m(o,l){B(o,t,l)},p(o,l){l[0]&554&&n!==(n=hn().x(o[22]).y(o[23]).curve(_n)(o[34].flat()))&&a(t,"d",n),l[0]&66&&r!==(r=o[6][o[34][0].display_title].colour)&&a(t,"stroke",r)},d(o){o&&w(t)}}}function An(e){let t,n=e[12]&&no(e);return{c(){n&&n.c(),t=De()},l(r){n&&n.l(r),t=De()},m(r,o){n&&n.m(r,o),B(r,t,o)},p(r,o){r[12]&&n.p(r,o)},d(r){n&&n.d(r),r&&w(t)}}}function On(e){let t,n,r,o,l,i,s,u,h;function c(...f){return e[24](e[34],...f)}function g(...f){return e[25](e[34],...f)}function m(...f){return e[26](e[34],...f)}return s=new Cn({props:{labels:e[34][0].display_title,values:Math.floor(e[34].find(g).rolling_avg*100)+"%",x:e[8].x+180>e[2]?e[8].x-195:e[8].x+15,y:e[14](e[9],e[3],e[34][0].display_title,e[8].x,e[34].find(m).rolling_avg),backgroundColor:e[6][e[34][0].display_title].colour,textColor:e[6][e[34][0].display_title].text,title:void 0,width:"180",adaptTexts:!1}}),u=new Cn({props:{labels:"Week of",values:e[18](e[0],e[8].x).toLocaleString(void 0,e[11]),title:void 0,x:e[8].x+180>e[2]?e[8].x-205:e[8].x+5,y:0,backgroundColor:"#191919",opacity:"0.5",textColor:"white",width:"200",adaptTexts:!1}}),{c(){t=Z("g"),n=Z("line"),r=Z("circle"),ut(s.$$.fragment),ut(u.$$.fragment),this.h()},l(f){t=X(f,"g",{transform:!0});var v=Y(t);n=X(v,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),Y(n).forEach(w),r=X(v,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),Y(r).forEach(w),v.forEach(w),st(s.$$.fragment,f),st(u.$$.fragment,f),this.h()},h(){a(n,"x1",0),a(n,"y1","10"),a(n,"x2",0),a(n,"y2",e[3]),a(n,"stroke","grey"),a(n,"stroke-width","1"),a(r,"cx",0),a(r,"cy",o=Et(e[9],e[3],e[34].find(c).rolling_avg)+e[13].bottom),a(r,"r","5"),a(r,"fill",l=e[6][e[34][0].display_title].colour),a(t,"transform",i="translate("+e[5](e[18](e[34],e[8].x))+" 0)")},m(f,v){B(f,t,v),M(t,n),M(t,r),ft(s,f,v),ft(u,f,v),h=!0},p(f,v){e=f,(!h||v[0]&8)&&a(n,"y2",e[3]),(!h||v[0]&778&&o!==(o=Et(e[9],e[3],e[34].find(c).rolling_avg)+e[13].bottom))&&a(r,"cy",o),(!h||v[0]&66&&l!==(l=e[6][e[34][0].display_title].colour))&&a(r,"fill",l),(!h||v[0]&290&&i!==(i="translate("+e[5](e[18](e[34],e[8].x))+" 0)"))&&a(t,"transform",i);const _={};v[0]&2&&(_.labels=e[34][0].display_title),v[0]&258&&(_.values=Math.floor(e[34].find(g).rolling_avg*100)+"%"),v[0]&260&&(_.x=e[8].x+180>e[2]?e[8].x-195:e[8].x+15),v[0]&778&&(_.y=e[14](e[9],e[3],e[34][0].display_title,e[8].x,e[34].find(m).rolling_avg)),v[0]&66&&(_.backgroundColor=e[6][e[34][0].display_title].colour),v[0]&66&&(_.textColor=e[6][e[34][0].display_title].text),s.$set(_);const y={};v[0]&257&&(y.values=e[18](e[0],e[8].x).toLocaleString(void 0,e[11])),v[0]&260&&(y.x=e[8].x+180>e[2]?e[8].x-205:e[8].x+5),u.$set(y)},i(f){h||(Ce(s.$$.fragment,f),Ce(u.$$.fragment,f),h=!0)},o(f){Fe(s.$$.fragment,f),Fe(u.$$.fragment,f),h=!1},d(f){f&&w(t),ct(s,f),ct(u,f)}}}function Wn(e){let t,n,r=e[8].x!==null&&On(e);return{c(){r&&r.c(),t=De()},l(o){r&&r.l(o),t=De()},m(o,l){r&&r.m(o,l),B(o,t,l),n=!0},p(o,l){o[8].x!==null?r?(r.p(o,l),l[0]&256&&Ce(r,1)):(r=On(o),r.c(),Ce(r,1),r.m(t.parentNode,t)):r&&(Pn(),Fe(r,1,1,()=>{r=null}),Nn())},i(o){n||(Ce(r),n=!0)},o(o){Fe(r),n=!1},d(o){r&&r.d(o),o&&w(t)}}}function ro(e){let t,n,r,o,l,i,s,u,h,c,g,m,f,v,_,y,C,U,S,W,x,E,Q,fe,ce,_e,ve,Ue,pe,ye,Se,b,j,q,Te,k,H,ee,he,Me,We,P,J,be,T,F,L,d,re,A,le,ae;t=new cr({}),Me=new xl({props:{id:"options-cities",value:["Toronto, ON","Chicago, IL","Detroit, MI","Baltimore, MD","New York, NY","Los Angeles, CA","San Francisco, CA","Atlanta, GA","Miami, FL","Austin, TX","Las Vegas, NV"],$$slots:{default:[to]},$$scope:{ctx:e}}});let me=e[4].reverse(),$=[];for(let p=0;p<me.length;p+=1)$[p]=Yn(Sn(e,me,p));let Ze=e[7],oe=[];for(let p=0;p<Ze.length;p+=1)oe[p]=Ln(Un(e,Ze,p));let Xe=e[1],ie=[];for(let p=0;p<Xe.length;p+=1)ie[p]=An(Dn(e,Xe,p));let He=e[1],z=[];for(let p=0;p<He.length;p+=1)z[p]=Wn(kn(e,He,p));const rr=p=>Fe(z[p],1,1,()=>{z[p]=null});return{c(){ut(t.$$.fragment),n=ue(),r=V("main"),o=V("div"),l=V("h3"),i=G("This is an archived version of our data, for our most recent rankings, using updated data sources and methodology, click "),s=V("a"),u=G("here"),h=ue(),c=V("h1"),g=G("Downtown Recovery Patterns"),m=ue(),f=V("p"),v=G("The recovery metrics on these charts are based on a sample of mobile phone data."),_=ue(),y=V("p"),C=G("They are computed by counting the number of unique mobile phones in a city's downtown area in the specified time period, and then dividing it by the number of unique visitors during the equivalent time period in 2019."),U=ue(),S=V("p"),W=G("Each data point on this chart is an 11-week rolling average, with the noted date as the end-point of its range."),x=ue(),E=V("p"),Q=G("A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels."),fe=ue(),ce=V("p"),_e=G("For more information, read our "),ve=V("a"),Ue=G("Methodology"),pe=G(" page. Or click "),ye=V("a"),Se=G("here"),b=G(" to download the data shown on this chart."),j=ue(),q=V("div"),Te=V("div"),k=V("div"),H=V("p"),ee=G("Select City:"),he=ue(),ut(Me.$$.fragment),We=ue(),P=Z("svg");for(let p=0;p<$.length;p+=1)$[p].c();J=Z("line"),T=Z("line");for(let p=0;p<oe.length;p+=1)oe[p].c();F=De();for(let p=0;p<ie.length;p+=1)ie[p].c();L=De();for(let p=0;p<z.length;p+=1)z[p].c();this.h()},l(p){st(t.$$.fragment,p),n=se(p),r=R(p,"MAIN",{class:!0});var I=Y(r);o=R(I,"DIV",{class:!0});var O=Y(o);l=R(O,"H3",{});var D=Y(l);i=K(D,"This is an archived version of our data, for our most recent rankings, using updated data sources and methodology, click "),s=R(D,"A",{href:!0});var de=Y(s);u=K(de,"here"),de.forEach(w),D.forEach(w),h=se(O),c=R(O,"H1",{});var Pt=Y(c);g=K(Pt,"Downtown Recovery Patterns"),Pt.forEach(w),m=se(O),f=R(O,"P",{});var qt=Y(f);v=K(qt,"The recovery metrics on these charts are based on a sample of mobile phone data."),qt.forEach(w),_=se(O),y=R(O,"P",{});var Vt=Y(y);C=K(Vt,"They are computed by counting the number of unique mobile phones in a city's downtown area in the specified time period, and then dividing it by the number of unique visitors during the equivalent time period in 2019."),Vt.forEach(w),U=se(O),S=R(O,"P",{});var Rt=Y(S);W=K(Rt,"Each data point on this chart is an 11-week rolling average, with the noted date as the end-point of its range."),Rt.forEach(w),x=se(O),E=R(O,"P",{});var Bt=Y(E);Q=K(Bt,"A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels."),Bt.forEach(w),fe=se(O),ce=R(O,"P",{});var Qe=Y(ce);_e=K(Qe,"For more information, read our "),ve=R(Qe,"A",{href:!0});var zt=Y(ve);Ue=K(zt,"Methodology"),zt.forEach(w),pe=K(Qe," page. Or click "),ye=R(Qe,"A",{href:!0});var Zt=Y(ye);Se=K(Zt,"here"),Zt.forEach(w),b=K(Qe," to download the data shown on this chart."),Qe.forEach(w),O.forEach(w),j=se(I),q=R(I,"DIV",{id:!0,class:!0});var it=Y(q);Te=R(it,"DIV",{id:!0,class:!0});var Xt=Y(Te);k=R(Xt,"DIV",{id:!0,class:!0});var at=Y(k);H=R(at,"P",{});var Qt=Y(H);ee=K(Qt,"Select City:"),Qt.forEach(w),he=se(at),st(Me.$$.fragment,at),at.forEach(w),Xt.forEach(w),We=se(it),P=X(it,"svg",{height:!0,width:!0,id:!0,transform:!0,class:!0});var Ie=Y(P);for(let ge=0;ge<$.length;ge+=1)$[ge].l(Ie);J=X(Ie,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),Y(J).forEach(w),T=X(Ie,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),Y(T).forEach(w);for(let ge=0;ge<oe.length;ge+=1)oe[ge].l(Ie);F=De();for(let ge=0;ge<ie.length;ge+=1)ie[ge].l(Ie);L=De();for(let ge=0;ge<z.length;ge+=1)z[ge].l(Ie);Ie.forEach(w),it.forEach(w),I.forEach(w),this.h()},h(){a(s,"href","/charts/rankings"),a(ve,"href","/methodology"),a(ye,"href","/pattern_data.csv"),a(o,"class","text"),a(k,"id","options-cities"),a(k,"class","svelte-tqmeai"),a(Te,"id","options"),a(Te,"class","svelte-tqmeai"),a(J,"x1",e[13].left+40),a(J,"x2",be=e[2]-e[13].right),a(J,"y1",e[3]),a(J,"y2",e[3]),a(J,"stroke","white"),a(J,"stroke-width","1"),a(T,"x1",e[13].left+40),a(T,"x2",e[13].left+40),a(T,"y1",e[13].top),a(T,"y2",e[3]),a(T,"stroke","white"),a(T,"stroke-width","1"),a(P,"height",d=e[3]+40),a(P,"width",e[2]),a(P,"id","chart"),a(P,"transform","translate("+e[13].left+", "+e[13].top+")"),a(P,"class","svelte-tqmeai"),a(q,"id","chart-wrapper"),a(q,"class","svelte-tqmeai"),sr(()=>e[27].call(q)),a(r,"class","svelte-tqmeai")},m(p,I){ft(t,p,I),B(p,n,I),B(p,r,I),M(r,o),M(o,l),M(l,i),M(l,s),M(s,u),M(o,h),M(o,c),M(c,g),M(o,m),M(o,f),M(f,v),M(o,_),M(o,y),M(y,C),M(o,U),M(o,S),M(S,W),M(o,x),M(o,E),M(E,Q),M(o,fe),M(o,ce),M(ce,_e),M(ce,ve),M(ve,Ue),M(ce,pe),M(ce,ye),M(ye,Se),M(ce,b),M(r,j),M(r,q),M(q,Te),M(Te,k),M(k,H),M(H,ee),M(k,he),ft(Me,k,null),M(q,We),M(q,P);for(let O=0;O<$.length;O+=1)$[O]&&$[O].m(P,null);M(P,J),M(P,T);for(let O=0;O<oe.length;O+=1)oe[O]&&oe[O].m(P,null);M(P,F);for(let O=0;O<ie.length;O+=1)ie[O]&&ie[O].m(P,null);M(P,L);for(let O=0;O<z.length;O+=1)z[O]&&z[O].m(P,null);re=fr(q,e[27].bind(q)),A=!0,le||(ae=[qe(P,"mousemove",e[16]),qe(P,"mouseleave",e[17])],le=!0)},p(p,I){const O={};if(I[1]&16384&&(O.$$scope={dirty:I,ctx:p}),Me.$set(O),I[0]&9236){me=p[4].reverse();let D;for(D=0;D<me.length;D+=1){const de=Sn(p,me,D);$[D]?$[D].p(de,I):($[D]=Yn(de),$[D].c(),$[D].m(P,J))}for(;D<$.length;D+=1)$[D].d(1);$.length=me.length}if((!A||I[0]&4&&be!==(be=p[2]-p[13].right))&&a(J,"x2",be),(!A||I[0]&8)&&a(J,"y1",p[3]),(!A||I[0]&8)&&a(J,"y2",p[3]),(!A||I[0]&8)&&a(T,"y2",p[3]),I[0]&32936){Ze=p[7];let D;for(D=0;D<Ze.length;D+=1){const de=Un(p,Ze,D);oe[D]?oe[D].p(de,I):(oe[D]=Ln(de),oe[D].c(),oe[D].m(P,F))}for(;D<oe.length;D+=1)oe[D].d(1);oe.length=Ze.length}if(I[0]&12906){Xe=p[1];let D;for(D=0;D<Xe.length;D+=1){const de=Dn(p,Xe,D);ie[D]?ie[D].p(de,I):(ie[D]=An(de),ie[D].c(),ie[D].m(P,L))}for(;D<ie.length;D+=1)ie[D].d(1);ie.length=Xe.length}if(I[0]&289647){He=p[1];let D;for(D=0;D<He.length;D+=1){const de=kn(p,He,D);z[D]?(z[D].p(de,I),Ce(z[D],1)):(z[D]=Wn(de),z[D].c(),Ce(z[D],1),z[D].m(P,null))}for(Pn(),D=He.length;D<z.length;D+=1)rr(D);Nn()}(!A||I[0]&8&&d!==(d=p[3]+40))&&a(P,"height",d),(!A||I[0]&4)&&a(P,"width",p[2])},i(p){if(!A){Ce(t.$$.fragment,p),Ce(Me.$$.fragment,p);for(let I=0;I<He.length;I+=1)Ce(z[I]);A=!0}},o(p){Fe(t.$$.fragment,p),Fe(Me.$$.fragment,p),z=z.filter(Boolean);for(let I=0;I<z.length;I+=1)Fe(z[I]);A=!1},d(p){ct(t,p),p&&w(n),p&&w(r),ct(Me),Pe($,p),Pe(oe,p),Pe(ie,p),Pe(z,p),re(),le=!1,In(ae)}}}function Hn(e,t){let n=[];for(let r=0;r<=Math.ceil(e/t);r++)n.push(r*t);return n}function Et(e,t,n){return t-t*n/(e[1]-e[0])}function lo(e,t,n){let r,o,l,i;bt(e,Vn,k=>n(21,l=k)),bt(e,qn,k=>n(29,i=k));let s=[],u=[],h={year:"numeric",month:"long",day:"numeric"},c=[],g=[];lt.forEach(k=>{i.forEach(H=>{k.region===H.name&&n(6,c[k.display_title]={colour:H.colour,text:H.text},c)})});const m=i,f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];async function v(){try{const H=await(await fetch("../pattern_data.csv")).text();n(0,s=mr(H).filter(ee=>!["Dallas, TX","Orlando, FL","Oklahoma City, OK"].includes(ee.display_title))),s.forEach(ee=>{ee.week=Kn("%Y-%m-%d")(ee.week),ee.week=new Date(ee.week)})}catch(k){console.error("Error loading CSV data:",k)}}At(()=>{v()}),console.log(g);let _={top:10,bottom:40,left:10,right:30},y,C=640,U=1,S=[0,1],W,x;function E(k){return vt(k.map(H=>H.week))}function Q(k,H,ee,he,Me){u.length;let We=vt(u.flat().filter(F=>W(F.week)>=he).map(F=>F.week)),P=u.flat().filter(F=>F.week<=We[0]&&W(F.week)>=he).sort((F,L)=>L.rolling_avg-F.rolling_avg);var J=[];P.forEach(F=>J.push(F));for(var be=0;be<J.length;be++)J[be].rank=30+(be+1)*30;return zn().domain(J.map(F=>F.display_title)).range(J.map(F=>F.rank))(ee)}let fe;function ce(k){return f[k.getMonth()]+`
20`+k.getYear().toString().substring(k.getYear(),1)}let _e={x:null,y:null};function ve(k){const H=document.getElementById("chart");if(H===null)return;const ee=H.getBoundingClientRect(),he={x:k.clientX-ee.left,y:k.clientY-ee.top};n(8,_e=he.x>_.left&&he.x<y-_.right&&he.y>_.top&&he.y<C-_.bottom?{x:he.x,y:he.y}:{x:null,y:null})}function Ue(){n(8,_e={x:null,y:null})}function pe(k,H){return k.filter(ee=>W(ee.week)>=H)[0].week}const ye=k=>W(k.week),Se=k=>Et(o,C,k.rolling_avg)+_.bottom,b=(k,H)=>H.week===pe(k,_e.x),j=(k,H)=>H.week===pe(k,_e.x),q=(k,H)=>H.week===pe(k,_e.x);function Te(){y=this.offsetWidth,n(2,y)}return e.$$.update=()=>{e.$$.dirty[0]&2097153&&n(1,u=Array.from(yr(s.filter(k=>k.metric==="downtown"&&l.includes(k.display_title)).sort((k,H)=>k.week-H.week),k=>k.display_title)).map(k=>k[1])),e.$$.dirty[0]&1&&(g=vt(s.filter(k=>k.metric==="downtown").sort((k,H)=>k.rolling_avg-H.rolling_avg).map(k=>1*k.rolling_avg))),e.$$.dirty[0]&4&&n(3,C=y*.666),e.$$.dirty[0]&2&&n(19,U=u.length!==0?u.flat().sort((k,H)=>H.rolling_avg-k.rolling_avg)[0].rolling_avg:1),e.$$.dirty[0]&524288&&n(19,U=U<1?1:U),e.$$.dirty[0]&524288&&(U<2?n(4,S=Hn(U,.2)):n(4,S=Hn(U,.5))),e.$$.dirty[0]&24&&n(10,r=(C-_.bottom)/(S.length-1)),e.$$.dirty[0]&16&&n(9,o=[Math.min(...S),Math.max(...S)]),e.$$.dirty[0]&1&&console.log(s),e.$$.dirty[0]&5&&n(5,W=Bl().domain(E(s)).range([_.left+40,y-_.right])),e.$$.dirty[0]&4&&n(20,fe=Math.floor(y/120)),e.$$.dirty[0]&1048576&&console.log(fe),e.$$.dirty[0]&1048608&&n(7,x=W.ticks(fe)),e.$$.dirty[0]&1&&console.log(E(s))},[s,u,y,C,S,W,c,x,_e,o,r,h,m,_,Q,ce,ve,Ue,pe,U,fe,l,ye,Se,b,j,q,Te]}class ho extends Ft{constructor(t){super(),Yt(this,t,lo,ro,Lt,{},null,[-1,-1])}}export{ho as component,co as universal};
