import{S as Gl,i as Ul,s as Bl,k as y,q as D,a as U,l as w,m,r as O,h as _,c as B,n as i,b as W,C as u,K as ul,L as Xt,D as hl,M as ge,E as Xe,o as Wl,u as J,y as ct,N as me,e as ye,z as ft,O as be,P as Hl,A as _t,Q as Xl,g as pt,d as vt,B as dt,p as gt,R as Kl}from"../chunks/index.a4677e45.js";import{H as Ql}from"../chunks/global.956237c1.js";import{S as Yl,a as Jl}from"../chunks/SelectRegions.37fbf11a.js";import{s as Kt,c as mt,a as Zl,b as $l,r as xl}from"../chunks/csv.a309fd1d.js";const ea=!0,ma=Object.freeze(Object.defineProperty({__proto__:null,prerender:ea},Symbol.toStringTag,{value:"Module"}));function cl(e,t,l){const a=e.slice();return a[13]=t[l],a}function fl(e,t,l){const a=e.slice();return a[13]=t[l],a}function _l(e,t,l){const a=e.slice();return a[13]=t[l],a}function pl(e,t,l){const a=e.slice();return a[13]=t[l],a}function vl(e,t,l){const a=e.slice();return a[13]=t[l],a}function dl(e,t,l){const a=e.slice();return a[13]=t[l],a}function gl(e,t,l){const a=e.slice();return a[13]=t[l],a}function ml(e,t,l){const a=e.slice();return a[13]=t[l],a}function bl(e){let t,l=e[13].text+"",a,r;return{c(){t=y("option"),a=D(l),this.h()},l(n){t=w(n,"OPTION",{class:!0});var h=m(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(n,h){W(n,t,h),u(t,a)},p(n,h){h&8&&l!==(l=n[13].text+"")&&J(a,l),h&8&&r!==(r=n[13].value)&&(t.__value=r,t.value=t.__value)},d(n){n&&_(t)}}}function yl(e){let t,l=e[13].text+"",a,r;return{c(){t=y("option"),a=D(l),this.h()},l(n){t=w(n,"OPTION",{class:!0});var h=m(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(n,h){W(n,t,h),u(t,a)},p(n,h){h&16&&l!==(l=n[13].text+"")&&J(a,l),h&16&&r!==(r=n[13].value)&&(t.__value=r,t.value=t.__value)},d(n){n&&_(t)}}}function wl(e){let t,l=e[13].text+"",a,r;return{c(){t=y("option"),a=D(l),this.h()},l(n){t=w(n,"OPTION",{class:!0});var h=m(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(n,h){W(n,t,h),u(t,a)},p(n,h){h&64&&l!==(l=n[13].text+"")&&J(a,l),h&64&&r!==(r=n[13].value)&&(t.__value=r,t.value=t.__value)},d(n){n&&_(t)}}}function El(e){let t,l=e[13].text+"",a,r;return{c(){t=y("option"),a=D(l),this.h()},l(n){t=w(n,"OPTION",{class:!0});var h=m(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(n,h){W(n,t,h),u(t,a)},p(n,h){h&32&&l!==(l=n[13].text+"")&&J(a,l),h&32&&r!==(r=n[13].value)&&(t.__value=r,t.value=t.__value)},d(n){n&&_(t)}}}function kl(e){let t,l=e[13].text+"",a,r;return{c(){t=y("option"),a=D(l),this.h()},l(n){t=w(n,"OPTION",{class:!0});var h=m(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(n,h){W(n,t,h),u(t,a)},p(n,h){h&2&&l!==(l=n[13].text+"")&&J(a,l),h&2&&r!==(r=n[13].value)&&(t.__value=r,t.value=t.__value)},d(n){n&&_(t)}}}function Dl(e){let t,l=e[13].text+"",a,r;return{c(){t=y("option"),a=D(l),this.h()},l(n){t=w(n,"OPTION",{class:!0});var h=m(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(n,h){W(n,t,h),u(t,a)},p(n,h){h&256&&l!==(l=n[13].text+"")&&J(a,l),h&256&&r!==(r=n[13].value)&&(t.__value=r,t.value=t.__value)},d(n){n&&_(t)}}}function Ol(e){let t,l=e[13].text+"",a,r;return{c(){t=y("option"),a=D(l),this.h()},l(n){t=w(n,"OPTION",{class:!0});var h=m(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(n,h){W(n,t,h),u(t,a)},p(n,h){h&4&&l!==(l=n[13].text+"")&&J(a,l),h&4&&r!==(r=n[13].value)&&(t.__value=r,t.value=t.__value)},d(n){n&&_(t)}}}function Pl(e){let t,l=e[13].text+"",a,r;return{c(){t=y("option"),a=D(l),this.h()},l(n){t=w(n,"OPTION",{class:!0});var h=m(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=r=e[13].value,t.value=t.__value,i(t,"class","svelte-19nzrqx")},m(n,h){W(n,t,h),u(t,a)},p(n,h){h&128&&l!==(l=n[13].text+"")&&J(a,l),h&128&&r!==(r=n[13].value)&&(t.__value=r,t.value=t.__value)},d(n){n&&_(t)}}}function ta(e){let t,l,a,r,n,h,q,E,d,k,v,p,V,Y,L=e[3],b=[];for(let s=0;s<L.length;s+=1)b[s]=bl(ml(e,L,s));let X=e[4],N=[];for(let s=0;s<X.length;s+=1)N[s]=yl(gl(e,X,s));let C=e[6],P=[];for(let s=0;s<C.length;s+=1)P[s]=wl(dl(e,C,s));let te=e[5],T=[];for(let s=0;s<te.length;s+=1)T[s]=El(vl(e,te,s));let oe=e[1],H=[];for(let s=0;s<oe.length;s+=1)H[s]=kl(pl(e,oe,s));let ne=e[8],z=[];for(let s=0;s<ne.length;s+=1)z[s]=Dl(_l(e,ne,s));let se=e[2],R=[];for(let s=0;s<se.length;s+=1)R[s]=Ol(fl(e,se,s));let K=e[7],A=[];for(let s=0;s<K.length;s+=1)A[s]=Pl(cl(e,K,s));return{c(){t=y("p"),l=D("Select Variable:"),a=U(),r=y("select"),n=y("optgroup");for(let s=0;s<b.length;s+=1)b[s].c();h=y("optgroup");for(let s=0;s<N.length;s+=1)N[s].c();q=y("optgroup");for(let s=0;s<P.length;s+=1)P[s].c();E=y("optgroup");for(let s=0;s<T.length;s+=1)T[s].c();d=y("optgroup");for(let s=0;s<H.length;s+=1)H[s].c();k=y("optgroup");for(let s=0;s<z.length;s+=1)z[s].c();v=y("optgroup");for(let s=0;s<R.length;s+=1)R[s].c();p=y("optgroup");for(let s=0;s<A.length;s+=1)A[s].c();this.h()},l(s){t=w(s,"P",{});var M=m(t);l=O(M,"Select Variable:"),M.forEach(_),a=B(s),r=w(s,"SELECT",{class:!0});var o=m(r);n=w(o,"OPTGROUP",{label:!0});var S=m(n);for(let I=0;I<b.length;I+=1)b[I].l(S);S.forEach(_),h=w(o,"OPTGROUP",{label:!0});var G=m(h);for(let I=0;I<N.length;I+=1)N[I].l(G);G.forEach(_),q=w(o,"OPTGROUP",{label:!0});var Q=m(q);for(let I=0;I<P.length;I+=1)P[I].l(Q);Q.forEach(_),E=w(o,"OPTGROUP",{label:!0});var ce=m(E);for(let I=0;I<T.length;I+=1)T[I].l(ce);ce.forEach(_),d=w(o,"OPTGROUP",{label:!0});var fe=m(d);for(let I=0;I<H.length;I+=1)H[I].l(fe);fe.forEach(_),k=w(o,"OPTGROUP",{label:!0});var Oe=m(k);for(let I=0;I<z.length;I+=1)z[I].l(Oe);Oe.forEach(_),v=w(o,"OPTGROUP",{label:!0});var _e=m(v);for(let I=0;I<R.length;I+=1)R[I].l(_e);_e.forEach(_),p=w(o,"OPTGROUP",{label:!0});var pe=m(p);for(let I=0;I<A.length;I+=1)A[I].l(pe);pe.forEach(_),o.forEach(_),this.h()},h(){i(n,"label","Demographics"),i(h,"label","Employment"),i(q,"label","Income"),i(E,"label","Housing"),i(d,"label","Commuting"),i(k,"label","Weather"),i(v,"label","COVID-19 Closures"),i(p,"label","Political Leaning"),i(r,"class","svelte-19nzrqx")},m(s,M){W(s,t,M),u(t,l),W(s,a,M),W(s,r,M),u(r,n);for(let o=0;o<b.length;o+=1)b[o]&&b[o].m(n,null);u(r,h);for(let o=0;o<N.length;o+=1)N[o]&&N[o].m(h,null);u(r,q);for(let o=0;o<P.length;o+=1)P[o]&&P[o].m(q,null);u(r,E);for(let o=0;o<T.length;o+=1)T[o]&&T[o].m(E,null);u(r,d);for(let o=0;o<H.length;o+=1)H[o]&&H[o].m(d,null);u(r,k);for(let o=0;o<z.length;o+=1)z[o]&&z[o].m(k,null);u(r,v);for(let o=0;o<R.length;o+=1)R[o]&&R[o].m(v,null);u(r,p);for(let o=0;o<A.length;o+=1)A[o]&&A[o].m(p,null);ul(r,e[0]),V||(Y=Xt(r,"change",e[9]),V=!0)},p(s,[M]){if(M&8){L=s[3];let o;for(o=0;o<L.length;o+=1){const S=ml(s,L,o);b[o]?b[o].p(S,M):(b[o]=bl(S),b[o].c(),b[o].m(n,null))}for(;o<b.length;o+=1)b[o].d(1);b.length=L.length}if(M&16){X=s[4];let o;for(o=0;o<X.length;o+=1){const S=gl(s,X,o);N[o]?N[o].p(S,M):(N[o]=yl(S),N[o].c(),N[o].m(h,null))}for(;o<N.length;o+=1)N[o].d(1);N.length=X.length}if(M&64){C=s[6];let o;for(o=0;o<C.length;o+=1){const S=dl(s,C,o);P[o]?P[o].p(S,M):(P[o]=wl(S),P[o].c(),P[o].m(q,null))}for(;o<P.length;o+=1)P[o].d(1);P.length=C.length}if(M&32){te=s[5];let o;for(o=0;o<te.length;o+=1){const S=vl(s,te,o);T[o]?T[o].p(S,M):(T[o]=El(S),T[o].c(),T[o].m(E,null))}for(;o<T.length;o+=1)T[o].d(1);T.length=te.length}if(M&2){oe=s[1];let o;for(o=0;o<oe.length;o+=1){const S=pl(s,oe,o);H[o]?H[o].p(S,M):(H[o]=kl(S),H[o].c(),H[o].m(d,null))}for(;o<H.length;o+=1)H[o].d(1);H.length=oe.length}if(M&256){ne=s[8];let o;for(o=0;o<ne.length;o+=1){const S=_l(s,ne,o);z[o]?z[o].p(S,M):(z[o]=Dl(S),z[o].c(),z[o].m(k,null))}for(;o<z.length;o+=1)z[o].d(1);z.length=ne.length}if(M&4){se=s[2];let o;for(o=0;o<se.length;o+=1){const S=fl(s,se,o);R[o]?R[o].p(S,M):(R[o]=Ol(S),R[o].c(),R[o].m(v,null))}for(;o<R.length;o+=1)R[o].d(1);R.length=se.length}if(M&128){K=s[7];let o;for(o=0;o<K.length;o+=1){const S=cl(s,K,o);A[o]?A[o].p(S,M):(A[o]=Pl(S),A[o].c(),A[o].m(p,null))}for(;o<A.length;o+=1)A[o].d(1);A.length=K.length}M&511&&ul(r,s[0])},i:hl,o:hl,d(s){s&&_(t),s&&_(a),s&&_(r),ge(b,s),ge(N,s),ge(P,s),ge(T,s),ge(H,s),ge(z,s),ge(R,s),ge(A,s),V=!1,Y()}}}function la(e,t,l){let a;Xe(e,Kt,b=>l(11,a=b));let r,n=[],h=[],q=[],E=[],d=[],k=[],v=[],p=[],V=[];async function Y(){try{const X=await(await fetch("../variables_data_dictionary.csv")).text();l(10,n=mt(X))}catch(b){console.error("Error loading CSV data:",b)}}Wl(()=>{Y(),l(0,r=a)});function L(b){const X=b.target.value;Kt.set(X)}return e.$$.update=()=>{e.$$.dirty&1024&&l(1,h=n.filter(b=>b.group==="Commuting")),e.$$.dirty&1024&&l(2,q=n.filter(b=>b.group==="COVID-19 Closures")),e.$$.dirty&1024&&l(3,E=n.filter(b=>b.group==="Demographics")),e.$$.dirty&1024&&l(4,d=n.filter(b=>b.group==="Employment")),e.$$.dirty&1024&&l(5,k=n.filter(b=>b.group==="Housing")),e.$$.dirty&1024&&l(6,v=n.filter(b=>b.group==="Income")),e.$$.dirty&1024&&l(7,p=n.filter(b=>b.group==="Political Leaning")),e.$$.dirty&1024&&l(8,V=n.filter(b=>b.group==="Weather"))},[r,h,q,E,d,k,v,p,V,L,n]}class aa extends Gl{constructor(t){super(),Ul(this,t,la,ta,Bl,{})}}function ra(e){var t,l,a=e.length;if(a===1)t=0,l=e[0][1];else{for(var r=0,n=0,h=0,q=0,E,d,k,v=0;v<a;v++)E=e[v],d=E[0],k=E[1],r+=d,n+=k,h+=d*d,q+=d*k;t=(a*q-r*n)/(a*h-r*r),l=n/a-t*r/a}return{m:t,b:l}}function oa(e){if(e.length===0)return 0;var t=e[0],l=0,a;if(typeof t!="number")return NaN;for(var r=1;r<e.length;r++){if(typeof e[r]!="number")return NaN;a=t+e[r],Math.abs(t)>=Math.abs(e[r])?l+=t-a+e[r]:l+=e[r]-a+t,t=a}return t+l}function Qt(e){if(e.length===0)throw new Error("mean requires at least one data point");return oa(e)/e.length}function na(e,t){var l=Qt(e),a=0,r,n;if(t===2)for(n=0;n<e.length;n++)r=e[n]-l,a+=r*r;else for(n=0;n<e.length;n++)a+=Math.pow(e[n]-l,t);return a}function ia(e,t){if(e.length!==t.length)throw new Error("sampleCovariance requires samples with equal lengths");if(e.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var l=Qt(e),a=Qt(t),r=0,n=0;n<e.length;n++)r+=(e[n]-l)*(t[n]-a);var h=e.length-1;return r/h}function sa(e){if(e.length<2)throw new Error("sampleVariance requires at least two data points");var t=na(e,2),l=e.length-1;return t/l}function ql(e){var t=sa(e);return Math.sqrt(t)}function ua(e,t){var l=ia(e,t),a=ql(e),r=ql(t);return l/a/r}function Vl(e,t,l){const a=e.slice();return a[43]=t[l],a[45]=l,a}function Cl(e,t,l){const a=e.slice();return a[43]=t[l],a[45]=l,a}function Fl(e,t,l){const a=e.slice();return a[45]=t[l],a}function Tl(e,t,l){const a=e.slice();return a[49]=t[l],a[45]=l,a}function Il(e){let t,l,a,r,n=(100*e[49]).toFixed(0)+"",h,q,E,d,k,v;return{c(){t=me("line"),r=me("text"),h=D(n),q=D("%"),d=me("line"),this.h()},l(p){t=be(p,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),m(t).forEach(_),r=be(p,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var V=m(r);h=O(V,n),q=O(V,"%"),V.forEach(_),d=be(p,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),m(d).forEach(_),this.h()},h(){i(t,"class","grid svelte-h15qja"),i(t,"x1","40"),i(t,"y1",l=30+e[45]*e[18]),i(t,"x2",e[1]),i(t,"y2",a=30+e[45]*e[18]),i(r,"class","axis-label svelte-h15qja"),i(r,"x","35"),i(r,"y",E=35+e[45]*e[18]),i(r,"text-anchor","end"),i(d,"class","grid-white svelte-h15qja"),i(d,"x1","37"),i(d,"y1",k=30+e[45]*e[18]),i(d,"x2","45"),i(d,"y2",v=30+e[45]*e[18])},m(p,V){W(p,t,V),W(p,r,V),u(r,h),u(r,q),W(p,d,V)},p(p,V){V[0]&262144&&l!==(l=30+p[45]*p[18])&&i(t,"y1",l),V[0]&2&&i(t,"x2",p[1]),V[0]&262144&&a!==(a=30+p[45]*p[18])&&i(t,"y2",a),V[0]&8&&n!==(n=(100*p[49]).toFixed(0)+"")&&J(h,n),V[0]&262144&&E!==(E=35+p[45]*p[18])&&i(r,"y",E),V[0]&262144&&k!==(k=30+p[45]*p[18])&&i(d,"y1",k),V[0]&262144&&v!==(v=30+p[45]*p[18])&&i(d,"y2",v)},d(p){p&&_(t),p&&_(r),p&&_(d)}}}function Sl(e){let t,l,a,r,n=(e[45]*e[15]).toLocaleString()+"",h,q,E,d,k;return{c(){t=me("line"),r=me("text"),h=D(n),E=me("line"),this.h()},l(v){t=be(v,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),m(t).forEach(_),r=be(v,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var p=m(r);h=O(p,n),p.forEach(_),E=be(v,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),m(E).forEach(_),this.h()},h(){i(t,"class","grid svelte-h15qja"),i(t,"x1",l=45+e[45]*e[14]),i(t,"y1","22"),i(t,"x2",a=45+e[45]*e[14]),i(t,"y2",e[2]),i(r,"class","axis-label svelte-h15qja"),i(r,"x",q=47+e[45]*e[14]),i(r,"y","17"),i(r,"text-anchor","end"),i(E,"class","grid-white svelte-h15qja"),i(E,"x1",d=45+e[45]*e[14]),i(E,"y1","22"),i(E,"x2",k=45+e[45]*e[14]),i(E,"y2","31")},m(v,p){W(v,t,p),W(v,r,p),u(r,h),W(v,E,p)},p(v,p){p[0]&16384&&l!==(l=45+v[45]*v[14])&&i(t,"x1",l),p[0]&16384&&a!==(a=45+v[45]*v[14])&&i(t,"x2",a),p[0]&4&&i(t,"y2",v[2]),p[0]&32768&&n!==(n=(v[45]*v[15]).toLocaleString()+"")&&J(h,n),p[0]&16384&&q!==(q=47+v[45]*v[14])&&i(r,"x",q),p[0]&16384&&d!==(d=45+v[45]*v[14])&&i(E,"x1",d),p[0]&16384&&k!==(k=45+v[45]*v[14])&&i(E,"x2",k)},d(v){v&&_(t),v&&_(r),v&&_(E)}}}function Ml(e){let t,l,a;return{c(){t=me("circle"),this.h()},l(r){t=be(r,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),m(t).forEach(_),this.h()},h(){i(t,"class","point-white svelte-h15qja"),i(t,"cx",l=45+Ee([0,e[5]],e[4],parseFloat(e[43][e[6]]))),i(t,"cy",a=30+we(e[17],e[2]-40,e[43].seasonal_average)),i(t,"r","6"),i(t,"fill","black"),i(t,"stroke","white"),i(t,"stroke-width","3")},m(r,n){W(r,t,n)},p(r,n){n[0]&113&&l!==(l=45+Ee([0,r[5]],r[4],parseFloat(r[43][r[6]])))&&i(t,"cx",l),n[0]&131077&&a!==(a=30+we(r[17],r[2]-40,r[43].seasonal_average))&&i(t,"cy",a)},d(r){r&&_(t)}}}function Rl(e){let t,l=e[43][e[6]]>=0&&Ml(e);return{c(){l&&l.c(),t=ye()},l(a){l&&l.l(a),t=ye()},m(a,r){l&&l.m(a,r),W(a,t,r)},p(a,r){a[43][a[6]]>=0?l?l.p(a,r):(l=Ml(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(a){l&&l.d(a),a&&_(t)}}}function jl(e){let t,l,a,r,n,h;function q(...d){return e[31](e[43],...d)}function E(...d){return e[32](e[43],...d)}return{c(){t=me("circle"),this.h()},l(d){t=be(d,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),m(t).forEach(_),this.h()},h(){i(t,"class","point svelte-h15qja"),i(t,"cx",l=45+Ee([0,e[5]],e[4],parseFloat(e[43][e[6]]))),i(t,"cy",a=30+we(e[17],e[2]-40,e[43].seasonal_average)),i(t,"r","6"),i(t,"fill",r=e[19].find(q).colour),i(t,"stroke","white"),i(t,"stroke-width","0")},m(d,k){W(d,t,k),n||(h=[Xt(t,"mouseover",E),Xt(t,"mouseout",e[33])],n=!0)},p(d,k){e=d,k[0]&113&&l!==(l=45+Ee([0,e[5]],e[4],parseFloat(e[43][e[6]])))&&i(t,"cx",l),k[0]&131077&&a!==(a=30+we(e[17],e[2]-40,e[43].seasonal_average))&&i(t,"cy",a),k[0]&1&&r!==(r=e[19].find(q).colour)&&i(t,"fill",r)},d(d){d&&_(t),n=!1,Kl(h)}}}function Nl(e){let t,l=e[43][e[6]]>=0&&jl(e);return{c(){l&&l.c(),t=ye()},l(a){l&&l.l(a),t=ye()},m(a,r){l&&l.m(a,r),W(a,t,r)},p(a,r){a[43][a[6]]>=0?l?l.p(a,r):(l=jl(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(a){l&&l.d(a),a&&_(t)}}}function Ll(e){let t,l,a,r,n=e[16].city+"",h,q,E,d,k=Math.round(100*e[16].seasonal_average)+"",v,p,V,Y,L=e[16][e[6]].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"",b,X,N;return{c(){t=me("foreignObject"),l=y("div"),a=y("p"),r=y("u"),h=D(n),q=U(),E=y("br"),d=D(` 
                        Recovery Rate: `),v=D(k),p=D(`%
                        `),V=y("br"),Y=D(`
                        X-Value: `),b=D(L),this.h()},l(C){t=be(C,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var P=m(t);l=w(P,"DIV",{id:!0,style:!0,class:!0});var te=m(l);a=w(te,"P",{id:!0,style:!0,class:!0});var T=m(a);r=w(T,"U",{});var oe=m(r);h=O(oe,n),oe.forEach(_),q=B(T),E=w(T,"BR",{}),d=O(T,` 
                        Recovery Rate: `),v=O(T,k),p=O(T,`%
                        `),V=w(T,"BR",{}),Y=O(T,`
                        X-Value: `),b=O(T,L),T.forEach(_),te.forEach(_),P.forEach(_),this.h()},h(){i(a,"id","tooltip-p"),gt(a,"color",e[19].find(e[34]).text),i(a,"class","svelte-h15qja"),i(l,"id","tooltip"),gt(l,"background-color",e[19].find(e[35]).colour),i(l,"class","svelte-h15qja"),i(t,"x",X=(parseFloat(e[16][e[6]])<e[5]/2?0:-145)+55+Ee([0,e[5]],e[4],parseFloat(e[16][e[6]]))),i(t,"y",N=22+we(e[17],e[2]-40,e[16].seasonal_average)),i(t,"width","125"),i(t,"height","50")},m(C,P){W(C,t,P),u(t,l),u(l,a),u(a,r),u(r,h),u(a,q),u(a,E),u(a,d),u(a,v),u(a,p),u(a,V),u(a,Y),u(a,b)},p(C,P){P[0]&65536&&n!==(n=C[16].city+"")&&J(h,n),P[0]&65536&&k!==(k=Math.round(100*C[16].seasonal_average)+"")&&J(v,k),P[0]&65600&&L!==(L=C[16][C[6]].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"")&&J(b,L),P[0]&65536&&gt(a,"color",C[19].find(C[34]).text),P[0]&65536&&gt(l,"background-color",C[19].find(C[35]).colour),P[0]&65648&&X!==(X=(parseFloat(C[16][C[6]])<C[5]/2?0:-145)+55+Ee([0,C[5]],C[4],parseFloat(C[16][C[6]])))&&i(t,"x",X),P[0]&196612&&N!==(N=22+we(C[17],C[2]-40,C[16].seasonal_average))&&i(t,"y",N)},d(C){C&&_(t)}}}function ha(e){let t,l,a,r,n,h,q,E,d,k,v,p,V,Y,L,b,X,N,C,P,te,T,oe,H,ne,z,se,R,K,A,s,M,o,S,G,Q,ce,fe,Oe,_e,pe,I,ke,g,F,Te,le,Ke,Qe,Ye,Je,Ze,$e,bt,Z,Pe,Ie,yt,wt,xe,Et,qe,Se,kt,Dt,et,Ot,Ve,Me,Pt,qt,Be=e[7].toFixed(3)+"",tt,Vt,De,Re,Ct,Ft,We=Al(e[8])+"",lt,Tt,He=e[9].toFixed(2)+"",at,It,Ce,je,St,Mt,rt,Rt,jt,Nt,Lt,zt,At,Gt,Ut,Bt,Wt,Yt,ae;t=new Ql({}),fe=new Yl({}),pe=new Jl({props:{europe:"no"}}),ke=new aa({});let Ne=e[3].reverse(),$=[];for(let c=0;c<Ne.length;c+=1)$[c]=Il(Tl(e,Ne,c));let Ht=[0,1,2,3,4],ve=[];for(let c=0;c<5;c+=1)ve[c]=Sl(Fl(e,Ht,c));let Le=e[0],x=[];for(let c=0;c<Le.length;c+=1)x[c]=Rl(Cl(e,Le,c));let ze=e[0],ee=[];for(let c=0;c<ze.length;c+=1)ee[c]=Nl(Vl(e,ze,c));let re=e[16]!=null&&Ll(e);return{c(){ct(t.$$.fragment),l=U(),a=y("main"),r=y("div"),n=y("h1"),h=D("Downtown Recovery Correlations"),q=U(),E=y("p"),d=D("This page charts scatter plots of downtown recovery rates (y-axis) relative to a number of other urban variables (x-axis). While these charts indicate bivariate relationships, and in some cases reveal potential correlations, they should be interpreted with caution as they do not imply direct causation."),k=U(),v=y("p"),p=D("The recovery metrics (y-axis) on these charts are based on a sample of mobile phone data. They are computed by counting the number of unique mobile phones in a city's downtown area in the specified time period, and then dividing it by the number of unique visitors during the equivalent time period in 2019. For example, the March 2023 - May 2023 time period is compared to the March 2019 - May 2019 time period."),V=U(),Y=y("p"),L=D("A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels. Click "),b=y("a"),X=D("here"),N=D(" to download the y-axis data shown on this chart."),C=U(),P=y("p"),te=D("The data on the x-axis comes from a variety of sources. The full dataset including all variables in the drop-down can be downloaded "),T=y("a"),oe=D("here"),H=D(". You may also wish to download a "),ne=y("a"),z=D("data dictionary"),se=D(", which includes the names of data sources for each variable."),R=U(),K=y("p"),A=D("For more information, read our "),s=y("a"),M=D("Methodology"),o=D(" page."),S=U(),G=y("div"),Q=y("div"),ce=y("div"),ct(fe.$$.fragment),Oe=U(),_e=y("div"),ct(pe.$$.fragment),I=U(),ct(ke.$$.fragment),g=U(),F=me("svg");for(let c=0;c<$.length;c+=1)$[c].c();Te=ye();for(let c=0;c<5;c+=1)ve[c].c();le=me("line");for(let c=0;c<x.length;c+=1)x[c].c();Ze=ye();for(let c=0;c<ee.length;c+=1)ee[c].c();$e=ye(),re&&re.c(),bt=U(),Z=y("div"),Pe=y("p"),Ie=y("i"),yt=D("X-Variable Name:"),wt=U(),xe=D(e[11]),Et=U(),qe=y("p"),Se=y("i"),kt=D("Group:"),Dt=U(),et=D(e[13]),Ot=U(),Ve=y("p"),Me=y("i"),Pt=D("Correlation Coefficient:"),qt=U(),tt=D(Be),Vt=U(),De=y("p"),Re=y("i"),Ct=D("Trend Line Formula"),Ft=D(": Recovery Rate (%) = "),lt=D(We),Tt=D(" X + "),at=D(He),It=U(),Ce=y("p"),je=y("i"),St=D("Data Source:"),Mt=U(),rt=D(e[12]),Rt=U(),jt=y("br"),Nt=U(),Lt=y("br"),zt=U(),At=y("br"),Gt=U(),Ut=y("br"),Bt=U(),Wt=y("br"),this.h()},l(c){ft(t.$$.fragment,c),l=B(c),a=w(c,"MAIN",{class:!0});var j=m(a);r=w(j,"DIV",{class:!0});var f=m(r);n=w(f,"H1",{});var ue=m(n);h=O(ue,"Downtown Recovery Correlations"),ue.forEach(_),q=B(f),E=w(f,"P",{});var Jt=m(E);d=O(Jt,"This page charts scatter plots of downtown recovery rates (y-axis) relative to a number of other urban variables (x-axis). While these charts indicate bivariate relationships, and in some cases reveal potential correlations, they should be interpreted with caution as they do not imply direct causation."),Jt.forEach(_),k=B(f),v=w(f,"P",{});var Zt=m(v);p=O(Zt,"The recovery metrics (y-axis) on these charts are based on a sample of mobile phone data. They are computed by counting the number of unique mobile phones in a city's downtown area in the specified time period, and then dividing it by the number of unique visitors during the equivalent time period in 2019. For example, the March 2023 - May 2023 time period is compared to the March 2019 - May 2019 time period."),Zt.forEach(_),V=B(f),Y=w(f,"P",{});var ot=m(Y);L=O(ot,"A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels. Click "),b=w(ot,"A",{href:!0});var $t=m(b);X=O($t,"here"),$t.forEach(_),N=O(ot," to download the y-axis data shown on this chart."),ot.forEach(_),C=B(f),P=w(f,"P",{});var Ae=m(P);te=O(Ae,"The data on the x-axis comes from a variety of sources. The full dataset including all variables in the drop-down can be downloaded "),T=w(Ae,"A",{href:!0});var xt=m(T);oe=O(xt,"here"),xt.forEach(_),H=O(Ae,". You may also wish to download a "),ne=w(Ae,"A",{href:!0});var el=m(ne);z=O(el,"data dictionary"),el.forEach(_),se=O(Ae,", which includes the names of data sources for each variable."),Ae.forEach(_),R=B(f),K=w(f,"P",{});var nt=m(K);A=O(nt,"For more information, read our "),s=w(nt,"A",{href:!0});var tl=m(s);M=O(tl,"Methodology"),tl.forEach(_),o=O(nt," page."),nt.forEach(_),f.forEach(_),S=B(j),G=w(j,"DIV",{id:!0,class:!0});var de=m(G);Q=w(de,"DIV",{id:!0,class:!0});var Ge=m(Q);ce=w(Ge,"DIV",{id:!0,class:!0});var ll=m(ce);ft(fe.$$.fragment,ll),ll.forEach(_),Oe=B(Ge),_e=w(Ge,"DIV",{id:!0,class:!0});var al=m(_e);ft(pe.$$.fragment,al),al.forEach(_),I=B(Ge),ft(ke.$$.fragment,Ge),Ge.forEach(_),g=B(de),F=be(de,"svg",{height:!0,width:!0,id:!0,class:!0});var Fe=m(F);for(let ie=0;ie<$.length;ie+=1)$[ie].l(Fe);Te=ye();for(let ie=0;ie<5;ie+=1)ve[ie].l(Fe);le=be(Fe,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),m(le).forEach(_);for(let ie=0;ie<x.length;ie+=1)x[ie].l(Fe);Ze=ye();for(let ie=0;ie<ee.length;ie+=1)ee[ie].l(Fe);$e=ye(),re&&re.l(Fe),Fe.forEach(_),bt=B(de),Z=w(de,"DIV",{class:!0});var he=m(Z);Pe=w(he,"P",{});var it=m(Pe);Ie=w(it,"I",{class:!0});var rl=m(Ie);yt=O(rl,"X-Variable Name:"),rl.forEach(_),wt=B(it),xe=O(it,e[11]),it.forEach(_),Et=B(he),qe=w(he,"P",{});var st=m(qe);Se=w(st,"I",{class:!0});var ol=m(Se);kt=O(ol,"Group:"),ol.forEach(_),Dt=B(st),et=O(st,e[13]),st.forEach(_),Ot=B(he),Ve=w(he,"P",{});var ut=m(Ve);Me=w(ut,"I",{class:!0});var nl=m(Me);Pt=O(nl,"Correlation Coefficient:"),nl.forEach(_),qt=B(ut),tt=O(ut,Be),ut.forEach(_),Vt=B(he),De=w(he,"P",{});var Ue=m(De);Re=w(Ue,"I",{class:!0});var il=m(Re);Ct=O(il,"Trend Line Formula"),il.forEach(_),Ft=O(Ue,": Recovery Rate (%) = "),lt=O(Ue,We),Tt=O(Ue," X + "),at=O(Ue,He),Ue.forEach(_),It=B(he),Ce=w(he,"P",{});var ht=m(Ce);je=w(ht,"I",{class:!0});var sl=m(je);St=O(sl,"Data Source:"),sl.forEach(_),Mt=B(ht),rt=O(ht,e[12]),ht.forEach(_),Rt=B(he),jt=w(he,"BR",{}),Nt=B(he),Lt=w(he,"BR",{}),he.forEach(_),zt=B(de),At=w(de,"BR",{}),Gt=B(de),Ut=w(de,"BR",{}),Bt=B(de),Wt=w(de,"BR",{}),de.forEach(_),j.forEach(_),this.h()},h(){i(b,"href","/ranking_data.csv"),i(T,"href","/variables_data.csv"),i(ne,"href","/variables_data_dictionary.csv"),i(s,"href","/methodology"),i(r,"class","text"),i(ce,"id","options-season"),i(ce,"class","svelte-h15qja"),i(_e,"id","options-region"),i(_e,"class","svelte-h15qja"),i(Q,"id","options"),i(Q,"class","svelte-h15qja"),i(le,"x1",Ke=45+Ee([0,e[5]],e[4],parseFloat(e[10][0][0]))),i(le,"y1",Qe=30+we(e[17],e[2]-40,parseFloat(e[10][0][1]))),i(le,"x2",Ye=45+Ee([0,e[5]],e[4],parseFloat(e[10][1][0]))),i(le,"y2",Je=30+we(e[17],e[2]-40,parseFloat(e[10][1][1]))),i(le,"stroke","#D0D1C9"),i(le,"stroke-width","1.5"),i(le,"stroke-dasharray","4 2"),i(F,"height",e[2]),i(F,"width",e[1]),i(F,"id","chart"),i(F,"class","svelte-h15qja"),i(Ie,"class","italic"),i(Se,"class","italic"),i(Me,"class","italic"),i(Re,"class","italic"),i(je,"class","italic"),i(Z,"class","text"),i(G,"id","chart-wrapper"),i(G,"class","svelte-h15qja"),Hl(()=>e[36].call(G)),i(a,"class","svelte-h15qja")},m(c,j){_t(t,c,j),W(c,l,j),W(c,a,j),u(a,r),u(r,n),u(n,h),u(r,q),u(r,E),u(E,d),u(r,k),u(r,v),u(v,p),u(r,V),u(r,Y),u(Y,L),u(Y,b),u(b,X),u(Y,N),u(r,C),u(r,P),u(P,te),u(P,T),u(T,oe),u(P,H),u(P,ne),u(ne,z),u(P,se),u(r,R),u(r,K),u(K,A),u(K,s),u(s,M),u(K,o),u(a,S),u(a,G),u(G,Q),u(Q,ce),_t(fe,ce,null),u(Q,Oe),u(Q,_e),_t(pe,_e,null),u(Q,I),_t(ke,Q,null),u(G,g),u(G,F);for(let f=0;f<$.length;f+=1)$[f]&&$[f].m(F,null);u(F,Te);for(let f=0;f<5;f+=1)ve[f]&&ve[f].m(F,null);u(F,le);for(let f=0;f<x.length;f+=1)x[f]&&x[f].m(F,null);u(F,Ze);for(let f=0;f<ee.length;f+=1)ee[f]&&ee[f].m(F,null);u(F,$e),re&&re.m(F,null),u(G,bt),u(G,Z),u(Z,Pe),u(Pe,Ie),u(Ie,yt),u(Pe,wt),u(Pe,xe),u(Z,Et),u(Z,qe),u(qe,Se),u(Se,kt),u(qe,Dt),u(qe,et),u(Z,Ot),u(Z,Ve),u(Ve,Me),u(Me,Pt),u(Ve,qt),u(Ve,tt),u(Z,Vt),u(Z,De),u(De,Re),u(Re,Ct),u(De,Ft),u(De,lt),u(De,Tt),u(De,at),u(Z,It),u(Z,Ce),u(Ce,je),u(je,St),u(Ce,Mt),u(Ce,rt),u(Z,Rt),u(Z,jt),u(Z,Nt),u(Z,Lt),u(G,zt),u(G,At),u(G,Gt),u(G,Ut),u(G,Bt),u(G,Wt),Yt=Xl(G,e[36].bind(G)),ae=!0},p(c,j){if(j[0]&262154){Ne=c[3].reverse();let f;for(f=0;f<Ne.length;f+=1){const ue=Tl(c,Ne,f);$[f]?$[f].p(ue,j):($[f]=Il(ue),$[f].c(),$[f].m(F,Te))}for(;f<$.length;f+=1)$[f].d(1);$.length=Ne.length}if(j[0]&49156){Ht=[0,1,2,3,4];let f;for(f=0;f<5;f+=1){const ue=Fl(c,Ht,f);ve[f]?ve[f].p(ue,j):(ve[f]=Sl(ue),ve[f].c(),ve[f].m(F,le))}for(;f<5;f+=1)ve[f].d(1)}if((!ae||j[0]&1072&&Ke!==(Ke=45+Ee([0,c[5]],c[4],parseFloat(c[10][0][0]))))&&i(le,"x1",Ke),(!ae||j[0]&132100&&Qe!==(Qe=30+we(c[17],c[2]-40,parseFloat(c[10][0][1]))))&&i(le,"y1",Qe),(!ae||j[0]&1072&&Ye!==(Ye=45+Ee([0,c[5]],c[4],parseFloat(c[10][1][0]))))&&i(le,"x2",Ye),(!ae||j[0]&132100&&Je!==(Je=30+we(c[17],c[2]-40,parseFloat(c[10][1][1]))))&&i(le,"y2",Je),j[0]&131189){Le=c[0];let f;for(f=0;f<Le.length;f+=1){const ue=Cl(c,Le,f);x[f]?x[f].p(ue,j):(x[f]=Rl(ue),x[f].c(),x[f].m(F,Ze))}for(;f<x.length;f+=1)x[f].d(1);x.length=Le.length}if(j[0]&1769589){ze=c[0];let f;for(f=0;f<ze.length;f+=1){const ue=Vl(c,ze,f);ee[f]?ee[f].p(ue,j):(ee[f]=Nl(ue),ee[f].c(),ee[f].m(F,$e))}for(;f<ee.length;f+=1)ee[f].d(1);ee.length=ze.length}c[16]!=null?re?re.p(c,j):(re=Ll(c),re.c(),re.m(F,null)):re&&(re.d(1),re=null),(!ae||j[0]&4)&&i(F,"height",c[2]),(!ae||j[0]&2)&&i(F,"width",c[1]),(!ae||j[0]&2048)&&J(xe,c[11]),(!ae||j[0]&8192)&&J(et,c[13]),(!ae||j[0]&128)&&Be!==(Be=c[7].toFixed(3)+"")&&J(tt,Be),(!ae||j[0]&256)&&We!==(We=Al(c[8])+"")&&J(lt,We),(!ae||j[0]&512)&&He!==(He=c[9].toFixed(2)+"")&&J(at,He),(!ae||j[0]&4096)&&J(rt,c[12])},i(c){ae||(pt(t.$$.fragment,c),pt(fe.$$.fragment,c),pt(pe.$$.fragment,c),pt(ke.$$.fragment,c),ae=!0)},o(c){vt(t.$$.fragment,c),vt(fe.$$.fragment,c),vt(pe.$$.fragment,c),vt(ke.$$.fragment,c),ae=!1},d(c){dt(t,c),c&&_(l),c&&_(a),dt(fe),dt(pe),dt(ke),ge($,c),ge(ve,c),ge(x,c),ge(ee,c),re&&re.d(),Yt()}}}function zl(e,t){let l=[];for(let a=0;a<=Math.ceil(e/t);a++)l.push(a*t);return l}function ca(e){const t=Math.pow(10,Math.floor(Math.log10(e)));return Math.ceil(e/t)*t}function we(e,t,l){return t-t*l/(e[1]-e[0])}function Ee(e,t,l){return t*l/(e[1]-e[0])}function fa(e,t,l,a,r,n){let h,q,E,d,k=e*l+t;k>=a&&k<=n?(h=l,q=k):e>0?(h=(a-t)/e,q=a):(h=(n-t)/e,q=n);let v=e*r+t;return v>=a&&v<=n?(E=r,d=v):e>0?(E=(n-t)/e,d=n):(E=(a-t)/e,d=a),[[h,q],[E,d]]}function Al(e){return Math.abs(e)<.001?e.toExponential(2):Math.abs(e)>=1e3?e.toLocaleString(void 0,{maximumFractionDigits:0}):Math.abs(e)>=10?e.toFixed(2):e.toFixed(4)}function _a(e,t,l){let a,r,n,h,q,E;Xe(e,Kt,g=>l(6,n=g)),Xe(e,Zl,g=>l(29,h=g)),Xe(e,$l,g=>l(30,q=g)),Xe(e,xl,g=>l(39,E=g));let d=[],k=[],v=[],p=[],V=[],Y=0,L,b=0,X=0,N=[[0,0],[1,1]],C="",P="",te="";const T=E;async function oe(){try{const F=await(await fetch("../ranking_data.csv")).text();l(21,d=mt(F))}catch(g){console.error("Error loading CSV data:",g)}}async function H(){try{const F=await(await fetch("../variables_data.csv")).text();l(22,k=mt(F))}catch(g){console.error("Error loading CSV data:",g)}}async function ne(){try{const F=await(await fetch("../variables_data_dictionary.csv")).text();l(24,V=mt(F))}catch(g){console.error("Error loading CSV data:",g)}}Wl(()=>{oe(),H(),ne()});let z,se=420,R=1,K=[0,1],A,s=100,M=1,o=1,S=.1,G=1,Q;const ce=function(g){g.clientX,g.clientY},fe=(g,F)=>F.name===g.region,Oe=(g,F)=>{l(16,Q=g),ce(F)},_e=()=>{l(16,Q=void 0)},pe=g=>g.name===Q.region,I=g=>g.name===Q.region;function ke(){z=this.offsetWidth,l(1,z)}return e.$$.update=()=>{e.$$.dirty[0]&1612709888&&l(23,v=d.filter(g=>g.metric==="downtown").filter(g=>g.region!=="Europe").filter(g=>g.Season===`Season_${q}`).filter(g=>h.includes(g.region)).sort((g,F)=>F.seasonal_average-g.seasonal_average)),e.$$.dirty[0]&12582912&&l(0,p=v.map(function(g){var F=k.find(function(Te){return Te.city===g.city});return Object.assign({},g,F)})),e.$$.dirty[0]&16777280&&l(12,P=V.length>0?V.filter(g=>g.value===n)[0].source:null),e.$$.dirty[0]&16777280&&l(11,C=V.length>0?V.filter(g=>g.value===n)[0].text:null),e.$$.dirty[0]&16777280&&l(13,te=V.length>0?V.filter(g=>g.value===n)[0].group:null),e.$$.dirty[0]&2&&l(2,se=z*.666),e.$$.dirty[0]&1&&l(26,R=p.length!==0?p[0].seasonal_average:1),e.$$.dirty[0]&67108864&&l(26,R=R<1?1:R),e.$$.dirty[0]&67108864&&(R<2?l(3,K=zl(R,.2)):l(3,K=zl(R,.5))),e.$$.dirty[0]&12&&l(18,a=(se-40)/(K.length-1)),e.$$.dirty[0]&8&&l(17,r=[Math.min(...K),Math.max(...K)]),e.$$.dirty[0]&64&&l(27,A=n),e.$$.dirty[0]&2&&l(4,s=z-45-10),e.$$.dirty[0]&134217729&&l(28,M=Math.max(...p.map(g=>parseFloat(g[A])).filter(g=>!isNaN(g)))),e.$$.dirty[0]&268435456&&l(5,o=ca(M)),e.$$.dirty[0]&16&&l(14,S=s/4),e.$$.dirty[0]&32&&l(15,G=o/4),e.$$.dirty[0]&134217729&&l(7,Y=p.length>0?ua(p.map(g=>parseFloat(g[A])),p.map(g=>parseFloat(g.seasonal_average))):0),e.$$.dirty[0]&134217729&&l(25,L=p.length>0?ra(p.map(g=>[parseFloat(g[A]),parseFloat(g.seasonal_average)])):null),e.$$.dirty[0]&33554472&&l(10,N=L!==null?fa(L.m,L.b,0,0,o,Math.max(...K)):[[0,0],[1,1]]),e.$$.dirty[0]&33554432&&l(8,b=L!==null?100*L.m:0),e.$$.dirty[0]&33554432&&L!==null&&l(9,X=100*L.b)},[p,z,se,K,s,o,n,Y,b,X,N,C,P,te,S,G,Q,r,a,T,ce,d,k,v,V,L,R,A,M,h,q,fe,Oe,_e,pe,I,ke]}class ba extends Gl{constructor(t){super(),Ul(this,t,_a,ha,Bl,{},null,[-1,-1])}}export{ba as component,ma as universal};
