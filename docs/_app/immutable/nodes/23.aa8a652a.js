import{S as Wl,i as Hl,s as Yl,k as b,q as k,a as L,l as y,m as v,r as O,h as _,c as U,n as s,b as j,C as n,N as pl,P as Qt,D as dl,Q as ve,E as pt,o as Jl,u as Z,y as jt,L as ge,e as ye,z as Wt,M as me,K as Kl,A as Ht,O as Ql,g as Yt,d as Jt,B as Kt,p as _t,R as Zl}from"../chunks/index.d6d9c1d5.js";import{H as $l}from"../chunks/global.26cac63f.js";import{a as Zt,s as xl,r as ea}from"../chunks/stores.64de824d.js";/* empty css                                                           */import{S as ta}from"../chunks/SelectRegions.327a773d.js";import{c as dt}from"../chunks/csv.3ac754ad.js";import{s as la,l as aa}from"../chunks/simple-statistics.c7340a6c.js";const oa=!0,ba=Object.freeze(Object.defineProperty({__proto__:null,prerender:oa},Symbol.toStringTag,{value:"Module"}));function vl(e,t,l){const a=e.slice();return a[13]=t[l],a}function gl(e,t,l){const a=e.slice();return a[13]=t[l],a}function ml(e,t,l){const a=e.slice();return a[13]=t[l],a}function bl(e,t,l){const a=e.slice();return a[13]=t[l],a}function yl(e,t,l){const a=e.slice();return a[13]=t[l],a}function El(e,t,l){const a=e.slice();return a[13]=t[l],a}function wl(e,t,l){const a=e.slice();return a[13]=t[l],a}function kl(e,t,l){const a=e.slice();return a[13]=t[l],a}function Ol(e){let t,l=e[13].text+"",a,o;return{c(){t=b("option"),a=k(l),this.h()},l(i){t=y(i,"OPTION",{class:!0});var h=v(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=o=e[13].value,t.value=t.__value,s(t,"class","svelte-19nzrqx")},m(i,h){j(i,t,h),n(t,a)},p(i,h){h&8&&l!==(l=i[13].text+"")&&Z(a,l),h&8&&o!==(o=i[13].value)&&(t.__value=o,t.value=t.__value)},d(i){i&&_(t)}}}function Dl(e){let t,l=e[13].text+"",a,o;return{c(){t=b("option"),a=k(l),this.h()},l(i){t=y(i,"OPTION",{class:!0});var h=v(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=o=e[13].value,t.value=t.__value,s(t,"class","svelte-19nzrqx")},m(i,h){j(i,t,h),n(t,a)},p(i,h){h&16&&l!==(l=i[13].text+"")&&Z(a,l),h&16&&o!==(o=i[13].value)&&(t.__value=o,t.value=t.__value)},d(i){i&&_(t)}}}function Pl(e){let t,l=e[13].text+"",a,o;return{c(){t=b("option"),a=k(l),this.h()},l(i){t=y(i,"OPTION",{class:!0});var h=v(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=o=e[13].value,t.value=t.__value,s(t,"class","svelte-19nzrqx")},m(i,h){j(i,t,h),n(t,a)},p(i,h){h&64&&l!==(l=i[13].text+"")&&Z(a,l),h&64&&o!==(o=i[13].value)&&(t.__value=o,t.value=t.__value)},d(i){i&&_(t)}}}function Fl(e){let t,l=e[13].text+"",a,o;return{c(){t=b("option"),a=k(l),this.h()},l(i){t=y(i,"OPTION",{class:!0});var h=v(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=o=e[13].value,t.value=t.__value,s(t,"class","svelte-19nzrqx")},m(i,h){j(i,t,h),n(t,a)},p(i,h){h&32&&l!==(l=i[13].text+"")&&Z(a,l),h&32&&o!==(o=i[13].value)&&(t.__value=o,t.value=t.__value)},d(i){i&&_(t)}}}function Tl(e){let t,l=e[13].text+"",a,o;return{c(){t=b("option"),a=k(l),this.h()},l(i){t=y(i,"OPTION",{class:!0});var h=v(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=o=e[13].value,t.value=t.__value,s(t,"class","svelte-19nzrqx")},m(i,h){j(i,t,h),n(t,a)},p(i,h){h&2&&l!==(l=i[13].text+"")&&Z(a,l),h&2&&o!==(o=i[13].value)&&(t.__value=o,t.value=t.__value)},d(i){i&&_(t)}}}function Il(e){let t,l=e[13].text+"",a,o;return{c(){t=b("option"),a=k(l),this.h()},l(i){t=y(i,"OPTION",{class:!0});var h=v(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=o=e[13].value,t.value=t.__value,s(t,"class","svelte-19nzrqx")},m(i,h){j(i,t,h),n(t,a)},p(i,h){h&256&&l!==(l=i[13].text+"")&&Z(a,l),h&256&&o!==(o=i[13].value)&&(t.__value=o,t.value=t.__value)},d(i){i&&_(t)}}}function Rl(e){let t,l=e[13].text+"",a,o;return{c(){t=b("option"),a=k(l),this.h()},l(i){t=y(i,"OPTION",{class:!0});var h=v(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=o=e[13].value,t.value=t.__value,s(t,"class","svelte-19nzrqx")},m(i,h){j(i,t,h),n(t,a)},p(i,h){h&4&&l!==(l=i[13].text+"")&&Z(a,l),h&4&&o!==(o=i[13].value)&&(t.__value=o,t.value=t.__value)},d(i){i&&_(t)}}}function Sl(e){let t,l=e[13].text+"",a,o;return{c(){t=b("option"),a=k(l),this.h()},l(i){t=y(i,"OPTION",{class:!0});var h=v(t);a=O(h,l),h.forEach(_),this.h()},h(){t.__value=o=e[13].value,t.value=t.__value,s(t,"class","svelte-19nzrqx")},m(i,h){j(i,t,h),n(t,a)},p(i,h){h&128&&l!==(l=i[13].text+"")&&Z(a,l),h&128&&o!==(o=i[13].value)&&(t.__value=o,t.value=t.__value)},d(i){i&&_(t)}}}function ra(e){let t,l,a,o,i,h,F,w,g,D,d,p,S,H,W=e[3],E=[];for(let u=0;u<W.length;u+=1)E[u]=Ol(kl(e,W,u));let Y=e[4],V=[];for(let u=0;u<Y.length;u+=1)V[u]=Dl(wl(e,Y,u));let T=e[6],P=[];for(let u=0;u<T.length;u+=1)P[u]=Pl(El(e,T,u));let ne=e[5],R=[];for(let u=0;u<ne.length;u+=1)R[u]=Fl(yl(e,ne,u));let se=e[1],z=[];for(let u=0;u<se.length;u+=1)z[u]=Tl(bl(e,se,u));let le=e[8],A=[];for(let u=0;u<le.length;u+=1)A[u]=Il(ml(e,le,u));let Q=e[2],q=[];for(let u=0;u<Q.length;u+=1)q[u]=Rl(gl(e,Q,u));let K=e[7],G=[];for(let u=0;u<K.length;u+=1)G[u]=Sl(vl(e,K,u));return{c(){t=b("p"),l=k("Select Variable:"),a=L(),o=b("select"),i=b("optgroup");for(let u=0;u<E.length;u+=1)E[u].c();h=b("optgroup");for(let u=0;u<V.length;u+=1)V[u].c();F=b("optgroup");for(let u=0;u<P.length;u+=1)P[u].c();w=b("optgroup");for(let u=0;u<R.length;u+=1)R[u].c();g=b("optgroup");for(let u=0;u<z.length;u+=1)z[u].c();D=b("optgroup");for(let u=0;u<A.length;u+=1)A[u].c();d=b("optgroup");for(let u=0;u<q.length;u+=1)q[u].c();p=b("optgroup");for(let u=0;u<G.length;u+=1)G[u].c();this.h()},l(u){t=y(u,"P",{});var C=v(t);l=O(C,"Select Variable:"),C.forEach(_),a=U(u),o=y(u,"SELECT",{class:!0});var r=v(o);i=y(r,"OPTGROUP",{label:!0});var N=v(i);for(let I=0;I<E.length;I+=1)E[I].l(N);N.forEach(_),h=y(r,"OPTGROUP",{label:!0});var ue=v(h);for(let I=0;I<V.length;I+=1)V[I].l(ue);ue.forEach(_),F=y(r,"OPTGROUP",{label:!0});var ke=v(F);for(let I=0;I<P.length;I+=1)P[I].l(ke);ke.forEach(_),w=y(r,"OPTGROUP",{label:!0});var he=v(w);for(let I=0;I<R.length;I+=1)R[I].l(he);he.forEach(_),g=y(r,"OPTGROUP",{label:!0});var De=v(g);for(let I=0;I<z.length;I+=1)z[I].l(De);De.forEach(_),D=y(r,"OPTGROUP",{label:!0});var B=v(D);for(let I=0;I<A.length;I+=1)A[I].l(B);B.forEach(_),d=y(r,"OPTGROUP",{label:!0});var ae=v(d);for(let I=0;I<q.length;I+=1)q[I].l(ae);ae.forEach(_),p=y(r,"OPTGROUP",{label:!0});var be=v(p);for(let I=0;I<G.length;I+=1)G[I].l(be);be.forEach(_),r.forEach(_),this.h()},h(){s(i,"label","Demographics"),s(h,"label","Employment"),s(F,"label","Income"),s(w,"label","Housing"),s(g,"label","Commuting"),s(D,"label","Weather"),s(d,"label","COVID-19 Closures"),s(p,"label","Political Leaning"),s(o,"class","svelte-19nzrqx")},m(u,C){j(u,t,C),n(t,l),j(u,a,C),j(u,o,C),n(o,i);for(let r=0;r<E.length;r+=1)E[r]&&E[r].m(i,null);n(o,h);for(let r=0;r<V.length;r+=1)V[r]&&V[r].m(h,null);n(o,F);for(let r=0;r<P.length;r+=1)P[r]&&P[r].m(F,null);n(o,w);for(let r=0;r<R.length;r+=1)R[r]&&R[r].m(w,null);n(o,g);for(let r=0;r<z.length;r+=1)z[r]&&z[r].m(g,null);n(o,D);for(let r=0;r<A.length;r+=1)A[r]&&A[r].m(D,null);n(o,d);for(let r=0;r<q.length;r+=1)q[r]&&q[r].m(d,null);n(o,p);for(let r=0;r<G.length;r+=1)G[r]&&G[r].m(p,null);pl(o,e[0]),S||(H=Qt(o,"change",e[9]),S=!0)},p(u,[C]){if(C&8){W=u[3];let r;for(r=0;r<W.length;r+=1){const N=kl(u,W,r);E[r]?E[r].p(N,C):(E[r]=Ol(N),E[r].c(),E[r].m(i,null))}for(;r<E.length;r+=1)E[r].d(1);E.length=W.length}if(C&16){Y=u[4];let r;for(r=0;r<Y.length;r+=1){const N=wl(u,Y,r);V[r]?V[r].p(N,C):(V[r]=Dl(N),V[r].c(),V[r].m(h,null))}for(;r<V.length;r+=1)V[r].d(1);V.length=Y.length}if(C&64){T=u[6];let r;for(r=0;r<T.length;r+=1){const N=El(u,T,r);P[r]?P[r].p(N,C):(P[r]=Pl(N),P[r].c(),P[r].m(F,null))}for(;r<P.length;r+=1)P[r].d(1);P.length=T.length}if(C&32){ne=u[5];let r;for(r=0;r<ne.length;r+=1){const N=yl(u,ne,r);R[r]?R[r].p(N,C):(R[r]=Fl(N),R[r].c(),R[r].m(w,null))}for(;r<R.length;r+=1)R[r].d(1);R.length=ne.length}if(C&2){se=u[1];let r;for(r=0;r<se.length;r+=1){const N=bl(u,se,r);z[r]?z[r].p(N,C):(z[r]=Tl(N),z[r].c(),z[r].m(g,null))}for(;r<z.length;r+=1)z[r].d(1);z.length=se.length}if(C&256){le=u[8];let r;for(r=0;r<le.length;r+=1){const N=ml(u,le,r);A[r]?A[r].p(N,C):(A[r]=Il(N),A[r].c(),A[r].m(D,null))}for(;r<A.length;r+=1)A[r].d(1);A.length=le.length}if(C&4){Q=u[2];let r;for(r=0;r<Q.length;r+=1){const N=gl(u,Q,r);q[r]?q[r].p(N,C):(q[r]=Rl(N),q[r].c(),q[r].m(d,null))}for(;r<q.length;r+=1)q[r].d(1);q.length=Q.length}if(C&128){K=u[7];let r;for(r=0;r<K.length;r+=1){const N=vl(u,K,r);G[r]?G[r].p(N,C):(G[r]=Sl(N),G[r].c(),G[r].m(p,null))}for(;r<G.length;r+=1)G[r].d(1);G.length=K.length}C&511&&pl(o,u[0])},i:dl,o:dl,d(u){u&&_(t),u&&_(a),u&&_(o),ve(E,u),ve(V,u),ve(P,u),ve(R,u),ve(z,u),ve(A,u),ve(q,u),ve(G,u),S=!1,H()}}}function ia(e,t,l){let a;pt(e,Zt,E=>l(11,a=E));let o,i=[],h=[],F=[],w=[],g=[],D=[],d=[],p=[],S=[];async function H(){try{const Y=await(await fetch("../variables_data_dictionary.csv")).text();l(10,i=dt(Y))}catch(E){console.error("Error loading CSV data:",E)}}Jl(()=>{H(),l(0,o=a)});function W(E){const Y=E.target.value;Zt.set(Y)}return e.$$.update=()=>{e.$$.dirty&1024&&l(1,h=i.filter(E=>E.group==="Commuting")),e.$$.dirty&1024&&l(2,F=i.filter(E=>E.group==="COVID-19 Closures")),e.$$.dirty&1024&&l(3,w=i.filter(E=>E.group==="Demographics")),e.$$.dirty&1024&&l(4,g=i.filter(E=>E.group==="Employment")),e.$$.dirty&1024&&l(5,D=i.filter(E=>E.group==="Housing")),e.$$.dirty&1024&&l(6,d=i.filter(E=>E.group==="Income")),e.$$.dirty&1024&&l(7,p=i.filter(E=>E.group==="Political Leaning")),e.$$.dirty&1024&&l(8,S=i.filter(E=>E.group==="Weather"))},[o,h,F,w,g,D,d,p,S,W,i]}class na extends Wl{constructor(t){super(),Hl(this,t,ia,ra,Yl,{})}}function Vl(e,t,l){const a=e.slice();return a[43]=t[l],a[45]=l,a}function Cl(e,t,l){const a=e.slice();return a[43]=t[l],a[45]=l,a}function Nl(e,t,l){const a=e.slice();return a[45]=t[l],a}function Ml(e,t,l){const a=e.slice();return a[49]=t[l],a[45]=l,a}function zl(e){let t,l,a,o,i=(100*e[49]).toFixed(0)+"",h,F,w,g,D,d;return{c(){t=ge("line"),o=ge("text"),h=k(i),F=k("%"),g=ge("line"),this.h()},l(p){t=me(p,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),v(t).forEach(_),o=me(p,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var S=v(o);h=O(S,i),F=O(S,"%"),S.forEach(_),g=me(p,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),v(g).forEach(_),this.h()},h(){s(t,"class","grid svelte-1b8om2r"),s(t,"x1","40"),s(t,"y1",l=30+e[45]*e[19]),s(t,"x2",e[1]),s(t,"y2",a=30+e[45]*e[19]),s(o,"class","axis-label svelte-1b8om2r"),s(o,"x","35"),s(o,"y",w=35+e[45]*e[19]),s(o,"text-anchor","end"),s(g,"class","grid-white svelte-1b8om2r"),s(g,"x1","37"),s(g,"y1",D=30+e[45]*e[19]),s(g,"x2","45"),s(g,"y2",d=30+e[45]*e[19])},m(p,S){j(p,t,S),j(p,o,S),n(o,h),n(o,F),j(p,g,S)},p(p,S){S[0]&524288&&l!==(l=30+p[45]*p[19])&&s(t,"y1",l),S[0]&2&&s(t,"x2",p[1]),S[0]&524288&&a!==(a=30+p[45]*p[19])&&s(t,"y2",a),S[0]&8&&i!==(i=(100*p[49]).toFixed(0)+"")&&Z(h,i),S[0]&524288&&w!==(w=35+p[45]*p[19])&&s(o,"y",w),S[0]&524288&&D!==(D=30+p[45]*p[19])&&s(g,"y1",D),S[0]&524288&&d!==(d=30+p[45]*p[19])&&s(g,"y2",d)},d(p){p&&_(t),p&&_(o),p&&_(g)}}}function ql(e){let t,l,a,o,i=(e[45]*e[16]).toLocaleString()+"",h,F,w,g,D;return{c(){t=ge("line"),o=ge("text"),h=k(i),w=ge("line"),this.h()},l(d){t=me(d,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),v(t).forEach(_),o=me(d,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var p=v(o);h=O(p,i),p.forEach(_),w=me(d,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),v(w).forEach(_),this.h()},h(){s(t,"class","grid svelte-1b8om2r"),s(t,"x1",l=45+e[45]*e[15]),s(t,"y1","22"),s(t,"x2",a=45+e[45]*e[15]),s(t,"y2",e[2]),s(o,"class","axis-label svelte-1b8om2r"),s(o,"x",F=47+e[45]*e[15]),s(o,"y","17"),s(o,"text-anchor","end"),s(w,"class","grid-white svelte-1b8om2r"),s(w,"x1",g=45+e[45]*e[15]),s(w,"y1","22"),s(w,"x2",D=45+e[45]*e[15]),s(w,"y2","31")},m(d,p){j(d,t,p),j(d,o,p),n(o,h),j(d,w,p)},p(d,p){p[0]&32768&&l!==(l=45+d[45]*d[15])&&s(t,"x1",l),p[0]&32768&&a!==(a=45+d[45]*d[15])&&s(t,"x2",a),p[0]&4&&s(t,"y2",d[2]),p[0]&65536&&i!==(i=(d[45]*d[16]).toLocaleString()+"")&&Z(h,i),p[0]&32768&&F!==(F=47+d[45]*d[15])&&s(o,"x",F),p[0]&32768&&g!==(g=45+d[45]*d[15])&&s(w,"x1",g),p[0]&32768&&D!==(D=45+d[45]*d[15])&&s(w,"x2",D)},d(d){d&&_(t),d&&_(o),d&&_(w)}}}function Al(e){let t,l,a;return{c(){t=ge("circle"),this.h()},l(o){t=me(o,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),v(t).forEach(_),this.h()},h(){s(t,"class","point-white svelte-1b8om2r"),s(t,"cx",l=45+we([0,e[6]],e[5],parseFloat(e[43][e[7]]))),s(t,"cy",a=30+Ee(e[18],e[2]-40,e[43].seasonal_average)),s(t,"r","6"),s(t,"fill","black"),s(t,"stroke","white"),s(t,"stroke-width","3")},m(o,i){j(o,t,i)},p(o,i){i[0]&225&&l!==(l=45+we([0,o[6]],o[5],parseFloat(o[43][o[7]])))&&s(t,"cx",l),i[0]&262149&&a!==(a=30+Ee(o[18],o[2]-40,o[43].seasonal_average))&&s(t,"cy",a)},d(o){o&&_(t)}}}function Ll(e){let t=e[43][e[4]]>=0&&!isNaN(parseFloat(e[43][e[4]])),l,a=t&&Al(e);return{c(){a&&a.c(),l=ye()},l(o){a&&a.l(o),l=ye()},m(o,i){a&&a.m(o,i),j(o,l,i)},p(o,i){i[0]&17&&(t=o[43][o[4]]>=0&&!isNaN(parseFloat(o[43][o[4]]))),t?a?a.p(o,i):(a=Al(o),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null)},d(o){a&&a.d(o),o&&_(l)}}}function Ul(e){let t,l,a,o,i,h;function F(...g){return e[31](e[43],...g)}function w(...g){return e[32](e[43],...g)}return{c(){t=ge("circle"),this.h()},l(g){t=me(g,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),v(t).forEach(_),this.h()},h(){s(t,"class","point svelte-1b8om2r"),s(t,"cx",l=45+we([0,e[6]],e[5],parseFloat(e[43][e[7]]))),s(t,"cy",a=30+Ee(e[18],e[2]-40,e[43].seasonal_average)),s(t,"r","6"),s(t,"fill",o=e[20].find(F).colour),s(t,"stroke","white"),s(t,"stroke-width","0")},m(g,D){j(g,t,D),i||(h=[Qt(t,"mouseover",w),Qt(t,"mouseout",e[33])],i=!0)},p(g,D){e=g,D[0]&225&&l!==(l=45+we([0,e[6]],e[5],parseFloat(e[43][e[7]])))&&s(t,"cx",l),D[0]&262149&&a!==(a=30+Ee(e[18],e[2]-40,e[43].seasonal_average))&&s(t,"cy",a),D[0]&1&&o!==(o=e[20].find(F).colour)&&s(t,"fill",o)},d(g){g&&_(t),i=!1,Zl(h)}}}function Gl(e){let t=e[43][e[4]]>=0&&!isNaN(parseFloat(e[43][e[4]])),l,a=t&&Ul(e);return{c(){a&&a.c(),l=ye()},l(o){a&&a.l(o),l=ye()},m(o,i){a&&a.m(o,i),j(o,l,i)},p(o,i){i[0]&17&&(t=o[43][o[4]]>=0&&!isNaN(parseFloat(o[43][o[4]]))),t?a?a.p(o,i):(a=Ul(o),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null)},d(o){a&&a.d(o),o&&_(l)}}}function Bl(e){let t,l,a,o,i=e[17].city+"",h,F,w,g,D=Math.round(100*e[17].seasonal_average)+"",d,p,S,H,W=e[17][e[7]].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"",E,Y,V;return{c(){t=ge("foreignObject"),l=b("div"),a=b("p"),o=b("u"),h=k(i),F=L(),w=b("br"),g=k(` 
                        Recovery Rate: `),d=k(D),p=k(`%
                        `),S=b("br"),H=k(`
                        X-Value: `),E=k(W),this.h()},l(T){t=me(T,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var P=v(t);l=y(P,"DIV",{id:!0,style:!0,class:!0});var ne=v(l);a=y(ne,"P",{id:!0,style:!0,class:!0});var R=v(a);o=y(R,"U",{});var se=v(o);h=O(se,i),se.forEach(_),F=U(R),w=y(R,"BR",{}),g=O(R,` 
                        Recovery Rate: `),d=O(R,D),p=O(R,`%
                        `),S=y(R,"BR",{}),H=O(R,`
                        X-Value: `),E=O(R,W),R.forEach(_),ne.forEach(_),P.forEach(_),this.h()},h(){s(a,"id","tooltip-p"),_t(a,"color",e[20].find(e[34]).text),s(a,"class","svelte-1b8om2r"),s(l,"id","tooltip"),_t(l,"background-color",e[20].find(e[35]).colour),s(l,"class","svelte-1b8om2r"),s(t,"x",Y=(parseFloat(e[17][e[7]])<e[6]/2?0:-145)+55+we([0,e[6]],e[5],parseFloat(e[17][e[7]]))),s(t,"y",V=22+Ee(e[18],e[2]-40,e[17].seasonal_average)),s(t,"width","125"),s(t,"height","50")},m(T,P){j(T,t,P),n(t,l),n(l,a),n(a,o),n(o,h),n(a,F),n(a,w),n(a,g),n(a,d),n(a,p),n(a,S),n(a,H),n(a,E)},p(T,P){P[0]&131072&&i!==(i=T[17].city+"")&&Z(h,i),P[0]&131072&&D!==(D=Math.round(100*T[17].seasonal_average)+"")&&Z(d,D),P[0]&131200&&W!==(W=T[17][T[7]].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"")&&Z(E,W),P[0]&131072&&_t(a,"color",T[20].find(T[34]).text),P[0]&131072&&_t(l,"background-color",T[20].find(T[35]).colour),P[0]&131296&&Y!==(Y=(parseFloat(T[17][T[7]])<T[6]/2?0:-145)+55+we([0,T[6]],T[5],parseFloat(T[17][T[7]])))&&s(t,"x",Y),P[0]&393220&&V!==(V=22+Ee(T[18],T[2]-40,T[17].seasonal_average))&&s(t,"y",V)},d(T){T&&_(t)}}}function sa(e){let t,l,a,o,i,h,F,w,g,D,d,p,S,H,W,E,Y,V,T,P,ne,R,se,z,le,A,Q,q,K,G,u,C,r,N,ue,ke,he,De,B,ae,be,I,Xe,m,J,je,Pe,vt,X,Je,oe,Ke,Qe,Ze,$e,xe,et,gt,$,Fe,Ve,mt,bt,tt,yt,Te,Ce,Et,wt,lt,kt,Ie,Ne,Ot,Dt,We=e[8].toFixed(3)+"",at,Pt,Oe,Me,Ft,Tt,He=jl(e[9])+"",ot,It,Ye=e[10].toFixed(2)+"",rt,Rt,Re,ze,St,Vt,it,Ct,Nt,Mt,zt,qt,At,Lt,Ut,Gt,Bt,$t,re;t=new $l({}),J=new ta({props:{europe:"no",canada:"yes"}}),Pe=new na({});let qe=e[3].reverse(),x=[];for(let c=0;c<qe.length;c+=1)x[c]=zl(Ml(e,qe,c));let Xt=[0,1,2,3,4],pe=[];for(let c=0;c<5;c+=1)pe[c]=ql(Nl(e,Xt,c));let Ae=e[0],ee=[];for(let c=0;c<Ae.length;c+=1)ee[c]=Ll(Cl(e,Ae,c));let Le=e[0],te=[];for(let c=0;c<Le.length;c+=1)te[c]=Gl(Vl(e,Le,c));let ie=e[17]!=null&&Bl(e);return{c(){jt(t.$$.fragment),l=L(),a=b("main"),o=b("div"),i=b("h1"),h=k("Downtown Recovery Correlations"),F=L(),w=b("p"),g=b("i"),D=k("Updated October 16, 2023"),d=L(),p=b("p"),S=k("This page plots downtown recovery rates (y-axis) relative to a number of other urban variables (x-axis). While these charts indicate bivariate relationships, and in some cases reveal potential correlations, they should be interpreted with caution as they do not imply direct causation."),H=L(),W=b("p"),E=k("The recovery metrics (y-axis) on these charts are based on a sample of mobile phone data. The recovery metrics on the charts and maps are computed by counting the number of unique visitors in a city's downtown area in the specified time period (standardized by region – see ‘Standardization’ section below), and then dividing it by the standardized number of unique visitors during the equivalent time period in 2019. Specifically, the rankings below compare the period from the beginning of March to mid-June in 2023 relative to the same period in 2019."),Y=L(),V=b("p"),T=k("A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels. Click "),P=b("a"),ne=k("here"),R=k(" to download the y-axis data shown on this chart."),se=L(),z=b("p"),le=k("The data on the x-axis comes from a variety of sources. The full dataset including all variables in the drop-down can be downloaded "),A=b("a"),Q=k("here"),q=k(". You may also wish to download a "),K=b("a"),G=k("data dictionary"),u=k(", which includes the names of data sources for each variable."),C=L(),r=b("p"),N=k("For more information, read our "),ue=b("a"),ke=k("Methodology"),he=k(" page."),De=L(),B=b("div"),ae=b("div"),be=b("p"),I=k("Select Regions:"),Xe=L(),m=b("div"),jt(J.$$.fragment),je=L(),jt(Pe.$$.fragment),vt=L(),X=ge("svg");for(let c=0;c<x.length;c+=1)x[c].c();Je=ye();for(let c=0;c<5;c+=1)pe[c].c();oe=ge("line");for(let c=0;c<ee.length;c+=1)ee[c].c();xe=ye();for(let c=0;c<te.length;c+=1)te[c].c();et=ye(),ie&&ie.c(),gt=L(),$=b("div"),Fe=b("p"),Ve=b("i"),mt=k("X-Variable Name:"),bt=L(),tt=k(e[12]),yt=L(),Te=b("p"),Ce=b("i"),Et=k("Group:"),wt=L(),lt=k(e[14]),kt=L(),Ie=b("p"),Ne=b("i"),Ot=k("Correlation Coefficient:"),Dt=L(),at=k(We),Pt=L(),Oe=b("p"),Me=b("i"),Ft=k("Trend Line Formula"),Tt=k(": Recovery Rate (%) = "),ot=k(He),It=k(" X + "),rt=k(Ye),Rt=L(),Re=b("p"),ze=b("i"),St=k("Data Source:"),Vt=L(),it=k(e[13]),Ct=L(),Nt=b("br"),Mt=L(),zt=b("br"),qt=L(),At=b("br"),Lt=L(),Ut=b("br"),Gt=L(),Bt=b("br"),this.h()},l(c){Wt(t.$$.fragment,c),l=U(c),a=y(c,"MAIN",{class:!0});var M=v(a);o=y(M,"DIV",{class:!0});var f=v(o);i=y(f,"H1",{});var fe=v(i);h=O(fe,"Downtown Recovery Correlations"),fe.forEach(_),F=U(f),w=y(f,"P",{});var xt=v(w);g=y(xt,"I",{});var el=v(g);D=O(el,"Updated October 16, 2023"),el.forEach(_),xt.forEach(_),d=U(f),p=y(f,"P",{});var tl=v(p);S=O(tl,"This page plots downtown recovery rates (y-axis) relative to a number of other urban variables (x-axis). While these charts indicate bivariate relationships, and in some cases reveal potential correlations, they should be interpreted with caution as they do not imply direct causation."),tl.forEach(_),H=U(f),W=y(f,"P",{});var ll=v(W);E=O(ll,"The recovery metrics (y-axis) on these charts are based on a sample of mobile phone data. The recovery metrics on the charts and maps are computed by counting the number of unique visitors in a city's downtown area in the specified time period (standardized by region – see ‘Standardization’ section below), and then dividing it by the standardized number of unique visitors during the equivalent time period in 2019. Specifically, the rankings below compare the period from the beginning of March to mid-June in 2023 relative to the same period in 2019."),ll.forEach(_),Y=U(f),V=y(f,"P",{});var nt=v(V);T=O(nt,"A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels. Click "),P=y(nt,"A",{href:!0});var al=v(P);ne=O(al,"here"),al.forEach(_),R=O(nt," to download the y-axis data shown on this chart."),nt.forEach(_),se=U(f),z=y(f,"P",{});var Ue=v(z);le=O(Ue,"The data on the x-axis comes from a variety of sources. The full dataset including all variables in the drop-down can be downloaded "),A=y(Ue,"A",{href:!0});var ol=v(A);Q=O(ol,"here"),ol.forEach(_),q=O(Ue,". You may also wish to download a "),K=y(Ue,"A",{href:!0});var rl=v(K);G=O(rl,"data dictionary"),rl.forEach(_),u=O(Ue,", which includes the names of data sources for each variable."),Ue.forEach(_),C=U(f),r=y(f,"P",{});var st=v(r);N=O(st,"For more information, read our "),ue=y(st,"A",{href:!0});var il=v(ue);ke=O(il,"Methodology"),il.forEach(_),he=O(st," page."),st.forEach(_),f.forEach(_),De=U(M),B=y(M,"DIV",{id:!0,class:!0});var de=v(B);ae=y(de,"DIV",{id:!0,class:!0});var Ge=v(ae);be=y(Ge,"P",{});var nl=v(be);I=O(nl,"Select Regions:"),nl.forEach(_),Xe=U(Ge),m=y(Ge,"DIV",{id:!0,class:!0});var sl=v(m);Wt(J.$$.fragment,sl),sl.forEach(_),je=U(Ge),Wt(Pe.$$.fragment,Ge),Ge.forEach(_),vt=U(de),X=me(de,"svg",{height:!0,width:!0,id:!0,class:!0});var Se=v(X);for(let ce=0;ce<x.length;ce+=1)x[ce].l(Se);Je=ye();for(let ce=0;ce<5;ce+=1)pe[ce].l(Se);oe=me(Se,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),v(oe).forEach(_);for(let ce=0;ce<ee.length;ce+=1)ee[ce].l(Se);xe=ye();for(let ce=0;ce<te.length;ce+=1)te[ce].l(Se);et=ye(),ie&&ie.l(Se),Se.forEach(_),gt=U(de),$=y(de,"DIV",{class:!0});var _e=v($);Fe=y(_e,"P",{});var ut=v(Fe);Ve=y(ut,"I",{class:!0});var ul=v(Ve);mt=O(ul,"X-Variable Name:"),ul.forEach(_),bt=U(ut),tt=O(ut,e[12]),ut.forEach(_),yt=U(_e),Te=y(_e,"P",{});var ht=v(Te);Ce=y(ht,"I",{class:!0});var hl=v(Ce);Et=O(hl,"Group:"),hl.forEach(_),wt=U(ht),lt=O(ht,e[14]),ht.forEach(_),kt=U(_e),Ie=y(_e,"P",{});var ct=v(Ie);Ne=y(ct,"I",{class:!0});var cl=v(Ne);Ot=O(cl,"Correlation Coefficient:"),cl.forEach(_),Dt=U(ct),at=O(ct,We),ct.forEach(_),Pt=U(_e),Oe=y(_e,"P",{});var Be=v(Oe);Me=y(Be,"I",{class:!0});var fl=v(Me);Ft=O(fl,"Trend Line Formula"),fl.forEach(_),Tt=O(Be,": Recovery Rate (%) = "),ot=O(Be,He),It=O(Be," X + "),rt=O(Be,Ye),Be.forEach(_),Rt=U(_e),Re=y(_e,"P",{});var ft=v(Re);ze=y(ft,"I",{class:!0});var _l=v(ze);St=O(_l,"Data Source:"),_l.forEach(_),Vt=U(ft),it=O(ft,e[13]),ft.forEach(_),Ct=U(_e),Nt=y(_e,"BR",{}),Mt=U(_e),zt=y(_e,"BR",{}),_e.forEach(_),qt=U(de),At=y(de,"BR",{}),Lt=U(de),Ut=y(de,"BR",{}),Gt=U(de),Bt=y(de,"BR",{}),de.forEach(_),M.forEach(_),this.h()},h(){s(P,"href","/recovery_rankings.csv"),s(A,"href","/variables_data.csv"),s(K,"href","/variables_data_dictionary.csv"),s(ue,"href","/methodology"),s(o,"class","text"),s(m,"id","options-region"),s(m,"class","svelte-1b8om2r"),s(ae,"id","options"),s(ae,"class","svelte-1b8om2r"),s(oe,"x1",Ke=45+we([0,e[6]],e[5],parseFloat(e[11][0][0]))),s(oe,"y1",Qe=30+Ee(e[18],e[2]-40,parseFloat(e[11][0][1]))),s(oe,"x2",Ze=45+we([0,e[6]],e[5],parseFloat(e[11][1][0]))),s(oe,"y2",$e=30+Ee(e[18],e[2]-40,parseFloat(e[11][1][1]))),s(oe,"stroke","#D0D1C9"),s(oe,"stroke-width","1.5"),s(oe,"stroke-dasharray","4 2"),s(X,"height",e[2]),s(X,"width",e[1]),s(X,"id","chart"),s(X,"class","svelte-1b8om2r"),s(Ve,"class","italic"),s(Ce,"class","italic"),s(Ne,"class","italic"),s(Me,"class","italic"),s(ze,"class","italic"),s($,"class","text"),s(B,"id","chart-wrapper"),s(B,"class","svelte-1b8om2r"),Kl(()=>e[36].call(B)),s(a,"class","svelte-1b8om2r")},m(c,M){Ht(t,c,M),j(c,l,M),j(c,a,M),n(a,o),n(o,i),n(i,h),n(o,F),n(o,w),n(w,g),n(g,D),n(o,d),n(o,p),n(p,S),n(o,H),n(o,W),n(W,E),n(o,Y),n(o,V),n(V,T),n(V,P),n(P,ne),n(V,R),n(o,se),n(o,z),n(z,le),n(z,A),n(A,Q),n(z,q),n(z,K),n(K,G),n(z,u),n(o,C),n(o,r),n(r,N),n(r,ue),n(ue,ke),n(r,he),n(a,De),n(a,B),n(B,ae),n(ae,be),n(be,I),n(ae,Xe),n(ae,m),Ht(J,m,null),n(ae,je),Ht(Pe,ae,null),n(B,vt),n(B,X);for(let f=0;f<x.length;f+=1)x[f]&&x[f].m(X,null);n(X,Je);for(let f=0;f<5;f+=1)pe[f]&&pe[f].m(X,null);n(X,oe);for(let f=0;f<ee.length;f+=1)ee[f]&&ee[f].m(X,null);n(X,xe);for(let f=0;f<te.length;f+=1)te[f]&&te[f].m(X,null);n(X,et),ie&&ie.m(X,null),n(B,gt),n(B,$),n($,Fe),n(Fe,Ve),n(Ve,mt),n(Fe,bt),n(Fe,tt),n($,yt),n($,Te),n(Te,Ce),n(Ce,Et),n(Te,wt),n(Te,lt),n($,kt),n($,Ie),n(Ie,Ne),n(Ne,Ot),n(Ie,Dt),n(Ie,at),n($,Pt),n($,Oe),n(Oe,Me),n(Me,Ft),n(Oe,Tt),n(Oe,ot),n(Oe,It),n(Oe,rt),n($,Rt),n($,Re),n(Re,ze),n(ze,St),n(Re,Vt),n(Re,it),n($,Ct),n($,Nt),n($,Mt),n($,zt),n(B,qt),n(B,At),n(B,Lt),n(B,Ut),n(B,Gt),n(B,Bt),$t=Ql(B,e[36].bind(B)),re=!0},p(c,M){if(M[0]&524298){qe=c[3].reverse();let f;for(f=0;f<qe.length;f+=1){const fe=Ml(c,qe,f);x[f]?x[f].p(fe,M):(x[f]=zl(fe),x[f].c(),x[f].m(X,Je))}for(;f<x.length;f+=1)x[f].d(1);x.length=qe.length}if(M[0]&98308){Xt=[0,1,2,3,4];let f;for(f=0;f<5;f+=1){const fe=Nl(c,Xt,f);pe[f]?pe[f].p(fe,M):(pe[f]=ql(fe),pe[f].c(),pe[f].m(X,oe))}for(;f<5;f+=1)pe[f].d(1)}if((!re||M[0]&2144&&Ke!==(Ke=45+we([0,c[6]],c[5],parseFloat(c[11][0][0]))))&&s(oe,"x1",Ke),(!re||M[0]&264196&&Qe!==(Qe=30+Ee(c[18],c[2]-40,parseFloat(c[11][0][1]))))&&s(oe,"y1",Qe),(!re||M[0]&2144&&Ze!==(Ze=45+we([0,c[6]],c[5],parseFloat(c[11][1][0]))))&&s(oe,"x2",Ze),(!re||M[0]&264196&&$e!==($e=30+Ee(c[18],c[2]-40,parseFloat(c[11][1][1]))))&&s(oe,"y2",$e),M[0]&262389){Ae=c[0];let f;for(f=0;f<Ae.length;f+=1){const fe=Cl(c,Ae,f);ee[f]?ee[f].p(fe,M):(ee[f]=Ll(fe),ee[f].c(),ee[f].m(X,xe))}for(;f<ee.length;f+=1)ee[f].d(1);ee.length=Ae.length}if(M[0]&3539189){Le=c[0];let f;for(f=0;f<Le.length;f+=1){const fe=Vl(c,Le,f);te[f]?te[f].p(fe,M):(te[f]=Gl(fe),te[f].c(),te[f].m(X,et))}for(;f<te.length;f+=1)te[f].d(1);te.length=Le.length}c[17]!=null?ie?ie.p(c,M):(ie=Bl(c),ie.c(),ie.m(X,null)):ie&&(ie.d(1),ie=null),(!re||M[0]&4)&&s(X,"height",c[2]),(!re||M[0]&2)&&s(X,"width",c[1]),(!re||M[0]&4096)&&Z(tt,c[12]),(!re||M[0]&16384)&&Z(lt,c[14]),(!re||M[0]&256)&&We!==(We=c[8].toFixed(3)+"")&&Z(at,We),(!re||M[0]&512)&&He!==(He=jl(c[9])+"")&&Z(ot,He),(!re||M[0]&1024)&&Ye!==(Ye=c[10].toFixed(2)+"")&&Z(rt,Ye),(!re||M[0]&8192)&&Z(it,c[13])},i(c){re||(Yt(t.$$.fragment,c),Yt(J.$$.fragment,c),Yt(Pe.$$.fragment,c),re=!0)},o(c){Jt(t.$$.fragment,c),Jt(J.$$.fragment,c),Jt(Pe.$$.fragment,c),re=!1},d(c){Kt(t,c),c&&_(l),c&&_(a),Kt(J),Kt(Pe),ve(x,c),ve(pe,c),ve(ee,c),ve(te,c),ie&&ie.d(),$t()}}}function Xl(e,t){let l=[];for(let a=0;a<=Math.ceil(e/t);a++)l.push(a*t);return l}function ua(e){const t=Math.pow(10,Math.floor(Math.log10(e)));return Math.ceil(e/t)*t}function Ee(e,t,l){return t-t*l/(e[1]-e[0])}function we(e,t,l){return t*l/(e[1]-e[0])}function ha(e,t,l,a,o,i){let h,F,w,g,D=e*l+t;D>=a&&D<=i?(h=l,F=D):e>0?(h=(a-t)/e,F=a):(h=(i-t)/e,F=i);let d=e*o+t;return d>=a&&d<=i?(w=o,g=d):e>0?(w=(i-t)/e,g=i):(w=(a-t)/e,g=a),[[h,F],[w,g]]}function jl(e){return Math.abs(e)<.001?e.toExponential(2):Math.abs(e)>=1e3?e.toLocaleString(void 0,{maximumFractionDigits:0}):Math.abs(e)>=10?e.toFixed(2):e.toFixed(4)}function ca(e,t,l){let a,o,i,h,F;pt(e,Zt,m=>l(7,i=m)),pt(e,xl,m=>l(30,h=m)),pt(e,ea,m=>l(39,F=m));let w=[],g=[],D=[],d=[],p=[],S=0,H,W=0,E=0,Y=[[0,0],[1,1]],V="",T="",P="";const ne=F;async function R(){try{const J=await(await fetch("/recovery_rankings.csv")).text();l(22,w=dt(J))}catch(m){console.error("Error loading CSV data:",m)}}async function se(){try{const J=await(await fetch("/variables_data.csv")).text();l(23,g=dt(J))}catch(m){console.error("Error loading CSV data:",m)}}async function z(){try{const J=await(await fetch("/variables_data_dictionary.csv")).text();l(25,p=dt(J))}catch(m){console.error("Error loading CSV data:",m)}}Jl(()=>{R(),se(),z()});let le,A=420,Q=1,q=[0,1],K,G=100,u=1,C=1,r=.1,N=1,ue;const ke=function(m){m.clientX,m.clientY};let he=[];const De=(m,J)=>J.name===m.region,B=(m,J)=>{l(17,ue=m),ke(J)},ae=()=>{l(17,ue=void 0)},be=m=>m.name===ue.region,I=m=>m.name===ue.region;function Xe(){le=this.offsetWidth,l(1,le)}return e.$$.update=()=>{e.$$.dirty[0]&1077936128&&l(24,D=w.filter(m=>h.includes(m.region)).sort((m,J)=>J.seasonal_average-m.seasonal_average)),e.$$.dirty[0]&25165824&&l(0,d=D.map(function(m){var J=g.find(function(je){return je.city===m.city});return Object.assign({},m,J)})),e.$$.dirty[0]&33554560&&l(13,T=p.length>0?p.filter(m=>m.value===i)[0].source:null),e.$$.dirty[0]&33554560&&l(12,V=p.length>0?p.filter(m=>m.value===i)[0].text:null),e.$$.dirty[0]&33554560&&l(14,P=p.length>0?p.filter(m=>m.value===i)[0].group:null),e.$$.dirty[0]&2&&l(2,A=le*.666),e.$$.dirty[0]&1&&l(27,Q=d.length!==0?d[0].seasonal_average:1),e.$$.dirty[0]&134217728&&l(27,Q=Q<1?1:Q),e.$$.dirty[0]&134217728&&(Q<2?l(3,q=Xl(Q,.2)):l(3,q=Xl(Q,.5))),e.$$.dirty[0]&12&&l(19,a=(A-40)/(q.length-1)),e.$$.dirty[0]&8&&l(18,o=[Math.min(...q),Math.max(...q)]),e.$$.dirty[0]&128&&l(4,K=i),e.$$.dirty[0]&2&&l(5,G=le-45-10),e.$$.dirty[0]&17&&l(28,u=Math.max(...d.map(m=>parseFloat(m[K])).filter(m=>!isNaN(m)))),e.$$.dirty[0]&268435456&&l(6,C=ua(u)),e.$$.dirty[0]&32&&l(15,r=G/4),e.$$.dirty[0]&64&&l(16,N=C/4),e.$$.dirty[0]&17&&l(29,he=d.filter(m=>!isNaN(parseFloat(m[K])))),e.$$.dirty[0]&536870912&&console.log(he),e.$$.dirty[0]&536870928&&l(8,S=he.length>0?la(he.map(m=>parseFloat(m[K])),he.map(m=>parseFloat(m.seasonal_average))):0),e.$$.dirty[0]&536870928&&l(26,H=he.length>0?aa(he.map(m=>[parseFloat(m[K]),parseFloat(m.seasonal_average)])):null),e.$$.dirty[0]&67108936&&l(11,Y=H!==null?ha(H.m,H.b,0,0,C,Math.max(...q)):[[0,0],[1,1]]),e.$$.dirty[0]&67108864&&l(9,W=H!==null?100*H.m:0),e.$$.dirty[0]&67108864&&H!==null&&l(10,E=100*H.b)},[d,le,A,q,K,G,C,i,S,W,E,Y,V,T,P,r,N,ue,o,a,ne,ke,w,g,D,p,H,Q,u,he,h,De,B,ae,be,I,Xe]}class ya extends Wl{constructor(t){super(),Hl(this,t,ca,sa,Yl,{},null,[-1,-1])}}export{ya as component,ba as universal};
