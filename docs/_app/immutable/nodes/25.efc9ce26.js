import{S as rt,i as nt,s as st,k as S,q as E,a as q,l as D,m as b,r as w,h as d,c as C,n as l,b as V,C as u,N as ot,P as it,D as Re,Q as me,E as ve,y as Fe,L as J,e as ie,z as Ie,M as j,K as ht,A as Pe,O as ut,g as $e,d as Ve,B as Oe,o as ct,u as ue,p as N}from"../chunks/index.d6d9c1d5.js";import{H as ft}from"../chunks/global.d605620a.js";import{d as Te,s as _t,r as pt}from"../chunks/stores.4478413d.js";/* empty css                                                           */import{S as dt}from"../chunks/SelectRegions.19e77729.js";import{c as mt}from"../chunks/csv.3ac754ad.js";function Qe(e,t,r){const s=e.slice();return s[4]=t[r],s}function Xe(e){let t,r=e[4].name+"",s;return{c(){t=S("option"),s=E(r),this.h()},l(a){t=D(a,"OPTION",{class:!0});var i=b(t);s=w(i,r),i.forEach(d),this.h()},h(){t.__value=e[4].number,t.value=t.__value,l(t,"class","svelte-17uihdx")},m(a,i){V(a,t,i),u(t,s)},p:Re,d(a){a&&d(t)}}}function vt(e){let t,r,s,a,i,f,_=e[0],p=[];for(let o=0;o<_.length;o+=1)p[o]=Xe(Qe(e,_,o));return{c(){t=S("p"),r=E("Select Season:"),s=q(),a=S("select");for(let o=0;o<p.length;o+=1)p[o].c();this.h()},l(o){t=D(o,"P",{});var k=b(t);r=w(k,"Select Season:"),k.forEach(d),s=C(o),a=D(o,"SELECT",{class:!0});var v=b(a);for(let m=0;m<p.length;m+=1)p[m].l(v);v.forEach(d),this.h()},h(){l(a,"class","svelte-17uihdx")},m(o,k){V(o,t,k),u(t,r),V(o,s,k),V(o,a,k);for(let v=0;v<p.length;v+=1)p[v]&&p[v].m(a,null);ot(a,e[1]),i||(f=it(a,"change",e[2]),i=!0)},p(o,[k]){if(k&1){_=o[0];let v;for(v=0;v<_.length;v+=1){const m=Qe(o,_,v);p[v]?p[v].p(m,k):(p[v]=Xe(m),p[v].c(),p[v].m(a,null))}for(;v<p.length;v+=1)p[v].d(1);p.length=_.length}},i:Re,o:Re,d(o){o&&d(t),o&&d(s),o&&d(a),me(p,o),i=!1,f()}}}function gt(e,t,r){let s;ve(e,Te,_=>r(3,s=_));const a=[{name:"Spring: Mar 2020 - May 2020",number:1},{name:"Summer: June 2020 - Aug 2020",number:2},{name:"Fall: Sept 2020 - Nov 2020",number:3},{name:"Winter: Dec 2020 - Feb 2021",number:4},{name:"Spring: Mar 2021 - May 2021",number:5},{name:"Summer: June 2021 - Aug 2021",number:6},{name:"Fall: Sept 2021 - Nov 2021",number:7},{name:"Winter: Dec 2021 - Feb 2022",number:8},{name:"Spring: Mar 2022 - May 2022",number:9},{name:"Summer: June 2022 - Aug 2022",number:10},{name:"Fall: Sept 2022 - Nov 2022",number:11},{name:"Winter: Dec 2022 - Feb 2023",number:12}];let i=s;function f(_){const p=_.target.value;Te.set(p)}return[a,i,f]}class yt extends rt{constructor(t){super(),nt(this,t,gt,vt,st,{})}}const bt=!0,Ft=Object.freeze(Object.defineProperty({__proto__:null,prerender:bt},Symbol.toStringTag,{value:"Module"}));function Ge(e,t,r){const s=e.slice();return s[17]=t[r],s[19]=r,s}function Ue(e,t,r){const s=e.slice();return s[20]=t[r],s[19]=r,s}function Ye(e,t,r){const s=e.slice();return s[17]=t[r],s[19]=r,s}function Ze(e){let t,r,s,a,i,f,_,p=(100*e[17]).toFixed(0)+"",o,k,v;return{c(){t=J("line"),a=J("line"),_=J("text"),o=E(p),k=E("%"),this.h()},l(m){t=j(m,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),b(t).forEach(d),a=j(m,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),b(a).forEach(d),_=j(m,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var g=b(_);o=w(g,p),k=w(g,"%"),g.forEach(d),this.h()},h(){l(t,"class","grid svelte-ac7ppe"),l(t,"x1",r=29+e[19]*e[4]),l(t,"y1","34"),l(t,"x2",s=29+e[19]*e[4]),l(t,"y2",e[3]),l(a,"class","grid-white svelte-ac7ppe"),l(a,"x1",i=29+e[19]*e[4]),l(a,"y1","34"),l(a,"x2",f=29+e[19]*e[4]),l(a,"y2","38"),l(_,"class","axis-label svelte-ac7ppe"),l(_,"x",v=35+e[19]*e[4]),l(_,"y","30"),l(_,"text-anchor","end")},m(m,g){V(m,t,g),V(m,a,g),V(m,_,g),u(_,o),u(_,k)},p(m,g){g&16&&r!==(r=29+m[19]*m[4])&&l(t,"x1",r),g&16&&s!==(s=29+m[19]*m[4])&&l(t,"x2",s),g&8&&l(t,"y2",m[3]),g&16&&i!==(i=29+m[19]*m[4])&&l(a,"x1",i),g&16&&f!==(f=29+m[19]*m[4])&&l(a,"x2",f),g&4&&p!==(p=(100*m[17]).toFixed(0)+"")&&ue(o,p),g&16&&v!==(v=35+m[19]*m[4])&&l(_,"x",v)},d(m){m&&d(t),m&&d(a),m&&d(_)}}}function et(e){let t,r=e[20].display_title+"",s,a,i=Math.round(100*e[20].seasonal_average)+"",f,_;return{c(){t=J("text"),s=E(r),a=E(" - "),f=E(i),_=E("%"),this.h()},l(p){t=j(p,"text",{class:!0,x:!0,y:!0,style:!0});var o=b(t);s=w(o,r),a=w(o," - "),f=w(o,i),_=w(o,"%"),o.forEach(d),this.h()},h(){l(t,"class","bar-label svelte-ac7ppe"),l(t,"x","32"),l(t,"y",56+e[19]*24),N(t,"fill","#000"),N(t,"fill-opacity","0"),N(t,"stroke","white"),N(t,"stroke-width","3px"),N(t,"stroke-opacity","0.62")},m(p,o){V(p,t,o),u(t,s),u(t,a),u(t,f),u(t,_)},p(p,o){o&1&&r!==(r=p[20].display_title+"")&&ue(s,r),o&1&&i!==(i=Math.round(100*p[20].seasonal_average)+"")&&ue(f,i)},d(p){p&&d(t)}}}function tt(e){let t=e[5].find(L).text==="#000",r,s,a,i,f,_=e[19]+1+"",p,o,k=e[20].display_title+"",v,m,g=Math.round(100*e[20].seasonal_average)+"",z,O;function L(...c){return e[10](e[20],...c)}let M=t&&et(e);function Q(...c){return e[11](e[20],...c)}function B(...c){return e[12](e[20],...c)}return{c(){M&&M.c(),r=J("line"),a=J("line"),f=J("text"),p=E(_),o=J("text"),v=E(k),m=E(" - "),z=E(g),O=E("%"),this.h()},l(c){M&&M.l(c),r=j(c,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0,style:!0}),b(r).forEach(d),a=j(c,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0,style:!0}),b(a).forEach(d),f=j(c,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var y=b(f);p=w(y,_),y.forEach(d),o=j(c,"text",{class:!0,x:!0,y:!0,style:!0});var A=b(o);v=w(A,k),m=w(A," - "),z=w(A,g),O=w(A,"%"),A.forEach(d),this.h()},h(){l(r,"class","bar"),l(r,"x1",29),l(r,"y1",52+e[19]*24),l(r,"x2",s=29+(e[1]-50)*e[20].seasonal_average/Math.max(...e[2])),l(r,"y2",52+e[19]*24),N(r,"stroke","white"),N(r,"stroke-width","20 "),l(a,"class","bar"),l(a,"x1",30),l(a,"y1",52+e[19]*24),l(a,"x2",i=29+(e[1]-50)*e[20].seasonal_average/Math.max(...e[2])-1),l(a,"y2",52+e[19]*24),N(a,"stroke",e[5].find(Q).colour),N(a,"stroke-width","18"),l(f,"class","axis-label svelte-ac7ppe"),l(f,"x","25"),l(f,"y",57+e[19]*24),l(f,"text-anchor","end"),l(o,"class","bar-label svelte-ac7ppe"),l(o,"x","32"),l(o,"y",56+e[19]*24),N(o,"fill",e[5].find(B).text)},m(c,y){M&&M.m(c,y),V(c,r,y),V(c,a,y),V(c,f,y),u(f,p),V(c,o,y),u(o,v),u(o,m),u(o,z),u(o,O)},p(c,y){e=c,y&1&&(t=e[5].find(L).text==="#000"),t?M?M.p(e,y):(M=et(e),M.c(),M.m(r.parentNode,r)):M&&(M.d(1),M=null),y&7&&s!==(s=29+(e[1]-50)*e[20].seasonal_average/Math.max(...e[2]))&&l(r,"x2",s),y&7&&i!==(i=29+(e[1]-50)*e[20].seasonal_average/Math.max(...e[2])-1)&&l(a,"x2",i),y&1&&N(a,"stroke",e[5].find(Q).colour),y&1&&k!==(k=e[20].display_title+"")&&ue(v,k),y&1&&g!==(g=Math.round(100*e[20].seasonal_average)+"")&&ue(z,g),y&1&&N(o,"fill",e[5].find(B).text)},d(c){M&&M.d(c),c&&d(r),c&&d(a),c&&d(f),c&&d(o)}}}function at(e){let t,r,s;return{c(){t=J("line"),this.h()},l(a){t=j(a,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0,"stroke-opacity":!0,"stroke-dasharray":!0}),b(t).forEach(d),this.h()},h(){l(t,"class","grid-white svelte-ac7ppe"),l(t,"x1",r=29+e[19]*e[4]),l(t,"y1","34"),l(t,"x2",s=29+e[19]*e[4]),l(t,"y2",e[3]),l(t,"stroke-opacity","0.75"),l(t,"stroke-dasharray","2 2")},m(a,i){V(a,t,i)},p(a,i){i&16&&r!==(r=29+a[19]*a[4])&&l(t,"x1",r),i&16&&s!==(s=29+a[19]*a[4])&&l(t,"x2",s),i&8&&l(t,"y2",a[3])},d(a){a&&d(t)}}}function lt(e){let t,r,s,a,i=e[17]===1&&at(e);return{c(){t=J("line"),i&&i.c(),a=ie(),this.h()},l(f){t=j(f,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0,"stroke-opacity":!0}),b(t).forEach(d),i&&i.l(f),a=ie(),this.h()},h(){l(t,"class","grid svelte-ac7ppe"),l(t,"x1",r=29+e[19]*e[4]),l(t,"y1","34"),l(t,"x2",s=29+e[19]*e[4]),l(t,"y2",e[3]),l(t,"stroke-opacity","0.21")},m(f,_){V(f,t,_),i&&i.m(f,_),V(f,a,_)},p(f,_){_&16&&r!==(r=29+f[19]*f[4])&&l(t,"x1",r),_&16&&s!==(s=29+f[19]*f[4])&&l(t,"x2",s),_&8&&l(t,"y2",f[3]),f[17]===1?i?i.p(f,_):(i=at(f),i.c(),i.m(a.parentNode,a)):i&&(i.d(1),i=null)},d(f){f&&d(t),i&&i.d(f),f&&d(a)}}}function kt(e){let t,r,s,a,i,f,_,p,o,k,v,m,g,z,O,L,M,Q,B,c,y,A,X,ee,ge,ye,te,be,ke,Ee,R,H,G,U,we,K,he,Me,Se,Y,De,Z,Ae,xe,x,ce,fe,qe,ae;t=new ft({}),U=new yt({}),Y=new dt({props:{europe:"yes",canada:"yes"}});let le=e[2],F=[];for(let h=0;h<le.length;h+=1)F[h]=Ze(Ye(e,le,h));let re=e[0],I=[];for(let h=0;h<re.length;h+=1)I[h]=tt(Ue(e,re,h));let ne=e[2],P=[];for(let h=0;h<ne.length;h+=1)P[h]=lt(Ge(e,ne,h));return{c(){Fe(t.$$.fragment),r=q(),s=S("main"),a=S("div"),i=S("h3"),f=E("This is an archived version of our rankings data, for our most recent rankings, using updated data sources and methodology, click "),_=S("a"),p=E("here"),o=q(),k=S("h1"),v=E("Downtown Recovery Rankings"),m=q(),g=S("p"),z=E("The recovery metrics on these charts are based on a sample of mobile phone data."),O=q(),L=S("p"),M=E("They are computed by counting the number of unique mobile phones in a city's downtown area in the specified time period, and then dividing it by the number of unique visitors during the equivalent time period in 2019. For example, the March 2023 - May 2023 time period is compared to the March 2019 - May 2019 time period."),Q=q(),B=S("p"),c=E("A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels."),y=q(),A=S("p"),X=E("For more information, read our "),ee=S("a"),ge=E("Methodology"),ye=E(" page. Or click "),te=S("a"),be=E("here"),ke=E(" to download the data shown on this chart."),Ee=q(),R=S("div"),H=S("div"),G=S("div"),Fe(U.$$.fragment),we=q(),K=S("div"),he=S("p"),Me=E("Select Regions:"),Se=q(),Fe(Y.$$.fragment),De=q(),Z=S("p"),Ae=E("*Data for Europe is only available from 12/2021 to 02/2023"),xe=q(),x=J("svg");for(let h=0;h<F.length;h+=1)F[h].c();ce=ie();for(let h=0;h<I.length;h+=1)I[h].c();fe=ie();for(let h=0;h<P.length;h+=1)P[h].c();this.h()},l(h){Ie(t.$$.fragment,h),r=C(h),s=D(h,"MAIN",{class:!0});var $=b(s);a=D($,"DIV",{class:!0});var n=b(a);i=D(n,"H3",{});var T=b(i);f=w(T,"This is an archived version of our rankings data, for our most recent rankings, using updated data sources and methodology, click "),_=D(T,"A",{href:!0});var Ce=b(_);p=w(Ce,"here"),Ce.forEach(d),T.forEach(d),o=C(n),k=D(n,"H1",{});var Ne=b(k);v=w(Ne,"Downtown Recovery Rankings"),Ne.forEach(d),m=C(n),g=D(n,"P",{});var ze=b(g);z=w(ze,"The recovery metrics on these charts are based on a sample of mobile phone data."),ze.forEach(d),O=C(n),L=D(n,"P",{});var He=b(L);M=w(He,"They are computed by counting the number of unique mobile phones in a city's downtown area in the specified time period, and then dividing it by the number of unique visitors during the equivalent time period in 2019. For example, the March 2023 - May 2023 time period is compared to the March 2019 - May 2019 time period."),He.forEach(d),Q=C(n),B=D(n,"P",{});var We=b(B);c=w(We,"A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels."),We.forEach(d),y=C(n),A=D(n,"P",{});var se=b(A);X=w(se,"For more information, read our "),ee=D(se,"A",{href:!0});var Je=b(ee);ge=w(Je,"Methodology"),Je.forEach(d),ye=w(se," page. Or click "),te=D(se,"A",{href:!0});var je=b(te);be=w(je,"here"),je.forEach(d),ke=w(se," to download the data shown on this chart."),se.forEach(d),n.forEach(d),Ee=C($),R=D($,"DIV",{id:!0,class:!0});var _e=b(R);H=D(_e,"DIV",{id:!0,class:!0});var oe=b(H);G=D(oe,"DIV",{id:!0,class:!0});var Le=b(G);Ie(U.$$.fragment,Le),Le.forEach(d),we=C(oe),K=D(oe,"DIV",{id:!0,class:!0});var pe=b(K);he=D(pe,"P",{});var Be=b(he);Me=w(Be,"Select Regions:"),Be.forEach(d),Se=C(pe),Ie(Y.$$.fragment,pe),pe.forEach(d),De=C(oe),Z=D(oe,"P",{id:!0,class:!0});var Ke=b(Z);Ae=w(Ke,"*Data for Europe is only available from 12/2021 to 02/2023"),Ke.forEach(d),oe.forEach(d),xe=C(_e),x=j(_e,"svg",{height:!0,width:!0,id:!0,class:!0});var de=b(x);for(let W=0;W<F.length;W+=1)F[W].l(de);ce=ie();for(let W=0;W<I.length;W+=1)I[W].l(de);fe=ie();for(let W=0;W<P.length;W+=1)P[W].l(de);de.forEach(d),_e.forEach(d),$.forEach(d),this.h()},h(){l(_,"href","/charts/rankings"),l(ee,"href","/methodology"),l(te,"href","/ranking_data_archived.csv"),l(a,"class","text"),l(G,"id","options-season"),l(G,"class","svelte-ac7ppe"),l(K,"id","options-region"),l(K,"class","svelte-ac7ppe"),l(Z,"id","note"),l(Z,"class","svelte-ac7ppe"),l(H,"id","options"),l(H,"class","svelte-ac7ppe"),l(x,"height",e[3]),l(x,"width",e[1]),l(x,"id","chart"),l(x,"class","svelte-ac7ppe"),l(R,"id","chart-wrapper"),l(R,"class","svelte-ac7ppe"),ht(()=>e[13].call(R)),l(s,"class","svelte-ac7ppe")},m(h,$){Pe(t,h,$),V(h,r,$),V(h,s,$),u(s,a),u(a,i),u(i,f),u(i,_),u(_,p),u(a,o),u(a,k),u(k,v),u(a,m),u(a,g),u(g,z),u(a,O),u(a,L),u(L,M),u(a,Q),u(a,B),u(B,c),u(a,y),u(a,A),u(A,X),u(A,ee),u(ee,ge),u(A,ye),u(A,te),u(te,be),u(A,ke),u(s,Ee),u(s,R),u(R,H),u(H,G),Pe(U,G,null),u(H,we),u(H,K),u(K,he),u(he,Me),u(K,Se),Pe(Y,K,null),u(H,De),u(H,Z),u(Z,Ae),u(R,xe),u(R,x);for(let n=0;n<F.length;n+=1)F[n]&&F[n].m(x,null);u(x,ce);for(let n=0;n<I.length;n+=1)I[n]&&I[n].m(x,null);u(x,fe);for(let n=0;n<P.length;n+=1)P[n]&&P[n].m(x,null);qe=ut(R,e[13].bind(R)),ae=!0},p(h,[$]){if($&28){le=h[2];let n;for(n=0;n<le.length;n+=1){const T=Ye(h,le,n);F[n]?F[n].p(T,$):(F[n]=Ze(T),F[n].c(),F[n].m(x,ce))}for(;n<F.length;n+=1)F[n].d(1);F.length=le.length}if($&39){re=h[0];let n;for(n=0;n<re.length;n+=1){const T=Ue(h,re,n);I[n]?I[n].p(T,$):(I[n]=tt(T),I[n].c(),I[n].m(x,fe))}for(;n<I.length;n+=1)I[n].d(1);I.length=re.length}if($&28){ne=h[2];let n;for(n=0;n<ne.length;n+=1){const T=Ge(h,ne,n);P[n]?P[n].p(T,$):(P[n]=lt(T),P[n].c(),P[n].m(x,null))}for(;n<P.length;n+=1)P[n].d(1);P.length=ne.length}(!ae||$&8)&&l(x,"height",h[3]),(!ae||$&2)&&l(x,"width",h[1])},i(h){ae||($e(t.$$.fragment,h),$e(U.$$.fragment,h),$e(Y.$$.fragment,h),ae=!0)},o(h){Ve(t.$$.fragment,h),Ve(U.$$.fragment,h),Ve(Y.$$.fragment,h),ae=!1},d(h){Oe(t,h),h&&d(r),h&&d(s),Oe(U),Oe(Y),me(F,h),me(I,h),me(P,h),qe()}}}function Et(e,t,r){let s,a,i,f;ve(e,_t,c=>r(8,a=c)),ve(e,Te,c=>r(9,i=c)),ve(e,pt,c=>r(14,f=c));let _=[],p=[];const o=f;async function k(){try{const y=await(await fetch("../ranking_data_archived.csv")).text();r(6,_=mt(y))}catch(c){console.error("Error loading CSV data:",c)}}ct(()=>{k()});let v,m=100,g=1;function z(c,y){let A=[];for(let X=0;X<=Math.ceil(c/y);X++)A.push(X*y);return A}let O=[];const L=(c,y)=>y.name===c.region,M=(c,y)=>y.name===c.region,Q=(c,y)=>y.name===c.region;function B(){v=this.offsetWidth,r(1,v)}return e.$$.update=()=>{e.$$.dirty&832&&r(0,p=_.filter(c=>c.metric==="downtown").filter(c=>c.Season===`Season_${i}`).filter(c=>a.includes(c.region)).sort((c,y)=>y.seasonal_average-c.seasonal_average)),e.$$.dirty&1&&r(3,m=24*p.length+50),e.$$.dirty&1&&r(7,g=p.length!==0?p[0].seasonal_average:1),e.$$.dirty&128&&r(7,g=g<1?1:g),e.$$.dirty&128&&(g<2?r(2,O=z(g,.2)):r(2,O=z(g,.5))),e.$$.dirty&6&&r(4,s=(v-50)/(O.length-1))},[p,v,O,m,s,o,_,g,a,i,L,M,Q,B]}class It extends rt{constructor(t){super(),nt(this,t,Et,kt,st,{})}}export{It as component,Ft as universal};
