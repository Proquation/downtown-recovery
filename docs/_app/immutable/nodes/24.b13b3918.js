import{S as Kr,i as Yr,s as Qr,y as Zr,a as D,k as u,q as o,L as b,z as Xr,c as T,l as f,m as h,r as n,h as l,M as E,n as t,p as lr,A as $r,b as we,C as e,g as ea,d as ta,B as ra,Q as sr,o as aa,K as la,O as sa,u as Lr,D as tt,J as Or}from"../chunks/index.d6d9c1d5.js";import{H as oa}from"../chunks/global.556b643d.js";import"../chunks/transform.4d2927c0.js";import{m as Fr,l as na,a as ia,b as ca,d as ha,u as da}from"../chunks/red-arrow.7b588b8b.js";import{c as Gr}from"../chunks/stores.64de824d.js";import{t as ua,a as fa,l as va}from"../chunks/line.09bdc1ce.js";import{l as _a}from"../chunks/linear.6154f0ba.js";import{c as ma}from"../chunks/csv.3ac754ad.js";const pa=!0,za=Object.freeze(Object.defineProperty({__proto__:null,prerender:pa},Symbol.toStringTag,{value:"Module"}));function Hr(s,r,i){const a=s.slice();return a[10]=r[i].city,a[11]=r[i].regressionLine,a[12]=r[i].startCircle,a[13]=r[i].endCircle,a[14]=r[i].meanLine,a[15]=r[i].perChangeDisplay,a[16]=r[i].percentageChange,a[18]=i,a}function Rr(s,r,i){const a=s.slice();return a[19]=r[i],a[18]=i,a}function Wr(s,r,i){const a=s.slice();return a[19]=r[i],a[18]=i,a}function ya(s){let r;return{c(){r=b("line"),this.h()},l(i){r=E(i,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(r).forEach(l),this.h()},h(){t(r,"x1",260+s[18]*z/13),t(r,"y1",5),t(r,"x2",260+s[18]*z/13),t(r,"y2",40),t(r,"stroke","white"),t(r,"stroke-width","1")},m(i,a){we(i,r,a)},p:tt,d(i){i&&l(r)}}}function Jr(s){let r,i,a,c=s[19]===1&&ya(s);return{c(){r=b("line"),c&&c.c(),i=b("text"),a=o(s[19]),this.h()},l(m){r=E(m,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(r).forEach(l),c&&c.l(m),i=E(m,"text",{x:!0,y:!0,class:!0});var N=h(i);a=n(N,s[19]),N.forEach(l),this.h()},h(){t(r,"x1",260+s[18]*z/13),t(r,"y1",45),t(r,"x2",260+s[18]*z/13),t(r,"y2",40),t(r,"stroke","white"),t(r,"stroke-width","1"),t(i,"x",260+s[18]*z/13+.5*z/13),t(i,"y","40"),t(i,"class","textMonth svelte-1crkxs9")},m(m,N){we(m,r,N),c&&c.m(m,N),we(m,i,N),e(i,a)},p(m,N){m[19]===1&&c.p(m,N)},d(m){m&&l(r),c&&c.d(m),m&&l(i)}}}function ga(s){let r,i;return{c(){r=u("img"),this.h()},l(a){r=f(a,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Or(r.src,i=ha)||t(r,"src",i),t(r,"alt","Down arrow"),t(r,"class","arrow-icon svelte-1crkxs9")},m(a,c){we(a,r,c)},p:tt,d(a){a&&l(r)}}}function wa(s){let r,i;return{c(){r=u("img"),this.h()},l(a){r=f(a,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Or(r.src,i=da)||t(r,"src",i),t(r,"alt","Up arrow"),t(r,"class","arrow-icon svelte-1crkxs9")},m(a,c){we(a,r,c)},p:tt,d(a){a&&l(r)}}}function Ur(s){let r;return{c(){r=b("line"),this.h()},l(i){r=E(i,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(r).forEach(l),this.h()},h(){t(r,"x1",s[19]*z/13),t(r,"y1",5),t(r,"x2",s[19]*z/13),t(r,"y2",45),t(r,"stroke","#333333"),t(r,"stroke-width","1")},m(i,a){we(i,r,a)},p:tt,d(i){i&&l(r)}}}function jr(s){let r,i,a,c,m,N=s[18]+1+"",oe,A,Y=s[10]+"",O,de,Z,p,w,S,P,H=s[15]+"",X,$,V,I,C,K,ee,te,ue,q,re,ne,B,L,fe,Ne;function y(_,g){if(_[16]>0)return wa;if(_[16]<0)return ga}let R=y(s),M=R&&R(s),Pe=[1,2,3,4,5,6,7,8,9,10,11,12],W=[];for(let _=0;_<12;_+=1)W[_]=Ur(Rr(s,Pe,_));return{c(){r=u("div"),i=u("div"),a=b("svg"),c=b("line"),m=b("text"),oe=o(N),A=o(". "),O=o(Y),de=D(),Z=u("div"),M&&M.c(),p=D(),w=u("div"),S=b("svg"),P=b("text"),X=o(H),$=D(),V=u("div"),I=b("svg");for(let _=0;_<12;_+=1)W[_].c();C=b("line"),te=b("path"),q=b("circle"),B=b("circle"),this.h()},l(_){r=f(_,"DIV",{class:!0});var g=h(r);i=f(g,"DIV",{class:!0});var k=h(i);a=E(k,"svg",{width:!0,height:!0,class:!0});var ve=h(a);c=E(ve,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(c).forEach(l),m=E(ve,"text",{x:!0,y:!0,class:!0});var x=h(m);oe=n(x,N),A=n(x,". "),O=n(x,Y),x.forEach(l),ve.forEach(l),k.forEach(l),de=T(g),Z=f(g,"DIV",{class:!0});var ze=h(Z);M&&M.l(ze),ze.forEach(l),p=T(g),w=f(g,"DIV",{class:!0});var Ye=h(w);S=E(Ye,"svg",{width:!0,height:!0,class:!0});var qe=h(S);P=E(qe,"text",{x:!0,y:!0,class:!0});var Be=h(P);X=n(Be,H),Be.forEach(l),qe.forEach(l),Ye.forEach(l),$=T(g),V=f(g,"DIV",{class:!0,style:!0});var Qe=h(V);I=E(Qe,"svg",{height:!0,width:!0,class:!0});var _e=h(I);for(let Se=0;Se<12;Se+=1)W[Se].l(_e);C=E(_e,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),h(C).forEach(l),te=E(_e,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),h(te).forEach(l),q=E(_e,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),h(q).forEach(l),B=E(_e,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0}),h(B).forEach(l),_e.forEach(l),Qe.forEach(l),g.forEach(l),this.h()},h(){t(c,"x1","5"),t(c,"y1","15"),t(c,"x2","5"),t(c,"y2",Ke-15),t(c,"stroke","#fff"),t(c,"stroke-width","5"),t(m,"x","12"),t(m,"y","31"),t(m,"class","textCity svelte-1crkxs9"),t(a,"width","150"),t(a,"height",Ke),t(a,"class","region-bar"),t(i,"class","left svelte-1crkxs9"),t(Z,"class","arrow svelte-1crkxs9"),t(P,"x","50"),t(P,"y","45"),t(P,"class","textPercent svelte-1crkxs9"),t(S,"width","50"),t(S,"height",Ke),t(S,"class","region-bar"),t(w,"class","number svelte-1crkxs9"),t(C,"x1","0"),t(C,"y1",K=s[14]),t(C,"x2",z),t(C,"y2",ee=s[14]),t(C,"stroke","#D0D1C9"),t(C,"stroke-width","1"),t(C,"stroke-dasharray","4"),t(te,"d",ue=s[11]),t(te,"stroke","white"),t(te,"stroke-width","2"),t(te,"fill","none"),t(q,"cx",re=s[12].cx),t(q,"cy",ne=s[12].cy),t(q,"r","2"),t(q,"fill","white"),t(B,"cx",L=s[13].cx),t(B,"cy",fe=s[13].cy),t(B,"r","2"),t(B,"fill","white"),t(B,"stroke","white"),t(I,"height",Ke),t(I,"width",z),t(I,"class","chart svelte-1crkxs9"),t(V,"class","chart-container svelte-1crkxs9"),lr(V,"width",z),t(r,"class","chart-wrapper svelte-1crkxs9"),la(()=>s[7].call(r))},m(_,g){we(_,r,g),e(r,i),e(i,a),e(a,c),e(a,m),e(m,oe),e(m,A),e(m,O),e(r,de),e(r,Z),M&&M.m(Z,null),e(r,p),e(r,w),e(w,S),e(S,P),e(P,X),e(r,$),e(r,V),e(V,I);for(let k=0;k<12;k+=1)W[k]&&W[k].m(I,null);e(I,C),e(I,te),e(I,q),e(I,B),Ne=sa(r,s[7].bind(r))},p(_,g){if(g&2&&Y!==(Y=_[10]+"")&&Lr(O,Y),R===(R=y(_))&&M?M.p(_,g):(M&&M.d(1),M=R&&R(_),M&&(M.c(),M.m(Z,null))),g&2&&H!==(H=_[15]+"")&&Lr(X,H),g&0){Pe=[1,2,3,4,5,6,7,8,9,10,11,12];let k;for(k=0;k<12;k+=1){const ve=Rr(_,Pe,k);W[k]?W[k].p(ve,g):(W[k]=Ur(ve),W[k].c(),W[k].m(I,C))}for(;k<12;k+=1)W[k].d(1)}g&2&&K!==(K=_[14])&&t(C,"y1",K),g&2&&ee!==(ee=_[14])&&t(C,"y2",ee),g&2&&ue!==(ue=_[11])&&t(te,"d",ue),g&2&&re!==(re=_[12].cx)&&t(q,"cx",re),g&2&&ne!==(ne=_[12].cy)&&t(q,"cy",ne),g&2&&L!==(L=_[13].cx)&&t(B,"cx",L),g&2&&fe!==(fe=_[13].cy)&&t(B,"cy",fe)},d(_){_&&l(r),M&&M.d(),sr(W,_),Ne()}}}function ka(s){let r,i,a,c,m,N,oe,A,Y,O,de,Z,p,w,S,P,H,X,$,V,I,C,K,ee,te=s[2].day2+"",ue,q,re,ne,B,L,fe,Ne=s[2].monthName+"",y,R,M=s[2].monthName+"",Pe,W,_,g,k,ve,x,ze,Ye=s[2].monthName+"",qe,Be,Qe=s[2].monthName+"",_e,Se,rt,at,Le,lt,st,Fe,ot,nt,it,ct,Ge,ht,dt,ut,Ze,ft,vt,pe,_t,or=s[2].monthName+"",mt,pt,nr=s[2].monthName+"",yt,gt,wt,ae,Ie,ie,kt,ir=s[2].monthName+"",xt,bt,cr=s[2].year1+"",Et,Ct,Dt,He,Re,J,ke,Tt,xe,Nt,Q,hr=s[2].monthNumber+"",Pt,St,dr=s[2].year2+"",It,Mt,ur=s[2].monthNumber+"",At,Vt,fr=s[2].year1+"",zt,be,vr=s[2].year1+"",qt,Ee,_r=s[2].year2+"",Bt,me,ce,Lt,$e,U,Ft,Gt,Ht,Rt,Xe,Wt,Jt,he,Ut,We,jt,Ot,Je,Kt,Yt,Me,Qt,Zt,Xt,$t,er,tr,et;r=new oa({});let rr=[10,11,12,1,2,3,4,5,6,7,8,9,10],le=[];for(let v=0;v<13;v+=1)le[v]=Jr(Wr(s,rr,v));let Ue=s[1],F=[];for(let v=0;v<Ue.length;v+=1)F[v]=jr(Hr(s,Ue,v));return{c(){Zr(r.$$.fragment),i=D(),a=u("main"),c=u("div"),m=u("h1"),N=o("Canada Recovery Trends"),oe=D(),A=u("p"),Y=o("By "),O=u("a"),de=o("Karen Chapple"),Z=o(", "),p=u("a"),w=o("Julia Greenberg"),S=o(", "),P=u("a"),H=o("Jeff Allen"),X=o(", "),$=u("a"),V=o("Irene Chang"),I=D(),C=u("p"),K=u("i"),ee=o("Updated "),ue=o(te),q=D(),re=u("p"),ne=o("Data on cell phone activity (a.k.a. footfall) trends for the last year provide a picture of how Canadian downtowns are faring. We look here at year-over-year (2024 vs. 2023) trends, updated monthly."),B=D(),L=u("p"),fe=o("The solid line represents the number of daily unique visitors in the downtown area. The dotted line provides a baseline of the average level of activity in "),y=o(Ne),R=o(" 2023, allowing for comparison to subsequent months. When the solid line extends above the dotted baseline, downtown activity is greater compared to in "),Pe=o(M),W=o(" 2023. When it dips below the dotted line, activity is on a downswing."),_=D(),g=u("h5"),k=o("Key Findings:"),ve=D(),x=u("p"),ze=o("Comparing "),qe=o(Ye),Be=o(" 2023 to "),_e=o(Qe),Se=o(` 2024:
			`),rt=u("br"),at=o(`
	
			‣ `),Le=u("span"),lt=o("5"),st=o(" downtowns are in an upward trajectory, while "),Fe=u("span"),ot=o("5"),nt=o(` are trending downwards. 
			`),it=u("br"),ct=o(`
			‣ The median rate of change is `),Ge=u("span"),ht=o("2.35%"),dt=o("."),ut=D(),Ze=u("p"),ft=o("Note: Trends are based on data from Spectus, but use different cell phone data providers from our rankings analysis. The trendlines measure the average level of activity over the course of the year, while the ranking metric shows the percent difference in the average number of unique visitors in 2024 versus the same month in 2023."),vt=D(),pe=u("h4"),_t=o("Visits to Downtown ("),mt=o(or),pt=o(" 1, 2023 to "),yt=o(nr),gt=o(" 31, 2024)"),wt=D(),ae=u("p"),Ie=b("svg"),ie=b("line"),kt=D(),xt=o(ir),bt=D(),Et=o(cr),Ct=o(" average"),Dt=D(),He=u("div"),Re=u("div"),J=b("svg"),ke=b("text"),Tt=o("City"),xe=b("text"),Nt=o("Percent Change in Visits"),Q=b("text"),Pt=o(hr),St=o("/"),It=o(dr),Mt=o(" vs. "),At=o(ur),Vt=o("/"),zt=o(fr),be=b("text"),qt=o(vr),Ee=b("text"),Bt=o(_r),me=b("line");for(let v=0;v<13;v+=1)le[v].c();ce=b("line"),Lt=D();for(let v=0;v<F.length;v+=1)F[v].c();$e=D(),U=u("div"),Ft=u("br"),Gt=D(),Ht=u("br"),Rt=D(),Xe=u("h4"),Wt=o("More Information"),Jt=D(),he=u("p"),Ut=o("The trend lines are fit from daily data via a "),We=u("a"),jt=o("LOESS"),Ot=o(" curve. You can download the raw daily data shown to fit these curves "),Je=u("a"),Kt=o("from this link"),Yt=o(". The data on the charts are based on the `normalized_distinct_clean` column, which pertains to the number of unique daily visitors normalized by the total number in the metro area. The trend-line and summary statistics shown are calculated in JavaScript (code is on "),Me=u("a"),Qt=o("GitHub"),Zt=o(")"),Xt=D(),$t=u("br"),er=D(),tr=u("br"),this.h()},l(v){Xr(r.$$.fragment,v),i=T(v),a=f(v,"MAIN",{});var G=h(a);c=f(G,"DIV",{class:!0});var d=h(c);m=f(d,"H1",{});var Ce=h(m);N=n(Ce,"Canada Recovery Trends"),Ce.forEach(l),oe=T(d),A=f(d,"P",{});var ye=h(A);Y=n(ye,"By "),O=f(ye,"A",{href:!0});var mr=h(O);de=n(mr,"Karen Chapple"),mr.forEach(l),Z=n(ye,", "),p=f(ye,"A",{href:!0});var pr=h(p);w=n(pr,"Julia Greenberg"),pr.forEach(l),S=n(ye,", "),P=f(ye,"A",{href:!0});var yr=h(P);H=n(yr,"Jeff Allen"),yr.forEach(l),X=n(ye,", "),$=f(ye,"A",{href:!0});var gr=h($);V=n(gr,"Irene Chang"),gr.forEach(l),ye.forEach(l),I=T(d),C=f(d,"P",{});var wr=h(C);K=f(wr,"I",{});var ar=h(K);ee=n(ar,"Updated "),ue=n(ar,te),ar.forEach(l),wr.forEach(l),q=T(d),re=f(d,"P",{});var kr=h(re);ne=n(kr,"Data on cell phone activity (a.k.a. footfall) trends for the last year provide a picture of how Canadian downtowns are faring. We look here at year-over-year (2024 vs. 2023) trends, updated monthly."),kr.forEach(l),B=T(d),L=f(d,"P",{});var je=h(L);fe=n(je,"The solid line represents the number of daily unique visitors in the downtown area. The dotted line provides a baseline of the average level of activity in "),y=n(je,Ne),R=n(je," 2023, allowing for comparison to subsequent months. When the solid line extends above the dotted baseline, downtown activity is greater compared to in "),Pe=n(je,M),W=n(je," 2023. When it dips below the dotted line, activity is on a downswing."),je.forEach(l),_=T(d),g=f(d,"H5",{});var xr=h(g);k=n(xr,"Key Findings:"),xr.forEach(l),ve=T(d),x=f(d,"P",{});var j=h(x);ze=n(j,"Comparing "),qe=n(j,Ye),Be=n(j," 2023 to "),_e=n(j,Qe),Se=n(j,` 2024:
			`),rt=f(j,"BR",{}),at=n(j,`
	
			‣ `),Le=f(j,"SPAN",{class:!0});var br=h(Le);lt=n(br,"5"),br.forEach(l),st=n(j," downtowns are in an upward trajectory, while "),Fe=f(j,"SPAN",{class:!0});var Er=h(Fe);ot=n(Er,"5"),Er.forEach(l),nt=n(j,` are trending downwards. 
			`),it=f(j,"BR",{}),ct=n(j,`
			‣ The median rate of change is `),Ge=f(j,"SPAN",{class:!0});var Cr=h(Ge);ht=n(Cr,"2.35%"),Cr.forEach(l),dt=n(j,"."),j.forEach(l),ut=T(d),Ze=f(d,"P",{});var Dr=h(Ze);ft=n(Dr,"Note: Trends are based on data from Spectus, but use different cell phone data providers from our rankings analysis. The trendlines measure the average level of activity over the course of the year, while the ranking metric shows the percent difference in the average number of unique visitors in 2024 versus the same month in 2023."),Dr.forEach(l),vt=T(d),pe=f(d,"H4",{});var Oe=h(pe);_t=n(Oe,"Visits to Downtown ("),mt=n(Oe,or),pt=n(Oe," 1, 2023 to "),yt=n(Oe,nr),gt=n(Oe," 31, 2024)"),Oe.forEach(l),wt=T(d),ae=f(d,"P",{style:!0});var Ae=h(ae);Ie=E(Ae,"svg",{height:!0,width:!0});var Tr=h(Ie);ie=E(Tr,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),h(ie).forEach(l),Tr.forEach(l),kt=T(Ae),xt=n(Ae,ir),bt=T(Ae),Et=n(Ae,cr),Ct=n(Ae," average"),Ae.forEach(l),d.forEach(l),Dt=T(G),He=f(G,"DIV",{class:!0});var Nr=h(He);Re=f(Nr,"DIV",{class:!0});var Pr=h(Re);J=E(Pr,"svg",{width:!0,height:!0,class:!0});var ge=h(J);ke=E(ge,"text",{x:!0,y:!0,class:!0});var Sr=h(ke);Tt=n(Sr,"City"),Sr.forEach(l),xe=E(ge,"text",{x:!0,y:!0,class:!0});var Ir=h(xe);Nt=n(Ir,"Percent Change in Visits"),Ir.forEach(l),Q=E(ge,"text",{x:!0,y:!0,class:!0});var De=h(Q);Pt=n(De,hr),St=n(De,"/"),It=n(De,dr),Mt=n(De," vs. "),At=n(De,ur),Vt=n(De,"/"),zt=n(De,fr),De.forEach(l),be=E(ge,"text",{x:!0,y:!0,class:!0});var Mr=h(be);qt=n(Mr,vr),Mr.forEach(l),Ee=E(ge,"text",{x:!0,y:!0,class:!0});var Ar=h(Ee);Bt=n(Ar,_r),Ar.forEach(l),me=E(ge,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(me).forEach(l);for(let Ve=0;Ve<13;Ve+=1)le[Ve].l(ge);ce=E(ge,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(ce).forEach(l),ge.forEach(l),Pr.forEach(l),Nr.forEach(l),Lt=T(G);for(let Ve=0;Ve<F.length;Ve+=1)F[Ve].l(G);$e=T(G),U=f(G,"DIV",{class:!0});var se=h(U);Ft=f(se,"BR",{}),Gt=T(se),Ht=f(se,"BR",{}),Rt=T(se),Xe=f(se,"H4",{});var Vr=h(Xe);Wt=n(Vr,"More Information"),Vr.forEach(l),Jt=T(se),he=f(se,"P",{});var Te=h(he);Ut=n(Te,"The trend lines are fit from daily data via a "),We=f(Te,"A",{href:!0});var zr=h(We);jt=n(zr,"LOESS"),zr.forEach(l),Ot=n(Te," curve. You can download the raw daily data shown to fit these curves "),Je=f(Te,"A",{href:!0});var qr=h(Je);Kt=n(qr,"from this link"),qr.forEach(l),Yt=n(Te,". The data on the charts are based on the `normalized_distinct_clean` column, which pertains to the number of unique daily visitors normalized by the total number in the metro area. The trend-line and summary statistics shown are calculated in JavaScript (code is on "),Me=f(Te,"A",{href:!0,target:!0});var Br=h(Me);Qt=n(Br,"GitHub"),Br.forEach(l),Zt=n(Te,")"),Te.forEach(l),Xt=T(se),$t=f(se,"BR",{}),er=T(se),tr=f(se,"BR",{}),se.forEach(l),G.forEach(l),this.h()},h(){t(O,"href","https://schoolofcities.utoronto.ca/people/karen-chapple/"),t(p,"href","https://www.urbandisplacement.org/team/julia-greenberg/"),t(P,"href","https://schoolofcities.utoronto.ca/people/jeff-allen/"),t($,"href","https://www.linkedin.com/in/irene-kcc/"),t(Le,"class","bold"),t(Fe,"class","bold"),t(Ge,"class","bold"),t(ie,"x1","0"),t(ie,"y1","5"),t(ie,"x2","50"),t(ie,"y2","5"),t(ie,"stroke","white"),t(ie,"stroke-width","1"),t(ie,"stroke-dasharray","4"),t(Ie,"height","10"),t(Ie,"width","50"),lr(ae,"padding-top","10px"),lr(ae,"padding-bottom","10px"),t(c,"class","text svelte-1crkxs9"),t(ke,"x","12"),t(ke,"y","35"),t(ke,"class","textCity svelte-1crkxs9"),t(xe,"x","235"),t(xe,"y","15"),t(xe,"class","textLabel svelte-1crkxs9"),t(Q,"x","235"),t(Q,"y","35"),t(Q,"class","textLabel svelte-1crkxs9"),t(be,"x",260+(13-s[2].monthNumber)/2*z/13),t(be,"y","15"),t(be,"class","textMonth svelte-1crkxs9"),t(Ee,"x",260+(13-s[2].monthNumber)*z/13+s[2].monthNumber/2*z/13),t(Ee,"y","15"),t(Ee,"class","textMonth svelte-1crkxs9"),t(me,"x1","260"),t(me,"y1",45),t(me,"x2",260+z),t(me,"y2",45),t(me,"stroke","white"),t(me,"stroke-width","1"),t(ce,"x1",259+z),t(ce,"y1",45),t(ce,"x2",259+z),t(ce,"y2",40),t(ce,"stroke","white"),t(ce,"stroke-width","1"),t(J,"width","760"),t(J,"height",Ke),t(J,"class","region-bar"),t(Re,"class","left svelte-1crkxs9"),t(He,"class","chart-wrapper svelte-1crkxs9"),t(We,"href","https://en.wikipedia.org/wiki/Local_regression"),t(Je,"href","/trend_canada_oct23_oct24.csv"),t(Me,"href","https://github.com/schoolofcities/downtown-recovery/blob/main/src/routes/charts/canada_trends/%2Bpage.svelte"),t(Me,"target","_blank"),t(U,"class","text svelte-1crkxs9")},m(v,G){$r(r,v,G),we(v,i,G),we(v,a,G),e(a,c),e(c,m),e(m,N),e(c,oe),e(c,A),e(A,Y),e(A,O),e(O,de),e(A,Z),e(A,p),e(p,w),e(A,S),e(A,P),e(P,H),e(A,X),e(A,$),e($,V),e(c,I),e(c,C),e(C,K),e(K,ee),e(K,ue),e(c,q),e(c,re),e(re,ne),e(c,B),e(c,L),e(L,fe),e(L,y),e(L,R),e(L,Pe),e(L,W),e(c,_),e(c,g),e(g,k),e(c,ve),e(c,x),e(x,ze),e(x,qe),e(x,Be),e(x,_e),e(x,Se),e(x,rt),e(x,at),e(x,Le),e(Le,lt),e(x,st),e(x,Fe),e(Fe,ot),e(x,nt),e(x,it),e(x,ct),e(x,Ge),e(Ge,ht),e(x,dt),e(c,ut),e(c,Ze),e(Ze,ft),e(c,vt),e(c,pe),e(pe,_t),e(pe,mt),e(pe,pt),e(pe,yt),e(pe,gt),e(c,wt),e(c,ae),e(ae,Ie),e(Ie,ie),e(ae,kt),e(ae,xt),e(ae,bt),e(ae,Et),e(ae,Ct),e(a,Dt),e(a,He),e(He,Re),e(Re,J),e(J,ke),e(ke,Tt),e(J,xe),e(xe,Nt),e(J,Q),e(Q,Pt),e(Q,St),e(Q,It),e(Q,Mt),e(Q,At),e(Q,Vt),e(Q,zt),e(J,be),e(be,qt),e(J,Ee),e(Ee,Bt),e(J,me);for(let d=0;d<13;d+=1)le[d]&&le[d].m(J,null);e(J,ce),e(a,Lt);for(let d=0;d<F.length;d+=1)F[d]&&F[d].m(a,null);e(a,$e),e(a,U),e(U,Ft),e(U,Gt),e(U,Ht),e(U,Rt),e(U,Xe),e(Xe,Wt),e(U,Jt),e(U,he),e(he,Ut),e(he,We),e(We,jt),e(he,Ot),e(he,Je),e(Je,Kt),e(he,Yt),e(he,Me),e(Me,Qt),e(he,Zt),e(U,Xt),e(U,$t),e(U,er),e(U,tr),et=!0},p(v,[G]){if(G&0){rr=[10,11,12,1,2,3,4,5,6,7,8,9,10];let d;for(d=0;d<13;d+=1){const Ce=Wr(v,rr,d);le[d]?le[d].p(Ce,G):(le[d]=Jr(Ce),le[d].c(),le[d].m(J,ce))}for(;d<13;d+=1)le[d].d(1)}if(G&3){Ue=v[1];let d;for(d=0;d<Ue.length;d+=1){const Ce=Hr(v,Ue,d);F[d]?F[d].p(Ce,G):(F[d]=jr(Ce),F[d].c(),F[d].m(a,$e))}for(;d<F.length;d+=1)F[d].d(1);F.length=Ue.length}},i(v){et||(ea(r.$$.fragment,v),et=!0)},o(v){ta(r.$$.fragment,v),et=!1},d(v){ra(r,v),v&&l(i),v&&l(a),sr(le,v),sr(F,v)}}}let z=500;const Ke=50,xa=0,ba=5,Ea=0,Ca=5;function Da(s,r,i){let a,c={monthName:"October",monthNumber:10,year1:2023,year2:2024,day1:"2023-10-01",day2:"2024-10-31"};async function m(){try{const w=await(await fetch("/trend_canada_oct23_oct24.csv")).text();i(3,N=ma(w)),i(4,Y=[...new Set(N.map(S=>S.city))])}catch(p){console.error("Error loading CSV data:",p)}}let N=[];aa(()=>{m(),i(6,a=Gr.filter(p=>p.region==="Canada").map(p=>p.city))});let oe;const A=ua("%Y-%m-%d");let Y=[],O=[],de=[];console.log("thecities: ",Y);function Z(){oe=this.clientWidth,i(0,oe)}return s.$$.update=()=>{s.$$.dirty&64&&console.log("filteredCities: ",a),s.$$.dirty&88&&i(5,O=Y.map(p=>{if(a.includes(p)){const w=N.filter(S=>{const P=new Date(S.date),H=new Date(c.day1),X=new Date(c.day2);return S.city===p&&P>=H&&P<=X});if(w.length>0){console.log("cityData");const S=w.map(y=>parseFloat(y.normalized_distinct_clean)),P=N.filter(y=>{const R=new Date(y.date+"T00:00:00Z");return R.getUTCFullYear()===c.year1&&R.getUTCMonth()===c.monthNumber-1&&y.city===p});console.log("month1data: ",P);const H=Fr(P,y=>parseFloat(y.normalized_distinct_clean)),X=N.filter(y=>{const R=new Date(y.date+"T00:00:00Z");return R.getUTCFullYear()===c.year2&&R.getUTCMonth()===c.monthNumber-1&&y.city===p});console.log("month2data: ",X);const $=Fr(X,y=>parseFloat(y.normalized_distinct_clean)),V=na().x(y=>A(y.date)).y(y=>parseFloat(y.normalized_distinct_clean)).bandwidth(.028),I=Math.min(...V(w).map(y=>y[1]),ia(S)),C=Math.max(...V(w).map(y=>y[1]),ca(S)),K=fa().domain([new Date(c.day1),new Date(c.day2)]).range([Ca,z-ba]),ee=_a().domain([I,C]).range([Ke-Ea,xa]),ue=va().x(y=>K(y[0])).y(y=>ee(y[1]))(V(w));p==="Quebec"&&(console.log(w),console.log(V(w)),console.log(C)),console.log("city: ",p),console.log("month1: ",H),console.log("month2: ",$);const q=($-H)/H*100,re=q.toFixed(2)+"%",ne=V(w)[0],B={cx:K(ne[0]),cy:ee(ne[1]),radius:6,fill:"red",stroke:"red","stroke-width":2},L=V(w)[393],fe={cx:K(L[0]),cy:ee(L[1]),radius:6,fill:"red",stroke:"#6aa687","stroke-width":2},Ne=ee(H);return{city:p,regressionLine:ue,meanLine:Ne,startCircle:B,endCircle:fe,perChangeDisplay:re,percentageChange:q}}}}).filter(p=>p!==void 0)),s.$$.dirty&32&&i(1,de=O.slice().sort((p,w)=>w.percentageChange-p.percentageChange))},i(6,a=Gr.filter(p=>p.region==="Canada").map(p=>p.city)),[oe,de,c,N,Y,O,a,Z]}class qa extends Kr{constructor(r){super(),Yr(this,r,Da,ka,Qr,{})}}export{qa as component,za as universal};
