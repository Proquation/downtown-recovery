import{S as _l,i as pl,s as vl,k as y,q as V,a as L,l as E,m,r as I,h as f,c as W,n as s,b as j,C as u,K as zt,L as kt,D as At,M as pe,E as Ne,o as dl,u as ae,y as Ke,N as ge,e as ve,z as Qe,O as me,P as gl,A as Je,Q as ml,g as Ze,d as $e,B as xe,p as et,R as bl}from"../chunks/index.a4677e45.js";import{H as yl}from"../chunks/global.8eab2eb4.js";import{S as El,a as wl}from"../chunks/SelectRegions.ab710cf1.js";import{s as Ot,c as tt,a as kl,b as Ol,r as Pl}from"../chunks/csv.a309fd1d.js";const Dl=!0,zl=Object.freeze(Object.defineProperty({__proto__:null,prerender:Dl},Symbol.toStringTag,{value:"Module"}));function Gt(t,e,l){const o=t.slice();return o[13]=e[l],o}function Ut(t,e,l){const o=t.slice();return o[13]=e[l],o}function Bt(t,e,l){const o=t.slice();return o[13]=e[l],o}function jt(t,e,l){const o=t.slice();return o[13]=e[l],o}function Ht(t,e,l){const o=t.slice();return o[13]=e[l],o}function Lt(t,e,l){const o=t.slice();return o[13]=e[l],o}function Wt(t,e,l){const o=t.slice();return o[13]=e[l],o}function Xt(t,e,l){const o=t.slice();return o[13]=e[l],o}function Yt(t){let e,l=t[13].text+"",o,r;return{c(){e=y("option"),o=V(l),this.h()},l(n){e=E(n,"OPTION",{class:!0});var h=m(e);o=I(h,l),h.forEach(f),this.h()},h(){e.__value=r=t[13].value,e.value=e.__value,s(e,"class","svelte-19nzrqx")},m(n,h){j(n,e,h),u(e,o)},p(n,h){h&8&&l!==(l=n[13].text+"")&&ae(o,l),h&8&&r!==(r=n[13].value)&&(e.__value=r,e.value=e.__value)},d(n){n&&f(e)}}}function Kt(t){let e,l=t[13].text+"",o,r;return{c(){e=y("option"),o=V(l),this.h()},l(n){e=E(n,"OPTION",{class:!0});var h=m(e);o=I(h,l),h.forEach(f),this.h()},h(){e.__value=r=t[13].value,e.value=e.__value,s(e,"class","svelte-19nzrqx")},m(n,h){j(n,e,h),u(e,o)},p(n,h){h&16&&l!==(l=n[13].text+"")&&ae(o,l),h&16&&r!==(r=n[13].value)&&(e.__value=r,e.value=e.__value)},d(n){n&&f(e)}}}function Qt(t){let e,l=t[13].text+"",o,r;return{c(){e=y("option"),o=V(l),this.h()},l(n){e=E(n,"OPTION",{class:!0});var h=m(e);o=I(h,l),h.forEach(f),this.h()},h(){e.__value=r=t[13].value,e.value=e.__value,s(e,"class","svelte-19nzrqx")},m(n,h){j(n,e,h),u(e,o)},p(n,h){h&64&&l!==(l=n[13].text+"")&&ae(o,l),h&64&&r!==(r=n[13].value)&&(e.__value=r,e.value=e.__value)},d(n){n&&f(e)}}}function Jt(t){let e,l=t[13].text+"",o,r;return{c(){e=y("option"),o=V(l),this.h()},l(n){e=E(n,"OPTION",{class:!0});var h=m(e);o=I(h,l),h.forEach(f),this.h()},h(){e.__value=r=t[13].value,e.value=e.__value,s(e,"class","svelte-19nzrqx")},m(n,h){j(n,e,h),u(e,o)},p(n,h){h&32&&l!==(l=n[13].text+"")&&ae(o,l),h&32&&r!==(r=n[13].value)&&(e.__value=r,e.value=e.__value)},d(n){n&&f(e)}}}function Zt(t){let e,l=t[13].text+"",o,r;return{c(){e=y("option"),o=V(l),this.h()},l(n){e=E(n,"OPTION",{class:!0});var h=m(e);o=I(h,l),h.forEach(f),this.h()},h(){e.__value=r=t[13].value,e.value=e.__value,s(e,"class","svelte-19nzrqx")},m(n,h){j(n,e,h),u(e,o)},p(n,h){h&2&&l!==(l=n[13].text+"")&&ae(o,l),h&2&&r!==(r=n[13].value)&&(e.__value=r,e.value=e.__value)},d(n){n&&f(e)}}}function $t(t){let e,l=t[13].text+"",o,r;return{c(){e=y("option"),o=V(l),this.h()},l(n){e=E(n,"OPTION",{class:!0});var h=m(e);o=I(h,l),h.forEach(f),this.h()},h(){e.__value=r=t[13].value,e.value=e.__value,s(e,"class","svelte-19nzrqx")},m(n,h){j(n,e,h),u(e,o)},p(n,h){h&256&&l!==(l=n[13].text+"")&&ae(o,l),h&256&&r!==(r=n[13].value)&&(e.__value=r,e.value=e.__value)},d(n){n&&f(e)}}}function xt(t){let e,l=t[13].text+"",o,r;return{c(){e=y("option"),o=V(l),this.h()},l(n){e=E(n,"OPTION",{class:!0});var h=m(e);o=I(h,l),h.forEach(f),this.h()},h(){e.__value=r=t[13].value,e.value=e.__value,s(e,"class","svelte-19nzrqx")},m(n,h){j(n,e,h),u(e,o)},p(n,h){h&4&&l!==(l=n[13].text+"")&&ae(o,l),h&4&&r!==(r=n[13].value)&&(e.__value=r,e.value=e.__value)},d(n){n&&f(e)}}}function el(t){let e,l=t[13].text+"",o,r;return{c(){e=y("option"),o=V(l),this.h()},l(n){e=E(n,"OPTION",{class:!0});var h=m(e);o=I(h,l),h.forEach(f),this.h()},h(){e.__value=r=t[13].value,e.value=e.__value,s(e,"class","svelte-19nzrqx")},m(n,h){j(n,e,h),u(e,o)},p(n,h){h&128&&l!==(l=n[13].text+"")&&ae(o,l),h&128&&r!==(r=n[13].value)&&(e.__value=r,e.value=e.__value)},d(n){n&&f(e)}}}function Vl(t){let e,l,o,r,n,h,R,w,b,O,d,p,P,Q,Y=t[3],g=[];for(let i=0;i<Y.length;i+=1)g[i]=Yt(Xt(t,Y,i));let K=t[4],q=[];for(let i=0;i<K.length;i+=1)q[i]=Kt(Wt(t,K,i));let S=t[6],k=[];for(let i=0;i<S.length;i+=1)k[i]=Qt(Lt(t,S,i));let J=t[5],D=[];for(let i=0;i<J.length;i+=1)D[i]=Jt(Ht(t,J,i));let X=t[1],N=[];for(let i=0;i<X.length;i+=1)N[i]=Zt(jt(t,X,i));let Z=t[8],F=[];for(let i=0;i<Z.length;i+=1)F[i]=$t(Bt(t,Z,i));let ne=t[2],z=[];for(let i=0;i<ne.length;i+=1)z[i]=xt(Ut(t,ne,i));let $=t[7],G=[];for(let i=0;i<$.length;i+=1)G[i]=el(Gt(t,$,i));return{c(){e=y("p"),l=V("Select Variable:"),o=L(),r=y("select"),n=y("optgroup");for(let i=0;i<g.length;i+=1)g[i].c();h=y("optgroup");for(let i=0;i<q.length;i+=1)q[i].c();R=y("optgroup");for(let i=0;i<k.length;i+=1)k[i].c();w=y("optgroup");for(let i=0;i<D.length;i+=1)D[i].c();b=y("optgroup");for(let i=0;i<N.length;i+=1)N[i].c();O=y("optgroup");for(let i=0;i<F.length;i+=1)F[i].c();d=y("optgroup");for(let i=0;i<z.length;i+=1)z[i].c();p=y("optgroup");for(let i=0;i<G.length;i+=1)G[i].c();this.h()},l(i){e=E(i,"P",{});var C=m(e);l=I(C,"Select Variable:"),C.forEach(f),o=W(i),r=E(i,"SELECT",{class:!0});var a=m(r);n=E(a,"OPTGROUP",{label:!0});var M=m(n);for(let T=0;T<g.length;T+=1)g[T].l(M);M.forEach(f),h=E(a,"OPTGROUP",{label:!0});var A=m(h);for(let T=0;T<q.length;T+=1)q[T].l(A);A.forEach(f),R=E(a,"OPTGROUP",{label:!0});var le=m(R);for(let T=0;T<k.length;T+=1)k[T].l(le);le.forEach(f),w=E(a,"OPTGROUP",{label:!0});var ue=m(w);for(let T=0;T<D.length;T+=1)D[T].l(ue);ue.forEach(f),b=E(a,"OPTGROUP",{label:!0});var he=m(b);for(let T=0;T<N.length;T+=1)N[T].l(he);he.forEach(f),O=E(a,"OPTGROUP",{label:!0});var v=m(O);for(let T=0;T<F.length;T+=1)F[T].l(v);v.forEach(f),d=E(a,"OPTGROUP",{label:!0});var U=m(d);for(let T=0;T<z.length;T+=1)z[T].l(U);U.forEach(f),p=E(a,"OPTGROUP",{label:!0});var ce=m(p);for(let T=0;T<G.length;T+=1)G[T].l(ce);ce.forEach(f),a.forEach(f),this.h()},h(){s(n,"label","Demographics"),s(h,"label","Employment"),s(R,"label","Income"),s(w,"label","Housing"),s(b,"label","Commuting"),s(O,"label","Weather"),s(d,"label","COVID-19 Closures"),s(p,"label","Political Leaning"),s(r,"class","svelte-19nzrqx")},m(i,C){j(i,e,C),u(e,l),j(i,o,C),j(i,r,C),u(r,n);for(let a=0;a<g.length;a+=1)g[a]&&g[a].m(n,null);u(r,h);for(let a=0;a<q.length;a+=1)q[a]&&q[a].m(h,null);u(r,R);for(let a=0;a<k.length;a+=1)k[a]&&k[a].m(R,null);u(r,w);for(let a=0;a<D.length;a+=1)D[a]&&D[a].m(w,null);u(r,b);for(let a=0;a<N.length;a+=1)N[a]&&N[a].m(b,null);u(r,O);for(let a=0;a<F.length;a+=1)F[a]&&F[a].m(O,null);u(r,d);for(let a=0;a<z.length;a+=1)z[a]&&z[a].m(d,null);u(r,p);for(let a=0;a<G.length;a+=1)G[a]&&G[a].m(p,null);zt(r,t[0]),P||(Q=kt(r,"change",t[9]),P=!0)},p(i,[C]){if(C&8){Y=i[3];let a;for(a=0;a<Y.length;a+=1){const M=Xt(i,Y,a);g[a]?g[a].p(M,C):(g[a]=Yt(M),g[a].c(),g[a].m(n,null))}for(;a<g.length;a+=1)g[a].d(1);g.length=Y.length}if(C&16){K=i[4];let a;for(a=0;a<K.length;a+=1){const M=Wt(i,K,a);q[a]?q[a].p(M,C):(q[a]=Kt(M),q[a].c(),q[a].m(h,null))}for(;a<q.length;a+=1)q[a].d(1);q.length=K.length}if(C&64){S=i[6];let a;for(a=0;a<S.length;a+=1){const M=Lt(i,S,a);k[a]?k[a].p(M,C):(k[a]=Qt(M),k[a].c(),k[a].m(R,null))}for(;a<k.length;a+=1)k[a].d(1);k.length=S.length}if(C&32){J=i[5];let a;for(a=0;a<J.length;a+=1){const M=Ht(i,J,a);D[a]?D[a].p(M,C):(D[a]=Jt(M),D[a].c(),D[a].m(w,null))}for(;a<D.length;a+=1)D[a].d(1);D.length=J.length}if(C&2){X=i[1];let a;for(a=0;a<X.length;a+=1){const M=jt(i,X,a);N[a]?N[a].p(M,C):(N[a]=Zt(M),N[a].c(),N[a].m(b,null))}for(;a<N.length;a+=1)N[a].d(1);N.length=X.length}if(C&256){Z=i[8];let a;for(a=0;a<Z.length;a+=1){const M=Bt(i,Z,a);F[a]?F[a].p(M,C):(F[a]=$t(M),F[a].c(),F[a].m(O,null))}for(;a<F.length;a+=1)F[a].d(1);F.length=Z.length}if(C&4){ne=i[2];let a;for(a=0;a<ne.length;a+=1){const M=Ut(i,ne,a);z[a]?z[a].p(M,C):(z[a]=xt(M),z[a].c(),z[a].m(d,null))}for(;a<z.length;a+=1)z[a].d(1);z.length=ne.length}if(C&128){$=i[7];let a;for(a=0;a<$.length;a+=1){const M=Gt(i,$,a);G[a]?G[a].p(M,C):(G[a]=el(M),G[a].c(),G[a].m(p,null))}for(;a<G.length;a+=1)G[a].d(1);G.length=$.length}C&511&&zt(r,i[0])},i:At,o:At,d(i){i&&f(e),i&&f(o),i&&f(r),pe(g,i),pe(q,i),pe(k,i),pe(D,i),pe(N,i),pe(F,i),pe(z,i),pe(G,i),P=!1,Q()}}}function Il(t,e,l){let o;Ne(t,Ot,g=>l(11,o=g));let r,n=[],h=[],R=[],w=[],b=[],O=[],d=[],p=[],P=[];async function Q(){try{const K=await(await fetch("../variables_data_dictionary.csv")).text();l(10,n=tt(K)),console.log(n)}catch(g){console.error("Error loading CSV data:",g)}}dl(()=>{Q(),l(0,r=o)});function Y(g){const K=g.target.value;Ot.set(K)}return t.$$.update=()=>{t.$$.dirty&1024&&l(1,h=n.filter(g=>g.group==="Commuting")),t.$$.dirty&1024&&l(2,R=n.filter(g=>g.group==="COVID-19 Closures")),t.$$.dirty&1024&&l(3,w=n.filter(g=>g.group==="Demographics")),t.$$.dirty&1024&&l(4,b=n.filter(g=>g.group==="Employment")),t.$$.dirty&1024&&l(5,O=n.filter(g=>g.group==="Housing")),t.$$.dirty&1024&&l(6,d=n.filter(g=>g.group==="Income")),t.$$.dirty&1024&&l(7,p=n.filter(g=>g.group==="Political Leaning")),t.$$.dirty&1024&&l(8,P=n.filter(g=>g.group==="Weather"))},[r,h,R,w,b,O,d,p,P,Y,n]}class Sl extends _l{constructor(e){super(),pl(this,e,Il,Vl,vl,{})}}function tl(t,e,l){const o=t.slice();return o[38]=e[l],o[40]=l,o}function ll(t,e,l){const o=t.slice();return o[38]=e[l],o[40]=l,o}function ol(t,e,l){const o=t.slice();return o[40]=e[l],o}function al(t,e,l){const o=t.slice();return o[44]=e[l],o[40]=l,o}function rl(t){let e,l,o,r,n=(100*t[44]).toFixed(0)+"",h,R,w,b,O,d;return{c(){e=ge("line"),r=ge("text"),h=V(n),R=V("%"),b=ge("line"),this.h()},l(p){e=me(p,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),m(e).forEach(f),r=me(p,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var P=m(r);h=I(P,n),R=I(P,"%"),P.forEach(f),b=me(p,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),m(b).forEach(f),this.h()},h(){s(e,"class","grid svelte-52hdfh"),s(e,"x1","40"),s(e,"y1",l=30+t[40]*t[14]),s(e,"x2",t[1]),s(e,"y2",o=30+t[40]*t[14]),s(r,"class","axis-label svelte-52hdfh"),s(r,"x","35"),s(r,"y",w=35+t[40]*t[14]),s(r,"text-anchor","end"),s(b,"class","grid-white svelte-52hdfh"),s(b,"x1","37"),s(b,"y1",O=30+t[40]*t[14]),s(b,"x2","45"),s(b,"y2",d=30+t[40]*t[14])},m(p,P){j(p,e,P),j(p,r,P),u(r,h),u(r,R),j(p,b,P)},p(p,P){P[0]&16384&&l!==(l=30+p[40]*p[14])&&s(e,"y1",l),P[0]&2&&s(e,"x2",p[1]),P[0]&16384&&o!==(o=30+p[40]*p[14])&&s(e,"y2",o),P[0]&8&&n!==(n=(100*p[44]).toFixed(0)+"")&&ae(h,n),P[0]&16384&&w!==(w=35+p[40]*p[14])&&s(r,"y",w),P[0]&16384&&O!==(O=30+p[40]*p[14])&&s(b,"y1",O),P[0]&16384&&d!==(d=30+p[40]*p[14])&&s(b,"y2",d)},d(p){p&&f(e),p&&f(r),p&&f(b)}}}function nl(t){let e,l,o,r,n=(t[40]*t[11]).toLocaleString()+"",h,R,w,b,O;return{c(){e=ge("line"),r=ge("text"),h=V(n),w=ge("line"),this.h()},l(d){e=me(d,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),m(e).forEach(f),r=me(d,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var p=m(r);h=I(p,n),p.forEach(f),w=me(d,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),m(w).forEach(f),this.h()},h(){s(e,"class","grid svelte-52hdfh"),s(e,"x1",l=45+t[40]*t[10]),s(e,"y1","22"),s(e,"x2",o=45+t[40]*t[10]),s(e,"y2",t[2]),s(r,"class","axis-label svelte-52hdfh"),s(r,"x",R=47+t[40]*t[10]),s(r,"y","17"),s(r,"text-anchor","end"),s(w,"class","grid-white svelte-52hdfh"),s(w,"x1",b=45+t[40]*t[10]),s(w,"y1","22"),s(w,"x2",O=45+t[40]*t[10]),s(w,"y2","31")},m(d,p){j(d,e,p),j(d,r,p),u(r,h),j(d,w,p)},p(d,p){p[0]&1024&&l!==(l=45+d[40]*d[10])&&s(e,"x1",l),p[0]&1024&&o!==(o=45+d[40]*d[10])&&s(e,"x2",o),p[0]&4&&s(e,"y2",d[2]),p[0]&2048&&n!==(n=(d[40]*d[11]).toLocaleString()+"")&&ae(h,n),p[0]&1024&&R!==(R=47+d[40]*d[10])&&s(r,"x",R),p[0]&1024&&b!==(b=45+d[40]*d[10])&&s(w,"x1",b),p[0]&1024&&O!==(O=45+d[40]*d[10])&&s(w,"x2",O)},d(d){d&&f(e),d&&f(r),d&&f(w)}}}function il(t){let e,l,o;return{c(){e=ge("circle"),this.h()},l(r){e=me(r,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),m(e).forEach(f),this.h()},h(){s(e,"class","point-white svelte-52hdfh"),s(e,"cx",l=45+Re([0,t[5]],t[4],parseFloat(t[38][t[6]]))),s(e,"cy",o=30+Te(t[13],t[2]-40,t[38].seasonal_average)),s(e,"r","6"),s(e,"fill","black"),s(e,"stroke","white"),s(e,"stroke-width","3")},m(r,n){j(r,e,n)},p(r,n){n[0]&113&&l!==(l=45+Re([0,r[5]],r[4],parseFloat(r[38][r[6]])))&&s(e,"cx",l),n[0]&8197&&o!==(o=30+Te(r[13],r[2]-40,r[38].seasonal_average))&&s(e,"cy",o)},d(r){r&&f(e)}}}function sl(t){let e,l=t[38][t[6]]>=0&&il(t);return{c(){l&&l.c(),e=ve()},l(o){l&&l.l(o),e=ve()},m(o,r){l&&l.m(o,r),j(o,e,r)},p(o,r){o[38][o[6]]>=0?l?l.p(o,r):(l=il(o),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(o){l&&l.d(o),o&&f(e)}}}function ul(t){let e,l,o,r,n,h;function R(...b){return t[26](t[38],...b)}function w(...b){return t[27](t[38],...b)}return{c(){e=ge("circle"),this.h()},l(b){e=me(b,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0}),m(e).forEach(f),this.h()},h(){s(e,"class","point svelte-52hdfh"),s(e,"cx",l=45+Re([0,t[5]],t[4],parseFloat(t[38][t[6]]))),s(e,"cy",o=30+Te(t[13],t[2]-40,t[38].seasonal_average)),s(e,"r","6"),s(e,"fill",r=t[15].find(R).colour),s(e,"stroke","white"),s(e,"stroke-width","0")},m(b,O){j(b,e,O),n||(h=[kt(e,"mouseover",w),kt(e,"mouseout",t[28])],n=!0)},p(b,O){t=b,O[0]&113&&l!==(l=45+Re([0,t[5]],t[4],parseFloat(t[38][t[6]])))&&s(e,"cx",l),O[0]&8197&&o!==(o=30+Te(t[13],t[2]-40,t[38].seasonal_average))&&s(e,"cy",o),O[0]&1&&r!==(r=t[15].find(R).colour)&&s(e,"fill",r)},d(b){b&&f(e),n=!1,bl(h)}}}function hl(t){let e,l=t[38][t[6]]>=0&&ul(t);return{c(){l&&l.c(),e=ve()},l(o){l&&l.l(o),e=ve()},m(o,r){l&&l.m(o,r),j(o,e,r)},p(o,r){o[38][o[6]]>=0?l?l.p(o,r):(l=ul(o),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(o){l&&l.d(o),o&&f(e)}}}function cl(t){let e,l,o,r,n=t[12].city+"",h,R,w,b,O=Math.round(100*t[12].seasonal_average)+"",d,p,P,Q,Y=t[12][t[6]].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"",g,K,q;return{c(){e=ge("foreignObject"),l=y("div"),o=y("p"),r=y("u"),h=V(n),R=L(),w=y("br"),b=V(` 
                        Recovery Rate: `),d=V(O),p=V(`%
                        `),P=y("br"),Q=V(`
                        X-Value: `),g=V(Y),this.h()},l(S){e=me(S,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var k=m(e);l=E(k,"DIV",{id:!0,style:!0,class:!0});var J=m(l);o=E(J,"P",{id:!0,style:!0,class:!0});var D=m(o);r=E(D,"U",{});var X=m(r);h=I(X,n),X.forEach(f),R=W(D),w=E(D,"BR",{}),b=I(D,` 
                        Recovery Rate: `),d=I(D,O),p=I(D,`%
                        `),P=E(D,"BR",{}),Q=I(D,`
                        X-Value: `),g=I(D,Y),D.forEach(f),J.forEach(f),k.forEach(f),this.h()},h(){s(o,"id","tooltip-p"),et(o,"color",t[15].find(t[29]).text),s(o,"class","svelte-52hdfh"),s(l,"id","tooltip"),et(l,"background-color",t[15].find(t[30]).colour),s(l,"class","svelte-52hdfh"),s(e,"x",K=(parseFloat(t[12][t[6]])<t[5]/2?0:-145)+55+Re([0,t[5]],t[4],parseFloat(t[12][t[6]]))),s(e,"y",q=22+Te(t[13],t[2]-40,t[12].seasonal_average)),s(e,"width","125"),s(e,"height","50")},m(S,k){j(S,e,k),u(e,l),u(l,o),u(o,r),u(r,h),u(o,R),u(o,w),u(o,b),u(o,d),u(o,p),u(o,P),u(o,Q),u(o,g)},p(S,k){k[0]&4096&&n!==(n=S[12].city+"")&&ae(h,n),k[0]&4096&&O!==(O=Math.round(100*S[12].seasonal_average)+"")&&ae(d,O),k[0]&4160&&Y!==(Y=S[12][S[6]].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"")&&ae(g,Y),k[0]&4096&&et(o,"color",S[15].find(S[29]).text),k[0]&4096&&et(l,"background-color",S[15].find(S[30]).colour),k[0]&4208&&K!==(K=(parseFloat(S[12][S[6]])<S[5]/2?0:-145)+55+Re([0,S[5]],S[4],parseFloat(S[12][S[6]])))&&s(e,"x",K),k[0]&12292&&q!==(q=22+Te(S[13],S[2]-40,S[12].seasonal_average))&&s(e,"y",q)},d(S){S&&f(e)}}}function Tl(t){let e,l,o,r,n,h,R,w,b,O,d,p,P,Q,Y,g,K,q,S,k,J,D,X,N,Z,F,ne,z,$,G,i,C,a,M,A,le,ue,he,v,U,ce,T,ye,lt,B,Fe,ze,Ae,Ge,ot,ie,Ee,Me,at,rt,Ue,nt,we,Ce,it,st,Be,ut,ke,qe,ht,ct,je,ft,_t,pt,vt,dt,gt,mt,bt,yt,Et,Pt,be;e=new yl({}),he=new El({}),ce=new wl({props:{europe:"no"}}),ye=new Sl({});let Oe=t[3].reverse(),x=[];for(let _=0;_<Oe.length;_+=1)x[_]=rl(al(t,Oe,_));let wt=[0,1,2,3,4],fe=[];for(let _=0;_<5;_+=1)fe[_]=nl(ol(t,wt,_));let Pe=t[0],ee=[];for(let _=0;_<Pe.length;_+=1)ee[_]=sl(ll(t,Pe,_));let De=t[0],te=[];for(let _=0;_<De.length;_+=1)te[_]=hl(tl(t,De,_));let oe=t[12]!=null&&cl(t);return{c(){Ke(e.$$.fragment),l=L(),o=y("main"),r=y("div"),n=y("h1"),h=V("Downtown Recovery Correlations"),R=L(),w=y("p"),b=V("The recovery metrics (y-axis) on these charts are based on a sample of mobile phone data."),O=L(),d=y("p"),p=V("They are computed by counting the number of unique mobile phones in a city's downtown area in the specified time period, and then dividing it by the number of unique visitors during the equivalent time period in 2019. For example, the March 2023 - May 2023 time period is compared to the March 2019 - May 2019 time period."),P=L(),Q=y("p"),Y=V("A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels. Click "),g=y("a"),K=V("here"),q=V(" to download the y-axis data shown on this chart."),S=L(),k=y("p"),J=V("The data on the x-axis comes from a variety of sources. The full dataset including all variables in the drop-down can be downloaded "),D=y("a"),X=V("here"),N=V(". You may also wish to download a "),Z=y("a"),F=V("data dictionary"),ne=V(", which includes the names of data sources for each variable."),z=L(),$=y("p"),G=V("For more information, read our "),i=y("a"),C=V("Methodology"),a=V(" page."),M=L(),A=y("div"),le=y("div"),ue=y("div"),Ke(he.$$.fragment),v=L(),U=y("div"),Ke(ce.$$.fragment),T=L(),Ke(ye.$$.fragment),lt=L(),B=ge("svg");for(let _=0;_<x.length;_+=1)x[_].c();Fe=ve();for(let _=0;_<5;_+=1)fe[_].c();ze=ve();for(let _=0;_<ee.length;_+=1)ee[_].c();Ae=ve();for(let _=0;_<te.length;_+=1)te[_].c();Ge=ve(),oe&&oe.c(),ot=L(),ie=y("div"),Ee=y("p"),Me=y("i"),at=V("Variable Name:"),rt=L(),Ue=V(t[7]),nt=L(),we=y("p"),Ce=y("i"),it=V("Group:"),st=L(),Be=V(t[9]),ut=L(),ke=y("p"),qe=y("i"),ht=V("Source:"),ct=L(),je=V(t[8]),ft=L(),_t=y("br"),pt=L(),vt=y("br"),dt=L(),gt=y("br"),mt=L(),bt=y("br"),yt=L(),Et=y("br"),this.h()},l(_){Qe(e.$$.fragment,_),l=W(_),o=E(_,"MAIN",{class:!0});var H=m(o);r=E(H,"DIV",{class:!0});var c=m(r);n=E(c,"H1",{});var se=m(n);h=I(se,"Downtown Recovery Correlations"),se.forEach(f),R=W(c),w=E(c,"P",{});var Dt=m(w);b=I(Dt,"The recovery metrics (y-axis) on these charts are based on a sample of mobile phone data."),Dt.forEach(f),O=W(c),d=E(c,"P",{});var Vt=m(d);p=I(Vt,"They are computed by counting the number of unique mobile phones in a city's downtown area in the specified time period, and then dividing it by the number of unique visitors during the equivalent time period in 2019. For example, the March 2023 - May 2023 time period is compared to the March 2019 - May 2019 time period."),Vt.forEach(f),P=W(c),Q=E(c,"P",{});var He=m(Q);Y=I(He,"A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels. Click "),g=E(He,"A",{href:!0});var It=m(g);K=I(It,"here"),It.forEach(f),q=I(He," to download the y-axis data shown on this chart."),He.forEach(f),S=W(c),k=E(c,"P",{});var Ve=m(k);J=I(Ve,"The data on the x-axis comes from a variety of sources. The full dataset including all variables in the drop-down can be downloaded "),D=E(Ve,"A",{href:!0});var St=m(D);X=I(St,"here"),St.forEach(f),N=I(Ve,". You may also wish to download a "),Z=E(Ve,"A",{href:!0});var Tt=m(Z);F=I(Tt,"data dictionary"),Tt.forEach(f),ne=I(Ve,", which includes the names of data sources for each variable."),Ve.forEach(f),z=W(c),$=E(c,"P",{});var Le=m($);G=I(Le,"For more information, read our "),i=E(Le,"A",{href:!0});var Rt=m(i);C=I(Rt,"Methodology"),Rt.forEach(f),a=I(Le," page."),Le.forEach(f),c.forEach(f),M=W(H),A=E(H,"DIV",{id:!0,class:!0});var _e=m(A);le=E(_e,"DIV",{id:!0,class:!0});var Ie=m(le);ue=E(Ie,"DIV",{id:!0,class:!0});var Mt=m(ue);Qe(he.$$.fragment,Mt),Mt.forEach(f),v=W(Ie),U=E(Ie,"DIV",{id:!0,class:!0});var Ct=m(U);Qe(ce.$$.fragment,Ct),Ct.forEach(f),T=W(Ie),Qe(ye.$$.fragment,Ie),Ie.forEach(f),lt=W(_e),B=me(_e,"svg",{height:!0,width:!0,id:!0,class:!0});var Se=m(B);for(let re=0;re<x.length;re+=1)x[re].l(Se);Fe=ve();for(let re=0;re<5;re+=1)fe[re].l(Se);ze=ve();for(let re=0;re<ee.length;re+=1)ee[re].l(Se);Ae=ve();for(let re=0;re<te.length;re+=1)te[re].l(Se);Ge=ve(),oe&&oe.l(Se),Se.forEach(f),ot=W(_e),ie=E(_e,"DIV",{class:!0});var de=m(ie);Ee=E(de,"P",{});var We=m(Ee);Me=E(We,"I",{});var qt=m(Me);at=I(qt,"Variable Name:"),qt.forEach(f),rt=W(We),Ue=I(We,t[7]),We.forEach(f),nt=W(de),we=E(de,"P",{});var Xe=m(we);Ce=E(Xe,"I",{});var Nt=m(Ce);it=I(Nt,"Group:"),Nt.forEach(f),st=W(Xe),Be=I(Xe,t[9]),Xe.forEach(f),ut=W(de),ke=E(de,"P",{});var Ye=m(ke);qe=E(Ye,"I",{});var Ft=m(qe);ht=I(Ft,"Source:"),Ft.forEach(f),ct=W(Ye),je=I(Ye,t[8]),Ye.forEach(f),ft=W(de),_t=E(de,"BR",{}),pt=W(de),vt=E(de,"BR",{}),de.forEach(f),dt=W(_e),gt=E(_e,"BR",{}),mt=W(_e),bt=E(_e,"BR",{}),yt=W(_e),Et=E(_e,"BR",{}),_e.forEach(f),H.forEach(f),this.h()},h(){s(g,"href","/ranking_data.csv"),s(D,"href","/variables_data.csv"),s(Z,"href","/variables_data_dictionary.csv"),s(i,"href","/methodology"),s(r,"class","text"),s(ue,"id","options-season"),s(ue,"class","svelte-52hdfh"),s(U,"id","options-region"),s(U,"class","svelte-52hdfh"),s(le,"id","options"),s(le,"class","svelte-52hdfh"),s(B,"height",t[2]),s(B,"width",t[1]),s(B,"id","chart"),s(B,"class","svelte-52hdfh"),s(ie,"class","text"),s(A,"id","chart-wrapper"),s(A,"class","svelte-52hdfh"),gl(()=>t[31].call(A)),s(o,"class","svelte-52hdfh")},m(_,H){Je(e,_,H),j(_,l,H),j(_,o,H),u(o,r),u(r,n),u(n,h),u(r,R),u(r,w),u(w,b),u(r,O),u(r,d),u(d,p),u(r,P),u(r,Q),u(Q,Y),u(Q,g),u(g,K),u(Q,q),u(r,S),u(r,k),u(k,J),u(k,D),u(D,X),u(k,N),u(k,Z),u(Z,F),u(k,ne),u(r,z),u(r,$),u($,G),u($,i),u(i,C),u($,a),u(o,M),u(o,A),u(A,le),u(le,ue),Je(he,ue,null),u(le,v),u(le,U),Je(ce,U,null),u(le,T),Je(ye,le,null),u(A,lt),u(A,B);for(let c=0;c<x.length;c+=1)x[c]&&x[c].m(B,null);u(B,Fe);for(let c=0;c<5;c+=1)fe[c]&&fe[c].m(B,null);u(B,ze);for(let c=0;c<ee.length;c+=1)ee[c]&&ee[c].m(B,null);u(B,Ae);for(let c=0;c<te.length;c+=1)te[c]&&te[c].m(B,null);u(B,Ge),oe&&oe.m(B,null),u(A,ot),u(A,ie),u(ie,Ee),u(Ee,Me),u(Me,at),u(Ee,rt),u(Ee,Ue),u(ie,nt),u(ie,we),u(we,Ce),u(Ce,it),u(we,st),u(we,Be),u(ie,ut),u(ie,ke),u(ke,qe),u(qe,ht),u(ke,ct),u(ke,je),u(ie,ft),u(ie,_t),u(ie,pt),u(ie,vt),u(A,dt),u(A,gt),u(A,mt),u(A,bt),u(A,yt),u(A,Et),Pt=ml(A,t[31].bind(A)),be=!0},p(_,H){if(H[0]&16394){Oe=_[3].reverse();let c;for(c=0;c<Oe.length;c+=1){const se=al(_,Oe,c);x[c]?x[c].p(se,H):(x[c]=rl(se),x[c].c(),x[c].m(B,Fe))}for(;c<x.length;c+=1)x[c].d(1);x.length=Oe.length}if(H[0]&3076){wt=[0,1,2,3,4];let c;for(c=0;c<5;c+=1){const se=ol(_,wt,c);fe[c]?fe[c].p(se,H):(fe[c]=nl(se),fe[c].c(),fe[c].m(B,ze))}for(;c<5;c+=1)fe[c].d(1)}if(H[0]&8309){Pe=_[0];let c;for(c=0;c<Pe.length;c+=1){const se=ll(_,Pe,c);ee[c]?ee[c].p(se,H):(ee[c]=sl(se),ee[c].c(),ee[c].m(B,Ae))}for(;c<ee.length;c+=1)ee[c].d(1);ee.length=Pe.length}if(H[0]&110709){De=_[0];let c;for(c=0;c<De.length;c+=1){const se=tl(_,De,c);te[c]?te[c].p(se,H):(te[c]=hl(se),te[c].c(),te[c].m(B,Ge))}for(;c<te.length;c+=1)te[c].d(1);te.length=De.length}_[12]!=null?oe?oe.p(_,H):(oe=cl(_),oe.c(),oe.m(B,null)):oe&&(oe.d(1),oe=null),(!be||H[0]&4)&&s(B,"height",_[2]),(!be||H[0]&2)&&s(B,"width",_[1]),(!be||H[0]&128)&&ae(Ue,_[7]),(!be||H[0]&512)&&ae(Be,_[9]),(!be||H[0]&256)&&ae(je,_[8])},i(_){be||(Ze(e.$$.fragment,_),Ze(he.$$.fragment,_),Ze(ce.$$.fragment,_),Ze(ye.$$.fragment,_),be=!0)},o(_){$e(e.$$.fragment,_),$e(he.$$.fragment,_),$e(ce.$$.fragment,_),$e(ye.$$.fragment,_),be=!1},d(_){xe(e,_),_&&f(l),_&&f(o),xe(he),xe(ce),xe(ye),pe(x,_),pe(fe,_),pe(ee,_),pe(te,_),oe&&oe.d(),Pt()}}}function fl(t,e){let l=[];for(let o=0;o<=Math.ceil(t/e);o++)l.push(o*e);return l}function Rl(t){const e=Math.pow(10,Math.floor(Math.log10(t)));return Math.ceil(t/e)*e}function Te(t,e,l){return e-e*l/(t[1]-t[0])}function Re(t,e,l){return e*l/(t[1]-t[0])}function Ml(t,e,l){let o,r,n,h,R,w;Ne(t,Ot,v=>l(6,n=v)),Ne(t,kl,v=>l(24,h=v)),Ne(t,Ol,v=>l(25,R=v)),Ne(t,Pl,v=>l(34,w=v));let b=[],O=[],d=[],p=[],P=[],Q="",Y="",g="";const K=w;async function q(){try{const U=await(await fetch("../ranking_data.csv")).text();l(17,b=tt(U))}catch(v){console.error("Error loading CSV data:",v)}}async function S(){try{const U=await(await fetch("../variables_data.csv")).text();l(18,O=tt(U))}catch(v){console.error("Error loading CSV data:",v)}}async function k(){try{const U=await(await fetch("../variables_data_dictionary.csv")).text();l(20,P=tt(U)),console.log(P)}catch(v){console.error("Error loading CSV data:",v)}}dl(()=>{q(),S(),k()});let J,D=420,X=1,N=[0,1],Z,F=100,ne=1,z=1,$=.1,G=1,i;const C=function(v){v.clientX,v.clientY},a=(v,U)=>U.name===v.region,M=(v,U)=>{l(12,i=v),C(U)},A=()=>{l(12,i=void 0)},le=v=>v.name===i.region,ue=v=>v.name===i.region;function he(){J=this.offsetWidth,l(1,J)}return t.$$.update=()=>{t.$$.dirty[0]&50462720&&l(19,d=b.filter(v=>v.metric==="downtown").filter(v=>v.region!=="Europe").filter(v=>v.Season===`Season_${R}`).filter(v=>h.includes(v.region)).sort((v,U)=>U.seasonal_average-v.seasonal_average)),t.$$.dirty[0]&786432&&l(0,p=d.map(function(v){var U=O.find(function(ce){return ce.city===v.city});return Object.assign({},v,U)})),t.$$.dirty[0]&1048640&&l(8,Y=P.length>0?P.filter(v=>v.value===n)[0].source:null),t.$$.dirty[0]&1048640&&l(7,Q=P.length>0?P.filter(v=>v.value===n)[0].text:null),t.$$.dirty[0]&1048640&&l(9,g=P.length>0?P.filter(v=>v.value===n)[0].group:null),t.$$.dirty[0]&2&&l(2,D=J*.666),t.$$.dirty[0]&1&&l(21,X=p.length!==0?p[0].seasonal_average:1),t.$$.dirty[0]&2097152&&l(21,X=X<1?1:X),t.$$.dirty[0]&2097152&&(X<2?l(3,N=fl(X,.2)):l(3,N=fl(X,.5))),t.$$.dirty[0]&12&&l(14,o=(D-40)/(N.length-1)),t.$$.dirty[0]&8&&l(13,r=[Math.min(...N),Math.max(...N)]),t.$$.dirty[0]&64&&l(22,Z=n),t.$$.dirty[0]&2&&l(4,F=J-45-10),t.$$.dirty[0]&4194305&&l(23,ne=Math.max(...p.map(v=>parseFloat(v[Z])).filter(v=>!isNaN(v)))),t.$$.dirty[0]&8388608&&l(5,z=Rl(ne)),t.$$.dirty[0]&16&&l(10,$=F/4),t.$$.dirty[0]&32&&l(11,G=z/4)},[p,J,D,N,F,z,n,Q,Y,g,$,G,i,r,o,K,C,b,O,d,P,X,Z,ne,h,R,a,M,A,le,ue,he]}class Al extends _l{constructor(e){super(),pl(this,e,Ml,Tl,vl,{},null,[-1,-1])}}export{Al as component,zl as universal};
