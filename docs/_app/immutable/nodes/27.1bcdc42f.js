import{S as qt,i as At,s as It,y as ct,a as Q,k as b,q as M,L as A,z as ut,c as Y,l as E,m as h,r as q,h as o,M as I,n as t,p as Je,A as ft,b as _e,C as i,g as ht,d as dt,B as mt,Q as Ke,E as pt,o as Ft,K as Lt,O as Pt,u as vt,D as Le,J as Mt}from"../chunks/index.d6d9c1d5.js";import{H as Rt}from"../chunks/global.26cac63f.js";import{S as St}from"../chunks/SelectRegions.327a773d.js";import"../chunks/transform.4d2927c0.js";import{c as He,s as Vt,r as zt}from"../chunks/stores.64de824d.js";import{a as Ut,t as Gt,l as Tt}from"../chunks/line.f1bfd7f4.js";import{l as Bt}from"../chunks/linear.6154f0ba.js";import{c as Ht}from"../chunks/csv.3ac754ad.js";function Jt(a,e){let n;if(e===void 0)for(const r of a)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let l of a)(l=e(l,++r,a))!=null&&(n<l||n===void 0&&l>=l)&&(n=l)}return n}function Kt(a,e){let n;if(e===void 0)for(const r of a)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let l of a)(l=e(l,++r,a))!=null&&(n>l||n===void 0&&l>=l)&&(n=l)}return n}function _t(a,e){let n=0,r=0;if(e===void 0)for(let l of a)l!=null&&(l=+l)>=l&&(++n,r+=l);else{let l=-1;for(let s of a)(s=e(s,++l,a))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}const Ot=!0,wr=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ot},Symbol.toStringTag,{value:"Module"}));function gt(a,e){return jt(a)||Nt(a,e)||$t()}function jt(a){if(Array.isArray(a))return a}function Nt(a,e){var n=[],r=!0,l=!1,s=void 0;try{for(var d=a[Symbol.iterator](),w;!(r=(w=d.next()).done)&&(n.push(w.value),!(e&&n.length===e));r=!0);}catch(p){l=!0,s=p}finally{try{!r&&d.return!=null&&d.return()}finally{if(l)throw s}}return n}function $t(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Qt(a,e,n,r){a=a.filter(function(H,z){var u=e(H,z),g=n(H,z);return u!=null&&isFinite(u)&&g!=null&&isFinite(g)}),r&&a.sort(function(H,z){return e(H)-e(z)});for(var l=a.length,s=new Float64Array(l),d=new Float64Array(l),w=0,p=0,V,T,F,L=0;L<l;)F=a[L],s[L]=V=+e(F,L,a),d[L]=T=+n(F,L,a),++L,w+=(V-w)/L,p+=(T-p)/L;for(var D=0;D<l;++D)s[D]-=w,d[D]-=p;return[s,d,w,p]}function Yt(a,e,n,r){var l=r-a*a,s=Math.abs(l)<1e-24?0:(n-a*e)/l,d=e-s*a;return[d,s]}function Wt(a){a.sort(function(n,r){return n-r});var e=a.length/2;return e%1===0?(a[e-1]+a[e])/2:a[Math.floor(e)]}var yt=2,xt=1e-12;function Zt(){var a=function(s){return s[0]},e=function(s){return s[1]},n=.3;function r(l){for(var s=Qt(l,a,e,!0),d=gt(s,4),w=d[0],p=d[1],V=d[2],T=d[3],F=w.length,L=Math.max(2,~~(n*F)),D=new Float64Array(F),H=new Float64Array(F),z=new Float64Array(F).fill(1),u=-1;++u<=yt;){for(var g=[0,L-1],x=0;x<F;++x){for(var R=w[x],W=g[0],K=g[1],C=R-w[W]>w[K]-R?W:K,k=0,le=0,Z=0,P=0,X=0,O=1/Math.abs(w[C]-R||1),J=W;J<=K;++J){var ee=w[J],U=p[J],j=Xt(Math.abs(R-ee)*O)*z[J],ae=ee*j;k+=j,le+=ae,Z+=U*j,P+=U*ae,X+=ee*ae}var oe=Yt(le/k,Z/k,P/k,X/k),ie=gt(oe,2),ne=ie[0],m=ie[1];D[x]=ne+m*R,H[x]=Math.abs(p[x]-D[x]),er(w,x+1,g)}if(u===yt)break;var G=Wt(H);if(Math.abs(G)<xt)break;for(var S=0,f,_;S<F;++S)f=H[S]/(6*G),z[S]=f>=1?xt:(_=1-f*f)*_}return tr(w,D,V,T)}return r.bandwidth=function(l){return arguments.length?(n=l,r):n},r.x=function(l){return arguments.length?(a=l,r):a},r.y=function(l){return arguments.length?(e=l,r):e},r}function Xt(a){return(a=1-a*a*a)*a*a}function er(a,e,n){var r=a[e],l=n[0],s=n[1]+1;if(!(s>=a.length))for(;e>l&&a[s]-r<=r-a[l];)n[0]=++l,n[1]=s,++s}function tr(a,e,n,r){for(var l=a.length,s=[],d=0,w=0,p=[],V;d<l;++d)V=a[d]+n,p[0]===V?p[1]+=(e[d]-p[1])/++w:(w=0,p[1]+=r,p=[V,e[d]],s.push(p));return p[1]+=r,s}const rr=""+new URL("../assets/green-arrow.0afd51fe.svg",import.meta.url).href,ar=""+new URL("../assets/red-arrow.ede1cb71.svg",import.meta.url).href;function wt(a,e,n){const r=a.slice();return r[13]=e[n].city,r[14]=e[n].regressionLine,r[15]=e[n].startCircle,r[16]=e[n].endCircle,r[17]=e[n].meanLine,r[18]=e[n].perChangeDisplay,r[19]=e[n].percentageChange,r[21]=n,r}function kt(a,e,n){const r=a.slice();return r[22]=e[n],r[21]=n,r}function bt(a,e,n){const r=a.slice();return r[22]=e[n],r[21]=n,r}function nr(a){let e;return{c(){e=A("line"),this.h()},l(n){e=I(n,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(e).forEach(o),this.h()},h(){t(e,"x1",260+a[21]*re/12),t(e,"y1",5),t(e,"x2",260+a[21]*re/12),t(e,"y2",40),t(e,"stroke","white"),t(e,"stroke-width","1")},m(n,r){_e(n,e,r)},p:Le,d(n){n&&o(e)}}}function Et(a){let e,n,r,l=a[22]===1&&nr(a);return{c(){e=A("line"),l&&l.c(),n=A("text"),r=M(a[22]),this.h()},l(s){e=I(s,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(e).forEach(o),l&&l.l(s),n=I(s,"text",{x:!0,y:!0,class:!0});var d=h(n);r=q(d,a[22]),d.forEach(o),this.h()},h(){t(e,"x1",260+a[21]*re/12),t(e,"y1",45),t(e,"x2",260+a[21]*re/12),t(e,"y2",40),t(e,"stroke","white"),t(e,"stroke-width","1"),t(n,"x",260+a[21]*re/12+.5*re/12),t(n,"y","40"),t(n,"class","textMonth svelte-1crkxs9")},m(s,d){_e(s,e,d),l&&l.m(s,d),_e(s,n,d),i(n,r)},p(s,d){s[22]===1&&l.p(s,d)},d(s){s&&o(e),l&&l.d(s),s&&o(n)}}}function lr(a){let e,n;return{c(){e=b("img"),this.h()},l(r){e=E(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Mt(e.src,n=ar)||t(e,"src",n),t(e,"alt","Down arrow"),t(e,"class","arrow-icon svelte-1crkxs9")},m(r,l){_e(r,e,l)},p:Le,d(r){r&&o(e)}}}function ir(a){let e,n;return{c(){e=b("img"),this.h()},l(r){e=E(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Mt(e.src,n=rr)||t(e,"src",n),t(e,"alt","Up arrow"),t(e,"class","arrow-icon svelte-1crkxs9")},m(r,l){_e(r,e,l)},p:Le,d(r){r&&o(e)}}}function Dt(a){let e;return{c(){e=A("line"),this.h()},l(n){e=I(n,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(e).forEach(o),this.h()},h(){t(e,"x1",a[22]*re/12),t(e,"y1",5),t(e,"x2",a[22]*re/12),t(e,"y2",45),t(e,"stroke","#333333"),t(e,"stroke-width","1")},m(n,r){_e(n,e,r)},p:Le,d(n){n&&o(e)}}}function Ct(a){let e,n,r,l,s,d,w=a[21]+1+"",p,V,T=a[13]+"",F,L,D,H,z,u,g,x=a[18]+"",R,W,K,C,k,le,Z,P,X,O,J,ee,U,j,ae,oe;function ie(f,_){if(f[19]>0)return ir;if(f[19]<0)return lr}let ne=ie(a),m=ne&&ne(a),G=[1,2,3,4,5,6,7,8,9,10,11],S=[];for(let f=0;f<11;f+=1)S[f]=Dt(kt(a,G,f));return{c(){e=b("div"),n=b("div"),r=A("svg"),l=A("line"),d=A("text"),p=M(w),V=M(". "),F=M(T),L=Q(),D=b("div"),m&&m.c(),H=Q(),z=b("div"),u=A("svg"),g=A("text"),R=M(x),W=Q(),K=b("div"),C=A("svg");for(let f=0;f<11;f+=1)S[f].c();k=A("line"),P=A("path"),O=A("circle"),U=A("circle"),this.h()},l(f){e=E(f,"DIV",{class:!0});var _=h(e);n=E(_,"DIV",{class:!0});var y=h(n);r=I(y,"svg",{width:!0,height:!0,class:!0});var fe=h(r);l=I(fe,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(l).forEach(o),d=I(fe,"text",{x:!0,y:!0,class:!0});var ge=h(d);p=q(ge,w),V=q(ge,". "),F=q(ge,T),ge.forEach(o),fe.forEach(o),y.forEach(o),L=Y(_),D=E(_,"DIV",{class:!0});var de=h(D);m&&m.l(de),de.forEach(o),H=Y(_),z=E(_,"DIV",{class:!0});var me=h(z);u=I(me,"svg",{width:!0,height:!0,class:!0});var B=h(u);g=I(B,"text",{x:!0,y:!0,class:!0});var ce=h(g);R=q(ce,x),ce.forEach(o),B.forEach(o),me.forEach(o),W=Y(_),K=E(_,"DIV",{class:!0,style:!0});var Ce=h(K);C=I(Ce,"svg",{height:!0,width:!0,class:!0});var te=h(C);for(let Ee=0;Ee<11;Ee+=1)S[Ee].l(te);k=I(te,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),h(k).forEach(o),P=I(te,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),h(P).forEach(o),O=I(te,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),h(O).forEach(o),U=I(te,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0}),h(U).forEach(o),te.forEach(o),Ce.forEach(o),_.forEach(o),this.h()},h(){t(l,"x1","5"),t(l,"y1","15"),t(l,"x2","5"),t(l,"y2",qe-15),t(l,"stroke",s=a[2](a[13])),t(l,"stroke-width","5"),t(d,"x","12"),t(d,"y","31"),t(d,"class","textCity svelte-1crkxs9"),t(r,"width","150"),t(r,"height",qe),t(r,"class","region-bar"),t(n,"class","left svelte-1crkxs9"),t(D,"class","arrow svelte-1crkxs9"),t(g,"x","46"),t(g,"y","45"),t(g,"class","textPercent svelte-1crkxs9"),t(u,"width","50"),t(u,"height",qe),t(u,"class","region-bar"),t(z,"class","number svelte-1crkxs9"),t(k,"x1","0"),t(k,"y1",le=a[17]),t(k,"x2",re),t(k,"y2",Z=a[17]),t(k,"stroke","#D0D1C9"),t(k,"stroke-width","1"),t(k,"stroke-dasharray","4"),t(P,"d",X=a[14]),t(P,"stroke","white"),t(P,"stroke-width","2"),t(P,"fill","none"),t(O,"cx",J=a[15].cx),t(O,"cy",ee=a[15].cy),t(O,"r","2"),t(O,"fill","white"),t(U,"cx",j=a[16].cx),t(U,"cy",ae=a[16].cy),t(U,"r","2"),t(U,"fill","white"),t(U,"stroke","white"),t(C,"height",qe),t(C,"width",re),t(C,"class","chart svelte-1crkxs9"),t(K,"class","chart-container svelte-1crkxs9"),Je(K,"width",re),t(e,"class","chart-wrapper svelte-1crkxs9"),Lt(()=>a[8].call(e))},m(f,_){_e(f,e,_),i(e,n),i(n,r),i(r,l),i(r,d),i(d,p),i(d,V),i(d,F),i(e,L),i(e,D),m&&m.m(D,null),i(e,H),i(e,z),i(z,u),i(u,g),i(g,R),i(e,W),i(e,K),i(K,C);for(let y=0;y<11;y+=1)S[y]&&S[y].m(C,null);i(C,k),i(C,P),i(C,O),i(C,U),oe=Pt(e,a[8].bind(e))},p(f,_){if(_&2&&s!==(s=f[2](f[13]))&&t(l,"stroke",s),_&2&&T!==(T=f[13]+"")&&vt(F,T),ne===(ne=ie(f))&&m?m.p(f,_):(m&&m.d(1),m=ne&&ne(f),m&&(m.c(),m.m(D,null))),_&2&&x!==(x=f[18]+"")&&vt(R,x),_&0){G=[1,2,3,4,5,6,7,8,9,10,11];let y;for(y=0;y<11;y+=1){const fe=kt(f,G,y);S[y]?S[y].p(fe,_):(S[y]=Dt(fe),S[y].c(),S[y].m(C,k))}for(;y<11;y+=1)S[y].d(1)}_&2&&le!==(le=f[17])&&t(k,"y1",le),_&2&&Z!==(Z=f[17])&&t(k,"y2",Z),_&2&&X!==(X=f[14])&&t(P,"d",X),_&2&&J!==(J=f[15].cx)&&t(O,"cx",J),_&2&&ee!==(ee=f[15].cy)&&t(O,"cy",ee),_&2&&j!==(j=f[16].cx)&&t(U,"cx",j),_&2&&ae!==(ae=f[16].cy)&&t(U,"cy",ae)},d(f){f&&o(e),m&&m.d(),Ke(S,f),oe()}}}function sr(a){let e,n,r,l,s,d,w,p,V,T,F,L,D,H,z,u,g,x,R,W,K,C,k,le,Z,P,X,O,J,ee,U,j,ae,oe,ie,ne,m,G,S,f,_,y,fe,ge,de,me,B,ce,Ce,te,Ee,ye,Pe,xe,Re,we,Se,he,ue,Ve,Ae,ke,ze,Ue,Ge,Ie;e=new Rt({}),G=new St({props:{europe:"no",canada:"yes"}});let Te=[3,4,5,6,7,8,9,10,11,12,1,2],se=[];for(let v=0;v<12;v+=1)se[v]=Et(bt(a,Te,v));let Me=a[1],N=[];for(let v=0;v<Me.length;v+=1)N[v]=Ct(wt(a,Me,v));return{c(){ct(e.$$.fragment),n=Q(),r=b("main"),l=b("div"),s=b("h1"),d=M("Recovery Trends"),w=Q(),p=b("p"),V=M("By "),T=b("a"),F=M("Karen Chapple"),L=M(", "),D=b("a"),H=M("Julia Greenberg"),z=M(", "),u=b("a"),g=M("Jeff Allen"),x=M(", "),R=b("a"),W=M("Irene Chang"),K=Q(),C=b("p"),k=b("i"),le=M("Updated April 2024"),Z=Q(),P=b("p"),X=M("Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."),O=Q(),J=b("p"),ee=M("Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."),U=Q(),j=b("h4"),ae=M("Visits to Downtown (March 1, 2023 to March 1, 2024)"),oe=Q(),ie=b("p"),ne=M("Select Regions:"),m=Q(),ct(G.$$.fragment),S=Q(),f=b("p"),_=A("svg"),y=A("line"),fe=M(`
			March 2023 average`),ge=Q(),de=b("div"),me=b("div"),B=A("svg"),ce=A("text"),Ce=M("City"),te=A("text"),Ee=M("Percent Change"),ye=A("text"),Pe=M("Feb 2024 vs Mar 2023"),xe=A("text"),Re=M("2023"),we=A("text"),Se=M("2024"),he=A("line");for(let v=0;v<12;v+=1)se[v].c();ue=A("line"),Ve=Q();for(let v=0;v<N.length;v+=1)N[v].c();Ae=Q(),ke=b("div"),ze=b("br"),Ue=Q(),Ge=b("br"),this.h()},l(v){ut(e.$$.fragment,v),n=Y(v),r=E(v,"MAIN",{});var $=h(r);l=E($,"DIV",{class:!0});var c=h(l);s=E(c,"H1",{});var be=h(s);d=q(be,"Recovery Trends"),be.forEach(o),w=Y(c),p=E(c,"P",{});var pe=h(p);V=q(pe,"By "),T=E(pe,"A",{href:!0});var Oe=h(T);F=q(Oe,"Karen Chapple"),Oe.forEach(o),L=q(pe,", "),D=E(pe,"A",{href:!0});var je=h(D);H=q(je,"Julia Greenberg"),je.forEach(o),z=q(pe,", "),u=E(pe,"A",{href:!0});var Ne=h(u);g=q(Ne,"Jeff Allen"),Ne.forEach(o),x=q(pe,", "),R=E(pe,"A",{href:!0});var $e=h(R);W=q($e,"Irene Chang"),$e.forEach(o),pe.forEach(o),K=Y(c),C=E(c,"P",{});var Qe=h(C);k=E(Qe,"I",{});var Ye=h(k);le=q(Ye,"Updated April 2024"),Ye.forEach(o),Qe.forEach(o),Z=Y(c),P=E(c,"P",{});var We=h(P);X=q(We,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."),We.forEach(o),O=Y(c),J=E(c,"P",{});var Ze=h(J);ee=q(Ze,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."),Ze.forEach(o),U=Y(c),j=E(c,"H4",{});var Xe=h(j);ae=q(Xe,"Visits to Downtown (March 1, 2023 to March 1, 2024)"),Xe.forEach(o),oe=Y(c),ie=E(c,"P",{});var et=h(ie);ne=q(et,"Select Regions:"),et.forEach(o),m=Y(c),ut(G.$$.fragment,c),S=Y(c),f=E(c,"P",{style:!0});var Be=h(f);_=I(Be,"svg",{height:!0,width:!0});var tt=h(_);y=I(tt,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),h(y).forEach(o),tt.forEach(o),fe=q(Be,`
			March 2023 average`),Be.forEach(o),c.forEach(o),ge=Y($),de=E($,"DIV",{class:!0});var rt=h(de);me=E(rt,"DIV",{class:!0});var at=h(me);B=I(at,"svg",{width:!0,height:!0,class:!0});var ve=h(B);ce=I(ve,"text",{x:!0,y:!0,class:!0});var nt=h(ce);Ce=q(nt,"City"),nt.forEach(o),te=I(ve,"text",{x:!0,y:!0,class:!0});var lt=h(te);Ee=q(lt,"Percent Change"),lt.forEach(o),ye=I(ve,"text",{x:!0,y:!0,class:!0});var it=h(ye);Pe=q(it,"Feb 2024 vs Mar 2023"),it.forEach(o),xe=I(ve,"text",{x:!0,y:!0,class:!0});var st=h(xe);Re=q(st,"2023"),st.forEach(o),we=I(ve,"text",{x:!0,y:!0,class:!0});var ot=h(we);Se=q(ot,"2024"),ot.forEach(o),he=I(ve,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(he).forEach(o);for(let De=0;De<12;De+=1)se[De].l(ve);ue=I(ve,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(ue).forEach(o),ve.forEach(o),at.forEach(o),rt.forEach(o),Ve=Y($);for(let De=0;De<N.length;De+=1)N[De].l($);Ae=Y($),ke=E($,"DIV",{class:!0});var Fe=h(ke);ze=E(Fe,"BR",{}),Ue=Y(Fe),Ge=E(Fe,"BR",{}),Fe.forEach(o),$.forEach(o),this.h()},h(){t(T,"href","https://"),t(D,"href","https://"),t(u,"href","https://"),t(R,"href","https://"),t(y,"x1","0"),t(y,"y1","5"),t(y,"x2","50"),t(y,"y2","5"),t(y,"stroke","white"),t(y,"stroke-width","1"),t(y,"stroke-dasharray","4"),t(_,"height","10"),t(_,"width","50"),Je(f,"padding-top","10px"),Je(f,"padding-bottom","10px"),t(l,"class","text svelte-1crkxs9"),t(ce,"x","12"),t(ce,"y","35"),t(ce,"class","textCity svelte-1crkxs9"),t(te,"x","235"),t(te,"y","15"),t(te,"class","textLabel svelte-1crkxs9"),t(ye,"x","235"),t(ye,"y","35"),t(ye,"class","textLabel svelte-1crkxs9"),t(xe,"x",469),t(xe,"y","15"),t(xe,"class","textMonth svelte-1crkxs9"),t(we,"x",719),t(we,"y","15"),t(we,"class","textMonth svelte-1crkxs9"),t(he,"x1","260"),t(he,"y1",45),t(he,"x2",260+re),t(he,"y2",45),t(he,"stroke","white"),t(he,"stroke-width","1"),t(ue,"x1",259+re),t(ue,"y1",45),t(ue,"x2",259+re),t(ue,"y2",40),t(ue,"stroke","white"),t(ue,"stroke-width","1"),t(B,"width","760"),t(B,"height",qe),t(B,"class","region-bar"),t(me,"class","left svelte-1crkxs9"),t(de,"class","chart-wrapper svelte-1crkxs9"),t(ke,"class","text svelte-1crkxs9")},m(v,$){ft(e,v,$),_e(v,n,$),_e(v,r,$),i(r,l),i(l,s),i(s,d),i(l,w),i(l,p),i(p,V),i(p,T),i(T,F),i(p,L),i(p,D),i(D,H),i(p,z),i(p,u),i(u,g),i(p,x),i(p,R),i(R,W),i(l,K),i(l,C),i(C,k),i(k,le),i(l,Z),i(l,P),i(P,X),i(l,O),i(l,J),i(J,ee),i(l,U),i(l,j),i(j,ae),i(l,oe),i(l,ie),i(ie,ne),i(l,m),ft(G,l,null),i(l,S),i(l,f),i(f,_),i(_,y),i(f,fe),i(r,ge),i(r,de),i(de,me),i(me,B),i(B,ce),i(ce,Ce),i(B,te),i(te,Ee),i(B,ye),i(ye,Pe),i(B,xe),i(xe,Re),i(B,we),i(we,Se),i(B,he);for(let c=0;c<12;c+=1)se[c]&&se[c].m(B,null);i(B,ue),i(r,Ve);for(let c=0;c<N.length;c+=1)N[c]&&N[c].m(r,null);i(r,Ae),i(r,ke),i(ke,ze),i(ke,Ue),i(ke,Ge),Ie=!0},p(v,[$]){if($&0){Te=[3,4,5,6,7,8,9,10,11,12,1,2];let c;for(c=0;c<12;c+=1){const be=bt(v,Te,c);se[c]?se[c].p(be,$):(se[c]=Et(be),se[c].c(),se[c].m(B,ue))}for(;c<12;c+=1)se[c].d(1)}if($&7){Me=v[1];let c;for(c=0;c<Me.length;c+=1){const be=wt(v,Me,c);N[c]?N[c].p(be,$):(N[c]=Ct(be),N[c].c(),N[c].m(r,Ae))}for(;c<N.length;c+=1)N[c].d(1);N.length=Me.length}},i(v){Ie||(ht(e.$$.fragment,v),ht(G.$$.fragment,v),Ie=!0)},o(v){dt(e.$$.fragment,v),dt(G.$$.fragment,v),Ie=!1},d(v){mt(e,v),v&&o(n),v&&o(r),mt(G),Ke(se,v),Ke(N,v)}}}let re=500;const qe=50,or=0,cr=5,ur=0,fr=5;function hr(a,e,n){let r,l,s;pt(a,Vt,u=>n(7,l=u)),pt(a,zt,u=>n(9,s=u));const d=s;async function w(){try{const g=await(await fetch("/stopuplevelled_mar2023_mar2024.csv")).text();n(3,p=Ht(g)),n(4,F=[...new Set(p.map(x=>x.city))])}catch(u){console.error("Error loading CSV data:",u)}}let p=[];Ft(()=>{w(),n(6,r=He.filter(u=>l.includes(u.region)).map(u=>u.city))});let V;const T=Ut("%Y-%m-%d");let F=[],L=[],D=[];function H(u){const g=He.filter(x=>x.city===u);if(g){const x=g[0].region,R=d.find(W=>W.name===x);if(R)return R.colour}else return"white"}function z(){V=this.clientWidth,n(0,V)}return a.$$.update=()=>{a.$$.dirty&128&&n(6,r=He.filter(u=>l.includes(u.region)).map(u=>u.city)),a.$$.dirty&88&&n(5,L=F.map(u=>{if(r.includes(u)){const g=p.filter(x=>x.city===u);if(g.length>0){const x=g.map(m=>parseFloat(m.normalized_distinct_clean)),R=Kt(x),W=Jt(x),K=p.filter(m=>{const G=new Date(m.date);return G.getFullYear()===2023&&G.getMonth()===2&&m.city===u}),C=_t(K,m=>parseFloat(m.normalized_distinct_clean)),k=p.filter(m=>{const G=new Date(m.date);return G.getFullYear()===2024&&G.getMonth()===1&&m.city===u}),le=_t(k,m=>parseFloat(m.normalized_distinct_clean)),Z=Gt().domain([new Date("2023-03-01"),new Date("2024-03-01")]).range([fr,re-cr]),P=Bt().domain([R,W]).range([qe-ur,or]),X=Zt().x(m=>T(m.date)).y(m=>parseFloat(m.normalized_distinct_clean)).bandwidth(.05),J=Tt().x(m=>Z(m[0])).y(m=>P(m[1]))(X(g)),ee=(le-C)/C*100,U=ee.toFixed(1)+"%",j=X(g)[0],ae={cx:Z(j[0]),cy:P(j[1]),radius:6,fill:"red",stroke:"red","stroke-width":2},oe=X(g)[366],ie={cx:Z(oe[0]),cy:P(oe[1]),radius:6,fill:"red",stroke:"#6aa687","stroke-width":2},ne=P(C);return{city:u,regressionLine:J,meanLine:ne,startCircle:ae,endCircle:ie,perChangeDisplay:U,percentageChange:ee}}}}).filter(u=>u!==void 0)),a.$$.dirty&32&&n(1,D=L.slice().sort((u,g)=>g.percentageChange-u.percentageChange))},[V,D,H,p,F,L,r,l,z]}class kr extends qt{constructor(e){super(),At(this,e,hr,sr,It,{})}}export{kr as component,wr as universal};
