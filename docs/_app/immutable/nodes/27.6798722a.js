import{S as ba,i as ka,s as xa,y as ra,a as M,k as m,q as l,L as F,z as aa,c as T,l as p,m as u,r as i,h as c,M as R,n as t,p as wr,A as na,b as xe,C as e,g as sa,d as oa,B as la,Q as br,E as ia,o as Ea,K as Da,O as Ca,u as ca,D as lt,J as wa}from"../chunks/index.d6d9c1d5.js";import{H as Aa}from"../chunks/global.7dab0141.js";import{S as Na}from"../chunks/SelectRegions.b73881cd.js";import"../chunks/transform.4d2927c0.js";import{c as yr,s as Ma,r as Ta}from"../chunks/stores.64de824d.js";import{a as Sa,t as Ia,l as Pa}from"../chunks/line.f1bfd7f4.js";import{l as Fa}from"../chunks/linear.6154f0ba.js";import{c as Ra}from"../chunks/csv.3ac754ad.js";function Va(a,r){let o;if(r===void 0)for(const n of a)n!=null&&(o<n||o===void 0&&n>=n)&&(o=n);else{let n=-1;for(let s of a)(s=r(s,++n,a))!=null&&(o<s||o===void 0&&s>=s)&&(o=s)}return o}function za(a,r){let o;if(r===void 0)for(const n of a)n!=null&&(o>n||o===void 0&&n>=n)&&(o=n);else{let n=-1;for(let s of a)(s=r(s,++n,a))!=null&&(o>s||o===void 0&&s>=s)&&(o=s)}return o}function ha(a,r){let o=0,n=0;if(r===void 0)for(let s of a)s!=null&&(s=+s)>=s&&(++o,n+=s);else{let s=-1;for(let d of a)(d=r(d,++s,a))!=null&&(d=+d)>=d&&(++o,n+=d)}if(o)return n/o}const La=!0,mn=Object.freeze(Object.defineProperty({__proto__:null,prerender:La},Symbol.toStringTag,{value:"Module"}));function ua(a,r){return Ha(a)||qa(a,r)||Ba()}function Ha(a){if(Array.isArray(a))return a}function qa(a,r){var o=[],n=!0,s=!1,d=void 0;try{for(var v=a[Symbol.iterator](),y;!(n=(y=v.next()).done)&&(o.push(y.value),!(r&&o.length===r));n=!0);}catch(w){s=!0,d=w}finally{try{!n&&v.return!=null&&v.return()}finally{if(s)throw d}}return o}function Ba(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Ja(a,r,o,n){a=a.filter(function(W,j){var L=r(W,j),f=o(W,j);return L!=null&&isFinite(L)&&f!=null&&isFinite(f)}),n&&a.sort(function(W,j){return r(W)-r(j)});for(var s=a.length,d=new Float64Array(s),v=new Float64Array(s),y=0,w=0,V,J,G,z=0;z<s;)G=a[z],d[z]=V=+r(G,z,a),v[z]=J=+o(G,z,a),++z,y+=(V-y)/z,w+=(J-w)/z;for(var A=0;A<s;++A)d[A]-=y,v[A]-=w;return[d,v,y,w]}function Ga(a,r,o,n){var s=n-a*a,d=Math.abs(s)<1e-24?0:(o-a*r)/s,v=r-d*a;return[v,d]}function ja(a){a.sort(function(o,n){return o-n});var r=a.length/2;return r%1===0?(a[r-1]+a[r])/2:a[Math.floor(r)]}var da=2,fa=1e-12;function Wa(){var a=function(d){return d[0]},r=function(d){return d[1]},o=.3;function n(s){for(var d=Ja(s,a,r,!0),v=ua(d,4),y=v[0],w=v[1],V=v[2],J=v[3],G=y.length,z=Math.max(2,~~(o*G)),A=new Float64Array(G),W=new Float64Array(G),j=new Float64Array(G).fill(1),L=-1;++L<=da;){for(var f=[0,z-1],b=0;b<G;++b){for(var E=y[b],K=f[0],H=f[1],S=E-y[K]>y[H]-E?K:H,D=0,U=0,ie=0,O=0,te=0,q=1/Math.abs(y[S]-E||1),re=K;re<=H;++re){var ae=y[re],C=w[re],ne=Ka(Math.abs(E-ae)*q)*j[re],se=ae*ne;D+=ne,U+=se,ie+=C*ne,O+=C*se,te+=ae*se}var ge=Ga(U/D,ie/D,O/D,te/D),ce=ua(ge,2),le=ce[0],I=ce[1];A[b]=le+I*E,W[b]=Math.abs(w[b]-A[b]),Oa(y,b+1,f)}if(L===da)break;var k=ja(W);if(Math.abs(k)<fa)break;for(var N=0,g,x;N<G;++N)g=W[N]/(6*k),j[N]=g>=1?fa:(x=1-g*g)*x}return Ua(y,A,V,J)}return n.bandwidth=function(s){return arguments.length?(o=s,n):o},n.x=function(s){return arguments.length?(a=s,n):a},n.y=function(s){return arguments.length?(r=s,n):r},n}function Ka(a){return(a=1-a*a*a)*a*a}function Oa(a,r,o){var n=a[r],s=o[0],d=o[1]+1;if(!(d>=a.length))for(;r>s&&a[d]-n<=n-a[s];)o[0]=++s,o[1]=d,++d}function Ua(a,r,o,n){for(var s=a.length,d=[],v=0,y=0,w=[],V;v<s;++v)V=a[v]+o,w[0]===V?w[1]+=(r[v]-w[1])/++y:(y=0,w[1]+=n,w=[V,r[v]],d.push(w));return w[1]+=n,d}const Ya=""+new URL("../assets/green-arrow.0afd51fe.svg",import.meta.url).href,Qa=""+new URL("../assets/red-arrow.ede1cb71.svg",import.meta.url).href;function va(a,r,o){const n=a.slice();return n[14]=r[o].city,n[15]=r[o].regressionLine,n[16]=r[o].startCircle,n[17]=r[o].endCircle,n[18]=r[o].meanLine,n[19]=r[o].perChangeDisplay,n[20]=r[o].percentageChange,n[22]=o,n}function ma(a,r,o){const n=a.slice();return n[23]=r[o],n[22]=o,n}function pa(a,r,o){const n=a.slice();return n[23]=r[o],n[22]=o,n}function $a(a){let r;return{c(){r=F("line"),this.h()},l(o){r=R(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),u(r).forEach(c),this.h()},h(){t(r,"x1",260+a[22]*Y/13),t(r,"y1",5),t(r,"x2",260+a[22]*Y/13),t(r,"y2",40),t(r,"stroke","white"),t(r,"stroke-width","1")},m(o,n){xe(o,r,n)},p:lt,d(o){o&&c(r)}}}function ga(a){let r,o,n,s=a[23]===1&&$a(a);return{c(){r=F("line"),s&&s.c(),o=F("text"),n=l(a[23]),this.h()},l(d){r=R(d,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),u(r).forEach(c),s&&s.l(d),o=R(d,"text",{x:!0,y:!0,class:!0});var v=u(o);n=i(v,a[23]),v.forEach(c),this.h()},h(){t(r,"x1",260+a[22]*Y/13),t(r,"y1",45),t(r,"x2",260+a[22]*Y/13),t(r,"y2",40),t(r,"stroke","white"),t(r,"stroke-width","1"),t(o,"x",260+a[22]*Y/13+.5*Y/13),t(o,"y","40"),t(o,"class","textMonth svelte-1crkxs9")},m(d,v){xe(d,r,v),s&&s.m(d,v),xe(d,o,v),e(o,n)},p(d,v){d[23]===1&&s.p(d,v)},d(d){d&&c(r),s&&s.d(d),d&&c(o)}}}function Za(a){let r,o;return{c(){r=m("img"),this.h()},l(n){r=p(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){wa(r.src,o=Qa)||t(r,"src",o),t(r,"alt","Down arrow"),t(r,"class","arrow-icon svelte-1crkxs9")},m(n,s){xe(n,r,s)},p:lt,d(n){n&&c(r)}}}function Xa(a){let r,o;return{c(){r=m("img"),this.h()},l(n){r=p(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){wa(r.src,o=Ya)||t(r,"src",o),t(r,"alt","Up arrow"),t(r,"class","arrow-icon svelte-1crkxs9")},m(n,s){xe(n,r,s)},p:lt,d(n){n&&c(r)}}}function _a(a){let r;return{c(){r=F("line"),this.h()},l(o){r=R(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),u(r).forEach(c),this.h()},h(){t(r,"x1",a[23]*Y/13),t(r,"y1",5),t(r,"x2",a[23]*Y/13),t(r,"y2",45),t(r,"stroke","#333333"),t(r,"stroke-width","1")},m(o,n){xe(o,r,n)},p:lt,d(o){o&&c(r)}}}function ya(a){let r,o,n,s,d,v,y=a[22]+1+"",w,V,J=a[14]+"",G,z,A,W,j,L,f,b=a[19]+"",E,K,H,S,D,U,ie,O,te,q,re,ae,C,ne,se,ge;function ce(g,x){if(g[20]>0)return Xa;if(g[20]<0)return Za}let le=ce(a),I=le&&le(a),k=[1,2,3,4,5,6,7,8,9,10,11,12],N=[];for(let g=0;g<12;g+=1)N[g]=_a(ma(a,k,g));return{c(){r=m("div"),o=m("div"),n=F("svg"),s=F("line"),v=F("text"),w=l(y),V=l(". "),G=l(J),z=M(),A=m("div"),I&&I.c(),W=M(),j=m("div"),L=F("svg"),f=F("text"),E=l(b),K=M(),H=m("div"),S=F("svg");for(let g=0;g<12;g+=1)N[g].c();D=F("line"),O=F("path"),q=F("circle"),C=F("circle"),this.h()},l(g){r=p(g,"DIV",{class:!0});var x=u(r);o=p(x,"DIV",{class:!0});var P=u(o);n=R(P,"svg",{width:!0,height:!0,class:!0});var he=u(n);s=R(he,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),u(s).forEach(c),v=R(he,"text",{x:!0,y:!0,class:!0});var Ee=u(v);w=i(Ee,y),V=i(Ee,". "),G=i(Ee,J),Ee.forEach(c),he.forEach(c),P.forEach(c),z=T(x),A=p(x,"DIV",{class:!0});var He=u(A);I&&I.l(He),He.forEach(c),W=T(x),j=p(x,"DIV",{class:!0});var B=u(j);L=R(B,"svg",{width:!0,height:!0,class:!0});var qe=u(L);f=R(qe,"text",{x:!0,y:!0,class:!0});var et=u(f);E=i(et,b),et.forEach(c),qe.forEach(c),B.forEach(c),K=T(x),H=p(x,"DIV",{class:!0,style:!0});var Be=u(H);S=R(Be,"svg",{height:!0,width:!0,class:!0});var _e=u(S);for(let Je=0;Je<12;Je+=1)N[Je].l(_e);D=R(_e,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),u(D).forEach(c),O=R(_e,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),u(O).forEach(c),q=R(_e,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),u(q).forEach(c),C=R(_e,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0}),u(C).forEach(c),_e.forEach(c),Be.forEach(c),x.forEach(c),this.h()},h(){t(s,"x1","5"),t(s,"y1","15"),t(s,"x2","5"),t(s,"y2",Xe-15),t(s,"stroke",d=a[3](a[14])),t(s,"stroke-width","5"),t(v,"x","12"),t(v,"y","31"),t(v,"class","textCity svelte-1crkxs9"),t(n,"width","150"),t(n,"height",Xe),t(n,"class","region-bar"),t(o,"class","left svelte-1crkxs9"),t(A,"class","arrow svelte-1crkxs9"),t(f,"x","50"),t(f,"y","45"),t(f,"class","textPercent svelte-1crkxs9"),t(L,"width","50"),t(L,"height",Xe),t(L,"class","region-bar"),t(j,"class","number svelte-1crkxs9"),t(D,"x1","0"),t(D,"y1",U=a[18]),t(D,"x2",Y),t(D,"y2",ie=a[18]),t(D,"stroke","#D0D1C9"),t(D,"stroke-width","1"),t(D,"stroke-dasharray","4"),t(O,"d",te=a[15]),t(O,"stroke","white"),t(O,"stroke-width","2"),t(O,"fill","none"),t(q,"cx",re=a[16].cx),t(q,"cy",ae=a[16].cy),t(q,"r","2"),t(q,"fill","white"),t(C,"cx",ne=a[17].cx),t(C,"cy",se=a[17].cy),t(C,"r","2"),t(C,"fill","white"),t(C,"stroke","white"),t(S,"height",Xe),t(S,"width",Y),t(S,"class","chart svelte-1crkxs9"),t(H,"class","chart-container svelte-1crkxs9"),wr(H,"width",Y),t(r,"class","chart-wrapper svelte-1crkxs9"),Da(()=>a[9].call(r))},m(g,x){xe(g,r,x),e(r,o),e(o,n),e(n,s),e(n,v),e(v,w),e(v,V),e(v,G),e(r,z),e(r,A),I&&I.m(A,null),e(r,W),e(r,j),e(j,L),e(L,f),e(f,E),e(r,K),e(r,H),e(H,S);for(let P=0;P<12;P+=1)N[P]&&N[P].m(S,null);e(S,D),e(S,O),e(S,q),e(S,C),ge=Ca(r,a[9].bind(r))},p(g,x){if(x&2&&d!==(d=g[3](g[14]))&&t(s,"stroke",d),x&2&&J!==(J=g[14]+"")&&ca(G,J),le===(le=ce(g))&&I?I.p(g,x):(I&&I.d(1),I=le&&le(g),I&&(I.c(),I.m(A,null))),x&2&&b!==(b=g[19]+"")&&ca(E,b),x&0){k=[1,2,3,4,5,6,7,8,9,10,11,12];let P;for(P=0;P<12;P+=1){const he=ma(g,k,P);N[P]?N[P].p(he,x):(N[P]=_a(he),N[P].c(),N[P].m(S,D))}for(;P<12;P+=1)N[P].d(1)}x&2&&U!==(U=g[18])&&t(D,"y1",U),x&2&&ie!==(ie=g[18])&&t(D,"y2",ie),x&2&&te!==(te=g[15])&&t(O,"d",te),x&2&&re!==(re=g[16].cx)&&t(q,"cx",re),x&2&&ae!==(ae=g[16].cy)&&t(q,"cy",ae),x&2&&ne!==(ne=g[17].cx)&&t(C,"cx",ne),x&2&&se!==(se=g[17].cy)&&t(C,"cy",se)},d(g){g&&c(r),I&&I.d(),br(N,g),ge()}}}function en(a){let r,o,n,s,d,v,y,w,V,J,G,z,A,W,j,L,f,b,E,K,H,S,D,U,ie=a[2].day2+"",O,te,q,re,ae,C,ne,se=a[2].monthName+"",ge,ce,le=a[2].monthName+"",I,k,N=a[2].monthName+"",g,x,P,he,Ee,He,B,qe,et=a[2].monthName+"",Be,_e,Je=a[2].monthName+"",it,ct,ht,ut,Ge,dt,ft,je,vt,mt,pt,gt,We,_t,yt,wt,Pe,bt,Ke,kt,xt,Et,tt,Dt,Ct,we,At,kr=a[2].monthName+"",Nt,Mt,xr=a[2].monthName+"",Tt,St,It,rt,Pt,Ft,Fe,Rt,ue,Re,ve,Vt,Er=a[2].monthName+"",zt,Lt,Dr=a[2].year1+"",Ht,qt,Bt,Oe,Ue,Z,De,Jt,Ce,Gt,oe,Cr=a[2].monthNumber+"",jt,Wt,Ar=a[2].year2+"",Kt,Ot,Nr=a[2].monthNumber+"",Ut,Yt,Mr=a[2].year1+"",Qt,Ae,Tr=a[2].year1+"",$t,Ne,Sr=a[2].year2+"",Zt,ye,me,Xt,nt,X,er,tr,rr,ar,at,nr,sr,pe,or,Ye,lr,ir,Qe,cr,hr,Ve,ur,dr,fr,vr,mr,pr,st;r=new Aa({}),Fe=new Na({props:{europe:"no",canada:"yes"}});let gr=[5,6,7,8,9,10,11,12,1,2,3,4,5],de=[];for(let _=0;_<13;_+=1)de[_]=ga(pa(a,gr,_));let $e=a[1],Q=[];for(let _=0;_<$e.length;_+=1)Q[_]=ya(va(a,$e,_));return{c(){ra(r.$$.fragment),o=M(),n=m("main"),s=m("div"),d=m("h1"),v=l("Recovery Trends"),y=M(),w=m("p"),V=l("By "),J=m("a"),G=l("Karen Chapple"),z=l(", "),A=m("a"),W=l("Julia Greenberg"),j=l(", "),L=m("a"),f=l("Jeff Allen"),b=l(", "),E=m("a"),K=l("Irene Chang"),H=M(),S=m("p"),D=m("i"),U=l("Updated "),O=l(ie),te=M(),q=m("p"),re=l("Data on cell phone activity (a.k.a. footfall) trends for the last year provide a picture of how downtowns are faring since our last rankings update in the summer of 2023. We look here at year-over-year (2024 vs. 2023) trends, updated monthly."),ae=M(),C=m("p"),ne=l("The solid line represents the number of daily unique visitors in the downtown area. The dotted line provides a baseline of the average level of activity in "),ge=l(se),ce=l(" 2023, allowing for comparison to subsequent months. When the solid line extends above the dotted baseline, downtown activity is greater compared to in "),I=l(le),k=l(" 2023. When it dips below the dotted line, activity is on a downswing. For most cities, there is an increase in month 6 or 7; this is expected since these are the summer months of June and July. The fall months see decreasing activity on average, with almost all downtowns losing activity by November. However, some cities stay above the "),g=l(N),x=l(" baseline, suggesting gradual recovery, while others dip well below it, i.e., stagnating recovery."),P=M(),he=m("h5"),Ee=l("Key Findings:"),He=M(),B=m("p"),qe=l("Comparing "),Be=l(et),_e=l(" 2023 to "),it=l(Je),ct=l(` 2024:
			`),ht=m("br"),ut=l(`
	
			‣ `),Ge=m("span"),dt=l("27"),ft=l(" downtowns are in an upward trajectory, while "),je=m("span"),vt=l("37"),mt=l(` are trending downwards. 
			`),pt=m("br"),gt=l(`
			‣ The median rate of change is `),We=m("span"),_t=l("-3.1%"),yt=l("."),wt=M(),Pe=m("p"),bt=l("In general, the downtowns that are seeing the highest rates of activity increase are the downtowns where recovery was lagging in our "),Ke=m("a"),kt=l("2023 rankings"),xt=l("."),Et=M(),tt=m("p"),Dt=l("Note: Trends are based on data from Spectus, but use different cell phone data providers from our rankings analysis. The trendlines measure the average level of activity over the course of the year, while the ranking metric shows the percent difference in the average number of unique visitors in 2024 versus the same month in 2023."),Ct=M(),we=m("h4"),At=l("Visits to Downtown ("),Nt=l(kr),Mt=l(" 1, 2023 to "),Tt=l(xr),St=l(" 28, 2024)"),It=M(),rt=m("p"),Pt=l("Select Regions:"),Ft=M(),ra(Fe.$$.fragment),Rt=M(),ue=m("p"),Re=F("svg"),ve=F("line"),Vt=M(),zt=l(Er),Lt=M(),Ht=l(Dr),qt=l(" average"),Bt=M(),Oe=m("div"),Ue=m("div"),Z=F("svg"),De=F("text"),Jt=l("City"),Ce=F("text"),Gt=l("Percent Change in Visits"),oe=F("text"),jt=l(Cr),Wt=l("/"),Kt=l(Ar),Ot=l(" vs. "),Ut=l(Nr),Yt=l("/"),Qt=l(Mr),Ae=F("text"),$t=l(Tr),Ne=F("text"),Zt=l(Sr),ye=F("line");for(let _=0;_<13;_+=1)de[_].c();me=F("line"),Xt=M();for(let _=0;_<Q.length;_+=1)Q[_].c();nt=M(),X=m("div"),er=m("br"),tr=M(),rr=m("br"),ar=M(),at=m("h4"),nr=l("More Information"),sr=M(),pe=m("p"),or=l("The trend lines are fit from daily data via a "),Ye=m("a"),lr=l("LOESS"),ir=l(" curve. You can download the raw daily data shown to fit these curves "),Qe=m("a"),cr=l("from this link"),hr=l(". The data on the charts are based on the `normalized_distinct_clean` column, which pertains to the number of unique daily visitors normalized by the total number in the metro area. The trend-line and summary statistics shown are calculated in JavaScript (code is on "),Ve=m("a"),ur=l("GitHub"),dr=l(")"),fr=M(),vr=m("br"),mr=M(),pr=m("br"),this.h()},l(_){aa(r.$$.fragment,_),o=T(_),n=p(_,"MAIN",{});var $=u(n);s=p($,"DIV",{class:!0});var h=u(s);d=p(h,"H1",{});var Me=u(d);v=i(Me,"Recovery Trends"),Me.forEach(c),y=T(h),w=p(h,"P",{});var be=u(w);V=i(be,"By "),J=p(be,"A",{href:!0});var Ir=u(J);G=i(Ir,"Karen Chapple"),Ir.forEach(c),z=i(be,", "),A=p(be,"A",{href:!0});var Pr=u(A);W=i(Pr,"Julia Greenberg"),Pr.forEach(c),j=i(be,", "),L=p(be,"A",{href:!0});var Fr=u(L);f=i(Fr,"Jeff Allen"),Fr.forEach(c),b=i(be,", "),E=p(be,"A",{href:!0});var Rr=u(E);K=i(Rr,"Irene Chang"),Rr.forEach(c),be.forEach(c),H=T(h),S=p(h,"P",{});var Vr=u(S);D=p(Vr,"I",{});var _r=u(D);U=i(_r,"Updated "),O=i(_r,ie),_r.forEach(c),Vr.forEach(c),te=T(h),q=p(h,"P",{});var zr=u(q);re=i(zr,"Data on cell phone activity (a.k.a. footfall) trends for the last year provide a picture of how downtowns are faring since our last rankings update in the summer of 2023. We look here at year-over-year (2024 vs. 2023) trends, updated monthly."),zr.forEach(c),ae=T(h),C=p(h,"P",{});var Te=u(C);ne=i(Te,"The solid line represents the number of daily unique visitors in the downtown area. The dotted line provides a baseline of the average level of activity in "),ge=i(Te,se),ce=i(Te," 2023, allowing for comparison to subsequent months. When the solid line extends above the dotted baseline, downtown activity is greater compared to in "),I=i(Te,le),k=i(Te," 2023. When it dips below the dotted line, activity is on a downswing. For most cities, there is an increase in month 6 or 7; this is expected since these are the summer months of June and July. The fall months see decreasing activity on average, with almost all downtowns losing activity by November. However, some cities stay above the "),g=i(Te,N),x=i(Te," baseline, suggesting gradual recovery, while others dip well below it, i.e., stagnating recovery."),Te.forEach(c),P=T(h),he=p(h,"H5",{});var Lr=u(he);Ee=i(Lr,"Key Findings:"),Lr.forEach(c),He=T(h),B=p(h,"P",{});var ee=u(B);qe=i(ee,"Comparing "),Be=i(ee,et),_e=i(ee," 2023 to "),it=i(ee,Je),ct=i(ee,` 2024:
			`),ht=p(ee,"BR",{}),ut=i(ee,`
	
			‣ `),Ge=p(ee,"SPAN",{class:!0});var Hr=u(Ge);dt=i(Hr,"27"),Hr.forEach(c),ft=i(ee," downtowns are in an upward trajectory, while "),je=p(ee,"SPAN",{class:!0});var qr=u(je);vt=i(qr,"37"),qr.forEach(c),mt=i(ee,` are trending downwards. 
			`),pt=p(ee,"BR",{}),gt=i(ee,`
			‣ The median rate of change is `),We=p(ee,"SPAN",{class:!0});var Br=u(We);_t=i(Br,"-3.1%"),Br.forEach(c),yt=i(ee,"."),ee.forEach(c),wt=T(h),Pe=p(h,"P",{});var ot=u(Pe);bt=i(ot,"In general, the downtowns that are seeing the highest rates of activity increase are the downtowns where recovery was lagging in our "),Ke=p(ot,"A",{href:!0});var Jr=u(Ke);kt=i(Jr,"2023 rankings"),Jr.forEach(c),xt=i(ot,"."),ot.forEach(c),Et=T(h),tt=p(h,"P",{});var Gr=u(tt);Dt=i(Gr,"Note: Trends are based on data from Spectus, but use different cell phone data providers from our rankings analysis. The trendlines measure the average level of activity over the course of the year, while the ranking metric shows the percent difference in the average number of unique visitors in 2024 versus the same month in 2023."),Gr.forEach(c),Ct=T(h),we=p(h,"H4",{});var Ze=u(we);At=i(Ze,"Visits to Downtown ("),Nt=i(Ze,kr),Mt=i(Ze," 1, 2023 to "),Tt=i(Ze,xr),St=i(Ze," 28, 2024)"),Ze.forEach(c),It=T(h),rt=p(h,"P",{});var jr=u(rt);Pt=i(jr,"Select Regions:"),jr.forEach(c),Ft=T(h),aa(Fe.$$.fragment,h),Rt=T(h),ue=p(h,"P",{style:!0});var ze=u(ue);Re=R(ze,"svg",{height:!0,width:!0});var Wr=u(Re);ve=R(Wr,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),u(ve).forEach(c),Wr.forEach(c),Vt=T(ze),zt=i(ze,Er),Lt=T(ze),Ht=i(ze,Dr),qt=i(ze," average"),ze.forEach(c),h.forEach(c),Bt=T($),Oe=p($,"DIV",{class:!0});var Kr=u(Oe);Ue=p(Kr,"DIV",{class:!0});var Or=u(Ue);Z=R(Or,"svg",{width:!0,height:!0,class:!0});var ke=u(Z);De=R(ke,"text",{x:!0,y:!0,class:!0});var Ur=u(De);Jt=i(Ur,"City"),Ur.forEach(c),Ce=R(ke,"text",{x:!0,y:!0,class:!0});var Yr=u(Ce);Gt=i(Yr,"Percent Change in Visits"),Yr.forEach(c),oe=R(ke,"text",{x:!0,y:!0,class:!0});var Se=u(oe);jt=i(Se,Cr),Wt=i(Se,"/"),Kt=i(Se,Ar),Ot=i(Se," vs. "),Ut=i(Se,Nr),Yt=i(Se,"/"),Qt=i(Se,Mr),Se.forEach(c),Ae=R(ke,"text",{x:!0,y:!0,class:!0});var Qr=u(Ae);$t=i(Qr,Tr),Qr.forEach(c),Ne=R(ke,"text",{x:!0,y:!0,class:!0});var $r=u(Ne);Zt=i($r,Sr),$r.forEach(c),ye=R(ke,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),u(ye).forEach(c);for(let Le=0;Le<13;Le+=1)de[Le].l(ke);me=R(ke,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),u(me).forEach(c),ke.forEach(c),Or.forEach(c),Kr.forEach(c),Xt=T($);for(let Le=0;Le<Q.length;Le+=1)Q[Le].l($);nt=T($),X=p($,"DIV",{class:!0});var fe=u(X);er=p(fe,"BR",{}),tr=T(fe),rr=p(fe,"BR",{}),ar=T(fe),at=p(fe,"H4",{});var Zr=u(at);nr=i(Zr,"More Information"),Zr.forEach(c),sr=T(fe),pe=p(fe,"P",{});var Ie=u(pe);or=i(Ie,"The trend lines are fit from daily data via a "),Ye=p(Ie,"A",{href:!0});var Xr=u(Ye);lr=i(Xr,"LOESS"),Xr.forEach(c),ir=i(Ie," curve. You can download the raw daily data shown to fit these curves "),Qe=p(Ie,"A",{href:!0});var ea=u(Qe);cr=i(ea,"from this link"),ea.forEach(c),hr=i(Ie,". The data on the charts are based on the `normalized_distinct_clean` column, which pertains to the number of unique daily visitors normalized by the total number in the metro area. The trend-line and summary statistics shown are calculated in JavaScript (code is on "),Ve=p(Ie,"A",{href:!0,target:!0});var ta=u(Ve);ur=i(ta,"GitHub"),ta.forEach(c),dr=i(Ie,")"),Ie.forEach(c),fr=T(fe),vr=p(fe,"BR",{}),mr=T(fe),pr=p(fe,"BR",{}),fe.forEach(c),$.forEach(c),this.h()},h(){t(J,"href","https://schoolofcities.utoronto.ca/people/karen-chapple/"),t(A,"href","https://www.urbandisplacement.org/team/julia-greenberg/"),t(L,"href","https://schoolofcities.utoronto.ca/people/jeff-allen/"),t(E,"href","https://www.linkedin.com/in/irene-kcc/"),t(Ge,"class","bold"),t(je,"class","bold"),t(We,"class","bold"),t(Ke,"href","/charts/rankings"),t(ve,"x1","0"),t(ve,"y1","5"),t(ve,"x2","50"),t(ve,"y2","5"),t(ve,"stroke","white"),t(ve,"stroke-width","1"),t(ve,"stroke-dasharray","4"),t(Re,"height","10"),t(Re,"width","50"),wr(ue,"padding-top","10px"),wr(ue,"padding-bottom","10px"),t(s,"class","text svelte-1crkxs9"),t(De,"x","12"),t(De,"y","35"),t(De,"class","textCity svelte-1crkxs9"),t(Ce,"x","235"),t(Ce,"y","15"),t(Ce,"class","textLabel svelte-1crkxs9"),t(oe,"x","235"),t(oe,"y","35"),t(oe,"class","textLabel svelte-1crkxs9"),t(Ae,"x",260+(13-a[2].monthNumber)/2*Y/13),t(Ae,"y","15"),t(Ae,"class","textMonth svelte-1crkxs9"),t(Ne,"x",260+(13-a[2].monthNumber)*Y/13+a[2].monthNumber/2*Y/13),t(Ne,"y","15"),t(Ne,"class","textMonth svelte-1crkxs9"),t(ye,"x1","260"),t(ye,"y1",45),t(ye,"x2",260+Y),t(ye,"y2",45),t(ye,"stroke","white"),t(ye,"stroke-width","1"),t(me,"x1",259+Y),t(me,"y1",45),t(me,"x2",259+Y),t(me,"y2",40),t(me,"stroke","white"),t(me,"stroke-width","1"),t(Z,"width","760"),t(Z,"height",Xe),t(Z,"class","region-bar"),t(Ue,"class","left svelte-1crkxs9"),t(Oe,"class","chart-wrapper svelte-1crkxs9"),t(Ye,"href","https://en.wikipedia.org/wiki/Local_regression"),t(Qe,"href","/trends.csv"),t(Ve,"href","https://github.com/schoolofcities/downtown-recovery/blob/main/src/routes/charts/trends/%2Bpage.svelte"),t(Ve,"target","_blank"),t(X,"class","text svelte-1crkxs9")},m(_,$){na(r,_,$),xe(_,o,$),xe(_,n,$),e(n,s),e(s,d),e(d,v),e(s,y),e(s,w),e(w,V),e(w,J),e(J,G),e(w,z),e(w,A),e(A,W),e(w,j),e(w,L),e(L,f),e(w,b),e(w,E),e(E,K),e(s,H),e(s,S),e(S,D),e(D,U),e(D,O),e(s,te),e(s,q),e(q,re),e(s,ae),e(s,C),e(C,ne),e(C,ge),e(C,ce),e(C,I),e(C,k),e(C,g),e(C,x),e(s,P),e(s,he),e(he,Ee),e(s,He),e(s,B),e(B,qe),e(B,Be),e(B,_e),e(B,it),e(B,ct),e(B,ht),e(B,ut),e(B,Ge),e(Ge,dt),e(B,ft),e(B,je),e(je,vt),e(B,mt),e(B,pt),e(B,gt),e(B,We),e(We,_t),e(B,yt),e(s,wt),e(s,Pe),e(Pe,bt),e(Pe,Ke),e(Ke,kt),e(Pe,xt),e(s,Et),e(s,tt),e(tt,Dt),e(s,Ct),e(s,we),e(we,At),e(we,Nt),e(we,Mt),e(we,Tt),e(we,St),e(s,It),e(s,rt),e(rt,Pt),e(s,Ft),na(Fe,s,null),e(s,Rt),e(s,ue),e(ue,Re),e(Re,ve),e(ue,Vt),e(ue,zt),e(ue,Lt),e(ue,Ht),e(ue,qt),e(n,Bt),e(n,Oe),e(Oe,Ue),e(Ue,Z),e(Z,De),e(De,Jt),e(Z,Ce),e(Ce,Gt),e(Z,oe),e(oe,jt),e(oe,Wt),e(oe,Kt),e(oe,Ot),e(oe,Ut),e(oe,Yt),e(oe,Qt),e(Z,Ae),e(Ae,$t),e(Z,Ne),e(Ne,Zt),e(Z,ye);for(let h=0;h<13;h+=1)de[h]&&de[h].m(Z,null);e(Z,me),e(n,Xt);for(let h=0;h<Q.length;h+=1)Q[h]&&Q[h].m(n,null);e(n,nt),e(n,X),e(X,er),e(X,tr),e(X,rr),e(X,ar),e(X,at),e(at,nr),e(X,sr),e(X,pe),e(pe,or),e(pe,Ye),e(Ye,lr),e(pe,ir),e(pe,Qe),e(Qe,cr),e(pe,hr),e(pe,Ve),e(Ve,ur),e(pe,dr),e(X,fr),e(X,vr),e(X,mr),e(X,pr),st=!0},p(_,[$]){if($&0){gr=[5,6,7,8,9,10,11,12,1,2,3,4,5];let h;for(h=0;h<13;h+=1){const Me=pa(_,gr,h);de[h]?de[h].p(Me,$):(de[h]=ga(Me),de[h].c(),de[h].m(Z,me))}for(;h<13;h+=1)de[h].d(1)}if($&11){$e=_[1];let h;for(h=0;h<$e.length;h+=1){const Me=va(_,$e,h);Q[h]?Q[h].p(Me,$):(Q[h]=ya(Me),Q[h].c(),Q[h].m(n,nt))}for(;h<Q.length;h+=1)Q[h].d(1);Q.length=$e.length}},i(_){st||(sa(r.$$.fragment,_),sa(Fe.$$.fragment,_),st=!0)},o(_){oa(r.$$.fragment,_),oa(Fe.$$.fragment,_),st=!1},d(_){la(r,_),_&&c(o),_&&c(n),la(Fe),br(de,_),br(Q,_)}}}let Y=500;const Xe=50,tn=0,rn=5,an=0,nn=5;function sn(a,r,o){let n,s,d;ia(a,Ma,f=>o(8,s=f)),ia(a,Ta,f=>o(10,d=f));const v=d;let y={monthName:"May",monthNumber:5,year1:2023,year2:2024,day1:"2023-05-01",day2:"2024-05-28"};async function w(){try{const b=await(await fetch("/trends.csv")).text();o(4,V=Ra(b)),o(5,z=[...new Set(V.map(E=>E.city))])}catch(f){console.error("Error loading CSV data:",f)}}let V=[];Ea(()=>{w(),o(7,n=yr.filter(f=>s.includes(f.region)).map(f=>f.city))});let J;const G=Sa("%Y-%m-%d");let z=[],A=[],W=[];function j(f){const b=yr.filter(E=>E.city===f);if(b){const E=b[0].region,K=v.find(H=>H.name===E);if(K)return K.colour}else return"white"}function L(){J=this.clientWidth,o(0,J)}return a.$$.update=()=>{a.$$.dirty&256&&o(7,n=yr.filter(f=>s.includes(f.region)).map(f=>f.city)),a.$$.dirty&176&&o(6,A=z.map(f=>{if(n.includes(f)){const b=V.filter(E=>{const K=new Date(E.date),H=new Date(y.day1),S=new Date(y.day2);return E.city===f&&K>=H&&K<=S});if(b.length>0){console.log("cityData");const E=b.map(k=>parseFloat(k.normalized_distinct_clean)),K=V.filter(k=>{const N=new Date(k.date);return N.getFullYear()===y.year1&&N.getMonth()===y.monthNumber-1&&k.city===f}),H=ha(K,k=>parseFloat(k.normalized_distinct_clean)),S=V.filter(k=>{const N=new Date(k.date);return N.getFullYear()===y.year2&&N.getMonth()===y.monthNumber-1&&k.city===f}),D=ha(S,k=>parseFloat(k.normalized_distinct_clean)),U=Wa().x(k=>G(k.date)).y(k=>parseFloat(k.normalized_distinct_clean)).bandwidth(.028),ie=Math.min(...U(b).map(k=>k[1]),za(E)),O=Math.max(...U(b).map(k=>k[1]),Va(E)),te=Ia().domain([new Date(y.day1),new Date(y.day2)]).range([nn,Y-rn]),q=Fa().domain([ie,O]).range([Xe-an,tn]),ae=Pa().x(k=>te(k[0])).y(k=>q(k[1]))(U(b));f==="Quebec"&&(console.log(b),console.log(U(b)),console.log(O));const C=(D-H)/H*100,ne=C.toFixed(1)+"%",se=U(b)[0],ge={cx:te(se[0]),cy:q(se[1]),radius:6,fill:"red",stroke:"red","stroke-width":2},ce=U(b)[393],le={cx:te(ce[0]),cy:q(ce[1]),radius:6,fill:"red",stroke:"#6aa687","stroke-width":2},I=q(H);return{city:f,regressionLine:ae,meanLine:I,startCircle:ge,endCircle:le,perChangeDisplay:ne,percentageChange:C}}}}).filter(f=>f!==void 0)),a.$$.dirty&64&&o(1,W=A.slice().sort((f,b)=>b.percentageChange-f.percentageChange))},[J,W,y,j,V,z,A,n,s,L]}class pn extends ba{constructor(r){super(),ka(this,r,sn,en,xa,{})}}export{pn as component,mn as universal};
