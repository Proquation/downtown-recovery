import{S as ua,i as pa,s as fa,y as ma,a as l,k as s,q as o,z as va,c,l as r,m as d,r as n,h as i,n as p,A as wa,b as ca,C as e,D as ya,g as ga,d as ba,B as _a}from"../chunks/index.39d4e449.js";import{H as Sa}from"../chunks/global.bda76b25.js";const Ea=!0,Aa=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ea},Symbol.toStringTag,{value:"Module"}));function Ca(ha){let w,ne,m,t,U,de,le,q,ce,he,M,ue,pe,H,fe,me,O,ve,we,x,ye,ge,B,be,_e,h,Se,_,Ee,Ce,S,ze,ke,E,Ae,Pe,C,Ie,De,z,Te,je,Ue,y,qe,k,Me,He,A,Oe,xe,Be,W,We,$e,$,Ne,Ge,N,Ve,Fe,g,Je,P,Le,Ke,Qe,b,Re,I,Xe,Ye,Ze,G,et,tt,V,at,ot,F,nt,it,J,st,rt,L,dt,lt,K,ct,ht,Q,ut,pt,R,ft,mt,X,vt,wt,Y,yt,gt,Z,bt,_t,ee,St,Et,te,Ct,zt,D,kt,T,At,Pt,ae,It,oe,ie;return w=new Sa({}),{c(){ma(w.$$.fragment),ne=l(),m=s("main"),t=s("div"),U=s("h1"),de=o("Methodology"),le=l(),q=s("p"),ce=o("The recovery metrics on this website are based on a sample of location-based mobility data derived from cell phones."),he=l(),M=s("p"),ue=o("The recovery metrics on the charts and maps are computed by counting the number of unique visitors in a city's downtown area in the specified time period (standardized by region – see ‘Standardization’ section below), and then dividing it by the standardized number of unique visitors during the equivalent time period in 2019."),pe=l(),H=s("p"),fe=o("A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels."),me=l(),O=s("h2"),ve=o("Downtown Geography Selection"),we=l(),x=s("p"),ye=o('When we launched this project, the geography of what counts as "downtown" involved selecting zip codes (in the US) and Dissemination Areas (in Canada) with the highest job density.'),ge=l(),B=s("p"),be=o("In our October 2023 update, we've improved these definitions to not rely as heavily on administrative or census boundaries, which often do not reflect the actual geographies of cities’ downtowns. To create these new definitions, we used jobs data to identify concentrations of jobs in individual city blocks and then drew a polygon around these clusters to represent downtown. (For more details, see below)."),_e=l(),h=s("p"),Se=o("Specifically, to create new geographic definitions of “downtown”, we used jobs data from 2019 ("),_=s("a"),Ee=o("in the U.S."),Ce=o(") and 2016 ("),S=s("a"),ze=o("in Canada"),ke=o("). We generated 1 randomly scattered point for every 100 jobs in each block (in the U.S.) or Dissemination Area (in Canada). We then applied the "),E=s("a"),Ae=o("HDBSCAN"),Pe=o(" algorithm to each city individually to create clusters of points within the city, discarding the points designated as “noise” and tuning the parameters to select a cluster representing each city’s downtown. For this step, we validated these geographies using Google Maps, cities’ own definitions of their downtowns, our personal knowledge of certain cities, and Brookings’ 2023 "),C=s("a"),Ie=o("definitions of downtowns"),De=o(" across the U.S. Next, we created a buffer around each point in the cluster and created a polygon from the spatial union of these buffers. Lastly, we formed a "),z=s("a"),Te=o("concave hull"),je=o(" around this polygon to create the final downtown area."),Ue=l(),y=s("p"),qe=o("Click "),k=s("a"),Me=o("here"),He=o(" to download a geojson file of the new downtown boundaries. Click "),A=s("a"),Oe=o("here"),xe=o(" to download a geojson file of our original zip-code defined downtowns."),Be=l(),W=s("h2"),We=o("Standardization"),$e=l(),$=s("p"),Ne=o("Because fluctuations in unique device counts over time may reflect changes in sample sizes from data providers rather than actual changes in activity, we standardized the downtown counts using larger geographies. In our previous method, this was the state (in the U.S.) or province (in Canada). Our updated method instead standardizes the data using core based statistical areas (in the U.S.) and census metropolitan areas (in Canada). Standardization using these smaller areas results in more accurate recovery rates, since a city’s downtown is not affected by the activity patterns of other cities in the same state."),Ge=l(),N=s("h2"),Ve=o("Data Providers & Imputation"),Fe=l(),g=s("p"),Je=o("Our mobile device data comes from "),P=s("a"),Le=o("Spectus"),Ke=o(". They source data from multiple providers. One of these providers includes data for the entire study period; however, its sample size declines significantly during this period. A second provider has a significantly larger sample size, but does not include Canadian data before May 2021. We decided to use data from this second provider and impute pre-May 2021 data for Canada, relying on the assumption that differences between the two providers are similar in the US and in Canada."),Qe=l(),b=s("p"),Re=o("The imputation model we employed is called Self-Attention-based Imputation for Time Series (SAITS). The "),I=s("a"),Xe=o("SAITS model"),Ye=o(", which employs self-attention techniques, identifies relationships within time series data and imputes missing information based on observed trends. The model converts randomly selected observed values into missing values, predicts the missing values, and compares the predicted and original values to evaluate the accuracy of the model."),Ze=l(),G=s("h2"),et=o("Measuring recovery rates"),tt=l(),V=s("p"),at=o("Because of the data imputation process, we calculated recovery rates slightly differently for the U.S. and Canada."),ot=l(),F=s("p"),nt=o("In the US, we measured recovery rates for each city by:"),it=l(),J=s("p"),st=o("1) Calculating the sum of daily unique devices both downtown and in the core based statistical area for all of the days in the study period (March through mid-June) in 2019 as well as 2023."),rt=l(),L=s("p"),dt=o("2) Standardizing the counts for each year by dividing the summed device count in the downtown area by the summed device count in the core based statistical area."),lt=l(),K=s("p"),ct=o("3) Dividing the standardized count in the 2023 study period by the total count in the 2019 study period for each city."),ht=l(),Q=s("p"),ut=o("In Canada, we measured recovery rates for each city by:"),pt=l(),R=s("p"),ft=o("1) Calculating the weekly sum of daily unique devices both downtown and in the census metropolitan area."),mt=l(),X=s("p"),vt=o("2) Standardizing the weekly counts by dividing the weekly summed device count in the downtown area by the weekly summed device count in the census metropolitan area."),wt=l(),Y=s("p"),yt=o("3) Imputing pre-5/17/21 data using these standardized weekly counts (see Data Providers & Imputation section)."),gt=l(),Z=s("p"),bt=o("4) Determining weekly recovery rates by dividing the standardized weekly counts in 2023 by the (imputed) standardized weekly counts in the same week in 2019."),_t=l(),ee=s("p"),St=o("5) Calculating the average weekly recovery rate by city."),Et=l(),te=s("h2"),Ct=o("Website:"),zt=l(),D=s("p"),kt=o("This website was built using Svelte with a bit of D3 for the charts. Code is on "),T=s("a"),At=o("GitHub"),Pt=l(),ae=s("div"),It=l(),oe=s("div"),this.h()},l(u){va(w.$$.fragment,u),ne=c(u),m=r(u,"MAIN",{});var v=d(m);t=r(v,"DIV",{class:!0});var a=d(t);U=r(a,"H1",{});var Tt=d(U);de=n(Tt,"Methodology"),Tt.forEach(i),le=c(a),q=r(a,"P",{});var jt=d(q);ce=n(jt,"The recovery metrics on this website are based on a sample of location-based mobility data derived from cell phones."),jt.forEach(i),he=c(a),M=r(a,"P",{});var Ut=d(M);ue=n(Ut,"The recovery metrics on the charts and maps are computed by counting the number of unique visitors in a city's downtown area in the specified time period (standardized by region – see ‘Standardization’ section below), and then dividing it by the standardized number of unique visitors during the equivalent time period in 2019."),Ut.forEach(i),pe=c(a),H=r(a,"P",{});var qt=d(H);fe=n(qt,"A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels."),qt.forEach(i),me=c(a),O=r(a,"H2",{});var Mt=d(O);ve=n(Mt,"Downtown Geography Selection"),Mt.forEach(i),we=c(a),x=r(a,"P",{});var Ht=d(x);ye=n(Ht,'When we launched this project, the geography of what counts as "downtown" involved selecting zip codes (in the US) and Dissemination Areas (in Canada) with the highest job density.'),Ht.forEach(i),ge=c(a),B=r(a,"P",{});var Ot=d(B);be=n(Ot,"In our October 2023 update, we've improved these definitions to not rely as heavily on administrative or census boundaries, which often do not reflect the actual geographies of cities’ downtowns. To create these new definitions, we used jobs data to identify concentrations of jobs in individual city blocks and then drew a polygon around these clusters to represent downtown. (For more details, see below)."),Ot.forEach(i),_e=c(a),h=r(a,"P",{});var f=d(h);Se=n(f,"Specifically, to create new geographic definitions of “downtown”, we used jobs data from 2019 ("),_=r(f,"A",{href:!0});var xt=d(_);Ee=n(xt,"in the U.S."),xt.forEach(i),Ce=n(f,") and 2016 ("),S=r(f,"A",{href:!0});var Bt=d(S);ze=n(Bt,"in Canada"),Bt.forEach(i),ke=n(f,"). We generated 1 randomly scattered point for every 100 jobs in each block (in the U.S.) or Dissemination Area (in Canada). We then applied the "),E=r(f,"A",{href:!0});var Wt=d(E);Ae=n(Wt,"HDBSCAN"),Wt.forEach(i),Pe=n(f," algorithm to each city individually to create clusters of points within the city, discarding the points designated as “noise” and tuning the parameters to select a cluster representing each city’s downtown. For this step, we validated these geographies using Google Maps, cities’ own definitions of their downtowns, our personal knowledge of certain cities, and Brookings’ 2023 "),C=r(f,"A",{href:!0});var $t=d(C);Ie=n($t,"definitions of downtowns"),$t.forEach(i),De=n(f," across the U.S. Next, we created a buffer around each point in the cluster and created a polygon from the spatial union of these buffers. Lastly, we formed a "),z=r(f,"A",{href:!0});var Nt=d(z);Te=n(Nt,"concave hull"),Nt.forEach(i),je=n(f," around this polygon to create the final downtown area."),f.forEach(i),Ue=c(a),y=r(a,"P",{});var j=d(y);qe=n(j,"Click "),k=r(j,"A",{href:!0});var Gt=d(k);Me=n(Gt,"here"),Gt.forEach(i),He=n(j," to download a geojson file of the new downtown boundaries. Click "),A=r(j,"A",{href:!0});var Vt=d(A);Oe=n(Vt,"here"),Vt.forEach(i),xe=n(j," to download a geojson file of our original zip-code defined downtowns."),j.forEach(i),Be=c(a),W=r(a,"H2",{});var Ft=d(W);We=n(Ft,"Standardization"),Ft.forEach(i),$e=c(a),$=r(a,"P",{});var Jt=d($);Ne=n(Jt,"Because fluctuations in unique device counts over time may reflect changes in sample sizes from data providers rather than actual changes in activity, we standardized the downtown counts using larger geographies. In our previous method, this was the state (in the U.S.) or province (in Canada). Our updated method instead standardizes the data using core based statistical areas (in the U.S.) and census metropolitan areas (in Canada). Standardization using these smaller areas results in more accurate recovery rates, since a city’s downtown is not affected by the activity patterns of other cities in the same state."),Jt.forEach(i),Ge=c(a),N=r(a,"H2",{});var Lt=d(N);Ve=n(Lt,"Data Providers & Imputation"),Lt.forEach(i),Fe=c(a),g=r(a,"P",{});var se=d(g);Je=n(se,"Our mobile device data comes from "),P=r(se,"A",{href:!0});var Kt=d(P);Le=n(Kt,"Spectus"),Kt.forEach(i),Ke=n(se,". They source data from multiple providers. One of these providers includes data for the entire study period; however, its sample size declines significantly during this period. A second provider has a significantly larger sample size, but does not include Canadian data before May 2021. We decided to use data from this second provider and impute pre-May 2021 data for Canada, relying on the assumption that differences between the two providers are similar in the US and in Canada."),se.forEach(i),Qe=c(a),b=r(a,"P",{});var re=d(b);Re=n(re,"The imputation model we employed is called Self-Attention-based Imputation for Time Series (SAITS). The "),I=r(re,"A",{href:!0});var Qt=d(I);Xe=n(Qt,"SAITS model"),Qt.forEach(i),Ye=n(re,", which employs self-attention techniques, identifies relationships within time series data and imputes missing information based on observed trends. The model converts randomly selected observed values into missing values, predicts the missing values, and compares the predicted and original values to evaluate the accuracy of the model."),re.forEach(i),Ze=c(a),G=r(a,"H2",{});var Rt=d(G);et=n(Rt,"Measuring recovery rates"),Rt.forEach(i),tt=c(a),V=r(a,"P",{});var Xt=d(V);at=n(Xt,"Because of the data imputation process, we calculated recovery rates slightly differently for the U.S. and Canada."),Xt.forEach(i),ot=c(a),F=r(a,"P",{});var Yt=d(F);nt=n(Yt,"In the US, we measured recovery rates for each city by:"),Yt.forEach(i),it=c(a),J=r(a,"P",{});var Zt=d(J);st=n(Zt,"1) Calculating the sum of daily unique devices both downtown and in the core based statistical area for all of the days in the study period (March through mid-June) in 2019 as well as 2023."),Zt.forEach(i),rt=c(a),L=r(a,"P",{});var ea=d(L);dt=n(ea,"2) Standardizing the counts for each year by dividing the summed device count in the downtown area by the summed device count in the core based statistical area."),ea.forEach(i),lt=c(a),K=r(a,"P",{});var ta=d(K);ct=n(ta,"3) Dividing the standardized count in the 2023 study period by the total count in the 2019 study period for each city."),ta.forEach(i),ht=c(a),Q=r(a,"P",{});var aa=d(Q);ut=n(aa,"In Canada, we measured recovery rates for each city by:"),aa.forEach(i),pt=c(a),R=r(a,"P",{});var oa=d(R);ft=n(oa,"1) Calculating the weekly sum of daily unique devices both downtown and in the census metropolitan area."),oa.forEach(i),mt=c(a),X=r(a,"P",{});var na=d(X);vt=n(na,"2) Standardizing the weekly counts by dividing the weekly summed device count in the downtown area by the weekly summed device count in the census metropolitan area."),na.forEach(i),wt=c(a),Y=r(a,"P",{});var ia=d(Y);yt=n(ia,"3) Imputing pre-5/17/21 data using these standardized weekly counts (see Data Providers & Imputation section)."),ia.forEach(i),gt=c(a),Z=r(a,"P",{});var sa=d(Z);bt=n(sa,"4) Determining weekly recovery rates by dividing the standardized weekly counts in 2023 by the (imputed) standardized weekly counts in the same week in 2019."),sa.forEach(i),_t=c(a),ee=r(a,"P",{});var ra=d(ee);St=n(ra,"5) Calculating the average weekly recovery rate by city."),ra.forEach(i),Et=c(a),te=r(a,"H2",{});var da=d(te);Ct=n(da,"Website:"),da.forEach(i),zt=c(a),D=r(a,"P",{});var Dt=d(D);kt=n(Dt,"This website was built using Svelte with a bit of D3 for the charts. Code is on "),T=r(Dt,"A",{href:!0});var la=d(T);At=n(la,"GitHub"),la.forEach(i),Dt.forEach(i),a.forEach(i),Pt=c(v),ae=r(v,"DIV",{class:!0}),d(ae).forEach(i),It=c(v),oe=r(v,"DIV",{class:!0}),d(oe).forEach(i),v.forEach(i),this.h()},h(){p(_,"href","https://lehd.ces.census.gov/data/"),p(S,"href","http://odesi2.scholarsportal.info/documentation/CENSUS/2016/cen16labour.html"),p(E,"href","https://scikit-learn.org/stable/modules/generated/sklearn.cluster.HDBSCAN.html"),p(C,"href","https://www.brookings.edu/articles/breaking-the-urban-doom-loop-the-future-of-downtowns-is-shared-prosperity/"),p(z,"href","https://shapely.readthedocs.io/en/stable/reference/shapely.concave_hull.html#shapely.concave_hull"),p(k,"href","/downtowns-hbscan.geojson"),p(A,"href","/downtowns-original.geojson"),p(P,"href","https://spectus.ai/"),p(I,"href","https://doi.org/10.1016/j.eswa.2023.119619"),p(T,"href","https://github.com/schoolofcities/downtown-recovery"),p(t,"class","text"),p(ae,"class","text"),p(oe,"class","text")},m(u,v){wa(w,u,v),ca(u,ne,v),ca(u,m,v),e(m,t),e(t,U),e(U,de),e(t,le),e(t,q),e(q,ce),e(t,he),e(t,M),e(M,ue),e(t,pe),e(t,H),e(H,fe),e(t,me),e(t,O),e(O,ve),e(t,we),e(t,x),e(x,ye),e(t,ge),e(t,B),e(B,be),e(t,_e),e(t,h),e(h,Se),e(h,_),e(_,Ee),e(h,Ce),e(h,S),e(S,ze),e(h,ke),e(h,E),e(E,Ae),e(h,Pe),e(h,C),e(C,Ie),e(h,De),e(h,z),e(z,Te),e(h,je),e(t,Ue),e(t,y),e(y,qe),e(y,k),e(k,Me),e(y,He),e(y,A),e(A,Oe),e(y,xe),e(t,Be),e(t,W),e(W,We),e(t,$e),e(t,$),e($,Ne),e(t,Ge),e(t,N),e(N,Ve),e(t,Fe),e(t,g),e(g,Je),e(g,P),e(P,Le),e(g,Ke),e(t,Qe),e(t,b),e(b,Re),e(b,I),e(I,Xe),e(b,Ye),e(t,Ze),e(t,G),e(G,et),e(t,tt),e(t,V),e(V,at),e(t,ot),e(t,F),e(F,nt),e(t,it),e(t,J),e(J,st),e(t,rt),e(t,L),e(L,dt),e(t,lt),e(t,K),e(K,ct),e(t,ht),e(t,Q),e(Q,ut),e(t,pt),e(t,R),e(R,ft),e(t,mt),e(t,X),e(X,vt),e(t,wt),e(t,Y),e(Y,yt),e(t,gt),e(t,Z),e(Z,bt),e(t,_t),e(t,ee),e(ee,St),e(t,Et),e(t,te),e(te,Ct),e(t,zt),e(t,D),e(D,kt),e(D,T),e(T,At),e(m,Pt),e(m,ae),e(m,It),e(m,oe),ie=!0},p:ya,i(u){ie||(ga(w.$$.fragment,u),ie=!0)},o(u){ba(w.$$.fragment,u),ie=!1},d(u){_a(w,u),u&&i(ne),u&&i(m)}}}class Pa extends ua{constructor(w){super(),pa(this,w,null,Ca,fa,{})}}export{Pa as component,Aa as universal};
