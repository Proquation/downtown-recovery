import{S as mr,i as wr,s as _r,y as Xt,a as F,k as y,q as w,L as S,z as er,c as T,l as m,m as h,r as _,h as i,M as I,n as e,p as Mt,A as tr,b as we,C as r,g as rr,d as ar,B as nr,Q as Ct,E as sr,o as br,K as xr,O as kr,u as or,D as Ke,J as yr}from"../chunks/index.d6d9c1d5.js";import{H as Er}from"../chunks/global.a2390d33.js";import{S as Mr}from"../chunks/SelectRegions.12365f43.js";import"../chunks/transform.4d2927c0.js";import{c as Et,s as Cr,r as Dr}from"../chunks/stores.64de824d.js";import{a as Fr,t as Tr,l as Ar}from"../chunks/line.f1bfd7f4.js";import{l as Sr}from"../chunks/linear.6154f0ba.js";import{c as Ir}from"../chunks/csv.3ac754ad.js";function Pr(s,t){let o;if(t===void 0)for(const n of s)n!=null&&(o<n||o===void 0&&n>=n)&&(o=n);else{let n=-1;for(let a of s)(a=t(a,++n,s))!=null&&(o<a||o===void 0&&a>=a)&&(o=a)}return o}function Vr(s,t){let o;if(t===void 0)for(const n of s)n!=null&&(o>n||o===void 0&&n>=n)&&(o=n);else{let n=-1;for(let a of s)(a=t(a,++n,s))!=null&&(o>a||o===void 0&&a>=a)&&(o=a)}return o}function ir(s,t){let o=0,n=0;if(t===void 0)for(let a of s)a!=null&&(a=+a)>=a&&(++o,n+=a);else{let a=-1;for(let c of s)(c=t(c,++a,s))!=null&&(c=+c)>=c&&(++o,n+=c)}if(o)return n/o}const Lr=!0,ua=Object.freeze(Object.defineProperty({__proto__:null,prerender:Lr},Symbol.toStringTag,{value:"Module"}));function lr(s,t){return Rr(s)||zr(s,t)||Wr()}function Rr(s){if(Array.isArray(s))return s}function zr(s,t){var o=[],n=!0,a=!1,c=void 0;try{for(var d=s[Symbol.iterator](),E;!(n=(E=d.next()).done)&&(o.push(E.value),!(t&&o.length===t));n=!0);}catch(g){a=!0,c=g}finally{try{!n&&d.return!=null&&d.return()}finally{if(a)throw c}}return o}function Wr(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Or(s,t,o,n){s=s.filter(function(q,O){var u=t(q,O),b=o(q,O);return u!=null&&isFinite(u)&&b!=null&&isFinite(b)}),n&&s.sort(function(q,O){return t(q)-t(O)});for(var a=s.length,c=new Float64Array(a),d=new Float64Array(a),E=0,g=0,W,J,P,V=0;V<a;)P=s[V],c[V]=W=+t(P,V,s),d[V]=J=+o(P,V,s),++V,E+=(W-E)/V,g+=(J-g)/V;for(var C=0;C<a;++C)c[C]-=E,d[C]-=g;return[c,d,E,g]}function Hr(s,t,o,n){var a=n-s*s,c=Math.abs(a)<1e-24?0:(o-s*t)/a,d=t-c*s;return[d,c]}function Br(s){s.sort(function(o,n){return o-n});var t=s.length/2;return t%1===0?(s[t-1]+s[t])/2:s[Math.floor(t)]}var cr=2,hr=1e-12;function Jr(){var s=function(c){return c[0]},t=function(c){return c[1]},o=.3;function n(a){for(var c=Or(a,s,t,!0),d=lr(c,4),E=d[0],g=d[1],W=d[2],J=d[3],P=E.length,V=Math.max(2,~~(o*P)),C=new Float64Array(P),q=new Float64Array(P),O=new Float64Array(P).fill(1),u=-1;++u<=cr;){for(var b=[0,V-1],k=0;k<P;++k){for(var R=E[k],Z=b[0],U=b[1],D=R-E[Z]>E[U]-R?Z:U,M=0,se=0,X=0,L=0,ee=0,j=1/Math.abs(E[D]-R||1),G=Z;G<=U;++G){var te=E[G],H=g[G],N=qr(Math.abs(R-te)*j)*O[G],ae=te*N;M+=N,se+=ae,X+=H*N,L+=H*ae,ee+=te*ae}var he=Hr(se/M,X/M,L/M,ee/M),oe=lr(he,2),ne=oe[0],v=oe[1];C[k]=ne+v*R,q[k]=Math.abs(g[k]-C[k]),Gr(E,k+1,b)}if(u===cr)break;var B=Br(q);if(Math.abs(B)<hr)break;for(var z=0,f,x;z<P;++z)f=q[z]/(6*B),O[z]=f>=1?hr:(x=1-f*f)*x}return Ur(E,C,W,J)}return n.bandwidth=function(a){return arguments.length?(o=a,n):o},n.x=function(a){return arguments.length?(s=a,n):s},n.y=function(a){return arguments.length?(t=a,n):t},n}function qr(s){return(s=1-s*s*s)*s*s}function Gr(s,t,o){var n=s[t],a=o[0],c=o[1]+1;if(!(c>=s.length))for(;t>a&&s[c]-n<=n-s[a];)o[0]=++a,o[1]=c,++c}function Ur(s,t,o,n){for(var a=s.length,c=[],d=0,E=0,g=[],W;d<a;++d)W=s[d]+o,g[0]===W?g[1]+=(t[d]-g[1])/++E:(E=0,g[1]+=n,g=[W,t[d]],c.push(g));return g[1]+=n,c}const jr=""+new URL("../assets/green-arrow.0afd51fe.svg",import.meta.url).href,Nr=""+new URL("../assets/red-arrow.ede1cb71.svg",import.meta.url).href;function ur(s,t,o){const n=s.slice();return n[13]=t[o].city,n[14]=t[o].regressionLine,n[15]=t[o].startCircle,n[16]=t[o].endCircle,n[17]=t[o].meanLine,n[18]=t[o].perChangeDisplay,n[19]=t[o].percentageChange,n[21]=o,n}function dr(s,t,o){const n=s.slice();return n[22]=t[o],n[21]=o,n}function fr(s,t,o){const n=s.slice();return n[22]=t[o],n[21]=o,n}function Kr(s){let t;return{c(){t=S("line"),this.h()},l(o){t=I(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(t).forEach(i),this.h()},h(){e(t,"x1",260+s[21]*re/12),e(t,"y1",5),e(t,"x2",260+s[21]*re/12),e(t,"y2",40),e(t,"stroke","white"),e(t,"stroke-width","1")},m(o,n){we(o,t,n)},p:Ke,d(o){o&&i(t)}}}function vr(s){let t,o,n,a=s[22]===1&&Kr(s);return{c(){t=S("line"),a&&a.c(),o=S("text"),n=w(s[22]),this.h()},l(c){t=I(c,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(t).forEach(i),a&&a.l(c),o=I(c,"text",{x:!0,y:!0,class:!0});var d=h(o);n=_(d,s[22]),d.forEach(i),this.h()},h(){e(t,"x1",260+s[21]*re/12),e(t,"y1",45),e(t,"x2",260+s[21]*re/12),e(t,"y2",40),e(t,"stroke","white"),e(t,"stroke-width","1"),e(o,"x",260+s[21]*re/12+.5*re/12),e(o,"y","40"),e(o,"class","textMonth svelte-1crkxs9")},m(c,d){we(c,t,d),a&&a.m(c,d),we(c,o,d),r(o,n)},p(c,d){c[22]===1&&a.p(c,d)},d(c){c&&i(t),a&&a.d(c),c&&i(o)}}}function Yr(s){let t,o;return{c(){t=y("img"),this.h()},l(n){t=m(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){yr(t.src,o=Nr)||e(t,"src",o),e(t,"alt","Down arrow"),e(t,"class","arrow-icon svelte-1crkxs9")},m(n,a){we(n,t,a)},p:Ke,d(n){n&&i(t)}}}function $r(s){let t,o;return{c(){t=y("img"),this.h()},l(n){t=m(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){yr(t.src,o=jr)||e(t,"src",o),e(t,"alt","Up arrow"),e(t,"class","arrow-icon svelte-1crkxs9")},m(n,a){we(n,t,a)},p:Ke,d(n){n&&i(t)}}}function gr(s){let t;return{c(){t=S("line"),this.h()},l(o){t=I(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(t).forEach(i),this.h()},h(){e(t,"x1",s[22]*re/12),e(t,"y1",5),e(t,"x2",s[22]*re/12),e(t,"y2",45),e(t,"stroke","#333333"),e(t,"stroke-width","1")},m(o,n){we(o,t,n)},p:Ke,d(o){o&&i(t)}}}function pr(s){let t,o,n,a,c,d,E=s[21]+1+"",g,W,J=s[13]+"",P,V,C,q,O,u,b,k=s[18]+"",R,Z,U,D,M,se,X,L,ee,j,G,te,H,N,ae,he;function oe(f,x){if(f[19]>0)return $r;if(f[19]<0)return Yr}let ne=oe(s),v=ne&&ne(s),B=[1,2,3,4,5,6,7,8,9,10,11],z=[];for(let f=0;f<11;f+=1)z[f]=gr(dr(s,B,f));return{c(){t=y("div"),o=y("div"),n=S("svg"),a=S("line"),d=S("text"),g=w(E),W=w(". "),P=w(J),V=F(),C=y("div"),v&&v.c(),q=F(),O=y("div"),u=S("svg"),b=S("text"),R=w(k),Z=F(),U=y("div"),D=S("svg");for(let f=0;f<11;f+=1)z[f].c();M=S("line"),L=S("path"),j=S("circle"),H=S("circle"),this.h()},l(f){t=m(f,"DIV",{class:!0});var x=h(t);o=m(x,"DIV",{class:!0});var A=h(o);n=I(A,"svg",{width:!0,height:!0,class:!0});var fe=h(n);a=I(fe,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(a).forEach(i),d=I(fe,"text",{x:!0,y:!0,class:!0});var ve=h(d);g=_(ve,E),W=_(ve,". "),P=_(ve,J),ve.forEach(i),fe.forEach(i),A.forEach(i),V=T(x),C=m(x,"DIV",{class:!0});var Pe=h(C);v&&v.l(Pe),Pe.forEach(i),q=T(x),O=m(x,"DIV",{class:!0});var Ve=h(O);u=I(Ve,"svg",{width:!0,height:!0,class:!0});var _e=h(u);b=I(_e,"text",{x:!0,y:!0,class:!0});var Le=h(b);R=_(Le,k),Le.forEach(i),_e.forEach(i),Ve.forEach(i),Z=T(x),U=m(x,"DIV",{class:!0,style:!0});var Re=h(U);D=I(Re,"svg",{height:!0,width:!0,class:!0});var ie=h(D);for(let Fe=0;Fe<11;Fe+=1)z[Fe].l(ie);M=I(ie,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),h(M).forEach(i),L=I(ie,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),h(L).forEach(i),j=I(ie,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),h(j).forEach(i),H=I(ie,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0}),h(H).forEach(i),ie.forEach(i),Re.forEach(i),x.forEach(i),this.h()},h(){e(a,"x1","5"),e(a,"y1","15"),e(a,"x2","5"),e(a,"y2",Je-15),e(a,"stroke",c=s[2](s[13])),e(a,"stroke-width","5"),e(d,"x","12"),e(d,"y","31"),e(d,"class","textCity svelte-1crkxs9"),e(n,"width","150"),e(n,"height",Je),e(n,"class","region-bar"),e(o,"class","left svelte-1crkxs9"),e(C,"class","arrow svelte-1crkxs9"),e(b,"x","46"),e(b,"y","45"),e(b,"class","textPercent svelte-1crkxs9"),e(u,"width","50"),e(u,"height",Je),e(u,"class","region-bar"),e(O,"class","number svelte-1crkxs9"),e(M,"x1","0"),e(M,"y1",se=s[17]),e(M,"x2",re),e(M,"y2",X=s[17]),e(M,"stroke","#D0D1C9"),e(M,"stroke-width","1"),e(M,"stroke-dasharray","4"),e(L,"d",ee=s[14]),e(L,"stroke","white"),e(L,"stroke-width","2"),e(L,"fill","none"),e(j,"cx",G=s[15].cx),e(j,"cy",te=s[15].cy),e(j,"r","2"),e(j,"fill","white"),e(H,"cx",N=s[16].cx),e(H,"cy",ae=s[16].cy),e(H,"r","2"),e(H,"fill","white"),e(H,"stroke","white"),e(D,"height",Je),e(D,"width",re),e(D,"class","chart svelte-1crkxs9"),e(U,"class","chart-container svelte-1crkxs9"),Mt(U,"width",re),e(t,"class","chart-wrapper svelte-1crkxs9"),xr(()=>s[8].call(t))},m(f,x){we(f,t,x),r(t,o),r(o,n),r(n,a),r(n,d),r(d,g),r(d,W),r(d,P),r(t,V),r(t,C),v&&v.m(C,null),r(t,q),r(t,O),r(O,u),r(u,b),r(b,R),r(t,Z),r(t,U),r(U,D);for(let A=0;A<11;A+=1)z[A]&&z[A].m(D,null);r(D,M),r(D,L),r(D,j),r(D,H),he=kr(t,s[8].bind(t))},p(f,x){if(x&2&&c!==(c=f[2](f[13]))&&e(a,"stroke",c),x&2&&J!==(J=f[13]+"")&&or(P,J),ne===(ne=oe(f))&&v?v.p(f,x):(v&&v.d(1),v=ne&&ne(f),v&&(v.c(),v.m(C,null))),x&2&&k!==(k=f[18]+"")&&or(R,k),x&0){B=[1,2,3,4,5,6,7,8,9,10,11];let A;for(A=0;A<11;A+=1){const fe=dr(f,B,A);z[A]?z[A].p(fe,x):(z[A]=gr(fe),z[A].c(),z[A].m(D,M))}for(;A<11;A+=1)z[A].d(1)}x&2&&se!==(se=f[17])&&e(M,"y1",se),x&2&&X!==(X=f[17])&&e(M,"y2",X),x&2&&ee!==(ee=f[14])&&e(L,"d",ee),x&2&&G!==(G=f[15].cx)&&e(j,"cx",G),x&2&&te!==(te=f[15].cy)&&e(j,"cy",te),x&2&&N!==(N=f[16].cx)&&e(H,"cx",N),x&2&&ae!==(ae=f[16].cy)&&e(H,"cy",ae)},d(f){f&&i(t),v&&v.d(),Ct(z,f),he()}}}function Qr(s){let t,o,n,a,c,d,E,g,W,J,P,V,C,q,O,u,b,k,R,Z,U,D,M,se,X,L,ee,j,G,te,H,N,ae,he,oe,ne,v,B,z,f,x,A,fe,ve,Pe,Ve,_e,Le,Re,ie,Fe,Ye,qe,$e,Qe,Te,Ze,be,Ae,ue,Xe,et,ze,We,$,xe,tt,ke,rt,Ee,at,Me,nt,Ce,st,ge,de,ot,Ue,Q,it,lt,ct,ht,Ge,ut,dt,pe,ft,Oe,vt,gt,Se,pt,yt,mt,wt,_t,bt,je;t=new Er({}),Te=new Mr({props:{europe:"no",canada:"yes"}});let xt=[3,4,5,6,7,8,9,10,11,12,1,2],le=[];for(let p=0;p<12;p+=1)le[p]=vr(fr(s,xt,p));let He=s[1],K=[];for(let p=0;p<He.length;p+=1)K[p]=pr(ur(s,He,p));return{c(){Xt(t.$$.fragment),o=F(),n=y("main"),a=y("div"),c=y("h1"),d=w("Recovery Trends"),E=F(),g=y("p"),W=w("By "),J=y("a"),P=w("Karen Chapple"),V=w(", "),C=y("a"),q=w("Julia Greenberg"),O=w(", "),u=y("a"),b=w("Jeff Allen"),k=w(", "),R=y("a"),Z=w("Irene Chang"),U=F(),D=y("p"),M=y("i"),se=w("Updated April 2024"),X=F(),L=y("p"),ee=w("Data on cell phone activity (a.k.a. footfall) trends for the last year provide a picture of how downtowns are faring since our last rankings update in the summer of 2023. We look here at trends from March 1, 2023 through February 29, 2024. Trends are based on data from Spectus, but use different cell phone data providers from our rankings analysis. The trendlines measure the average level of activity over the course of the year, while the ranking metric shows the percent difference in the average number of stops in February 2024 relative to March 2023."),j=F(),G=y("p"),te=w("The dotted line provides a baseline of the average level of activity in March 2023, allowing for comparison to subsequent months. The solid line represents the average level of activity by week. When the solid line extends above the dotted baseline, downtown activity is greater compared to in March 2023. When it dips below the dotted line, activity is on a downswing. For most cities, there is an increase in month 6 or 7; this is expected since these are the summer months of June and July. The fall months see decreasing activity on average, with almost all downtowns losing activity by November. However, some cities stay above the March baseline, suggesting gradual recovery, while others dip well below it, i.e., stagnating recovery."),H=F(),N=y("h5"),ae=w("Key Findings"),he=F(),oe=y("p"),ne=w("Overall, the median rate of change is 9.3% over the year, meaning that the median downtown in the U.S. and Canada’s largest metropolitan areas are gradually seeing more activity. Fifty downtowns are in an upward trajectory, while just 14 are trending downwards."),v=F(),B=y("p"),z=w("With a couple exceptions, the downtowns that are seeing the highest rates of activity increase, consistently higher relative to 2023, are the ones that were below 80% in our "),f=y("a"),x=w("2023 rankings"),A=w(".  These cities seem to be trending towards recovery: Minneapolis, Montreal, Ottawa, Chicago, Louisville, Pittsburgh, Cincinnati, Boston, Washington DC, and Toronto. In other words, their recovery may now be converging with the downtowns that largely recovered in 2023."),fe=F(),ve=y("p"),Pe=w("On the other hand, for the 14 cities where recovery is faltering, we see three types of patterns. For a handful of cities that previously topped our rankings, such as Las Vegas, Colorado Springs, San Antonio, Fort Worth, Tampa, Wichita, Oklahoma City, activity rates are slowing (albeit slightly for most) and changing very little since March 2023. On the other hand, Dallas and San Francisco are both quite volatile, with significant new activity in summer 2023 decreasing below the baseline by fall and winter. A few downtowns, including Houston, Memphis, and Nashville, have basically stalled at the March 2023 activity rate."),Ve=F(),_e=y("p"),Le=w("To the extent possible, we will update this data on a monthly basis through 2024."),Re=F(),ie=y("h4"),Fe=w("Visits to Downtown (March 1, 2023 to March 1, 2024)"),Ye=F(),qe=y("p"),$e=w("Select Regions:"),Qe=F(),Xt(Te.$$.fragment),Ze=F(),be=y("p"),Ae=S("svg"),ue=S("line"),Xe=w(`
			March 2023 average`),et=F(),ze=y("div"),We=y("div"),$=S("svg"),xe=S("text"),tt=w("City"),ke=S("text"),rt=w("Percent Change in Visits"),Ee=S("text"),at=w("Feb 2024 vs Mar 2023"),Me=S("text"),nt=w("2023"),Ce=S("text"),st=w("2024"),ge=S("line");for(let p=0;p<12;p+=1)le[p].c();de=S("line"),ot=F();for(let p=0;p<K.length;p+=1)K[p].c();Ue=F(),Q=y("div"),it=y("br"),lt=F(),ct=y("br"),ht=F(),Ge=y("h4"),ut=w("More Information"),dt=F(),pe=y("p"),ft=w("You can download the data shown on the chart "),Oe=y("a"),vt=w("here"),gt=w(". The data on the charts are based on the `normalized_distinct_clean` column, which pertains to the number of unique daily visitors normalized by the total number in the metro area. The trend-line and summary statistics shown are calculated in JavaScript (code is "),Se=y("a"),pt=w("here"),yt=w(")"),mt=F(),wt=y("br"),_t=F(),bt=y("br"),this.h()},l(p){er(t.$$.fragment,p),o=T(p),n=m(p,"MAIN",{});var Y=h(n);a=m(Y,"DIV",{class:!0});var l=h(a);c=m(l,"H1",{});var De=h(c);d=_(De,"Recovery Trends"),De.forEach(i),E=T(l),g=m(l,"P",{});var ye=h(g);W=_(ye,"By "),J=m(ye,"A",{href:!0});var Dt=h(J);P=_(Dt,"Karen Chapple"),Dt.forEach(i),V=_(ye,", "),C=m(ye,"A",{href:!0});var Ft=h(C);q=_(Ft,"Julia Greenberg"),Ft.forEach(i),O=_(ye,", "),u=m(ye,"A",{href:!0});var Tt=h(u);b=_(Tt,"Jeff Allen"),Tt.forEach(i),k=_(ye,", "),R=m(ye,"A",{href:!0});var At=h(R);Z=_(At,"Irene Chang"),At.forEach(i),ye.forEach(i),U=T(l),D=m(l,"P",{});var St=h(D);M=m(St,"I",{});var It=h(M);se=_(It,"Updated April 2024"),It.forEach(i),St.forEach(i),X=T(l),L=m(l,"P",{});var Pt=h(L);ee=_(Pt,"Data on cell phone activity (a.k.a. footfall) trends for the last year provide a picture of how downtowns are faring since our last rankings update in the summer of 2023. We look here at trends from March 1, 2023 through February 29, 2024. Trends are based on data from Spectus, but use different cell phone data providers from our rankings analysis. The trendlines measure the average level of activity over the course of the year, while the ranking metric shows the percent difference in the average number of stops in February 2024 relative to March 2023."),Pt.forEach(i),j=T(l),G=m(l,"P",{});var Vt=h(G);te=_(Vt,"The dotted line provides a baseline of the average level of activity in March 2023, allowing for comparison to subsequent months. The solid line represents the average level of activity by week. When the solid line extends above the dotted baseline, downtown activity is greater compared to in March 2023. When it dips below the dotted line, activity is on a downswing. For most cities, there is an increase in month 6 or 7; this is expected since these are the summer months of June and July. The fall months see decreasing activity on average, with almost all downtowns losing activity by November. However, some cities stay above the March baseline, suggesting gradual recovery, while others dip well below it, i.e., stagnating recovery."),Vt.forEach(i),H=T(l),N=m(l,"H5",{});var Lt=h(N);ae=_(Lt,"Key Findings"),Lt.forEach(i),he=T(l),oe=m(l,"P",{});var Rt=h(oe);ne=_(Rt,"Overall, the median rate of change is 9.3% over the year, meaning that the median downtown in the U.S. and Canada’s largest metropolitan areas are gradually seeing more activity. Fifty downtowns are in an upward trajectory, while just 14 are trending downwards."),Rt.forEach(i),v=T(l),B=m(l,"P",{});var Ne=h(B);z=_(Ne,"With a couple exceptions, the downtowns that are seeing the highest rates of activity increase, consistently higher relative to 2023, are the ones that were below 80% in our "),f=m(Ne,"A",{href:!0});var zt=h(f);x=_(zt,"2023 rankings"),zt.forEach(i),A=_(Ne,".  These cities seem to be trending towards recovery: Minneapolis, Montreal, Ottawa, Chicago, Louisville, Pittsburgh, Cincinnati, Boston, Washington DC, and Toronto. In other words, their recovery may now be converging with the downtowns that largely recovered in 2023."),Ne.forEach(i),fe=T(l),ve=m(l,"P",{});var Wt=h(ve);Pe=_(Wt,"On the other hand, for the 14 cities where recovery is faltering, we see three types of patterns. For a handful of cities that previously topped our rankings, such as Las Vegas, Colorado Springs, San Antonio, Fort Worth, Tampa, Wichita, Oklahoma City, activity rates are slowing (albeit slightly for most) and changing very little since March 2023. On the other hand, Dallas and San Francisco are both quite volatile, with significant new activity in summer 2023 decreasing below the baseline by fall and winter. A few downtowns, including Houston, Memphis, and Nashville, have basically stalled at the March 2023 activity rate."),Wt.forEach(i),Ve=T(l),_e=m(l,"P",{});var Ot=h(_e);Le=_(Ot,"To the extent possible, we will update this data on a monthly basis through 2024."),Ot.forEach(i),Re=T(l),ie=m(l,"H4",{});var Ht=h(ie);Fe=_(Ht,"Visits to Downtown (March 1, 2023 to March 1, 2024)"),Ht.forEach(i),Ye=T(l),qe=m(l,"P",{});var Bt=h(qe);$e=_(Bt,"Select Regions:"),Bt.forEach(i),Qe=T(l),er(Te.$$.fragment,l),Ze=T(l),be=m(l,"P",{style:!0});var kt=h(be);Ae=I(kt,"svg",{height:!0,width:!0});var Jt=h(Ae);ue=I(Jt,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),h(ue).forEach(i),Jt.forEach(i),Xe=_(kt,`
			March 2023 average`),kt.forEach(i),l.forEach(i),et=T(Y),ze=m(Y,"DIV",{class:!0});var qt=h(ze);We=m(qt,"DIV",{class:!0});var Gt=h(We);$=I(Gt,"svg",{width:!0,height:!0,class:!0});var me=h($);xe=I(me,"text",{x:!0,y:!0,class:!0});var Ut=h(xe);tt=_(Ut,"City"),Ut.forEach(i),ke=I(me,"text",{x:!0,y:!0,class:!0});var jt=h(ke);rt=_(jt,"Percent Change in Visits"),jt.forEach(i),Ee=I(me,"text",{x:!0,y:!0,class:!0});var Nt=h(Ee);at=_(Nt,"Feb 2024 vs Mar 2023"),Nt.forEach(i),Me=I(me,"text",{x:!0,y:!0,class:!0});var Kt=h(Me);nt=_(Kt,"2023"),Kt.forEach(i),Ce=I(me,"text",{x:!0,y:!0,class:!0});var Yt=h(Ce);st=_(Yt,"2024"),Yt.forEach(i),ge=I(me,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(ge).forEach(i);for(let Ie=0;Ie<12;Ie+=1)le[Ie].l(me);de=I(me,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),h(de).forEach(i),me.forEach(i),Gt.forEach(i),qt.forEach(i),ot=T(Y);for(let Ie=0;Ie<K.length;Ie+=1)K[Ie].l(Y);Ue=T(Y),Q=m(Y,"DIV",{class:!0});var ce=h(Q);it=m(ce,"BR",{}),lt=T(ce),ct=m(ce,"BR",{}),ht=T(ce),Ge=m(ce,"H4",{});var $t=h(Ge);ut=_($t,"More Information"),$t.forEach(i),dt=T(ce),pe=m(ce,"P",{});var Be=h(pe);ft=_(Be,"You can download the data shown on the chart "),Oe=m(Be,"A",{href:!0});var Qt=h(Oe);vt=_(Qt,"here"),Qt.forEach(i),gt=_(Be,". The data on the charts are based on the `normalized_distinct_clean` column, which pertains to the number of unique daily visitors normalized by the total number in the metro area. The trend-line and summary statistics shown are calculated in JavaScript (code is "),Se=m(Be,"A",{href:!0,target:!0});var Zt=h(Se);pt=_(Zt,"here"),Zt.forEach(i),yt=_(Be,")"),Be.forEach(i),mt=T(ce),wt=m(ce,"BR",{}),_t=T(ce),bt=m(ce,"BR",{}),ce.forEach(i),Y.forEach(i),this.h()},h(){e(J,"href","https://"),e(C,"href","https://"),e(u,"href","https://"),e(R,"href","https://"),e(f,"href","/charts/rankings"),e(ue,"x1","0"),e(ue,"y1","5"),e(ue,"x2","50"),e(ue,"y2","5"),e(ue,"stroke","white"),e(ue,"stroke-width","1"),e(ue,"stroke-dasharray","4"),e(Ae,"height","10"),e(Ae,"width","50"),Mt(be,"padding-top","10px"),Mt(be,"padding-bottom","10px"),e(a,"class","text svelte-1crkxs9"),e(xe,"x","12"),e(xe,"y","35"),e(xe,"class","textCity svelte-1crkxs9"),e(ke,"x","235"),e(ke,"y","15"),e(ke,"class","textLabel svelte-1crkxs9"),e(Ee,"x","235"),e(Ee,"y","35"),e(Ee,"class","textLabel svelte-1crkxs9"),e(Me,"x",469),e(Me,"y","15"),e(Me,"class","textMonth svelte-1crkxs9"),e(Ce,"x",719),e(Ce,"y","15"),e(Ce,"class","textMonth svelte-1crkxs9"),e(ge,"x1","260"),e(ge,"y1",45),e(ge,"x2",260+re),e(ge,"y2",45),e(ge,"stroke","white"),e(ge,"stroke-width","1"),e(de,"x1",259+re),e(de,"y1",45),e(de,"x2",259+re),e(de,"y2",40),e(de,"stroke","white"),e(de,"stroke-width","1"),e($,"width","760"),e($,"height",Je),e($,"class","region-bar"),e(We,"class","left svelte-1crkxs9"),e(ze,"class","chart-wrapper svelte-1crkxs9"),e(Oe,"href","/stopuplevelled_mar2023_mar2024.csv"),e(Se,"href","https://github.com/schoolofcities/downtown-recovery/blob/main/src/routes/charts/trends/%2Bpage.svelte"),e(Se,"target","_blank"),e(Q,"class","text svelte-1crkxs9")},m(p,Y){tr(t,p,Y),we(p,o,Y),we(p,n,Y),r(n,a),r(a,c),r(c,d),r(a,E),r(a,g),r(g,W),r(g,J),r(J,P),r(g,V),r(g,C),r(C,q),r(g,O),r(g,u),r(u,b),r(g,k),r(g,R),r(R,Z),r(a,U),r(a,D),r(D,M),r(M,se),r(a,X),r(a,L),r(L,ee),r(a,j),r(a,G),r(G,te),r(a,H),r(a,N),r(N,ae),r(a,he),r(a,oe),r(oe,ne),r(a,v),r(a,B),r(B,z),r(B,f),r(f,x),r(B,A),r(a,fe),r(a,ve),r(ve,Pe),r(a,Ve),r(a,_e),r(_e,Le),r(a,Re),r(a,ie),r(ie,Fe),r(a,Ye),r(a,qe),r(qe,$e),r(a,Qe),tr(Te,a,null),r(a,Ze),r(a,be),r(be,Ae),r(Ae,ue),r(be,Xe),r(n,et),r(n,ze),r(ze,We),r(We,$),r($,xe),r(xe,tt),r($,ke),r(ke,rt),r($,Ee),r(Ee,at),r($,Me),r(Me,nt),r($,Ce),r(Ce,st),r($,ge);for(let l=0;l<12;l+=1)le[l]&&le[l].m($,null);r($,de),r(n,ot);for(let l=0;l<K.length;l+=1)K[l]&&K[l].m(n,null);r(n,Ue),r(n,Q),r(Q,it),r(Q,lt),r(Q,ct),r(Q,ht),r(Q,Ge),r(Ge,ut),r(Q,dt),r(Q,pe),r(pe,ft),r(pe,Oe),r(Oe,vt),r(pe,gt),r(pe,Se),r(Se,pt),r(pe,yt),r(Q,mt),r(Q,wt),r(Q,_t),r(Q,bt),je=!0},p(p,[Y]){if(Y&0){xt=[3,4,5,6,7,8,9,10,11,12,1,2];let l;for(l=0;l<12;l+=1){const De=fr(p,xt,l);le[l]?le[l].p(De,Y):(le[l]=vr(De),le[l].c(),le[l].m($,de))}for(;l<12;l+=1)le[l].d(1)}if(Y&7){He=p[1];let l;for(l=0;l<He.length;l+=1){const De=ur(p,He,l);K[l]?K[l].p(De,Y):(K[l]=pr(De),K[l].c(),K[l].m(n,Ue))}for(;l<K.length;l+=1)K[l].d(1);K.length=He.length}},i(p){je||(rr(t.$$.fragment,p),rr(Te.$$.fragment,p),je=!0)},o(p){ar(t.$$.fragment,p),ar(Te.$$.fragment,p),je=!1},d(p){nr(t,p),p&&i(o),p&&i(n),nr(Te),Ct(le,p),Ct(K,p)}}}let re=500;const Je=50,Zr=0,Xr=5,ea=0,ta=5;function ra(s,t,o){let n,a,c;sr(s,Cr,u=>o(7,a=u)),sr(s,Dr,u=>o(9,c=u));const d=c;async function E(){try{const b=await(await fetch("/stopuplevelled_mar2023_mar2024.csv")).text();o(3,g=Ir(b)),o(4,P=[...new Set(g.map(k=>k.city))])}catch(u){console.error("Error loading CSV data:",u)}}let g=[];br(()=>{E(),o(6,n=Et.filter(u=>a.includes(u.region)).map(u=>u.city))});let W;const J=Fr("%Y-%m-%d");let P=[],V=[],C=[];function q(u){const b=Et.filter(k=>k.city===u);if(b){const k=b[0].region,R=d.find(Z=>Z.name===k);if(R)return R.colour}else return"white"}function O(){W=this.clientWidth,o(0,W)}return s.$$.update=()=>{s.$$.dirty&128&&o(6,n=Et.filter(u=>a.includes(u.region)).map(u=>u.city)),s.$$.dirty&88&&o(5,V=P.map(u=>{if(n.includes(u)){const b=g.filter(k=>k.city===u);if(b.length>0){const k=b.map(v=>parseFloat(v.normalized_distinct_clean)),R=Vr(k),Z=Pr(k),U=g.filter(v=>{const B=new Date(v.date);return B.getFullYear()===2023&&B.getMonth()===2&&v.city===u}),D=ir(U,v=>parseFloat(v.normalized_distinct_clean)),M=g.filter(v=>{const B=new Date(v.date);return B.getFullYear()===2024&&B.getMonth()===1&&v.city===u}),se=ir(M,v=>parseFloat(v.normalized_distinct_clean)),X=Tr().domain([new Date("2023-03-01"),new Date("2024-03-01")]).range([ta,re-Xr]),L=Sr().domain([R,Z]).range([Je-ea,Zr]),ee=Jr().x(v=>J(v.date)).y(v=>parseFloat(v.normalized_distinct_clean)).bandwidth(.05),G=Ar().x(v=>X(v[0])).y(v=>L(v[1]))(ee(b)),te=(se-D)/D*100,H=te.toFixed(1)+"%",N=ee(b)[0],ae={cx:X(N[0]),cy:L(N[1]),radius:6,fill:"red",stroke:"red","stroke-width":2},he=ee(b)[366],oe={cx:X(he[0]),cy:L(he[1]),radius:6,fill:"red",stroke:"#6aa687","stroke-width":2},ne=L(D);return{city:u,regressionLine:G,meanLine:ne,startCircle:ae,endCircle:oe,perChangeDisplay:H,percentageChange:te}}}}).filter(u=>u!==void 0)),s.$$.dirty&32&&o(1,C=V.slice().sort((u,b)=>b.percentageChange-u.percentageChange))},[W,C,q,g,P,V,n,a,O]}class da extends mr{constructor(t){super(),wr(this,t,ra,Qr,_r,{})}}export{da as component,ua as universal};
