import{S as jr,i as Kr,s as Qr,y as Zr,a as k,k as _,q as s,L as E,z as Xr,c as b,l as v,m as u,r as o,h as i,M as C,n as t,p as lr,A as $r,b as be,C as e,g as ea,d as ta,B as ra,Q as sr,o as aa,K as la,O as sa,u as Br,D as $e,J as Yr}from"../chunks/index.4b5ff55f.js";import{H as oa}from"../chunks/global.2205c272.js";import"../chunks/transform.4d2927c0.js";import{m as Gr,l as na,a as ia,b as ca,d as ha,u as ua}from"../chunks/red-arrow.7b588b8b.js";import{c as Fr}from"../chunks/stores.52bb2611.js";import{t as da,a as fa,l as _a}from"../chunks/line.09bdc1ce.js";import{l as va}from"../chunks/linear.6154f0ba.js";import{c as ma}from"../chunks/csv.3ac754ad.js";const ya=!0,Aa=Object.freeze(Object.defineProperty({__proto__:null,prerender:ya},Symbol.toStringTag,{value:"Module"}));function Hr(a,r,n){const l=a.slice();return l[10]=r[n].city,l[11]=r[n].regressionLine,l[12]=r[n].startCircle,l[13]=r[n].endCircle,l[14]=r[n].meanLine,l[15]=r[n].perChangeDisplay,l[16]=r[n].percentageChange,l[18]=n,l}function Wr(a,r,n){const l=a.slice();return l[19]=r[n],l[18]=n,l}function Jr(a,r,n){const l=a.slice();return l[19]=r[n],l[18]=n,l}function pa(a){let r;return{c(){r=E("line"),this.h()},l(n){r=C(n,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),u(r).forEach(i),this.h()},h(){t(r,"x1",260+a[18]*A/13),t(r,"y1",5),t(r,"x2",260+a[18]*A/13),t(r,"y2",40),t(r,"stroke","white"),t(r,"stroke-width","1")},m(n,l){be(n,r,l)},p:$e,d(n){n&&i(r)}}}function Rr(a){let r,n,l,c=a[19]===1&&pa(a);return{c(){r=E("line"),c&&c.c(),n=E("text"),l=s(a[19]),this.h()},l(m){r=C(m,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),u(r).forEach(i),c&&c.l(m),n=C(m,"text",{x:!0,y:!0,class:!0});var T=u(n);l=o(T,a[19]),T.forEach(i),this.h()},h(){t(r,"x1",260+a[18]*A/13),t(r,"y1",45),t(r,"x2",260+a[18]*A/13),t(r,"y2",40),t(r,"stroke","white"),t(r,"stroke-width","1"),t(n,"x",260+a[18]*A/13+.5*A/13),t(n,"y","40"),t(n,"class","textMonth svelte-1crkxs9")},m(m,T){be(m,r,T),c&&c.m(m,T),be(m,n,T),e(n,l)},p(m,T){m[19]===1&&c.p(m,T)},d(m){m&&i(r),c&&c.d(m),m&&i(n)}}}function ga(a){let r,n;return{c(){r=_("img"),this.h()},l(l){r=v(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Yr(r.src,n=ha)||t(r,"src",n),t(r,"alt","Down arrow"),t(r,"class","arrow-icon svelte-1crkxs9")},m(l,c){be(l,r,c)},p:$e,d(l){l&&i(r)}}}function wa(a){let r,n;return{c(){r=_("img"),this.h()},l(l){r=v(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Yr(r.src,n=ua)||t(r,"src",n),t(r,"alt","Up arrow"),t(r,"class","arrow-icon svelte-1crkxs9")},m(l,c){be(l,r,c)},p:$e,d(l){l&&i(r)}}}function Ur(a){let r;return{c(){r=E("line"),this.h()},l(n){r=C(n,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),u(r).forEach(i),this.h()},h(){t(r,"x1",a[19]*A/13),t(r,"y1",5),t(r,"x2",a[19]*A/13),t(r,"y2",45),t(r,"stroke","#333333"),t(r,"stroke-width","1")},m(n,l){be(n,r,l)},p:$e,d(n){n&&i(r)}}}function Or(a){let r,n,l,c,m,T=a[18]+1+"",oe,S,K=a[10]+"",Y,de,X,y,w,M,I,F=a[15]+"",$,ee,V,P,D,j,te,re,fe,z,H,ne,W,ie,_e,Pe;function p(f,g){if(f[16]>0)return wa;if(f[16]<0)return ga}let J=p(a),N=J&&J(a),q=[1,2,3,4,5,6,7,8,9,10,11,12],R=[];for(let f=0;f<12;f+=1)R[f]=Ur(Wr(a,q,f));return{c(){r=_("div"),n=_("div"),l=E("svg"),c=E("line"),m=E("text"),oe=s(T),S=s(". "),Y=s(K),de=k(),X=_("div"),N&&N.c(),y=k(),w=_("div"),M=E("svg"),I=E("text"),$=s(F),ee=k(),V=_("div"),P=E("svg");for(let f=0;f<12;f+=1)R[f].c();D=E("line"),re=E("path"),z=E("circle"),W=E("circle"),this.h()},l(f){r=v(f,"DIV",{class:!0});var g=u(r);n=v(g,"DIV",{class:!0});var x=u(n);l=C(x,"svg",{width:!0,height:!0,class:!0});var pe=u(l);c=C(pe,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),u(c).forEach(i),m=C(pe,"text",{x:!0,y:!0,class:!0});var xe=u(m);oe=o(xe,T),S=o(xe,". "),Y=o(xe,K),xe.forEach(i),pe.forEach(i),x.forEach(i),de=b(g),X=v(g,"DIV",{class:!0});var Le=u(X);N&&N.l(Le),Le.forEach(i),y=b(g),w=v(g,"DIV",{class:!0});var je=u(w);M=C(je,"svg",{width:!0,height:!0,class:!0});var Be=u(M);I=C(Be,"text",{x:!0,y:!0,class:!0});var Ge=u(I);$=o(Ge,F),Ge.forEach(i),Be.forEach(i),je.forEach(i),ee=b(g),V=v(g,"DIV",{class:!0,style:!0});var Ke=u(V);P=C(Ke,"svg",{height:!0,width:!0,class:!0});var ve=u(P);for(let Se=0;Se<12;Se+=1)R[Se].l(ve);D=C(ve,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),u(D).forEach(i),re=C(ve,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),u(re).forEach(i),z=C(ve,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),u(z).forEach(i),W=C(ve,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0}),u(W).forEach(i),ve.forEach(i),Ke.forEach(i),g.forEach(i),this.h()},h(){t(c,"x1","5"),t(c,"y1","15"),t(c,"x2","5"),t(c,"y2",Ye-15),t(c,"stroke","#fff"),t(c,"stroke-width","5"),t(m,"x","12"),t(m,"y","31"),t(m,"class","textCity svelte-1crkxs9"),t(l,"width","150"),t(l,"height",Ye),t(l,"class","region-bar"),t(n,"class","left svelte-1crkxs9"),t(X,"class","arrow svelte-1crkxs9"),t(I,"x","50"),t(I,"y","45"),t(I,"class","textPercent svelte-1crkxs9"),t(M,"width","50"),t(M,"height",Ye),t(M,"class","region-bar"),t(w,"class","number svelte-1crkxs9"),t(D,"x1","0"),t(D,"y1",j=a[14]),t(D,"x2",A),t(D,"y2",te=a[14]),t(D,"stroke","#D0D1C9"),t(D,"stroke-width","1"),t(D,"stroke-dasharray","4"),t(re,"d",fe=a[11]),t(re,"stroke","white"),t(re,"stroke-width","2"),t(re,"fill","none"),t(z,"cx",H=a[12].cx),t(z,"cy",ne=a[12].cy),t(z,"r","2"),t(z,"fill","white"),t(W,"cx",ie=a[13].cx),t(W,"cy",_e=a[13].cy),t(W,"r","2"),t(W,"fill","white"),t(W,"stroke","white"),t(P,"height",Ye),t(P,"width",A),t(P,"class","chart svelte-1crkxs9"),t(V,"class","chart-container svelte-1crkxs9"),lr(V,"width",A),t(r,"class","chart-wrapper svelte-1crkxs9"),la(()=>a[7].call(r))},m(f,g){be(f,r,g),e(r,n),e(n,l),e(l,c),e(l,m),e(m,oe),e(m,S),e(m,Y),e(r,de),e(r,X),N&&N.m(X,null),e(r,y),e(r,w),e(w,M),e(M,I),e(I,$),e(r,ee),e(r,V),e(V,P);for(let x=0;x<12;x+=1)R[x]&&R[x].m(P,null);e(P,D),e(P,re),e(P,z),e(P,W),Pe=sa(r,a[7].bind(r))},p(f,g){if(g&2&&K!==(K=f[10]+"")&&Br(Y,K),J===(J=p(f))&&N?N.p(f,g):(N&&N.d(1),N=J&&J(f),N&&(N.c(),N.m(X,null))),g&2&&F!==(F=f[15]+"")&&Br($,F),g&0){q=[1,2,3,4,5,6,7,8,9,10,11,12];let x;for(x=0;x<12;x+=1){const pe=Wr(f,q,x);R[x]?R[x].p(pe,g):(R[x]=Ur(pe),R[x].c(),R[x].m(P,D))}for(;x<12;x+=1)R[x].d(1)}g&2&&j!==(j=f[14])&&t(D,"y1",j),g&2&&te!==(te=f[14])&&t(D,"y2",te),g&2&&fe!==(fe=f[11])&&t(re,"d",fe),g&2&&H!==(H=f[12].cx)&&t(z,"cx",H),g&2&&ne!==(ne=f[12].cy)&&t(z,"cy",ne),g&2&&ie!==(ie=f[13].cx)&&t(W,"cx",ie),g&2&&_e!==(_e=f[13].cy)&&t(W,"cy",_e)},d(f){f&&i(r),N&&N.d(),sr(R,f),Pe()}}}function ka(a){let r,n,l,c,m,T,oe,S,K,Y,de,X,y,w,M,I,F,$,ee,V,P,D,j,te,re=a[2].update_date+"",fe,z,H,ne,W=a[2].year2+"",ie,_e,Pe=a[2].year1+"",p,J,N,q,R,f=a[2].monthName+"",g,x,pe=a[2].year1+"",xe,Le,je=a[2].monthName+"",Be,Ge,Ke=a[2].year1+"",ve,Se,et,ge,tt,or=a[2].year2+"",rt,at,nr=a[2].year1+"",lt,st,ot,L,nt,ir=a[2].monthName+"",it,ct,cr=a[2].day1_num+"",ht,ut,hr=a[2].year1+"",dt,ft,ur=a[2].monthName+"",_t,vt,dr=a[2].day2_num+"",mt,yt,fr=a[2].year2+"",pt,gt,wt,ae,Ve,ce,kt,_r=a[2].monthName+"",bt,xt,vr=a[2].year1+"",Et,Ct,Dt,Fe,He,U,Ee,Tt,Ce,It,Q,mr=a[2].monthNumber+"",Mt,Nt,yr=a[2].year2+"",Pt,St,pr=a[2].monthNumber+"",Vt,zt,gr=a[2].year1+"",At,De,wr=a[2].year1+"",qt,Te,kr=a[2].year2+"",Lt,me,he,Bt,Ze,O,Gt,Ft,Ht,Wt,Qe,Jt,Rt,ue,Ut,We,Ot,Yt,Je,jt,Kt,ze,Qt,Zt,Xt,$t,er,tr,Xe;r=new oa({});let rr=[2,3,4,5,6,7,8,9,10,11,12,1,2],le=[];for(let d=0;d<13;d+=1)le[d]=Rr(Jr(a,rr,d));let Re=a[1],B=[];for(let d=0;d<Re.length;d+=1)B[d]=Or(Hr(a,Re,d));return{c(){Zr(r.$$.fragment),n=k(),l=_("main"),c=_("div"),m=_("h1"),T=s("Canada Recovery Trends"),oe=k(),S=_("p"),K=s("By "),Y=_("a"),de=s("Karen Chapple"),X=s(", "),y=_("a"),w=s("Julia Greenberg"),M=s(", "),I=_("a"),F=s("Jeff Allen"),$=s(", "),ee=_("a"),V=s("Irene Chang"),P=k(),D=_("p"),j=_("i"),te=s("Updated "),fe=s(re),z=k(),H=_("p"),ne=s("Data on cell phone activity (a.k.a. footfall) trends for the last year provide a picture of how Canadian downtowns are faring. We look here at year-over-year ("),ie=s(W),_e=s(" vs. "),p=s(Pe),J=s(") trends."),N=k(),q=_("p"),R=s("The solid line represents the number of daily unique visitors in the downtown area. The dotted line provides a baseline of the average level of activity in "),g=s(f),x=k(),xe=s(pe),Le=s(", allowing for comparison to subsequent months. When the solid line extends above the dotted baseline, downtown activity is greater compared to in "),Be=s(je),Ge=k(),ve=s(Ke),Se=s(". When it dips below the dotted line, activity is on a downswing."),et=k(),ge=_("p"),tt=s("Note: Trends are based on data from Spectus, but use different cell phone data providers from our rankings analysis. The trendlines measure the average level of activity over the course of the year, while the ranking metric shows the percent difference in the average number of unique visitors in "),rt=s(or),at=s(" versus the same month in "),lt=s(nr),st=s("."),ot=k(),L=_("h4"),nt=s("Visits to Downtown ("),it=s(ir),ct=k(),ht=s(cr),ut=s(", "),dt=s(hr),ft=s(" to "),_t=s(ur),vt=k(),mt=s(dr),yt=s(", "),pt=s(fr),gt=s(")"),wt=k(),ae=_("p"),Ve=E("svg"),ce=E("line"),kt=k(),bt=s(_r),xt=k(),Et=s(vr),Ct=s(" average"),Dt=k(),Fe=_("div"),He=_("div"),U=E("svg"),Ee=E("text"),Tt=s("City"),Ce=E("text"),It=s("Percent Change in Visits"),Q=E("text"),Mt=s(mr),Nt=s("/"),Pt=s(yr),St=s(" vs. "),Vt=s(pr),zt=s("/"),At=s(gr),De=E("text"),qt=s(wr),Te=E("text"),Lt=s(kr),me=E("line");for(let d=0;d<13;d+=1)le[d].c();he=E("line"),Bt=k();for(let d=0;d<B.length;d+=1)B[d].c();Ze=k(),O=_("div"),Gt=_("br"),Ft=k(),Ht=_("br"),Wt=k(),Qe=_("h4"),Jt=s("More Information"),Rt=k(),ue=_("p"),Ut=s("The trend lines are fit from daily data via a "),We=_("a"),Ot=s("LOESS"),Yt=s(" curve. You can download the raw daily data shown to fit these curves "),Je=_("a"),jt=s("from this link"),Kt=s(". The data on the charts are based on the `normalized_distinct_clean` column, which pertains to the number of unique daily visitors normalized by the total number in the metro area. The trend-line and summary statistics shown are calculated in JavaScript (code is on "),ze=_("a"),Qt=s("GitHub"),Zt=s(")"),Xt=k(),$t=_("br"),er=k(),tr=_("br"),this.h()},l(d){Xr(r.$$.fragment,d),n=b(d),l=v(d,"MAIN",{});var G=u(l);c=v(G,"DIV",{class:!0});var h=u(c);m=v(h,"H1",{});var Ie=u(m);T=o(Ie,"Canada Recovery Trends"),Ie.forEach(i),oe=b(h),S=v(h,"P",{});var we=u(S);K=o(we,"By "),Y=v(we,"A",{href:!0});var br=u(Y);de=o(br,"Karen Chapple"),br.forEach(i),X=o(we,", "),y=v(we,"A",{href:!0});var xr=u(y);w=o(xr,"Julia Greenberg"),xr.forEach(i),M=o(we,", "),I=v(we,"A",{href:!0});var Er=u(I);F=o(Er,"Jeff Allen"),Er.forEach(i),$=o(we,", "),ee=v(we,"A",{href:!0});var Cr=u(ee);V=o(Cr,"Irene Chang"),Cr.forEach(i),we.forEach(i),P=b(h),D=v(h,"P",{});var Dr=u(D);j=v(Dr,"I",{});var ar=u(j);te=o(ar,"Updated "),fe=o(ar,re),ar.forEach(i),Dr.forEach(i),z=b(h),H=v(h,"P",{});var Ue=u(H);ne=o(Ue,"Data on cell phone activity (a.k.a. footfall) trends for the last year provide a picture of how Canadian downtowns are faring. We look here at year-over-year ("),ie=o(Ue,W),_e=o(Ue," vs. "),p=o(Ue,Pe),J=o(Ue,") trends."),Ue.forEach(i),N=b(h),q=v(h,"P",{});var ye=u(q);R=o(ye,"The solid line represents the number of daily unique visitors in the downtown area. The dotted line provides a baseline of the average level of activity in "),g=o(ye,f),x=b(ye),xe=o(ye,pe),Le=o(ye,", allowing for comparison to subsequent months. When the solid line extends above the dotted baseline, downtown activity is greater compared to in "),Be=o(ye,je),Ge=b(ye),ve=o(ye,Ke),Se=o(ye,". When it dips below the dotted line, activity is on a downswing."),ye.forEach(i),et=b(h),ge=v(h,"P",{});var Oe=u(ge);tt=o(Oe,"Note: Trends are based on data from Spectus, but use different cell phone data providers from our rankings analysis. The trendlines measure the average level of activity over the course of the year, while the ranking metric shows the percent difference in the average number of unique visitors in "),rt=o(Oe,or),at=o(Oe," versus the same month in "),lt=o(Oe,nr),st=o(Oe,"."),Oe.forEach(i),ot=b(h),L=v(h,"H4",{});var Z=u(L);nt=o(Z,"Visits to Downtown ("),it=o(Z,ir),ct=b(Z),ht=o(Z,cr),ut=o(Z,", "),dt=o(Z,hr),ft=o(Z," to "),_t=o(Z,ur),vt=b(Z),mt=o(Z,dr),yt=o(Z,", "),pt=o(Z,fr),gt=o(Z,")"),Z.forEach(i),wt=b(h),ae=v(h,"P",{style:!0});var Ae=u(ae);Ve=C(Ae,"svg",{height:!0,width:!0});var Tr=u(Ve);ce=C(Tr,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),u(ce).forEach(i),Tr.forEach(i),kt=b(Ae),bt=o(Ae,_r),xt=b(Ae),Et=o(Ae,vr),Ct=o(Ae," average"),Ae.forEach(i),h.forEach(i),Dt=b(G),Fe=v(G,"DIV",{class:!0});var Ir=u(Fe);He=v(Ir,"DIV",{class:!0});var Mr=u(He);U=C(Mr,"svg",{width:!0,height:!0,class:!0});var ke=u(U);Ee=C(ke,"text",{x:!0,y:!0,class:!0});var Nr=u(Ee);Tt=o(Nr,"City"),Nr.forEach(i),Ce=C(ke,"text",{x:!0,y:!0,class:!0});var Pr=u(Ce);It=o(Pr,"Percent Change in Visits"),Pr.forEach(i),Q=C(ke,"text",{x:!0,y:!0,class:!0});var Me=u(Q);Mt=o(Me,mr),Nt=o(Me,"/"),Pt=o(Me,yr),St=o(Me," vs. "),Vt=o(Me,pr),zt=o(Me,"/"),At=o(Me,gr),Me.forEach(i),De=C(ke,"text",{x:!0,y:!0,class:!0});var Sr=u(De);qt=o(Sr,wr),Sr.forEach(i),Te=C(ke,"text",{x:!0,y:!0,class:!0});var Vr=u(Te);Lt=o(Vr,kr),Vr.forEach(i),me=C(ke,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),u(me).forEach(i);for(let qe=0;qe<13;qe+=1)le[qe].l(ke);he=C(ke,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),u(he).forEach(i),ke.forEach(i),Mr.forEach(i),Ir.forEach(i),Bt=b(G);for(let qe=0;qe<B.length;qe+=1)B[qe].l(G);Ze=b(G),O=v(G,"DIV",{class:!0});var se=u(O);Gt=v(se,"BR",{}),Ft=b(se),Ht=v(se,"BR",{}),Wt=b(se),Qe=v(se,"H4",{});var zr=u(Qe);Jt=o(zr,"More Information"),zr.forEach(i),Rt=b(se),ue=v(se,"P",{});var Ne=u(ue);Ut=o(Ne,"The trend lines are fit from daily data via a "),We=v(Ne,"A",{href:!0});var Ar=u(We);Ot=o(Ar,"LOESS"),Ar.forEach(i),Yt=o(Ne," curve. You can download the raw daily data shown to fit these curves "),Je=v(Ne,"A",{href:!0});var qr=u(Je);jt=o(qr,"from this link"),qr.forEach(i),Kt=o(Ne,". The data on the charts are based on the `normalized_distinct_clean` column, which pertains to the number of unique daily visitors normalized by the total number in the metro area. The trend-line and summary statistics shown are calculated in JavaScript (code is on "),ze=v(Ne,"A",{href:!0,target:!0});var Lr=u(ze);Qt=o(Lr,"GitHub"),Lr.forEach(i),Zt=o(Ne,")"),Ne.forEach(i),Xt=b(se),$t=v(se,"BR",{}),er=b(se),tr=v(se,"BR",{}),se.forEach(i),G.forEach(i),this.h()},h(){t(Y,"href","https://schoolofcities.utoronto.ca/people/karen-chapple/"),t(y,"href","https://www.urbandisplacement.org/team/julia-greenberg/"),t(I,"href","https://schoolofcities.utoronto.ca/people/jeff-allen/"),t(ee,"href","https://www.linkedin.com/in/irene-kcc/"),t(ce,"x1","0"),t(ce,"y1","5"),t(ce,"x2","50"),t(ce,"y2","5"),t(ce,"stroke","white"),t(ce,"stroke-width","1"),t(ce,"stroke-dasharray","4"),t(Ve,"height","10"),t(Ve,"width","50"),lr(ae,"padding-top","10px"),lr(ae,"padding-bottom","10px"),t(c,"class","text svelte-1crkxs9"),t(Ee,"x","12"),t(Ee,"y","35"),t(Ee,"class","textCity svelte-1crkxs9"),t(Ce,"x","235"),t(Ce,"y","15"),t(Ce,"class","textLabel svelte-1crkxs9"),t(Q,"x","235"),t(Q,"y","35"),t(Q,"class","textLabel svelte-1crkxs9"),t(De,"x",260+(13-a[2].monthNumber)/2*A/13),t(De,"y","15"),t(De,"class","textMonth svelte-1crkxs9"),t(Te,"x",260+(13-a[2].monthNumber)*A/13+a[2].monthNumber/2*A/13),t(Te,"y","15"),t(Te,"class","textMonth svelte-1crkxs9"),t(me,"x1","260"),t(me,"y1",45),t(me,"x2",260+A),t(me,"y2",45),t(me,"stroke","white"),t(me,"stroke-width","1"),t(he,"x1",259+A),t(he,"y1",45),t(he,"x2",259+A),t(he,"y2",40),t(he,"stroke","white"),t(he,"stroke-width","1"),t(U,"width","760"),t(U,"height",Ye),t(U,"class","region-bar"),t(He,"class","left svelte-1crkxs9"),t(Fe,"class","chart-wrapper svelte-1crkxs9"),t(We,"href","https://en.wikipedia.org/wiki/Local_regression"),t(Je,"href","/trend_canada_feb1_2024_to_feb28_2025.csv"),t(ze,"href","https://github.com/schoolofcities/downtown-recovery/blob/main/src/routes/charts/canada_trends/%2Bpage.svelte"),t(ze,"target","_blank"),t(O,"class","text svelte-1crkxs9")},m(d,G){$r(r,d,G),be(d,n,G),be(d,l,G),e(l,c),e(c,m),e(m,T),e(c,oe),e(c,S),e(S,K),e(S,Y),e(Y,de),e(S,X),e(S,y),e(y,w),e(S,M),e(S,I),e(I,F),e(S,$),e(S,ee),e(ee,V),e(c,P),e(c,D),e(D,j),e(j,te),e(j,fe),e(c,z),e(c,H),e(H,ne),e(H,ie),e(H,_e),e(H,p),e(H,J),e(c,N),e(c,q),e(q,R),e(q,g),e(q,x),e(q,xe),e(q,Le),e(q,Be),e(q,Ge),e(q,ve),e(q,Se),e(c,et),e(c,ge),e(ge,tt),e(ge,rt),e(ge,at),e(ge,lt),e(ge,st),e(c,ot),e(c,L),e(L,nt),e(L,it),e(L,ct),e(L,ht),e(L,ut),e(L,dt),e(L,ft),e(L,_t),e(L,vt),e(L,mt),e(L,yt),e(L,pt),e(L,gt),e(c,wt),e(c,ae),e(ae,Ve),e(Ve,ce),e(ae,kt),e(ae,bt),e(ae,xt),e(ae,Et),e(ae,Ct),e(l,Dt),e(l,Fe),e(Fe,He),e(He,U),e(U,Ee),e(Ee,Tt),e(U,Ce),e(Ce,It),e(U,Q),e(Q,Mt),e(Q,Nt),e(Q,Pt),e(Q,St),e(Q,Vt),e(Q,zt),e(Q,At),e(U,De),e(De,qt),e(U,Te),e(Te,Lt),e(U,me);for(let h=0;h<13;h+=1)le[h]&&le[h].m(U,null);e(U,he),e(l,Bt);for(let h=0;h<B.length;h+=1)B[h]&&B[h].m(l,null);e(l,Ze),e(l,O),e(O,Gt),e(O,Ft),e(O,Ht),e(O,Wt),e(O,Qe),e(Qe,Jt),e(O,Rt),e(O,ue),e(ue,Ut),e(ue,We),e(We,Ot),e(ue,Yt),e(ue,Je),e(Je,jt),e(ue,Kt),e(ue,ze),e(ze,Qt),e(ue,Zt),e(O,Xt),e(O,$t),e(O,er),e(O,tr),Xe=!0},p(d,[G]){if(G&0){rr=[2,3,4,5,6,7,8,9,10,11,12,1,2];let h;for(h=0;h<13;h+=1){const Ie=Jr(d,rr,h);le[h]?le[h].p(Ie,G):(le[h]=Rr(Ie),le[h].c(),le[h].m(U,he))}for(;h<13;h+=1)le[h].d(1)}if(G&3){Re=d[1];let h;for(h=0;h<Re.length;h+=1){const Ie=Hr(d,Re,h);B[h]?B[h].p(Ie,G):(B[h]=Or(Ie),B[h].c(),B[h].m(l,Ze))}for(;h<B.length;h+=1)B[h].d(1);B.length=Re.length}},i(d){Xe||(ea(r.$$.fragment,d),Xe=!0)},o(d){ta(r.$$.fragment,d),Xe=!1},d(d){ra(r,d),d&&i(n),d&&i(l),sr(le,d),sr(B,d)}}}let A=500;const Ye=50,ba=0,xa=5,Ea=0,Ca=5;function Da(a,r,n){let l,c={monthName:"February",monthNumber:2,year1:2024,year2:2025,day1:"2024-02-01",day2:"2025-02-28",day1_num:1,day2_num:28,update_date:"2025-03-24"};async function m(){try{const w=await(await fetch("/trend_canada_feb1_2024_to_feb28_2025.csv")).text();n(3,T=ma(w)),n(4,K=[...new Set(T.map(M=>M.city))])}catch(y){console.error("Error loading CSV data:",y)}}let T=[];aa(()=>{m(),n(6,l=Fr.filter(y=>y.region==="Canada").map(y=>y.city))});let oe;const S=da("%Y-%m-%d");let K=[],Y=[],de=[];console.log("thecities: ",K);function X(){oe=this.clientWidth,n(0,oe)}return a.$$.update=()=>{a.$$.dirty&64&&console.log("filteredCities: ",l),a.$$.dirty&88&&n(5,Y=K.map(y=>{if(l.includes(y)){const w=T.filter(M=>{const I=new Date(M.date),F=new Date(c.day1),$=new Date(c.day2);return M.city===y&&I>=F&&I<=$});if(w.length>0){console.log("cityData");const M=w.map(p=>parseFloat(p.normalized_distinct_clean)),I=T.filter(p=>{const J=new Date(p.date+"T00:00:00Z");return J.getUTCFullYear()===c.year1&&J.getUTCMonth()===c.monthNumber-1&&p.city===y});console.log("month1data: ",I);const F=Gr(I,p=>parseFloat(p.normalized_distinct_clean)),$=T.filter(p=>{const J=new Date(p.date+"T00:00:00Z");return J.getUTCFullYear()===c.year2&&J.getUTCMonth()===c.monthNumber-1&&p.city===y});console.log("month2data: ",$);const ee=Gr($,p=>parseFloat(p.normalized_distinct_clean)),V=na().x(p=>S(p.date)).y(p=>parseFloat(p.normalized_distinct_clean)).bandwidth(.031),P=Math.min(...V(w).map(p=>p[1]),ia(M)),D=Math.max(...V(w).map(p=>p[1]),ca(M)),j=fa().domain([new Date(c.day1),new Date(c.day2)]).range([Ca,A-xa]),te=va().domain([P,D]).range([Ye-Ea,ba]),fe=_a().x(p=>j(p[0])).y(p=>te(p[1]))(V(w));y==="Quebec"&&(console.log(w),console.log(V(w)),console.log(D)),console.log("city: ",y),console.log("month1: ",F),console.log("month2: ",ee);const z=(ee-F)/F*100,H=z.toFixed(2)+"%";console.log("percentageChange: ",z);const ne=V(w)[0],W={cx:j(ne[0]),cy:te(ne[1]),radius:6,fill:"red",stroke:"red","stroke-width":2};console.log("cityData length:",w.length);const ie=V(w)[391],_e={cx:j(ie[0]),cy:te(ie[1]),radius:6,fill:"red",stroke:"#6aa687","stroke-width":2},Pe=te(F);return{city:y,regressionLine:fe,meanLine:Pe,startCircle:W,endCircle:_e,perChangeDisplay:H,percentageChange:z}}}}).filter(y=>y!==void 0)),a.$$.dirty&32&&n(1,de=Y.slice().sort((y,w)=>w.percentageChange-y.percentageChange))},n(6,l=Fr.filter(y=>y.region==="Canada").map(y=>y.city)),[oe,de,c,T,K,Y,l,X]}class qa extends jr{constructor(r){super(),Kr(this,r,Da,ka,Qr,{})}}export{qa as component,Aa as universal};
