import{S as Kt,i as $t,s as en,F as zr,k as q,a as ue,l as P,m as E,c as se,h as w,n as s,U as De,b as V,C as M,P as Be,G as jr,H as Zr,I as Xr,g as Te,d as Fe,Q as Pe,E as Pt,o as tn,q as G,r as J,p as ft,u as je,L as z,M as j,V as bn,R as wr,W as Qr,w as Mn,D as Vt,y as Mt,e as Ue,z as kt,K as Gr,A as xt,O as Jr,f as br,B as Tt,v as Mr}from"../chunks/index.c2855d66.js";import{H as Kr}from"../chunks/global.87bff1a6.js";import{r as kr,b as xr,c as ct}from"../chunks/stores.7f879f90.js";import"../chunks/transform.4d2927c0.js";import{c as $r}from"../chunks/csv.3ac754ad.js";function bt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ei(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function nn(e){let t,n,r;e.length!==2?(t=bt,n=(u,a)=>bt(e(u),a),r=(u,a)=>e(u)-a):(t=e===bt||e===ei?e:ti,n=e,r=e);function i(u,a,f=0,c=u.length){if(f<c){if(t(a,a)!==0)return c;do{const h=f+c>>>1;n(u[h],a)<0?f=h+1:c=h}while(f<c)}return f}function l(u,a,f=0,c=u.length){if(f<c){if(t(a,a)!==0)return c;do{const h=f+c>>>1;n(u[h],a)<=0?f=h+1:c=h}while(f<c)}return f}function o(u,a,f=0,c=u.length){const h=i(u,a,f,c-1);return h>f&&r(u[h-1],a)>-r(u[h],a)?h-1:h}return{left:i,center:o,right:l}}function ti(){return 0}function ni(e){return e===null?NaN:+e}const ri=nn(bt),ii=ri.right;nn(ni).center;const li=ii;function Ht(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let l of e)(l=t(l,++i,e))!=null&&(n===void 0?l>=l&&(n=r=l):(n>l&&(n=l),r<l&&(r=l)))}return[n,r]}class Bt extends Map{constructor(t,n=ui){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(kn(this,t))}has(t){return super.has(kn(this,t))}set(t,n){return super.set(oi(this,t),n)}delete(t){return super.delete(ai(this,t))}}function kn({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function oi({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function ai({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function ui(e){return e!==null&&typeof e=="object"?e.valueOf():e}function xn(e){return e}function si(e,...t){return fi(e,xn,xn,t)}function fi(e,t,n,r){return function i(l,o){if(o>=r.length)return n(l);const u=new Bt,a=r[o++];let f=-1;for(const c of l){const h=a(c,++f,l),d=u.get(h);d?d.push(c):u.set(h,[c])}for(const[c,h]of u)u.set(c,i(h,o));return t(u)}(e,0)}const ci=Math.sqrt(50),hi=Math.sqrt(10),gi=Math.sqrt(2);function Tr(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),l=r/Math.pow(10,i),o=l>=ci?10:l>=hi?5:l>=gi?2:1;let u,a,f;return i<0?(f=Math.pow(10,-i)/o,u=Math.round(e*f),a=Math.round(t*f),u/f<e&&++u,a/f>t&&--a,f=-f):(f=Math.pow(10,i)*o,u=Math.round(e/f),a=Math.round(t/f),u*f<e&&++u,a*f>t&&--a),a<u&&.5<=n&&n<2?Tr(e,t,n*2):[u,a,f]}function Tn(e,t,n){return t=+t,e=+e,n=+n,Tr(e,t,n)[2]}function Cn(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Tn(t,e,n):Tn(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function rn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Cr(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function mt(){}var ht=.7,Ct=1/ht,rt="\\s*([+-]?\\d+)\\s*",gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Se="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",di=/^#([0-9a-f]{3,8})$/,mi=new RegExp(`^rgb\\(${rt},${rt},${rt}\\)$`),_i=new RegExp(`^rgb\\(${Se},${Se},${Se}\\)$`),pi=new RegExp(`^rgba\\(${rt},${rt},${rt},${gt}\\)$`),vi=new RegExp(`^rgba\\(${Se},${Se},${Se},${gt}\\)$`),yi=new RegExp(`^hsl\\(${gt},${Se},${Se}\\)$`),wi=new RegExp(`^hsla\\(${gt},${Se},${Se},${gt}\\)$`),Dn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rn(mt,dt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Un,formatHex:Un,formatHex8:bi,formatHsl:Mi,formatRgb:Sn,toString:Sn});function Un(){return this.rgb().formatHex()}function bi(){return this.rgb().formatHex8()}function Mi(){return Dr(this).formatHsl()}function Sn(){return this.rgb().formatRgb()}function dt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=di.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Nn(t):n===3?new pe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?yt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?yt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=mi.exec(e))?new pe(t[1],t[2],t[3],1):(t=_i.exec(e))?new pe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pi.exec(e))?yt(t[1],t[2],t[3],t[4]):(t=vi.exec(e))?yt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=yi.exec(e))?Fn(t[1],t[2]/100,t[3]/100,1):(t=wi.exec(e))?Fn(t[1],t[2]/100,t[3]/100,t[4]):Dn.hasOwnProperty(e)?Nn(Dn[e]):e==="transparent"?new pe(NaN,NaN,NaN,0):null}function Nn(e){return new pe(e>>16&255,e>>8&255,e&255,1)}function yt(e,t,n,r){return r<=0&&(e=t=n=NaN),new pe(e,t,n,r)}function ki(e){return e instanceof mt||(e=dt(e)),e?(e=e.rgb(),new pe(e.r,e.g,e.b,e.opacity)):new pe}function zt(e,t,n,r){return arguments.length===1?ki(e):new pe(e,t,n,r??1)}function pe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}rn(pe,zt,Cr(mt,{brighter(e){return e=e==null?Ct:Math.pow(Ct,e),new pe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ht:Math.pow(ht,e),new pe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new pe(ze(this.r),ze(this.g),ze(this.b),Dt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:En,formatHex:En,formatHex8:xi,formatRgb:An,toString:An}));function En(){return`#${Ve(this.r)}${Ve(this.g)}${Ve(this.b)}`}function xi(){return`#${Ve(this.r)}${Ve(this.g)}${Ve(this.b)}${Ve((isNaN(this.opacity)?1:this.opacity)*255)}`}function An(){const e=Dt(this.opacity);return`${e===1?"rgb(":"rgba("}${ze(this.r)}, ${ze(this.g)}, ${ze(this.b)}${e===1?")":`, ${e})`}`}function Dt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ze(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ve(e){return e=ze(e),(e<16?"0":"")+e.toString(16)}function Fn(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ce(e,t,n,r)}function Dr(e){if(e instanceof Ce)return new Ce(e.h,e.s,e.l,e.opacity);if(e instanceof mt||(e=dt(e)),!e)return new Ce;if(e instanceof Ce)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),l=Math.max(t,n,r),o=NaN,u=l-i,a=(l+i)/2;return u?(t===l?o=(n-r)/u+(n<r)*6:n===l?o=(r-t)/u+2:o=(t-n)/u+4,u/=a<.5?l+i:2-l-i,o*=60):u=a>0&&a<1?0:o,new Ce(o,u,a,e.opacity)}function Ti(e,t,n,r){return arguments.length===1?Dr(e):new Ce(e,t,n,r??1)}function Ce(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}rn(Ce,Ti,Cr(mt,{brighter(e){return e=e==null?Ct:Math.pow(Ct,e),new Ce(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ht:Math.pow(ht,e),new Ce(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new pe(Lt(e>=240?e-240:e+120,i,r),Lt(e,i,r),Lt(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ce(Hn(this.h),wt(this.s),wt(this.l),Dt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Dt(this.opacity);return`${e===1?"hsl(":"hsla("}${Hn(this.h)}, ${wt(this.s)*100}%, ${wt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Hn(e){return e=(e||0)%360,e<0?e+360:e}function wt(e){return Math.max(0,Math.min(1,e||0))}function Lt(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ln=e=>()=>e;function Ci(e,t){return function(n){return e+n*t}}function Di(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ui(e){return(e=+e)==1?Ur:function(t,n){return n-t?Di(t,n,e):ln(isNaN(t)?n:t)}}function Ur(e,t){var n=t-e;return n?Ci(e,n):ln(isNaN(e)?t:e)}const Ln=function e(t){var n=Ui(t);function r(i,l){var o=n((i=zt(i)).r,(l=zt(l)).r),u=n(i.g,l.g),a=n(i.b,l.b),f=Ur(i.opacity,l.opacity);return function(c){return i.r=o(c),i.g=u(c),i.b=a(c),i.opacity=f(c),i+""}}return r.gamma=e,r}(1);function Si(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(l){for(i=0;i<n;++i)r[i]=e[i]*(1-l)+t[i]*l;return r}}function Ni(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ei(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),l=new Array(n),o;for(o=0;o<r;++o)i[o]=on(e[o],t[o]);for(;o<n;++o)l[o]=t[o];return function(u){for(o=0;o<r;++o)l[o]=i[o](u);return l}}function Ai(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ut(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Fi(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=on(e[i],t[i]):r[i]=t[i];return function(l){for(i in n)r[i]=n[i](l);return r}}var jt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yt=new RegExp(jt.source,"g");function Hi(e){return function(){return e}}function Li(e){return function(t){return e(t)+""}}function Yi(e,t){var n=jt.lastIndex=Yt.lastIndex=0,r,i,l,o=-1,u=[],a=[];for(e=e+"",t=t+"";(r=jt.exec(e))&&(i=Yt.exec(t));)(l=i.index)>n&&(l=t.slice(n,l),u[o]?u[o]+=l:u[++o]=l),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,a.push({i:o,x:Ut(r,i)})),n=Yt.lastIndex;return n<t.length&&(l=t.slice(n),u[o]?u[o]+=l:u[++o]=l),u.length<2?a[0]?Li(a[0].x):Hi(t):(t=a.length,function(f){for(var c=0,h;c<t;++c)u[(h=a[c]).i]=h.x(f);return u.join("")})}function on(e,t){var n=typeof t,r;return t==null||n==="boolean"?ln(t):(n==="number"?Ut:n==="string"?(r=dt(t))?(t=r,Ln):Yi:t instanceof dt?Ln:t instanceof Date?Ai:Ni(t)?Si:Array.isArray(t)?Ei:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Fi:Ut)(e,t)}function Oi(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}const Zt=Math.PI,Xt=2*Zt,qe=1e-6,Ii=Xt-qe;function Sr(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Wi(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Sr;const n=10**t;return function(r){this._+=r[0];for(let i=1,l=r.length;i<l;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Ri{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Sr:Wi(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,l,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+l},${this._y1=+o}`}arcTo(t,n,r,i,l){if(t=+t,n=+n,r=+r,i=+i,l=+l,l<0)throw new Error(`negative radius: ${l}`);let o=this._x1,u=this._y1,a=r-t,f=i-n,c=o-t,h=u-n,d=c*c+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>qe)if(!(Math.abs(h*a-f*c)>qe)||!l)this._append`L${this._x1=t},${this._y1=n}`;else{let g=r-o,p=i-u,m=a*a+f*f,y=g*g+p*p,x=Math.sqrt(m),D=Math.sqrt(d),U=l*Math.tan((Zt-Math.acos((m+d-y)/(2*x*D)))/2),L=U/D,K=U/x;Math.abs(L-1)>qe&&this._append`L${t+L*c},${n+L*h}`,this._append`A${l},${l},0,0,${+(h*g>c*p)},${this._x1=t+K*a},${this._y1=n+K*f}`}}arc(t,n,r,i,l,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),a=r*Math.sin(i),f=t+u,c=n+a,h=1^o,d=o?i-l:l-i;this._x1===null?this._append`M${f},${c}`:(Math.abs(this._x1-f)>qe||Math.abs(this._y1-c)>qe)&&this._append`L${f},${c}`,r&&(d<0&&(d=d%Xt+Xt),d>Ii?this._append`A${r},${r},0,1,${h},${t-u},${n-a}A${r},${r},0,1,${h},${this._x1=f},${this._y1=c}`:d>qe&&this._append`A${r},${r},0,${+(d>=Zt)},${h},${this._x1=t+r*Math.cos(l)},${this._y1=n+r*Math.sin(l)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Nr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Yn=Symbol("implicit");function Er(){var e=new Bt,t=[],n=[],r=Yn;function i(l){let o=e.get(l);if(o===void 0){if(r!==Yn)return r;e.set(l,o=t.push(l)-1)}return n[o%n.length]}return i.domain=function(l){if(!arguments.length)return t.slice();t=[],e=new Bt;for(const o of l)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(l){return arguments.length?(n=Array.from(l),i):n.slice()},i.unknown=function(l){return arguments.length?(r=l,i):r},i.copy=function(){return Er(t,n).unknown(r)},Nr.apply(i,arguments),i}function qi(e){return function(){return e}}function Pi(e){return+e}var On=[0,1];function tt(e){return e}function Qt(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:qi(isNaN(t)?NaN:.5)}function Vi(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Bi(e,t,n){var r=e[0],i=e[1],l=t[0],o=t[1];return i<r?(r=Qt(i,r),l=n(o,l)):(r=Qt(r,i),l=n(l,o)),function(u){return l(r(u))}}function zi(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),l=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Qt(e[o],e[o+1]),l[o]=n(t[o],t[o+1]);return function(u){var a=li(e,u,1,r)-1;return l[a](i[a](u))}}function ji(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Zi(){var e=On,t=On,n=on,r,i,l,o=tt,u,a,f;function c(){var d=Math.min(e.length,t.length);return o!==tt&&(o=Vi(e[0],e[d-1])),u=d>2?zi:Bi,a=f=null,h}function h(d){return d==null||isNaN(d=+d)?l:(a||(a=u(e.map(r),t,n)))(r(o(d)))}return h.invert=function(d){return o(i((f||(f=u(t,e.map(r),Ut)))(d)))},h.domain=function(d){return arguments.length?(e=Array.from(d,Pi),c()):e.slice()},h.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},h.rangeRound=function(d){return t=Array.from(d),n=Oi,c()},h.clamp=function(d){return arguments.length?(o=d?!0:tt,c()):o!==tt},h.interpolate=function(d){return arguments.length?(n=d,c()):n},h.unknown=function(d){return arguments.length?(l=d,h):l},function(d,g){return r=d,i=g,c()}}function Xi(){return Zi()(tt,tt)}function Qi(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],l=e[r],o;return l<i&&(o=n,n=r,r=o,o=i,i=l,l=o),e[n]=t.floor(i),e[r]=t.ceil(l),e}const Ot=new Date,It=new Date;function te(e,t,n,r){function i(l){return e(l=arguments.length===0?new Date:new Date(+l)),l}return i.floor=l=>(e(l=new Date(+l)),l),i.ceil=l=>(e(l=new Date(l-1)),t(l,1),e(l),l),i.round=l=>{const o=i(l),u=i.ceil(l);return l-o<u-l?o:u},i.offset=(l,o)=>(t(l=new Date(+l),o==null?1:Math.floor(o)),l),i.range=(l,o,u)=>{const a=[];if(l=i.ceil(l),u=u==null?1:Math.floor(u),!(l<o)||!(u>0))return a;let f;do a.push(f=new Date(+l)),t(l,u),e(l);while(f<l&&l<o);return a},i.filter=l=>te(o=>{if(o>=o)for(;e(o),!l(o);)o.setTime(o-1)},(o,u)=>{if(o>=o)if(u<0)for(;++u<=0;)for(;t(o,-1),!l(o););else for(;--u>=0;)for(;t(o,1),!l(o););}),n&&(i.count=(l,o)=>(Ot.setTime(+l),It.setTime(+o),e(Ot),e(It),Math.floor(n(Ot,It))),i.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?i.filter(r?o=>r(o)%l===0:o=>i.count(0,o)%l===0):i)),i}const St=te(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);St.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?te(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):St);St.range;const He=1e3,be=He*60,Le=be*60,Ye=Le*24,an=Ye*7,In=Ye*30,Wt=Ye*365,nt=te(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*He)},(e,t)=>(t-e)/He,e=>e.getUTCSeconds());nt.range;const un=te(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*He)},(e,t)=>{e.setTime(+e+t*be)},(e,t)=>(t-e)/be,e=>e.getMinutes());un.range;const Gi=te(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*be)},(e,t)=>(t-e)/be,e=>e.getUTCMinutes());Gi.range;const sn=te(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*He-e.getMinutes()*be)},(e,t)=>{e.setTime(+e+t*Le)},(e,t)=>(t-e)/Le,e=>e.getHours());sn.range;const Ji=te(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Le)},(e,t)=>(t-e)/Le,e=>e.getUTCHours());Ji.range;const _t=te(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*be)/Ye,e=>e.getDate()-1);_t.range;const fn=te(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ye,e=>e.getUTCDate()-1);fn.range;const Ki=te(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ye,e=>Math.floor(e/Ye));Ki.range;function Xe(e){return te(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*be)/an)}const Ft=Xe(0),Nt=Xe(1),$i=Xe(2),el=Xe(3),lt=Xe(4),tl=Xe(5),nl=Xe(6);Ft.range;Nt.range;$i.range;el.range;lt.range;tl.range;nl.range;function Qe(e){return te(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/an)}const Ar=Qe(0),Et=Qe(1),rl=Qe(2),il=Qe(3),ot=Qe(4),ll=Qe(5),ol=Qe(6);Ar.range;Et.range;rl.range;il.range;ot.range;ll.range;ol.range;const cn=te(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());cn.range;const al=te(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());al.range;const Oe=te(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Oe.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:te(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Oe.range;const Ze=te(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ze.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:te(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ze.range;function ul(e,t,n,r,i,l){const o=[[nt,1,He],[nt,5,5*He],[nt,15,15*He],[nt,30,30*He],[l,1,be],[l,5,5*be],[l,15,15*be],[l,30,30*be],[i,1,Le],[i,3,3*Le],[i,6,6*Le],[i,12,12*Le],[r,1,Ye],[r,2,2*Ye],[n,1,an],[t,1,In],[t,3,3*In],[e,1,Wt]];function u(f,c,h){const d=c<f;d&&([f,c]=[c,f]);const g=h&&typeof h.range=="function"?h:a(f,c,h),p=g?g.range(f,+c+1):[];return d?p.reverse():p}function a(f,c,h){const d=Math.abs(c-f)/h,g=nn(([,,y])=>y).right(o,d);if(g===o.length)return e.every(Cn(f/Wt,c/Wt,h));if(g===0)return St.every(Math.max(Cn(f,c,h),1));const[p,m]=o[d/o[g-1][2]<o[g][2]/d?g-1:g];return p.every(m)}return[u,a]}const[sl,fl]=ul(Oe,cn,Ft,_t,sn,un);function Rt(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function qt(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function at(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function cl(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,l=e.days,o=e.shortDays,u=e.months,a=e.shortMonths,f=ut(i),c=st(i),h=ut(l),d=st(l),g=ut(o),p=st(o),m=ut(u),y=st(u),x=ut(a),D=st(a),U={a:X,A:R,b:Me,B:T,c:null,d:Bn,e:Bn,f:Hl,g:Bl,G:jl,H:El,I:Al,j:Fl,L:Fr,m:Ll,M:Yl,p:Y,q:ee,Q:Zn,s:Xn,S:Ol,u:Il,U:Wl,V:Rl,w:ql,W:Pl,x:null,X:null,y:Vl,Y:zl,Z:Zl,"%":jn},L={a:he,A:ke,b:Ie,B:W,c:null,d:zn,e:zn,f:Jl,g:ao,G:so,H:Xl,I:Ql,j:Gl,L:Lr,m:Kl,M:$l,p:Q,q:xe,Q:Zn,s:Xn,S:eo,u:to,U:no,V:ro,w:io,W:lo,x:null,X:null,y:oo,Y:uo,Z:fo,"%":jn},K={a:de,A:ve,b:Ne,B:ye,c:we,d:Pn,e:Pn,f:Dl,g:qn,G:Rn,H:Vn,I:Vn,j:kl,L:Cl,m:Ml,M:xl,p:ce,q:bl,Q:Sl,s:Nl,S:Tl,u:_l,U:pl,V:vl,w:ml,W:yl,x:Ee,X:k,y:qn,Y:Rn,Z:wl,"%":Ul};U.x=S(n,U),U.X=S(r,U),U.c=S(t,U),L.x=S(n,L),L.X=S(r,L),L.c=S(t,L);function S(b,N){return function(A){var _=[],re=-1,F=0,ie=b.length,ae,me,$;for(A instanceof Date||(A=new Date(+A));++re<ie;)b.charCodeAt(re)===37&&(_.push(b.slice(F,re)),(me=Wn[ae=b.charAt(++re)])!=null?ae=b.charAt(++re):me=ae==="e"?" ":"0",($=N[ae])&&(ae=$(A,me)),_.push(ae),F=re+1);return _.push(b.slice(F,re)),_.join("")}}function Z(b,N){return function(A){var _=at(1900,void 0,1),re=fe(_,b,A+="",0),F,ie;if(re!=A.length)return null;if("Q"in _)return new Date(_.Q);if("s"in _)return new Date(_.s*1e3+("L"in _?_.L:0));if(N&&!("Z"in _)&&(_.Z=0),"p"in _&&(_.H=_.H%12+_.p*12),_.m===void 0&&(_.m="q"in _?_.q:0),"V"in _){if(_.V<1||_.V>53)return null;"w"in _||(_.w=1),"Z"in _?(F=qt(at(_.y,0,1)),ie=F.getUTCDay(),F=ie>4||ie===0?Et.ceil(F):Et(F),F=fn.offset(F,(_.V-1)*7),_.y=F.getUTCFullYear(),_.m=F.getUTCMonth(),_.d=F.getUTCDate()+(_.w+6)%7):(F=Rt(at(_.y,0,1)),ie=F.getDay(),F=ie>4||ie===0?Nt.ceil(F):Nt(F),F=_t.offset(F,(_.V-1)*7),_.y=F.getFullYear(),_.m=F.getMonth(),_.d=F.getDate()+(_.w+6)%7)}else("W"in _||"U"in _)&&("w"in _||(_.w="u"in _?_.u%7:"W"in _?1:0),ie="Z"in _?qt(at(_.y,0,1)).getUTCDay():Rt(at(_.y,0,1)).getDay(),_.m=0,_.d="W"in _?(_.w+6)%7+_.W*7-(ie+5)%7:_.w+_.U*7-(ie+6)%7);return"Z"in _?(_.H+=_.Z/100|0,_.M+=_.Z%100,qt(_)):Rt(_)}}function fe(b,N,A,_){for(var re=0,F=N.length,ie=A.length,ae,me;re<F;){if(_>=ie)return-1;if(ae=N.charCodeAt(re++),ae===37){if(ae=N.charAt(re++),me=K[ae in Wn?N.charAt(re++):ae],!me||(_=me(b,A,_))<0)return-1}else if(ae!=A.charCodeAt(_++))return-1}return _}function ce(b,N,A){var _=f.exec(N.slice(A));return _?(b.p=c.get(_[0].toLowerCase()),A+_[0].length):-1}function de(b,N,A){var _=g.exec(N.slice(A));return _?(b.w=p.get(_[0].toLowerCase()),A+_[0].length):-1}function ve(b,N,A){var _=h.exec(N.slice(A));return _?(b.w=d.get(_[0].toLowerCase()),A+_[0].length):-1}function Ne(b,N,A){var _=x.exec(N.slice(A));return _?(b.m=D.get(_[0].toLowerCase()),A+_[0].length):-1}function ye(b,N,A){var _=m.exec(N.slice(A));return _?(b.m=y.get(_[0].toLowerCase()),A+_[0].length):-1}function we(b,N,A){return fe(b,t,N,A)}function Ee(b,N,A){return fe(b,n,N,A)}function k(b,N,A){return fe(b,r,N,A)}function X(b){return o[b.getDay()]}function R(b){return l[b.getDay()]}function Me(b){return a[b.getMonth()]}function T(b){return u[b.getMonth()]}function Y(b){return i[+(b.getHours()>=12)]}function ee(b){return 1+~~(b.getMonth()/3)}function he(b){return o[b.getUTCDay()]}function ke(b){return l[b.getUTCDay()]}function Ie(b){return a[b.getUTCMonth()]}function W(b){return u[b.getUTCMonth()]}function Q(b){return i[+(b.getUTCHours()>=12)]}function xe(b){return 1+~~(b.getUTCMonth()/3)}return{format:function(b){var N=S(b+="",U);return N.toString=function(){return b},N},parse:function(b){var N=Z(b+="",!1);return N.toString=function(){return b},N},utcFormat:function(b){var N=S(b+="",L);return N.toString=function(){return b},N},utcParse:function(b){var N=Z(b+="",!0);return N.toString=function(){return b},N}}}var Wn={"-":"",_:" ",0:"0"},ne=/^\s*\d+/,hl=/^%/,gl=/[\\^$*+?|[\]().{}]/g;function I(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",l=i.length;return r+(l<n?new Array(n-l+1).join(t)+i:i)}function dl(e){return e.replace(gl,"\\$&")}function ut(e){return new RegExp("^(?:"+e.map(dl).join("|")+")","i")}function st(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function ml(e,t,n){var r=ne.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function _l(e,t,n){var r=ne.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function pl(e,t,n){var r=ne.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function vl(e,t,n){var r=ne.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function yl(e,t,n){var r=ne.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Rn(e,t,n){var r=ne.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function qn(e,t,n){var r=ne.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function wl(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function bl(e,t,n){var r=ne.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Ml(e,t,n){var r=ne.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Pn(e,t,n){var r=ne.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function kl(e,t,n){var r=ne.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Vn(e,t,n){var r=ne.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function xl(e,t,n){var r=ne.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Tl(e,t,n){var r=ne.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Cl(e,t,n){var r=ne.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Dl(e,t,n){var r=ne.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ul(e,t,n){var r=hl.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Sl(e,t,n){var r=ne.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Nl(e,t,n){var r=ne.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Bn(e,t){return I(e.getDate(),t,2)}function El(e,t){return I(e.getHours(),t,2)}function Al(e,t){return I(e.getHours()%12||12,t,2)}function Fl(e,t){return I(1+_t.count(Oe(e),e),t,3)}function Fr(e,t){return I(e.getMilliseconds(),t,3)}function Hl(e,t){return Fr(e,t)+"000"}function Ll(e,t){return I(e.getMonth()+1,t,2)}function Yl(e,t){return I(e.getMinutes(),t,2)}function Ol(e,t){return I(e.getSeconds(),t,2)}function Il(e){var t=e.getDay();return t===0?7:t}function Wl(e,t){return I(Ft.count(Oe(e)-1,e),t,2)}function Hr(e){var t=e.getDay();return t>=4||t===0?lt(e):lt.ceil(e)}function Rl(e,t){return e=Hr(e),I(lt.count(Oe(e),e)+(Oe(e).getDay()===4),t,2)}function ql(e){return e.getDay()}function Pl(e,t){return I(Nt.count(Oe(e)-1,e),t,2)}function Vl(e,t){return I(e.getFullYear()%100,t,2)}function Bl(e,t){return e=Hr(e),I(e.getFullYear()%100,t,2)}function zl(e,t){return I(e.getFullYear()%1e4,t,4)}function jl(e,t){var n=e.getDay();return e=n>=4||n===0?lt(e):lt.ceil(e),I(e.getFullYear()%1e4,t,4)}function Zl(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+I(t/60|0,"0",2)+I(t%60,"0",2)}function zn(e,t){return I(e.getUTCDate(),t,2)}function Xl(e,t){return I(e.getUTCHours(),t,2)}function Ql(e,t){return I(e.getUTCHours()%12||12,t,2)}function Gl(e,t){return I(1+fn.count(Ze(e),e),t,3)}function Lr(e,t){return I(e.getUTCMilliseconds(),t,3)}function Jl(e,t){return Lr(e,t)+"000"}function Kl(e,t){return I(e.getUTCMonth()+1,t,2)}function $l(e,t){return I(e.getUTCMinutes(),t,2)}function eo(e,t){return I(e.getUTCSeconds(),t,2)}function to(e){var t=e.getUTCDay();return t===0?7:t}function no(e,t){return I(Ar.count(Ze(e)-1,e),t,2)}function Yr(e){var t=e.getUTCDay();return t>=4||t===0?ot(e):ot.ceil(e)}function ro(e,t){return e=Yr(e),I(ot.count(Ze(e),e)+(Ze(e).getUTCDay()===4),t,2)}function io(e){return e.getUTCDay()}function lo(e,t){return I(Et.count(Ze(e)-1,e),t,2)}function oo(e,t){return I(e.getUTCFullYear()%100,t,2)}function ao(e,t){return e=Yr(e),I(e.getUTCFullYear()%100,t,2)}function uo(e,t){return I(e.getUTCFullYear()%1e4,t,4)}function so(e,t){var n=e.getUTCDay();return e=n>=4||n===0?ot(e):ot.ceil(e),I(e.getUTCFullYear()%1e4,t,4)}function fo(){return"+0000"}function jn(){return"%"}function Zn(e){return+e}function Xn(e){return Math.floor(+e/1e3)}var $e,Or,Ir;co({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function co(e){return $e=cl(e),Or=$e.format,Ir=$e.parse,$e.utcFormat,$e.utcParse,$e}function ho(e){return new Date(e)}function go(e){return e instanceof Date?+e:+new Date(+e)}function Wr(e,t,n,r,i,l,o,u,a,f){var c=Xi(),h=c.invert,d=c.domain,g=f(".%L"),p=f(":%S"),m=f("%I:%M"),y=f("%I %p"),x=f("%a %d"),D=f("%b %d"),U=f("%B"),L=f("%Y");function K(S){return(a(S)<S?g:u(S)<S?p:o(S)<S?m:l(S)<S?y:r(S)<S?i(S)<S?x:D:n(S)<S?U:L)(S)}return c.invert=function(S){return new Date(h(S))},c.domain=function(S){return arguments.length?d(Array.from(S,go)):d().map(ho)},c.ticks=function(S){var Z=d();return e(Z[0],Z[Z.length-1],S??10)},c.tickFormat=function(S,Z){return Z==null?K:f(Z)},c.nice=function(S){var Z=d();return(!S||typeof S.range!="function")&&(S=t(Z[0],Z[Z.length-1],S??10)),S?d(Qi(Z,S)):c},c.copy=function(){return ji(c,Wr(e,t,n,r,i,l,o,u,a,f))},c}function mo(){return Nr.apply(Wr(sl,fl,Oe,cn,Ft,_t,sn,un,nt,Or).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function et(e){return function(){return e}}function _o(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Ri(t)}function po(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Rr(e){this._context=e}Rr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function vo(e){return new Rr(e)}function yo(e){return e[0]}function wo(e){return e[1]}function Qn(e,t){var n=et(!0),r=null,i=vo,l=null,o=_o(u);e=typeof e=="function"?e:e===void 0?yo:et(e),t=typeof t=="function"?t:t===void 0?wo:et(t);function u(a){var f,c=(a=po(a)).length,h,d=!1,g;for(r==null&&(l=i(g=o())),f=0;f<=c;++f)!(f<c&&n(h=a[f],f,a))===d&&((d=!d)?l.lineStart():l.lineEnd()),d&&l.point(+e(h,f,a),+t(h,f,a));if(g)return l=null,g+""||null}return u.x=function(a){return arguments.length?(e=typeof a=="function"?a:et(+a),u):e},u.y=function(a){return arguments.length?(t=typeof a=="function"?a:et(+a),u):t},u.defined=function(a){return arguments.length?(n=typeof a=="function"?a:et(!!a),u):n},u.curve=function(a){return arguments.length?(i=a,r!=null&&(l=i(r)),u):i},u.context=function(a){return arguments.length?(a==null?r=l=null:l=i(r=a),u):r},u}function qr(e){this._context=e}qr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Gn(e),i=Gn(t),l=0,o=1;o<n;++l,++o)this._context.bezierCurveTo(r[0][l],i[0][l],r[1][l],i[1][l],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Gn(e){var t,n=e.length-1,r,i=new Array(n),l=new Array(n),o=new Array(n);for(i[0]=0,l[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,l[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,l[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/l[t-1],l[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/l[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/l[t];for(l[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)l[t]=2*e[t+1]-i[t+1];return[i,l]}function Jn(e){return new qr(e)}const bo=!0,Yo=Object.freeze(Object.defineProperty({__proto__:null,prerender:bo},Symbol.toStringTag,{value:"Module"}));function Kn(e,t,n){const r=e.slice();return r[29]=t[n],r}function $n(e,t,n){const r=e.slice();return r[32]=t[n],r}function er(e){let t,n,r,i;return{c(){t=q("div"),n=z("svg"),r=z("path"),this.h()},l(l){t=P(l,"DIV",{class:!0,title:!0});var o=E(t);n=j(o,"svg",{class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0});var u=E(n);r=j(u,"path",{d:!0,class:!0}),E(r).forEach(w),u.forEach(w),o.forEach(w),this.h()},h(){s(r,"d",Pr),s(r,"class","svelte-smcvhs"),s(n,"class","icon-clear svelte-smcvhs"),s(n,"xmlns","http://www.w3.org/2000/svg"),s(n,"width","18"),s(n,"height","18"),s(n,"viewBox","0 0 24 24"),s(t,"class","token-remove svelte-smcvhs"),s(t,"title",i="Remove "+e[32].name)},m(l,o){V(l,t,o),M(t,n),M(n,r)},p(l,o){o[0]&32&&i!==(i="Remove "+l[32].name)&&s(t,"title",i)},d(l){l&&w(t)}}}function tr(e){let t,n,r=e[32].name+"",i,l,o,u=!e[1]&&er(e);return{c(){t=q("div"),n=q("span"),i=G(r),l=ue(),u&&u.c(),this.h()},l(a){t=P(a,"DIV",{class:!0,"data-id":!0,style:!0});var f=E(t);n=P(f,"SPAN",{});var c=E(n);i=J(c,r),c.forEach(w),l=se(f),u&&u.l(f),f.forEach(w),this.h()},h(){s(t,"class","token svelte-smcvhs"),s(t,"data-id",o=e[32].value),ft(t,"background-color",e[11](e[32].value)),ft(t,"color",e[12](e[32].value))},m(a,f){V(a,t,f),M(t,n),M(n,i),M(t,l),u&&u.m(t,null)},p(a,f){f[0]&32&&r!==(r=a[32].name+"")&&je(i,r),a[1]?u&&(u.d(1),u=null):u?u.p(a,f):(u=er(a),u.c(),u.m(t,null)),f[0]&32&&o!==(o=a[32].value)&&s(t,"data-id",o),f[0]&32&&ft(t,"background-color",a[11](a[32].value)),f[0]&32&&ft(t,"color",a[12](a[32].value))},d(a){a&&w(t),u&&u.d()}}}function nr(e){let t,n,r,i,l,o,u,a,f,c;return{c(){t=q("input"),n=ue(),r=q("div"),i=z("svg"),l=z("path"),o=ue(),u=z("svg"),a=z("path"),this.h()},l(h){t=P(h,"INPUT",{id:!0,autocomplete:!0,placeholder:!0,class:!0}),n=se(h),r=P(h,"DIV",{class:!0,title:!0});var d=E(r);i=j(d,"svg",{class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0});var g=E(i);l=j(g,"path",{d:!0,class:!0}),E(l).forEach(w),g.forEach(w),d.forEach(w),o=se(h),u=j(h,"svg",{class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0});var p=E(u);a=j(p,"path",{d:!0,class:!0}),E(a).forEach(w),p.forEach(w),this.h()},h(){s(t,"id",e[0]),s(t,"autocomplete","off"),s(t,"placeholder",e[2]),s(t,"class","svelte-smcvhs"),s(l,"d",Pr),s(l,"class","svelte-smcvhs"),s(i,"class","icon-clear svelte-smcvhs"),s(i,"xmlns","http://www.w3.org/2000/svg"),s(i,"width","18"),s(i,"height","18"),s(i,"viewBox","0 0 24 24"),s(r,"class","remove-all svelte-smcvhs"),s(r,"title","Remove All"),De(r,"hidden",!Object.keys(e[5]).length),s(a,"d","M5 8l4 4 4-4z"),s(a,"class","svelte-smcvhs"),s(u,"class","dropdown-arrow svelte-smcvhs"),s(u,"xmlns","http://www.w3.org/2000/svg"),s(u,"width","18"),s(u,"height","18"),s(u,"viewBox","0 0 18 18")},m(h,d){V(h,t,d),bn(t,e[3]),e[22](t),V(h,n,d),V(h,r,d),M(r,i),M(i,l),V(h,o,d),V(h,u,d),M(u,a),f||(c=[Be(t,"input",e[21]),Be(t,"keyup",e[10]),Be(t,"blur",e[13])],f=!0)},p(h,d){d[0]&1&&s(t,"id",h[0]),d[0]&4&&s(t,"placeholder",h[2]),d[0]&8&&t.value!==h[3]&&bn(t,h[3]),d[0]&32&&De(r,"hidden",!Object.keys(h[5]).length)},d(h){h&&w(t),e[22](null),h&&w(n),h&&w(r),h&&w(o),h&&w(u),f=!1,wr(c)}}}function rr(e){let t,n,r,i=e[6],l=[];for(let o=0;o<i.length;o+=1)l[o]=ir(Kn(e,i,o));return{c(){t=q("ul");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){t=P(o,"UL",{class:!0});var u=E(t);for(let a=0;a<l.length;a+=1)l[a].l(u);u.forEach(w),this.h()},h(){s(t,"class","options svelte-smcvhs")},m(o,u){V(o,t,u);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(t,null);n||(r=Be(t,"mousedown",Qr(e[15])),n=!0)},p(o,u){if(u[0]&112){i=o[6];let a;for(a=0;a<i.length;a+=1){const f=Kn(o,i,a);l[a]?l[a].p(f,u):(l[a]=ir(f),l[a].c(),l[a].m(t,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=i.length}},d(o){o&&w(t),Pe(l,o),n=!1,r()}}}function ir(e){let t,n=e[29].name+"",r,i;return{c(){t=q("li"),r=G(n),this.h()},l(l){t=P(l,"LI",{"data-value":!0,class:!0});var o=E(t);r=J(o,n),o.forEach(w),this.h()},h(){s(t,"data-value",i=e[29].value),s(t,"class","svelte-smcvhs"),De(t,"selected",e[5][e[29].value]),De(t,"active",e[4]===e[29])},m(l,o){V(l,t,o),M(t,r)},p(l,o){o[0]&64&&n!==(n=l[29].name+"")&&je(r,n),o[0]&64&&i!==(i=l[29].value)&&s(t,"data-value",i),o[0]&96&&De(t,"selected",l[5][l[29].value]),o[0]&80&&De(t,"active",l[4]===l[29])},d(l){l&&w(t)}}}function Mo(e){let t,n,r,i,l,o,u,a,f,c,h=Object.values(e[5]),d=[];for(let x=0;x<h.length;x+=1)d[x]=tr($n(e,h,x));let g=!e[1]&&nr(e);const p=e[20].default,m=zr(p,e,e[19],null);let y=e[8]&&rr(e);return{c(){t=q("div"),n=q("div");for(let x=0;x<d.length;x+=1)d[x].c();r=ue(),i=q("div"),g&&g.c(),l=ue(),o=q("select"),m&&m.c(),u=ue(),y&&y.c(),this.h()},l(x){t=P(x,"DIV",{class:!0});var D=E(t);n=P(D,"DIV",{class:!0});var U=E(n);for(let S=0;S<d.length;S+=1)d[S].l(U);r=se(U),i=P(U,"DIV",{class:!0});var L=E(i);g&&g.l(L),L.forEach(w),U.forEach(w),l=se(D),o=P(D,"SELECT",{type:!0,class:!0});var K=E(o);m&&m.l(K),K.forEach(w),u=se(D),y&&y.l(D),D.forEach(w),this.h()},h(){s(i,"class","actions svelte-smcvhs"),s(n,"class","tokens svelte-smcvhs"),De(n,"showOptions",e[8]),s(o,"type","multiple"),s(o,"class","hidden svelte-smcvhs"),s(t,"class","multiselect svelte-smcvhs"),De(t,"readonly",e[1])},m(x,D){V(x,t,D),M(t,n);for(let U=0;U<d.length;U+=1)d[U]&&d[U].m(n,null);M(n,r),M(n,i),g&&g.m(i,null),M(t,l),M(t,o),m&&m.m(o,null),e[23](o),M(t,u),y&&y.m(t,null),a=!0,f||(c=Be(n,"click",e[14]),f=!0)},p(x,D){if(D[0]&6178){h=Object.values(x[5]);let U;for(U=0;U<h.length;U+=1){const L=$n(x,h,U);d[U]?d[U].p(L,D):(d[U]=tr(L),d[U].c(),d[U].m(n,r))}for(;U<d.length;U+=1)d[U].d(1);d.length=h.length}x[1]?g&&(g.d(1),g=null):g?g.p(x,D):(g=nr(x),g.c(),g.m(i,null)),(!a||D[0]&256)&&De(n,"showOptions",x[8]),m&&m.p&&(!a||D[0]&524288)&&jr(m,p,x,x[19],a?Xr(p,x[19],D,null):Zr(x[19]),null),x[8]?y?y.p(x,D):(y=rr(x),y.c(),y.m(t,null)):y&&(y.d(1),y=null),(!a||D[0]&2)&&De(t,"readonly",x[1])},i(x){a||(Te(m,x),a=!0)},o(x){Fe(m,x),a=!1},d(x){x&&w(t),Pe(d,x),g&&g.d(),m&&m.d(x),e[23](null),y&&y.d(),f=!1,c()}}}const Pr="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z";function ko(e,t,n){let r,i;Pt(e,kr,k=>n(24,i=k));let{$$slots:l={},$$scope:o}=t,{id:u=""}=t,{value:a=[]}=t,{readonly:f=!1}=t,{placeholder:c=" Select cities..."}=t,h,d,g=[],p,m=!1,y={},x=!0,D;const U=i;tn(()=>{D.querySelectorAll("option").forEach(k=>{k.selected&&!a.includes(k.value)&&n(16,a=[...a,k.value]),n(17,g=[...g,{value:k.value,name:k.textContent}])}),a&&n(5,y=g.reduce((k,X)=>a.includes(X.value)?{...k,[X.value]:X}:k,{})),n(18,x=!1)});function L(k){f||n(5,y[k.value]=k,y)}function K(k){if(!f){const{[k]:X,...R}=y;n(5,y=R)}}function S(k){f||(typeof k=="boolean"?(n(8,m=k),k&&h.focus()):n(8,m=!m),m||n(4,p=void 0))}function Z(k){if(k.keyCode===13&&(Object.keys(y).includes(p.value)?K(p.value):L(p),n(3,d="")),[38,40].includes(k.keyCode)){const X=k.keyCode===38?-1:1,R=r.indexOf(p)+X;n(4,p=R<0?r[r.length-1]:R===r.length?r[0]:r[R])}}function fe(k){return U.find(X=>X.name===ct.filter(R=>R.display_title===k)[0].region).colour}function ce(k){return U.find(X=>X.name===ct.filter(R=>R.display_title===k)[0].region).text}function de(k){S(!1)}function ve(k){k.target.closest(".token-remove")?(k.stopPropagation(),K(k.target.closest(".token").dataset.id)):k.target.closest(".remove-all")?(n(5,y=[]),n(3,d="")):S(!0)}function Ne(k){const X=k.target.dataset.value;y[X]?K(X):(L(g.filter(R=>R.value===X)[0]),h.focus())}function ye(){d=this.value,n(3,d)}function we(k){Mn[k?"unshift":"push"](()=>{h=k,n(7,h)})}function Ee(k){Mn[k?"unshift":"push"](()=>{D=k,n(9,D)})}return e.$$set=k=>{"id"in k&&n(0,u=k.id),"value"in k&&n(16,a=k.value),"readonly"in k&&n(1,f=k.readonly),"placeholder"in k&&n(2,c=k.placeholder),"$$scope"in k&&n(19,o=k.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&262176&&(x||n(16,a=Object.values(y).map(k=>k.value))),e.$$.dirty[0]&131080&&n(6,r=g.filter(k=>d?k.name.toLowerCase().includes(d.toLowerCase()):k)),e.$$.dirty[0]&88&&(p&&!r.includes(p)||!p&&d)&&n(4,p=r[0]),e.$$.dirty[0]&65536&&xr.set(a)},[u,f,c,d,p,y,r,h,m,D,Z,fe,ce,de,ve,Ne,a,g,x,o,l,ye,we,Ee]}class xo extends Kt{constructor(t){super(),$t(this,t,ko,Mo,en,{id:0,value:16,readonly:1,placeholder:2},null,[-1,-1])}}function lr(e){let t,n;return{c(){t=z("text"),n=G(e[7]),this.h()},l(r){t=j(r,"text",{x:!0,y:!0,"alignment-baseline":!0,"font-size":!0,fill:!0});var i=E(t);n=J(i,e[7]),i.forEach(w),this.h()},h(){s(t,"x",it+3),s(t,"y",Ae),s(t,"alignment-baseline","middle"),s(t,"font-size","14"),s(t,"fill",e[5])},m(r,i){V(r,t,i),M(t,n)},p(r,i){i&128&&je(n,r[7]),i&32&&s(t,"fill",r[5])},d(r){r&&w(t)}}}function To(e){let t,n,r,i,l,o,u,a,f,c=e[3]!==void 0?": "+e[3].toLocaleString():"",h,d,g,p=e[7]!==void 0&&lr(e);return{c(){t=z("svg"),n=z("rect"),p&&p.c(),i=z("g"),l=z("line"),a=z("text"),f=G(e[2]),h=G(c),this.h()},l(m){t=j(m,"svg",{x:!0,y:!0,width:!0,height:!0,id:!0});var y=E(t);n=j(y,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,opacity:!0}),E(n).forEach(w),p&&p.l(y),i=j(y,"g",{});var x=E(i);l=j(x,"line",{x1:!0,x2:!0,y1:!0,y2:!0}),E(l).forEach(w),a=j(x,"text",{x:!0,y:!0,"alignment-baseline":!0,"font-size":!0,fill:!0,class:!0});var D=E(a);f=J(D,e[2]),h=J(D,c),D.forEach(w),x.forEach(w),y.forEach(w),this.h()},h(){s(n,"x","1"),s(n,"y","1"),s(n,"width",e[8]),s(n,"height",r=(e[2].length+1+(e[7]!==void 0?1:0))*Ae),s(n,"fill",e[4]),s(n,"opacity",e[6]),s(l,"x1",it),s(l,"x2",it+At),s(l,"y1",o=(1+(e[7]!==void 0?1:0))*Ae-1),s(l,"y2",u=(1+(e[7]!==void 0?1:0))*Ae-1),s(a,"x",it+At+Gt),s(a,"y",d=(1+(e[7]!==void 0?1:0))*Ae),s(a,"alignment-baseline","middle"),s(a,"font-size","14"),s(a,"fill",e[5]),s(a,"class","legend-labels"),s(t,"x",e[0]),s(t,"y",e[1]),s(t,"width",g=e[8]+2),s(t,"height","25"),s(t,"id",Vr)},m(m,y){V(m,t,y),M(t,n),p&&p.m(t,null),M(t,i),M(i,l),M(i,a),M(a,f),M(a,h)},p(m,[y]){y&256&&s(n,"width",m[8]),y&132&&r!==(r=(m[2].length+1+(m[7]!==void 0?1:0))*Ae)&&s(n,"height",r),y&16&&s(n,"fill",m[4]),y&64&&s(n,"opacity",m[6]),m[7]!==void 0?p?p.p(m,y):(p=lr(m),p.c(),p.m(t,i)):p&&(p.d(1),p=null),y&128&&o!==(o=(1+(m[7]!==void 0?1:0))*Ae-1)&&s(l,"y1",o),y&128&&u!==(u=(1+(m[7]!==void 0?1:0))*Ae-1)&&s(l,"y2",u),y&4&&je(f,m[2]),y&8&&c!==(c=m[3]!==void 0?": "+m[3].toLocaleString():"")&&je(h,c),y&128&&d!==(d=(1+(m[7]!==void 0?1:0))*Ae)&&s(a,"y",d),y&32&&s(a,"fill",m[5]),y&1&&s(t,"x",m[0]),y&2&&s(t,"y",m[1]),y&256&&g!==(g=m[8]+2)&&s(t,"width",g)},i:Vt,o:Vt,d(m){m&&w(t),p&&p.d()}}}const Ae=18,it=5,or=5,At=10,Gt=3,Vr="svg-legend";function Co(e,t,n){let{x:r}=t,{y:i}=t,{labels:l}=t,{values:o}=t,{width:u=150}=t,{backgroundColor:a="white"}=t,{textColor:f="black"}=t,{opacity:c=.89}=t,{title:h}=t,{adaptTexts:d=!0}=t;const g=u-it-At-Gt-or;let p=u;return tn(async()=>{const m=document.getElementById(Vr).getElementsByClassName("legend-labels"),x=[...Array(m.length).keys()].map(D=>({id:D,width:m[D].getBoundingClientRect().width})).filter(D=>D.width>g);if(x.length!==0)if(d)x.map(D=>{const U=m[D.id].textContent,L=Math.floor(g*U.length/D.width)-3;m[D.id].textContent=U.slice(0,L).trim()+"..."});else{const D=Math.max(...x.map(U=>U.width));n(8,p=it+At+Gt+D+or)}}),e.$$set=m=>{"x"in m&&n(0,r=m.x),"y"in m&&n(1,i=m.y),"labels"in m&&n(2,l=m.labels),"values"in m&&n(3,o=m.values),"width"in m&&n(9,u=m.width),"backgroundColor"in m&&n(4,a=m.backgroundColor),"textColor"in m&&n(5,f=m.textColor),"opacity"in m&&n(6,c=m.opacity),"title"in m&&n(7,h=m.title),"adaptTexts"in m&&n(10,d=m.adaptTexts)},[r,i,l,o,a,f,c,h,p,u,d]}class ar extends Kt{constructor(t){super(),$t(this,t,Co,To,en,{x:0,y:1,labels:2,values:3,width:9,backgroundColor:4,textColor:5,opacity:6,title:7,adaptTexts:10})}}function ur(e,t,n){const r=e.slice();return r[34]=t[n],r[36]=n,r}function sr(e,t,n){const r=e.slice();return r[34]=t[n],r[36]=n,r}function fr(e,t,n){const r=e.slice();return r[38]=t[n],r[36]=n,r}function cr(e,t,n){const r=e.slice();return r[40]=t[n],r[36]=n,r}function hr(e,t,n){const r=e.slice();return r[42]=t[n],r}function gr(e){let t,n=e[42].display_title+"",r;return{c(){t=q("option"),r=G(n),this.h()},l(i){t=P(i,"OPTION",{});var l=E(t);r=J(l,n),l.forEach(w),this.h()},h(){t.__value=e[42].display_title,t.value=t.__value},m(i,l){V(i,t,l),M(t,r)},p:Vt,d(i){i&&w(t)}}}function Do(e){let t,n=ct,r=[];for(let i=0;i<n.length;i+=1)r[i]=gr(hr(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=Ue()},l(i){for(let l=0;l<r.length;l+=1)r[l].l(i);t=Ue()},m(i,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(i,l);V(i,t,l)},p(i,l){if(l&0){n=ct;let o;for(o=0;o<n.length;o+=1){const u=hr(i,n,o);r[o]?r[o].p(u,l):(r[o]=gr(u),r[o].c(),r[o].m(t.parentNode,t))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(i){Pe(r,i),i&&w(t)}}}function dr(e){let t,n,r,i,l,o=(100*e[40]).toFixed(0)+"",u,a,f,c,h,d;return{c(){t=z("line"),l=z("text"),u=G(o),a=G("%"),c=z("line"),this.h()},l(g){t=j(g,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),E(t).forEach(w),l=j(g,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var p=E(l);u=J(p,o),a=J(p,"%"),p.forEach(w),c=j(g,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),E(c).forEach(w),this.h()},h(){s(t,"class","grid svelte-tqmeai"),s(t,"x1",40),s(t,"y1",n=e[13].bottom+e[36]*e[10]),s(t,"x2",r=e[2]-e[13].right),s(t,"y2",i=e[13].bottom+e[36]*e[10]),s(l,"class","axis-label svelte-tqmeai"),s(l,"x",e[13].left+25),s(l,"y",f=e[13].bottom+e[36]*e[10]),s(l,"text-anchor","end"),s(c,"class","grid-white svelte-tqmeai"),s(c,"x1","37"),s(c,"y1",h=e[13].bottom+e[36]*e[10]),s(c,"x2","45"),s(c,"y2",d=e[13].bottom+e[36]*e[10])},m(g,p){V(g,t,p),V(g,l,p),M(l,u),M(l,a),V(g,c,p)},p(g,p){p[0]&1024&&n!==(n=g[13].bottom+g[36]*g[10])&&s(t,"y1",n),p[0]&4&&r!==(r=g[2]-g[13].right)&&s(t,"x2",r),p[0]&1024&&i!==(i=g[13].bottom+g[36]*g[10])&&s(t,"y2",i),p[0]&16&&o!==(o=(100*g[40]).toFixed(0)+"")&&je(u,o),p[0]&1024&&f!==(f=g[13].bottom+g[36]*g[10])&&s(l,"y",f),p[0]&1024&&h!==(h=g[13].bottom+g[36]*g[10])&&s(c,"y1",h),p[0]&1024&&d!==(d=g[13].bottom+g[36]*g[10])&&s(c,"y2",d)},d(g){g&&w(t),g&&w(l),g&&w(c)}}}function mr(e){let t,n=e[15](e[38])+"",r,i,l,o,u,a,f;return{c(){t=z("text"),r=G(n),o=z("line"),this.h()},l(c){t=j(c,"text",{style:!0,class:!0,x:!0,y:!0,"text-anchor":!0});var h=E(t);r=J(h,n),h.forEach(w),o=j(c,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),E(o).forEach(w),this.h()},h(){ft(t,"white-space","pre"),s(t,"class","axis-label svelte-tqmeai"),s(t,"x",i=e[5](e[38])),s(t,"y",l=e[3]+15),s(t,"text-anchor","end"),s(o,"class","grid-white svelte-tqmeai"),s(o,"x1",u=e[5](e[38])),s(o,"y1",e[3]),s(o,"x2",a=e[5](e[38])),s(o,"y2",f=e[3]-8)},m(c,h){V(c,t,h),M(t,r),V(c,o,h)},p(c,h){h[0]&128&&n!==(n=c[15](c[38])+"")&&je(r,n),h[0]&160&&i!==(i=c[5](c[38]))&&s(t,"x",i),h[0]&8&&l!==(l=c[3]+15)&&s(t,"y",l),h[0]&160&&u!==(u=c[5](c[38]))&&s(o,"x1",u),h[0]&8&&s(o,"y1",c[3]),h[0]&160&&a!==(a=c[5](c[38]))&&s(o,"x2",a),h[0]&8&&f!==(f=c[3]-8)&&s(o,"y2",f)},d(c){c&&w(t),c&&w(o)}}}function Uo(e){let t,n,r;return{c(){t=z("path"),this.h()},l(i){t=j(i,"path",{d:!0,"stroke-width":!0,stroke:!0,fill:!0}),E(t).forEach(w),this.h()},h(){s(t,"d",n=Qn().x(e[22]).y(e[23]).curve(Jn)(e[34].flat())),s(t,"stroke-width","2"),s(t,"stroke",r=e[6][e[34][0].display_title].colour),s(t,"fill","transparent")},m(i,l){V(i,t,l)},p(i,l){l[0]&554&&n!==(n=Qn().x(i[22]).y(i[23]).curve(Jn)(i[34].flat()))&&s(t,"d",n),l[0]&66&&r!==(r=i[6][i[34][0].display_title].colour)&&s(t,"stroke",r)},d(i){i&&w(t)}}}function _r(e){let t,n=e[12]&&Uo(e);return{c(){n&&n.c(),t=Ue()},l(r){n&&n.l(r),t=Ue()},m(r,i){n&&n.m(r,i),V(r,t,i)},p(r,i){r[12]&&n.p(r,i)},d(r){n&&n.d(r),r&&w(t)}}}function pr(e){let t,n,r,i,l,o,u,a,f;function c(...g){return e[24](e[34],...g)}function h(...g){return e[25](e[34],...g)}function d(...g){return e[26](e[34],...g)}return u=new ar({props:{labels:e[34][0].display_title,values:Math.floor(e[34].find(h).rolling_avg*100)+"%",x:e[8].x+180>e[2]?e[8].x-195:e[8].x+15,y:e[14](e[9],e[3],e[34][0].display_title,e[8].x,e[34].find(d).rolling_avg),backgroundColor:e[6][e[34][0].display_title].colour,textColor:e[6][e[34][0].display_title].text,title:void 0,width:"180",adaptTexts:!1}}),a=new ar({props:{labels:"Week of",values:e[18](e[0],e[8].x).toLocaleString(void 0,e[11]),title:void 0,x:e[8].x+180>e[2]?e[8].x-205:e[8].x+5,y:0,backgroundColor:"#191919",opacity:"0.5",textColor:"white",width:"200",adaptTexts:!1}}),{c(){t=z("g"),n=z("line"),r=z("circle"),Mt(u.$$.fragment),Mt(a.$$.fragment),this.h()},l(g){t=j(g,"g",{transform:!0});var p=E(t);n=j(p,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),E(n).forEach(w),r=j(p,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),E(r).forEach(w),p.forEach(w),kt(u.$$.fragment,g),kt(a.$$.fragment,g),this.h()},h(){s(n,"x1",0),s(n,"y1","10"),s(n,"x2",0),s(n,"y2",e[3]),s(n,"stroke","grey"),s(n,"stroke-width","1"),s(r,"cx",0),s(r,"cy",i=Jt(e[9],e[3],e[34].find(c).rolling_avg)+e[13].bottom),s(r,"r","5"),s(r,"fill",l=e[6][e[34][0].display_title].colour),s(t,"transform",o="translate("+e[5](e[18](e[34],e[8].x))+" 0)")},m(g,p){V(g,t,p),M(t,n),M(t,r),xt(u,g,p),xt(a,g,p),f=!0},p(g,p){e=g,(!f||p[0]&8)&&s(n,"y2",e[3]),(!f||p[0]&778&&i!==(i=Jt(e[9],e[3],e[34].find(c).rolling_avg)+e[13].bottom))&&s(r,"cy",i),(!f||p[0]&66&&l!==(l=e[6][e[34][0].display_title].colour))&&s(r,"fill",l),(!f||p[0]&290&&o!==(o="translate("+e[5](e[18](e[34],e[8].x))+" 0)"))&&s(t,"transform",o);const m={};p[0]&2&&(m.labels=e[34][0].display_title),p[0]&258&&(m.values=Math.floor(e[34].find(h).rolling_avg*100)+"%"),p[0]&260&&(m.x=e[8].x+180>e[2]?e[8].x-195:e[8].x+15),p[0]&778&&(m.y=e[14](e[9],e[3],e[34][0].display_title,e[8].x,e[34].find(d).rolling_avg)),p[0]&66&&(m.backgroundColor=e[6][e[34][0].display_title].colour),p[0]&66&&(m.textColor=e[6][e[34][0].display_title].text),u.$set(m);const y={};p[0]&257&&(y.values=e[18](e[0],e[8].x).toLocaleString(void 0,e[11])),p[0]&260&&(y.x=e[8].x+180>e[2]?e[8].x-205:e[8].x+5),a.$set(y)},i(g){f||(Te(u.$$.fragment,g),Te(a.$$.fragment,g),f=!0)},o(g){Fe(u.$$.fragment,g),Fe(a.$$.fragment,g),f=!1},d(g){g&&w(t),Tt(u,g),Tt(a,g)}}}function vr(e){let t,n,r=e[8].x!==null&&pr(e);return{c(){r&&r.c(),t=Ue()},l(i){r&&r.l(i),t=Ue()},m(i,l){r&&r.m(i,l),V(i,t,l),n=!0},p(i,l){i[8].x!==null?r?(r.p(i,l),l[0]&256&&Te(r,1)):(r=pr(i),r.c(),Te(r,1),r.m(t.parentNode,t)):r&&(Mr(),Fe(r,1,1,()=>{r=null}),br())},i(i){n||(Te(r),n=!0)},o(i){Fe(r),n=!1},d(i){r&&r.d(i),i&&w(t)}}}function So(e){let t,n,r,i,l,o,u,a,f,c,h,d,g,p,m,y,x,D,U,L,K,S,Z,fe,ce,de,ve,Ne,ye,we,Ee,k,X,R,Me,T,Y,ee,he,ke,Ie,W,Q,xe,b,N,A,_,re,F,ie,ae;t=new Kr({}),ke=new xo({props:{id:"options-cities",value:["Toronto, ON","Chicago, IL","Detroit, MI","Baltimore, MD","New York, NY","Los Angeles, CA","San Francisco, CA","Atlanta, GA","Miami, FL","Austin, TX","Las Vegas, NV"],$$slots:{default:[Do]},$$scope:{ctx:e}}});let me=e[4].reverse(),$=[];for(let v=0;v<me.length;v+=1)$[v]=dr(cr(e,me,v));let Ge=e[7],le=[];for(let v=0;v<Ge.length;v+=1)le[v]=mr(fr(e,Ge,v));let Je=e[1],oe=[];for(let v=0;v<Je.length;v+=1)oe[v]=_r(sr(e,Je,v));let We=e[1],B=[];for(let v=0;v<We.length;v+=1)B[v]=vr(ur(e,We,v));const Br=v=>Fe(B[v],1,1,()=>{B[v]=null});return{c(){Mt(t.$$.fragment),n=ue(),r=q("main"),i=q("div"),l=q("h3"),o=G("This is an archived version of our data, for our most recent rankings, using updated data sources and methodology, click "),u=q("a"),a=G("here"),f=ue(),c=q("h1"),h=G("Downtown Recovery Patterns"),d=ue(),g=q("p"),p=G("The recovery metrics on these charts are based on a sample of mobile phone data."),m=ue(),y=q("p"),x=G("They are computed by counting the number of unique mobile phones in a city's downtown area in the specified time period, and then dividing it by the number of unique visitors during the equivalent time period in 2019."),D=ue(),U=q("p"),L=G("Each data point on this chart is an 11-week rolling average, with the noted date as the end-point of its range."),K=ue(),S=q("p"),Z=G("A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels."),fe=ue(),ce=q("p"),de=G("For more information, read our "),ve=q("a"),Ne=G("Methodology"),ye=G(" page. Or click "),we=q("a"),Ee=G("here"),k=G(" to download the data shown on this chart."),X=ue(),R=q("div"),Me=q("div"),T=q("div"),Y=q("p"),ee=G("Select City:"),he=ue(),Mt(ke.$$.fragment),Ie=ue(),W=z("svg");for(let v=0;v<$.length;v+=1)$[v].c();Q=z("line"),b=z("line");for(let v=0;v<le.length;v+=1)le[v].c();N=Ue();for(let v=0;v<oe.length;v+=1)oe[v].c();A=Ue();for(let v=0;v<B.length;v+=1)B[v].c();this.h()},l(v){kt(t.$$.fragment,v),n=se(v),r=P(v,"MAIN",{class:!0});var O=E(r);i=P(O,"DIV",{class:!0});var H=E(i);l=P(H,"H3",{});var C=E(l);o=J(C,"This is an archived version of our data, for our most recent rankings, using updated data sources and methodology, click "),u=P(C,"A",{href:!0});var _e=E(u);a=J(_e,"here"),_e.forEach(w),C.forEach(w),f=se(H),c=P(H,"H1",{});var hn=E(c);h=J(hn,"Downtown Recovery Patterns"),hn.forEach(w),d=se(H),g=P(H,"P",{});var gn=E(g);p=J(gn,"The recovery metrics on these charts are based on a sample of mobile phone data."),gn.forEach(w),m=se(H),y=P(H,"P",{});var dn=E(y);x=J(dn,"They are computed by counting the number of unique mobile phones in a city's downtown area in the specified time period, and then dividing it by the number of unique visitors during the equivalent time period in 2019."),dn.forEach(w),D=se(H),U=P(H,"P",{});var mn=E(U);L=J(mn,"Each data point on this chart is an 11-week rolling average, with the noted date as the end-point of its range."),mn.forEach(w),K=se(H),S=P(H,"P",{});var _n=E(S);Z=J(_n,"A recovery metric greater than 100% means that for the selected inputs, the mobile device activity increased relative to the comparison period. A value less than 100% means the opposite, that the city's downtown has not recovered to pre-COVID activity levels."),_n.forEach(w),fe=se(H),ce=P(H,"P",{});var Ke=E(ce);de=J(Ke,"For more information, read our "),ve=P(Ke,"A",{href:!0});var pn=E(ve);Ne=J(pn,"Methodology"),pn.forEach(w),ye=J(Ke," page. Or click "),we=P(Ke,"A",{href:!0});var vn=E(we);Ee=J(vn,"here"),vn.forEach(w),k=J(Ke," to download the data shown on this chart."),Ke.forEach(w),H.forEach(w),X=se(O),R=P(O,"DIV",{id:!0,class:!0});var pt=E(R);Me=P(pt,"DIV",{id:!0,class:!0});var yn=E(Me);T=P(yn,"DIV",{id:!0,class:!0});var vt=E(T);Y=P(vt,"P",{});var wn=E(Y);ee=J(wn,"Select City:"),wn.forEach(w),he=se(vt),kt(ke.$$.fragment,vt),vt.forEach(w),yn.forEach(w),Ie=se(pt),W=j(pt,"svg",{height:!0,width:!0,id:!0,transform:!0,class:!0});var Re=E(W);for(let ge=0;ge<$.length;ge+=1)$[ge].l(Re);Q=j(Re,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),E(Q).forEach(w),b=j(Re,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),E(b).forEach(w);for(let ge=0;ge<le.length;ge+=1)le[ge].l(Re);N=Ue();for(let ge=0;ge<oe.length;ge+=1)oe[ge].l(Re);A=Ue();for(let ge=0;ge<B.length;ge+=1)B[ge].l(Re);Re.forEach(w),pt.forEach(w),O.forEach(w),this.h()},h(){s(u,"href","/charts/rankings"),s(ve,"href","/methodology"),s(we,"href","/pattern_data.csv"),s(i,"class","text"),s(T,"id","options-cities"),s(T,"class","svelte-tqmeai"),s(Me,"id","options"),s(Me,"class","svelte-tqmeai"),s(Q,"x1",e[13].left+40),s(Q,"x2",xe=e[2]-e[13].right),s(Q,"y1",e[3]),s(Q,"y2",e[3]),s(Q,"stroke","white"),s(Q,"stroke-width","1"),s(b,"x1",e[13].left+40),s(b,"x2",e[13].left+40),s(b,"y1",e[13].top),s(b,"y2",e[3]),s(b,"stroke","white"),s(b,"stroke-width","1"),s(W,"height",_=e[3]+40),s(W,"width",e[2]),s(W,"id","chart"),s(W,"transform","translate("+e[13].left+", "+e[13].top+")"),s(W,"class","svelte-tqmeai"),s(R,"id","chart-wrapper"),s(R,"class","svelte-tqmeai"),Gr(()=>e[27].call(R)),s(r,"class","svelte-tqmeai")},m(v,O){xt(t,v,O),V(v,n,O),V(v,r,O),M(r,i),M(i,l),M(l,o),M(l,u),M(u,a),M(i,f),M(i,c),M(c,h),M(i,d),M(i,g),M(g,p),M(i,m),M(i,y),M(y,x),M(i,D),M(i,U),M(U,L),M(i,K),M(i,S),M(S,Z),M(i,fe),M(i,ce),M(ce,de),M(ce,ve),M(ve,Ne),M(ce,ye),M(ce,we),M(we,Ee),M(ce,k),M(r,X),M(r,R),M(R,Me),M(Me,T),M(T,Y),M(Y,ee),M(T,he),xt(ke,T,null),M(R,Ie),M(R,W);for(let H=0;H<$.length;H+=1)$[H]&&$[H].m(W,null);M(W,Q),M(W,b);for(let H=0;H<le.length;H+=1)le[H]&&le[H].m(W,null);M(W,N);for(let H=0;H<oe.length;H+=1)oe[H]&&oe[H].m(W,null);M(W,A);for(let H=0;H<B.length;H+=1)B[H]&&B[H].m(W,null);re=Jr(R,e[27].bind(R)),F=!0,ie||(ae=[Be(W,"mousemove",e[16]),Be(W,"mouseleave",e[17])],ie=!0)},p(v,O){const H={};if(O[1]&16384&&(H.$$scope={dirty:O,ctx:v}),ke.$set(H),O[0]&9236){me=v[4].reverse();let C;for(C=0;C<me.length;C+=1){const _e=cr(v,me,C);$[C]?$[C].p(_e,O):($[C]=dr(_e),$[C].c(),$[C].m(W,Q))}for(;C<$.length;C+=1)$[C].d(1);$.length=me.length}if((!F||O[0]&4&&xe!==(xe=v[2]-v[13].right))&&s(Q,"x2",xe),(!F||O[0]&8)&&s(Q,"y1",v[3]),(!F||O[0]&8)&&s(Q,"y2",v[3]),(!F||O[0]&8)&&s(b,"y2",v[3]),O[0]&32936){Ge=v[7];let C;for(C=0;C<Ge.length;C+=1){const _e=fr(v,Ge,C);le[C]?le[C].p(_e,O):(le[C]=mr(_e),le[C].c(),le[C].m(W,N))}for(;C<le.length;C+=1)le[C].d(1);le.length=Ge.length}if(O[0]&12906){Je=v[1];let C;for(C=0;C<Je.length;C+=1){const _e=sr(v,Je,C);oe[C]?oe[C].p(_e,O):(oe[C]=_r(_e),oe[C].c(),oe[C].m(W,A))}for(;C<oe.length;C+=1)oe[C].d(1);oe.length=Je.length}if(O[0]&289647){We=v[1];let C;for(C=0;C<We.length;C+=1){const _e=ur(v,We,C);B[C]?(B[C].p(_e,O),Te(B[C],1)):(B[C]=vr(_e),B[C].c(),Te(B[C],1),B[C].m(W,null))}for(Mr(),C=We.length;C<B.length;C+=1)Br(C);br()}(!F||O[0]&8&&_!==(_=v[3]+40))&&s(W,"height",_),(!F||O[0]&4)&&s(W,"width",v[2])},i(v){if(!F){Te(t.$$.fragment,v),Te(ke.$$.fragment,v);for(let O=0;O<We.length;O+=1)Te(B[O]);F=!0}},o(v){Fe(t.$$.fragment,v),Fe(ke.$$.fragment,v),B=B.filter(Boolean);for(let O=0;O<B.length;O+=1)Fe(B[O]);F=!1},d(v){Tt(t,v),v&&w(n),v&&w(r),Tt(ke),Pe($,v),Pe(le,v),Pe(oe,v),Pe(B,v),re(),ie=!1,wr(ae)}}}function yr(e,t){let n=[];for(let r=0;r<=Math.ceil(e/t);r++)n.push(r*t);return n}function Jt(e,t,n){return t-t*n/(e[1]-e[0])}function No(e,t,n){let r,i,l,o;Pt(e,xr,T=>n(21,l=T)),Pt(e,kr,T=>n(29,o=T));let u=[],a=[],f={year:"numeric",month:"long",day:"numeric"},c=[],h=[];ct.forEach(T=>{o.forEach(Y=>{T.region===Y.name&&n(6,c[T.display_title]={colour:Y.colour,text:Y.text},c)})});const d=o,g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];async function p(){try{const Y=await(await fetch("../pattern_data.csv")).text();n(0,u=$r(Y).filter(ee=>!["Dallas, TX","Orlando, FL","Oklahoma City, OK"].includes(ee.display_title))),u.forEach(ee=>{ee.week=Ir("%Y-%m-%d")(ee.week),ee.week=new Date(ee.week)})}catch(T){console.error("Error loading CSV data:",T)}}tn(()=>{p()}),console.log(h);let m={top:10,bottom:40,left:10,right:30},y,x=640,D=1,U=[0,1],L,K;function S(T){return Ht(T.map(Y=>Y.week))}function Z(T,Y,ee,he,ke){a.length;let Ie=Ht(a.flat().filter(N=>L(N.week)>=he).map(N=>N.week)),W=a.flat().filter(N=>N.week<=Ie[0]&&L(N.week)>=he).sort((N,A)=>A.rolling_avg-N.rolling_avg);var Q=[];W.forEach(N=>Q.push(N));for(var xe=0;xe<Q.length;xe++)Q[xe].rank=30+(xe+1)*30;return Er().domain(Q.map(N=>N.display_title)).range(Q.map(N=>N.rank))(ee)}let fe;function ce(T){return g[T.getMonth()]+`
20`+T.getYear().toString().substring(T.getYear(),1)}let de={x:null,y:null};function ve(T){const Y=document.getElementById("chart");if(Y===null)return;const ee=Y.getBoundingClientRect(),he={x:T.clientX-ee.left,y:T.clientY-ee.top};n(8,de=he.x>m.left&&he.x<y-m.right&&he.y>m.top&&he.y<x-m.bottom?{x:he.x,y:he.y}:{x:null,y:null})}function Ne(){n(8,de={x:null,y:null})}function ye(T,Y){return T.filter(ee=>L(ee.week)>=Y)[0].week}const we=T=>L(T.week),Ee=T=>Jt(i,x,T.rolling_avg)+m.bottom,k=(T,Y)=>Y.week===ye(T,de.x),X=(T,Y)=>Y.week===ye(T,de.x),R=(T,Y)=>Y.week===ye(T,de.x);function Me(){y=this.offsetWidth,n(2,y)}return e.$$.update=()=>{e.$$.dirty[0]&2097153&&n(1,a=Array.from(si(u.filter(T=>T.metric==="downtown"&&l.includes(T.display_title)).sort((T,Y)=>T.week-Y.week),T=>T.display_title)).map(T=>T[1])),e.$$.dirty[0]&1&&(h=Ht(u.filter(T=>T.metric==="downtown").sort((T,Y)=>T.rolling_avg-Y.rolling_avg).map(T=>1*T.rolling_avg))),e.$$.dirty[0]&4&&n(3,x=y*.666),e.$$.dirty[0]&2&&n(19,D=a.length!==0?a.flat().sort((T,Y)=>Y.rolling_avg-T.rolling_avg)[0].rolling_avg:1),e.$$.dirty[0]&524288&&n(19,D=D<1?1:D),e.$$.dirty[0]&524288&&(D<2?n(4,U=yr(D,.2)):n(4,U=yr(D,.5))),e.$$.dirty[0]&24&&n(10,r=(x-m.bottom)/(U.length-1)),e.$$.dirty[0]&16&&n(9,i=[Math.min(...U),Math.max(...U)]),e.$$.dirty[0]&1&&console.log(u),e.$$.dirty[0]&5&&n(5,L=mo().domain(S(u)).range([m.left+40,y-m.right])),e.$$.dirty[0]&4&&n(20,fe=Math.floor(y/120)),e.$$.dirty[0]&1048576&&console.log(fe),e.$$.dirty[0]&1048608&&n(7,K=L.ticks(fe)),e.$$.dirty[0]&1&&console.log(S(u))},[u,a,y,x,U,L,c,K,de,i,r,f,d,m,Z,ce,ve,Ne,ye,D,fe,l,we,Ee,k,X,R,Me]}class Oo extends Kt{constructor(t){super(),$t(this,t,No,So,en,{},null,[-1,-1])}}export{Oo as component,Yo as universal};
